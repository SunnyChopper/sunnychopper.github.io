(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U_={exports:{}},mf={};var qO;function tZ(){if(qO)return mf;qO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:a}}return mf.Fragment=t,mf.jsx=n,mf.jsxs=n,mf}var VO;function nZ(){return VO||(VO=1,U_.exports=tZ()),U_.exports}var c=nZ(),F_={exports:{}},yt={};var GO;function rZ(){if(GO)return yt;GO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function k(F,Q,O){this.props=F,this.context=Q,this.refs=S,this.updater=O||w}k.prototype.isReactComponent={},k.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=k.prototype;function T(F,Q,O){this.props=F,this.context=Q,this.refs=S,this.updater=O||w}var P=T.prototype=new C;P.constructor=T,x(P,k.prototype),P.isPureReactComponent=!0;var D=Array.isArray;function R(){}var U={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function se(F,Q,O){var V=O.ref;return{$$typeof:e,type:F,key:Q,ref:V!==void 0?V:null,props:O}}function B(F,Q){return se(F.type,Q,F.props)}function ee(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function ie(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(O){return Q[O]})}var _e=/\/+/g;function G(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?ie(""+F.key):Q.toString(36)}function H(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(R,R):(F.status="pending",F.then(function(Q){F.status==="pending"&&(F.status="fulfilled",F.value=Q)},function(Q){F.status==="pending"&&(F.status="rejected",F.reason=Q)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function L(F,Q,O,V,he){var I=typeof F;(I==="undefined"||I==="boolean")&&(F=null);var N=!1;if(F===null)N=!0;else switch(I){case"bigint":case"string":case"number":N=!0;break;case"object":switch(F.$$typeof){case e:case t:N=!0;break;case f:return N=F._init,L(N(F._payload),Q,O,V,he)}}if(N)return he=he(F),N=V===""?"."+G(F,0):V,D(he)?(O="",N!=null&&(O=N.replace(_e,"$&/")+"/"),L(he,Q,O,"",function(re){return re})):he!=null&&(ee(he)&&(he=B(he,O+(he.key==null||F&&F.key===he.key?"":(""+he.key).replace(_e,"$&/")+"/")+N)),Q.push(he)),1;N=0;var ne=V===""?".":V+":";if(D(F))for(var K=0;K<F.length;K++)V=F[K],I=ne+G(V,K),N+=L(V,Q,O,I,he);else if(K=b(F),typeof K=="function")for(F=K.call(F),K=0;!(V=F.next()).done;)V=V.value,I=ne+G(V,K++),N+=L(V,Q,O,I,he);else if(I==="object"){if(typeof F.then=="function")return L(H(F),Q,O,V,he);throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return N}function Z(F,Q,O){if(F==null)return F;var V=[],he=0;return L(F,V,"","",function(I){return Q.call(O,I,he++)}),V}function W(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(O){(F._status===0||F._status===-1)&&(F._status=1,F._result=O)},function(O){(F._status===0||F._status===-1)&&(F._status=2,F._result=O)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var de=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},$={map:Z,forEach:function(F,Q,O){Z(F,function(){Q.apply(this,arguments)},O)},count:function(F){var Q=0;return Z(F,function(){Q++}),Q},toArray:function(F){return Z(F,function(Q){return Q})||[]},only:function(F){if(!ee(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return yt.Activity=m,yt.Children=$,yt.Component=k,yt.Fragment=n,yt.Profiler=s,yt.PureComponent=T,yt.StrictMode=r,yt.Suspense=u,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,yt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return U.H.useMemoCache(F)}},yt.cache=function(F){return function(){return F.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(F,Q,O){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var V=x({},F.props),he=F.key;if(Q!=null)for(I in Q.key!==void 0&&(he=""+Q.key),Q)!j.call(Q,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&Q.ref===void 0||(V[I]=Q[I]);var I=arguments.length-2;if(I===1)V.children=O;else if(1<I){for(var N=Array(I),ne=0;ne<I;ne++)N[ne]=arguments[ne+2];V.children=N}return se(F.type,he,V)},yt.createContext=function(F){return F={$$typeof:i,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},yt.createElement=function(F,Q,O){var V,he={},I=null;if(Q!=null)for(V in Q.key!==void 0&&(I=""+Q.key),Q)j.call(Q,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(he[V]=Q[V]);var N=arguments.length-2;if(N===1)he.children=O;else if(1<N){for(var ne=Array(N),K=0;K<N;K++)ne[K]=arguments[K+2];he.children=ne}if(F&&F.defaultProps)for(V in N=F.defaultProps,N)he[V]===void 0&&(he[V]=N[V]);return se(F,I,he)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(F){return{$$typeof:o,render:F}},yt.isValidElement=ee,yt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:W}},yt.memo=function(F,Q){return{$$typeof:h,type:F,compare:Q===void 0?null:Q}},yt.startTransition=function(F){var Q=U.T,O={};U.T=O;try{var V=F(),he=U.S;he!==null&&he(O,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(R,de)}catch(I){de(I)}finally{Q!==null&&O.types!==null&&(Q.types=O.types),U.T=Q}},yt.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},yt.use=function(F){return U.H.use(F)},yt.useActionState=function(F,Q,O){return U.H.useActionState(F,Q,O)},yt.useCallback=function(F,Q){return U.H.useCallback(F,Q)},yt.useContext=function(F){return U.H.useContext(F)},yt.useDebugValue=function(){},yt.useDeferredValue=function(F,Q){return U.H.useDeferredValue(F,Q)},yt.useEffect=function(F,Q){return U.H.useEffect(F,Q)},yt.useEffectEvent=function(F){return U.H.useEffectEvent(F)},yt.useId=function(){return U.H.useId()},yt.useImperativeHandle=function(F,Q,O){return U.H.useImperativeHandle(F,Q,O)},yt.useInsertionEffect=function(F,Q){return U.H.useInsertionEffect(F,Q)},yt.useLayoutEffect=function(F,Q){return U.H.useLayoutEffect(F,Q)},yt.useMemo=function(F,Q){return U.H.useMemo(F,Q)},yt.useOptimistic=function(F,Q){return U.H.useOptimistic(F,Q)},yt.useReducer=function(F,Q,O){return U.H.useReducer(F,Q,O)},yt.useRef=function(F){return U.H.useRef(F)},yt.useState=function(F){return U.H.useState(F)},yt.useSyncExternalStore=function(F,Q,O){return U.H.useSyncExternalStore(F,Q,O)},yt.useTransition=function(){return U.H.useTransition()},yt.version="19.2.3",yt}var KO;function HC(){return KO||(KO=1,F_.exports=rZ()),F_.exports}var A=HC(),B_={exports:{}},gf={},H_={exports:{}},q_={};var ZO;function sZ(){return ZO||(ZO=1,(function(e){function t(L,Z){var W=L.length;L.push(Z);e:for(;0<W;){var de=W-1>>>1,$=L[de];if(0<s($,Z))L[de]=Z,L[W]=$,W=de;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Z=L[0],W=L.pop();if(W!==Z){L[0]=W;e:for(var de=0,$=L.length,F=$>>>1;de<F;){var Q=2*(de+1)-1,O=L[Q],V=Q+1,he=L[V];if(0>s(O,W))V<$&&0>s(he,O)?(L[de]=he,L[V]=W,de=V):(L[de]=O,L[Q]=W,de=Q);else if(V<$&&0>s(he,W))L[de]=he,L[V]=W,de=V;else break e}}return Z}function s(L,Z){var W=L.sortIndex-Z.sortIndex;return W!==0?W:L.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var u=[],h=[],f=1,m=null,g=3,b=!1,w=!1,x=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function P(L){for(var Z=n(h);Z!==null;){if(Z.callback===null)r(h);else if(Z.startTime<=L)r(h),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(h)}}function D(L){if(x=!1,P(L),!w)if(n(u)!==null)w=!0,R||(R=!0,ie());else{var Z=n(h);Z!==null&&H(D,Z.startTime-L)}}var R=!1,U=-1,j=5,se=-1;function B(){return S?!0:!(e.unstable_now()-se<j)}function ee(){if(S=!1,R){var L=e.unstable_now();se=L;var Z=!0;try{e:{w=!1,x&&(x=!1,C(U),U=-1),b=!0;var W=g;try{t:{for(P(L),m=n(u);m!==null&&!(m.expirationTime>L&&B());){var de=m.callback;if(typeof de=="function"){m.callback=null,g=m.priorityLevel;var $=de(m.expirationTime<=L);if(L=e.unstable_now(),typeof $=="function"){m.callback=$,P(L),Z=!0;break t}m===n(u)&&r(u),P(L)}else r(u);m=n(u)}if(m!==null)Z=!0;else{var F=n(h);F!==null&&H(D,F.startTime-L),Z=!1}}break e}finally{m=null,g=W,b=!1}Z=void 0}}finally{Z?ie():R=!1}}}var ie;if(typeof T=="function")ie=function(){T(ee)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,G=_e.port2;_e.port1.onmessage=ee,ie=function(){G.postMessage(null)}}else ie=function(){k(ee,0)};function H(L,Z){U=k(function(){L(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var W=g;g=Z;try{return L()}finally{g=W}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(L,Z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var W=g;g=L;try{return Z()}finally{g=W}},e.unstable_scheduleCallback=function(L,Z,W){var de=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?de+W:de):W=de,L){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=W+$,L={id:f++,callback:Z,priorityLevel:L,startTime:W,expirationTime:$,sortIndex:-1},W>de?(L.sortIndex=W,t(h,L),n(u)===null&&L===n(h)&&(x?(C(U),U=-1):x=!0,H(D,W-de))):(L.sortIndex=$,t(u,L),w||b||(w=!0,R||(R=!0,ie()))),L},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(L){var Z=g;return function(){var W=g;g=Z;try{return L.apply(this,arguments)}finally{g=W}}}})(q_)),q_}var WO;function aZ(){return WO||(WO=1,H_.exports=sZ()),H_.exports}var V_={exports:{}},Fr={};var JO;function iZ(){if(JO)return Fr;JO=1;var e=HC();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(u,h,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:u,containerInfo:h,implementation:f}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fr.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return a(u,h,null,f)},Fr.flushSync=function(u){var h=i.T,f=r.p;try{if(i.T=null,r.p=2,u)return u()}finally{i.T=h,r.p=f,r.d.f()}},Fr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},Fr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Fr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,m=o(f,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:b}):f==="script"&&r.d.X(u,{crossOrigin:m,integrity:g,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=o(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},Fr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,m=o(f,h.crossOrigin);r.d.L(u,f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fr.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=o(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},Fr.requestFormReset=function(u){r.d.r(u)},Fr.unstable_batchedUpdates=function(u,h){return u(h)},Fr.useFormState=function(u,h,f){return i.H.useFormState(u,h,f)},Fr.useFormStatus=function(){return i.H.useHostTransitionStatus()},Fr.version="19.2.3",Fr}var YO;function oZ(){if(YO)return V_.exports;YO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V_.exports=iZ(),V_.exports}var QO;function lZ(){if(QO)return gf;QO=1;var e=aZ(),t=HC(),n=oZ();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function i(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(a(l)!==l)throw Error(r(188))}function h(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var v=p.return;if(v===null)break;var _=v.alternate;if(_===null){if(y=v.return,y!==null){p=y;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===p)return u(v),l;if(_===y)return u(v),d;_=_.sibling}throw Error(r(188))}if(p.return!==y.return)p=v,y=_;else{for(var E=!1,M=v.child;M;){if(M===p){E=!0,p=v,y=_;break}if(M===y){E=!0,y=v,p=_;break}M=M.sibling}if(!E){for(M=_.child;M;){if(M===p){E=!0,p=_,y=v;break}if(M===y){E=!0,y=_,p=v;break}M=M.sibling}if(!E)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function ie(l){return l===null||typeof l!="object"?null:(l=ee&&l[ee]||l["@@iterator"],typeof l=="function"?l:null)}var _e=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===_e?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case se:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case T:return l.displayName||"Context";case C:return(l._context.displayName||"Context")+".Consumer";case P:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case U:return d=l.displayName||null,d!==null?d:G(l.type)||"Memo";case j:d=l._payload,l=l._init;try{return G(l(d))}catch{}}return null}var H=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},de=[],$=-1;function F(l){return{current:l}}function Q(l){0>$||(l.current=de[$],de[$]=null,$--)}function O(l,d){$++,de[$]=l.current,l.current=d}var V=F(null),he=F(null),I=F(null),N=F(null);function ne(l,d){switch(O(I,d),O(he,l),O(V,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?fO(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=fO(d),l=pO(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Q(V),O(V,l)}function K(){Q(V),Q(he),Q(I)}function re(l){l.memoizedState!==null&&O(N,l);var d=V.current,p=pO(d,l.type);d!==p&&(O(he,l),O(V,p))}function be(l){he.current===l&&(Q(V),Q(he)),N.current===l&&(Q(N),df._currentValue=W)}var z,Ne;function je(l){if(z===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);z=d&&d[1]||"",Ne=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+z+l+Ne}var ft=!1;function Fe(l,d){if(!l||ft)return"";ft=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ge){var ue=ge}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(ge){ue=ge}l.call(Ce.prototype)}}else{try{throw Error()}catch(ge){ue=ge}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ge){if(ge&&ue&&typeof ge.stack=="string")return[ge.stack,ue.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=y.DetermineComponentFrameRoot(),E=_[0],M=_[1];if(E&&M){var q=E.split(`
`),le=M.split(`
`);for(v=y=0;y<q.length&&!q[y].includes("DetermineComponentFrameRoot");)y++;for(;v<le.length&&!le[v].includes("DetermineComponentFrameRoot");)v++;if(y===q.length||v===le.length)for(y=q.length-1,v=le.length-1;1<=y&&0<=v&&q[y]!==le[v];)v--;for(;1<=y&&0<=v;y--,v--)if(q[y]!==le[v]){if(y!==1||v!==1)do if(y--,v--,0>v||q[y]!==le[v]){var ve=`
`+q[y].replace(" at new "," at ");return l.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",l.displayName)),ve}while(1<=y&&0<=v);break}}}finally{ft=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?je(p):""}function Se(l,d){switch(l.tag){case 26:case 27:case 5:return je(l.type);case 16:return je("Lazy");case 13:return l.child!==d&&d!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Fe(l.type,!1);case 11:return Fe(l.type.render,!1);case 1:return Fe(l.type,!0);case 31:return je("Activity");default:return""}}function Xt(l){try{var d="",p=null;do d+=Se(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var en=Object.prototype.hasOwnProperty,Me=e.unstable_scheduleCallback,Jr=e.unstable_cancelCallback,ut=e.unstable_shouldYield,Ye=e.unstable_requestPaint,Je=e.unstable_now,$e=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,Y=e.unstable_UserBlockingPriority,ye=e.unstable_NormalPriority,De=e.unstable_LowPriority,Rt=e.unstable_IdlePriority,mr=e.log,Sr=e.unstable_setDisableYieldValue,Bn=null,In=null;function Yr(l){if(typeof mr=="function"&&Sr(l),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(Bn,l)}catch{}}var Bt=Math.clz32?Math.clz32:FV,As=Math.log,Oa=Math.LN2;function FV(l){return l>>>=0,l===0?32:31-(As(l)/Oa|0)|0}var Ym=256,Qm=262144,Xm=4194304;function Hl(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function eg(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var v=0,_=l.suspendedLanes,E=l.pingedLanes;l=l.warmLanes;var M=y&134217727;return M!==0?(y=M&~_,y!==0?v=Hl(y):(E&=M,E!==0?v=Hl(E):p||(p=M&~l,p!==0&&(v=Hl(p))))):(M=y&~_,M!==0?v=Hl(M):E!==0?v=Hl(E):p||(p=y&~l,p!==0&&(v=Hl(p)))),v===0?0:d!==0&&d!==v&&(d&_)===0&&(_=v&-v,p=d&-d,_>=p||_===32&&(p&4194048)!==0)?d:v}function kh(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function BV(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZN(){var l=Xm;return Xm<<=1,(Xm&62914560)===0&&(Xm=4194304),l}function jv(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function Sh(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function HV(l,d,p,y,v,_){var E=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var M=l.entanglements,q=l.expirationTimes,le=l.hiddenUpdates;for(p=E&~p;0<p;){var ve=31-Bt(p),Ce=1<<ve;M[ve]=0,q[ve]=-1;var ue=le[ve];if(ue!==null)for(le[ve]=null,ve=0;ve<ue.length;ve++){var ge=ue[ve];ge!==null&&(ge.lane&=-536870913)}p&=~Ce}y!==0&&WN(l,y,0),_!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=_&~(E&~d))}function WN(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-Bt(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function JN(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-Bt(p),v=1<<y;v&d|l[y]&d&&(l[y]|=d),p&=~v}}function YN(l,d){var p=d&-d;return p=(p&42)!==0?1:Nv(p),(p&(l.suspendedLanes|d))!==0?0:p}function Nv(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Av(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function QN(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:$O(l.type))}function XN(l,d){var p=Z.p;try{return Z.p=l,d()}finally{Z.p=p}}var Mo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Mo,ls="__reactProps$"+Mo,ru="__reactContainer$"+Mo,Iv="__reactEvents$"+Mo,qV="__reactListeners$"+Mo,VV="__reactHandles$"+Mo,eA="__reactResources$"+Mo,Th="__reactMarker$"+Mo;function Ov(l){delete l[Tr],delete l[ls],delete l[Iv],delete l[qV],delete l[VV]}function su(l){var d=l[Tr];if(d)return d;for(var p=l.parentNode;p;){if(d=p[ru]||p[Tr]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=wO(l);l!==null;){if(p=l[Tr])return p;l=wO(l)}return d}l=p,p=l.parentNode}return null}function au(l){if(l=l[Tr]||l[ru]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Ch(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function iu(l){var d=l[eA];return d||(d=l[eA]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function gr(l){l[Th]=!0}var tA=new Set,nA={};function ql(l,d){ou(l,d),ou(l+"Capture",d)}function ou(l,d){for(nA[l]=d,l=0;l<d.length;l++)tA.add(d[l])}var GV=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rA={},sA={};function KV(l){return en.call(sA,l)?!0:en.call(rA,l)?!1:GV.test(l)?sA[l]=!0:(rA[l]=!0,!1)}function tg(l,d,p){if(KV(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function ng(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function qi(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function ra(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function aA(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ZV(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var v=y.get,_=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return v.call(this)},set:function(E){p=""+E,_.call(this,E)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Rv(l){if(!l._valueTracker){var d=aA(l)?"checked":"value";l._valueTracker=ZV(l,d,""+l[d])}}function iA(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=aA(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function rg(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var WV=/[\n"\\]/g;function sa(l){return l.replace(WV,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Pv(l,d,p,y,v,_,E,M){l.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?l.type=E:l.removeAttribute("type"),d!=null?E==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ra(d)):l.value!==""+ra(d)&&(l.value=""+ra(d)):E!=="submit"&&E!=="reset"||l.removeAttribute("value"),d!=null?Mv(l,E,ra(d)):p!=null?Mv(l,E,ra(p)):y!=null&&l.removeAttribute("value"),v==null&&_!=null&&(l.defaultChecked=!!_),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?l.name=""+ra(M):l.removeAttribute("name")}function oA(l,d,p,y,v,_,E,M){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),d!=null||p!=null){if(!(_!=="submit"&&_!=="reset"||d!=null)){Rv(l);return}p=p!=null?""+ra(p):"",d=d!=null?""+ra(d):p,M||d===l.value||(l.value=d),l.defaultValue=d}y=y??v,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=M?l.checked:!!y,l.defaultChecked=!!y,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.name=E),Rv(l)}function Mv(l,d,p){d==="number"&&rg(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function lu(l,d,p,y){if(l=l.options,d){d={};for(var v=0;v<p.length;v++)d["$"+p[v]]=!0;for(p=0;p<l.length;p++)v=d.hasOwnProperty("$"+l[p].value),l[p].selected!==v&&(l[p].selected=v),v&&y&&(l[p].defaultSelected=!0)}else{for(p=""+ra(p),d=null,v=0;v<l.length;v++){if(l[v].value===p){l[v].selected=!0,y&&(l[v].defaultSelected=!0);return}d!==null||l[v].disabled||(d=l[v])}d!==null&&(d.selected=!0)}}function lA(l,d,p){if(d!=null&&(d=""+ra(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ra(p):""}function cA(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(H(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=ra(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),Rv(l)}function cu(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var JV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uA(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||JV.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function dA(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var v in d)y=d[v],d.hasOwnProperty(v)&&p[v]!==y&&uA(l,v,y)}else for(var _ in d)d.hasOwnProperty(_)&&uA(l,_,d[_])}function Dv(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),QV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sg(l){return QV.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Vi(){}var $v=null;function Lv(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var uu=null,du=null;function hA(l){var d=au(l);if(d&&(l=d.stateNode)){var p=l[ls]||null;e:switch(l=d.stateNode,d.type){case"input":if(Pv(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+sa(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var v=y[ls]||null;if(!v)throw Error(r(90));Pv(y,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&iA(y)}break e;case"textarea":lA(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&lu(l,!!p.multiple,d,!1)}}}var zv=!1;function fA(l,d,p){if(zv)return l(d,p);zv=!0;try{var y=l(d);return y}finally{if(zv=!1,(uu!==null||du!==null)&&(Vg(),uu&&(d=uu,l=du,du=uu=null,hA(d),l)))for(d=0;d<l.length;d++)hA(l[d])}}function Eh(l,d){var p=l.stateNode;if(p===null)return null;var y=p[ls]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uv=!1;if(Gi)try{var jh={};Object.defineProperty(jh,"passive",{get:function(){Uv=!0}}),window.addEventListener("test",jh,jh),window.removeEventListener("test",jh,jh)}catch{Uv=!1}var Do=null,Fv=null,ag=null;function pA(){if(ag)return ag;var l,d=Fv,p=d.length,y,v="value"in Do?Do.value:Do.textContent,_=v.length;for(l=0;l<p&&d[l]===v[l];l++);var E=p-l;for(y=1;y<=E&&d[p-y]===v[_-y];y++);return ag=v.slice(l,1<y?1-y:void 0)}function ig(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function og(){return!0}function mA(){return!1}function cs(l){function d(p,y,v,_,E){this._reactName=p,this._targetInst=v,this.type=y,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var M in l)l.hasOwnProperty(M)&&(p=l[M],this[M]=p?p(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?og:mA,this.isPropagationStopped=mA,this}return m(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=og)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=og)},persist:function(){},isPersistent:og}),d}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=cs(Vl),Nh=m({},Vl,{view:0,detail:0}),XV=cs(Nh),Bv,Hv,Ah,cg=m({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ah&&(Ah&&l.type==="mousemove"?(Bv=l.screenX-Ah.screenX,Hv=l.screenY-Ah.screenY):Hv=Bv=0,Ah=l),Bv)},movementY:function(l){return"movementY"in l?l.movementY:Hv}}),gA=cs(cg),eG=m({},cg,{dataTransfer:0}),tG=cs(eG),nG=m({},Nh,{relatedTarget:0}),qv=cs(nG),rG=m({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),sG=cs(rG),aG=m({},Vl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),iG=cs(aG),oG=m({},Vl,{data:0}),yA=cs(oG),lG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dG(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=uG[l])?!!d[l]:!1}function Vv(){return dG}var hG=m({},Nh,{key:function(l){if(l.key){var d=lG[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=ig(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?cG[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(l){return l.type==="keypress"?ig(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ig(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),fG=cs(hG),pG=m({},cg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bA=cs(pG),mG=m({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),gG=cs(mG),yG=m({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bG=cs(yG),xG=m({},cg,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),vG=cs(xG),wG=m({},Vl,{newState:0,oldState:0}),_G=cs(wG),kG=[9,13,27,32],Gv=Gi&&"CompositionEvent"in window,Ih=null;Gi&&"documentMode"in document&&(Ih=document.documentMode);var SG=Gi&&"TextEvent"in window&&!Ih,xA=Gi&&(!Gv||Ih&&8<Ih&&11>=Ih),vA=" ",wA=!1;function _A(l,d){switch(l){case"keyup":return kG.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kA(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var hu=!1;function TG(l,d){switch(l){case"compositionend":return kA(d);case"keypress":return d.which!==32?null:(wA=!0,vA);case"textInput":return l=d.data,l===vA&&wA?null:l;default:return null}}function CG(l,d){if(hu)return l==="compositionend"||!Gv&&_A(l,d)?(l=pA(),ag=Fv=Do=null,hu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return xA&&d.locale!=="ko"?null:d.data;default:return null}}var EG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SA(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!EG[l.type]:d==="textarea"}function TA(l,d,p,y){uu?du?du.push(y):du=[y]:uu=y,d=Qg(d,"onChange"),0<d.length&&(p=new lg("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Oh=null,Rh=null;function jG(l){oO(l,0)}function ug(l){var d=Ch(l);if(iA(d))return l}function CA(l,d){if(l==="change")return d}var EA=!1;if(Gi){var Kv;if(Gi){var Zv="oninput"in document;if(!Zv){var jA=document.createElement("div");jA.setAttribute("oninput","return;"),Zv=typeof jA.oninput=="function"}Kv=Zv}else Kv=!1;EA=Kv&&(!document.documentMode||9<document.documentMode)}function NA(){Oh&&(Oh.detachEvent("onpropertychange",AA),Rh=Oh=null)}function AA(l){if(l.propertyName==="value"&&ug(Rh)){var d=[];TA(d,Rh,l,Lv(l)),fA(jG,d)}}function NG(l,d,p){l==="focusin"?(NA(),Oh=d,Rh=p,Oh.attachEvent("onpropertychange",AA)):l==="focusout"&&NA()}function AG(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ug(Rh)}function IG(l,d){if(l==="click")return ug(d)}function OG(l,d){if(l==="input"||l==="change")return ug(d)}function RG(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Is=typeof Object.is=="function"?Object.is:RG;function Ph(l,d){if(Is(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var v=p[y];if(!en.call(d,v)||!Is(l[v],d[v]))return!1}return!0}function IA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function OA(l,d){var p=IA(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=IA(p)}}function RA(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?RA(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function PA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=rg(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=rg(l.document)}return d}function Wv(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var PG=Gi&&"documentMode"in document&&11>=document.documentMode,fu=null,Jv=null,Mh=null,Yv=!1;function MA(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Yv||fu==null||fu!==rg(y)||(y=fu,"selectionStart"in y&&Wv(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Mh&&Ph(Mh,y)||(Mh=y,y=Qg(Jv,"onSelect"),0<y.length&&(d=new lg("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=fu)))}function Gl(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var pu={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionrun:Gl("Transition","TransitionRun"),transitionstart:Gl("Transition","TransitionStart"),transitioncancel:Gl("Transition","TransitionCancel"),transitionend:Gl("Transition","TransitionEnd")},Qv={},DA={};Gi&&(DA=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function Kl(l){if(Qv[l])return Qv[l];if(!pu[l])return l;var d=pu[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in DA)return Qv[l]=d[p];return l}var $A=Kl("animationend"),LA=Kl("animationiteration"),zA=Kl("animationstart"),MG=Kl("transitionrun"),DG=Kl("transitionstart"),$G=Kl("transitioncancel"),UA=Kl("transitionend"),FA=new Map,Xv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xv.push("scrollEnd");function Ra(l,d){FA.set(l,d),ql(d,[l])}var dg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},aa=[],mu=0,ew=0;function hg(){for(var l=mu,d=ew=mu=0;d<l;){var p=aa[d];aa[d++]=null;var y=aa[d];aa[d++]=null;var v=aa[d];aa[d++]=null;var _=aa[d];if(aa[d++]=null,y!==null&&v!==null){var E=y.pending;E===null?v.next=v:(v.next=E.next,E.next=v),y.pending=v}_!==0&&BA(p,v,_)}}function fg(l,d,p,y){aa[mu++]=l,aa[mu++]=d,aa[mu++]=p,aa[mu++]=y,ew|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function tw(l,d,p,y){return fg(l,d,p,y),pg(l)}function Zl(l,d){return fg(l,null,null,d),pg(l)}function BA(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var v=!1,_=l.return;_!==null;)_.childLanes|=p,y=_.alternate,y!==null&&(y.childLanes|=p),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(v=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,v&&d!==null&&(v=31-Bt(p),l=_.hiddenUpdates,y=l[v],y===null?l[v]=[d]:y.push(d),d.lane=p|536870912),_):null}function pg(l){if(50<rf)throw rf=0,u_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var gu={};function LG(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(l,d,p,y){return new LG(l,d,p,y)}function nw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ki(l,d){var p=l.alternate;return p===null?(p=Os(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function HA(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function mg(l,d,p,y,v,_){var E=0;if(y=l,typeof l=="function")nw(l)&&(E=1);else if(typeof l=="string")E=HK(l,p,V.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case se:return l=Os(31,p,d,v),l.elementType=se,l.lanes=_,l;case x:return Wl(p.children,v,_,d);case S:E=8,v|=24;break;case k:return l=Os(12,p,d,v|2),l.elementType=k,l.lanes=_,l;case D:return l=Os(13,p,d,v),l.elementType=D,l.lanes=_,l;case R:return l=Os(19,p,d,v),l.elementType=R,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:E=10;break e;case C:E=9;break e;case P:E=11;break e;case U:E=14;break e;case j:E=16,y=null;break e}E=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=Os(E,p,d,v),d.elementType=l,d.type=y,d.lanes=_,d}function Wl(l,d,p,y){return l=Os(7,l,y,d),l.lanes=p,l}function rw(l,d,p){return l=Os(6,l,null,d),l.lanes=p,l}function qA(l){var d=Os(18,null,null,0);return d.stateNode=l,d}function sw(l,d,p){return d=Os(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var VA=new WeakMap;function ia(l,d){if(typeof l=="object"&&l!==null){var p=VA.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Xt(d)},VA.set(l,d),d)}return{value:l,source:d,stack:Xt(d)}}var yu=[],bu=0,gg=null,Dh=0,oa=[],la=0,$o=null,mi=1,gi="";function Zi(l,d){yu[bu++]=Dh,yu[bu++]=gg,gg=l,Dh=d}function GA(l,d,p){oa[la++]=mi,oa[la++]=gi,oa[la++]=$o,$o=l;var y=mi;l=gi;var v=32-Bt(y)-1;y&=~(1<<v),p+=1;var _=32-Bt(d)+v;if(30<_){var E=v-v%5;_=(y&(1<<E)-1).toString(32),y>>=E,v-=E,mi=1<<32-Bt(d)+v|p<<v|y,gi=_+l}else mi=1<<_|p<<v|y,gi=l}function aw(l){l.return!==null&&(Zi(l,1),GA(l,1,0))}function iw(l){for(;l===gg;)gg=yu[--bu],yu[bu]=null,Dh=yu[--bu],yu[bu]=null;for(;l===$o;)$o=oa[--la],oa[la]=null,gi=oa[--la],oa[la]=null,mi=oa[--la],oa[la]=null}function KA(l,d){oa[la++]=mi,oa[la++]=gi,oa[la++]=$o,mi=d.id,gi=d.overflow,$o=l}var Cr=null,yn=null,Dt=!1,Lo=null,ca=!1,ow=Error(r(519));function zo(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $h(ia(d,l)),ow}function ZA(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Tr]=l,d[ls]=y,p){case"dialog":It("cancel",d),It("close",d);break;case"iframe":case"object":case"embed":It("load",d);break;case"video":case"audio":for(p=0;p<af.length;p++)It(af[p],d);break;case"source":It("error",d);break;case"img":case"image":case"link":It("error",d),It("load",d);break;case"details":It("toggle",d);break;case"input":It("invalid",d),oA(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":It("invalid",d);break;case"textarea":It("invalid",d),cA(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||dO(d.textContent,p)?(y.popover!=null&&(It("beforetoggle",d),It("toggle",d)),y.onScroll!=null&&It("scroll",d),y.onScrollEnd!=null&&It("scrollend",d),y.onClick!=null&&(d.onclick=Vi),d=!0):d=!1,d||zo(l,!0)}function WA(l){for(Cr=l.return;Cr;)switch(Cr.tag){case 5:case 31:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:Cr=Cr.return}}function xu(l){if(l!==Cr)return!1;if(!Dt)return WA(l),Dt=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||T_(l.type,l.memoizedProps)),p=!p),p&&yn&&zo(l),WA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));yn=vO(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));yn=vO(l)}else d===27?(d=yn,Xo(l.type)?(l=A_,A_=null,yn=l):yn=d):yn=Cr?da(l.stateNode.nextSibling):null;return!0}function Jl(){yn=Cr=null,Dt=!1}function lw(){var l=Lo;return l!==null&&(fs===null?fs=l:fs.push.apply(fs,l),Lo=null),l}function $h(l){Lo===null?Lo=[l]:Lo.push(l)}var cw=F(null),Yl=null,Wi=null;function Uo(l,d,p){O(cw,d._currentValue),d._currentValue=p}function Ji(l){l._currentValue=cw.current,Q(cw)}function uw(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function dw(l,d,p,y){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var _=v.dependencies;if(_!==null){var E=v.child;_=_.firstContext;e:for(;_!==null;){var M=_;_=v;for(var q=0;q<d.length;q++)if(M.context===d[q]){_.lanes|=p,M=_.alternate,M!==null&&(M.lanes|=p),uw(_.return,p,l),y||(E=null);break e}_=M.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(r(341));E.lanes|=p,_=E.alternate,_!==null&&(_.lanes|=p),uw(E,p,l),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===l){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function vu(l,d,p,y){l=null;for(var v=d,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var M=v.type;Is(v.pendingProps.value,E.value)||(l!==null?l.push(M):l=[M])}}else if(v===N.current){if(E=v.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push(df):l=[df])}v=v.return}l!==null&&dw(d,l,p,y),d.flags|=262144}function yg(l){for(l=l.firstContext;l!==null;){if(!Is(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ql(l){Yl=l,Wi=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Er(l){return JA(Yl,l)}function bg(l,d){return Yl===null&&Ql(l),JA(l,d)}function JA(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Wi===null){if(l===null)throw Error(r(308));Wi=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Wi=Wi.next=d;return p}var zG=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},UG=e.unstable_scheduleCallback,FG=e.unstable_NormalPriority,Hn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hw(){return{controller:new zG,data:new Map,refCount:0}}function Lh(l){l.refCount--,l.refCount===0&&UG(FG,function(){l.controller.abort()})}var zh=null,fw=0,wu=0,_u=null;function BG(l,d){if(zh===null){var p=zh=[];fw=0,wu=g_(),_u={status:"pending",value:void 0,then:function(y){p.push(y)}}}return fw++,d.then(YA,YA),d}function YA(){if(--fw===0&&zh!==null){_u!==null&&(_u.status="fulfilled");var l=zh;zh=null,wu=0,_u=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function HG(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var v=0;v<p.length;v++)(0,p[v])(d)},function(v){for(y.status="rejected",y.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),y}var QA=L.S;L.S=function(l,d){MI=Je(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&BG(l,d),QA!==null&&QA(l,d)};var Xl=F(null);function pw(){var l=Xl.current;return l!==null?l:un.pooledCache}function xg(l,d){d===null?O(Xl,Xl.current):O(Xl,d.pool)}function XA(){var l=pw();return l===null?null:{parent:Hn._currentValue,pool:l}}var ku=Error(r(460)),mw=Error(r(474)),vg=Error(r(542)),wg={then:function(){}};function e2(l){return l=l.status,l==="fulfilled"||l==="rejected"}function t2(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(Vi,Vi),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,r2(l),l;default:if(typeof d.status=="string")d.then(Vi,Vi);else{if(l=un,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var v=d;v.status="fulfilled",v.value=y}},function(y){if(d.status==="pending"){var v=d;v.status="rejected",v.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,r2(l),l}throw tc=d,ku}}function ec(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(tc=p,ku):p}}var tc=null;function n2(){if(tc===null)throw Error(r(459));var l=tc;return tc=null,l}function r2(l){if(l===ku||l===vg)throw Error(r(483))}var Su=null,Uh=0;function _g(l){var d=Uh;return Uh+=1,Su===null&&(Su=[]),t2(Su,l,d)}function Fh(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function kg(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function s2(l){function d(ae,X){if(l){var oe=ae.deletions;oe===null?(ae.deletions=[X],ae.flags|=16):oe.push(X)}}function p(ae,X){if(!l)return null;for(;X!==null;)d(ae,X),X=X.sibling;return null}function y(ae){for(var X=new Map;ae!==null;)ae.key!==null?X.set(ae.key,ae):X.set(ae.index,ae),ae=ae.sibling;return X}function v(ae,X){return ae=Ki(ae,X),ae.index=0,ae.sibling=null,ae}function _(ae,X,oe){return ae.index=oe,l?(oe=ae.alternate,oe!==null?(oe=oe.index,oe<X?(ae.flags|=67108866,X):oe):(ae.flags|=67108866,X)):(ae.flags|=1048576,X)}function E(ae){return l&&ae.alternate===null&&(ae.flags|=67108866),ae}function M(ae,X,oe,Te){return X===null||X.tag!==6?(X=rw(oe,ae.mode,Te),X.return=ae,X):(X=v(X,oe),X.return=ae,X)}function q(ae,X,oe,Te){var at=oe.type;return at===x?ve(ae,X,oe.props.children,Te,oe.key):X!==null&&(X.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&ec(at)===X.type)?(X=v(X,oe.props),Fh(X,oe),X.return=ae,X):(X=mg(oe.type,oe.key,oe.props,null,ae.mode,Te),Fh(X,oe),X.return=ae,X)}function le(ae,X,oe,Te){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=sw(oe,ae.mode,Te),X.return=ae,X):(X=v(X,oe.children||[]),X.return=ae,X)}function ve(ae,X,oe,Te,at){return X===null||X.tag!==7?(X=Wl(oe,ae.mode,Te,at),X.return=ae,X):(X=v(X,oe),X.return=ae,X)}function Ce(ae,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=rw(""+X,ae.mode,oe),X.return=ae,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return oe=mg(X.type,X.key,X.props,null,ae.mode,oe),Fh(oe,X),oe.return=ae,oe;case w:return X=sw(X,ae.mode,oe),X.return=ae,X;case j:return X=ec(X),Ce(ae,X,oe)}if(H(X)||ie(X))return X=Wl(X,ae.mode,oe,null),X.return=ae,X;if(typeof X.then=="function")return Ce(ae,_g(X),oe);if(X.$$typeof===T)return Ce(ae,bg(ae,X),oe);kg(ae,X)}return null}function ue(ae,X,oe,Te){var at=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return at!==null?null:M(ae,X,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case b:return oe.key===at?q(ae,X,oe,Te):null;case w:return oe.key===at?le(ae,X,oe,Te):null;case j:return oe=ec(oe),ue(ae,X,oe,Te)}if(H(oe)||ie(oe))return at!==null?null:ve(ae,X,oe,Te,null);if(typeof oe.then=="function")return ue(ae,X,_g(oe),Te);if(oe.$$typeof===T)return ue(ae,X,bg(ae,oe),Te);kg(ae,oe)}return null}function ge(ae,X,oe,Te,at){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(oe)||null,M(X,ae,""+Te,at);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case b:return ae=ae.get(Te.key===null?oe:Te.key)||null,q(X,ae,Te,at);case w:return ae=ae.get(Te.key===null?oe:Te.key)||null,le(X,ae,Te,at);case j:return Te=ec(Te),ge(ae,X,oe,Te,at)}if(H(Te)||ie(Te))return ae=ae.get(oe)||null,ve(X,ae,Te,at,null);if(typeof Te.then=="function")return ge(ae,X,oe,_g(Te),at);if(Te.$$typeof===T)return ge(ae,X,oe,bg(X,Te),at);kg(X,Te)}return null}function Ve(ae,X,oe,Te){for(var at=null,qt=null,Xe=X,St=X=0,Mt=null;Xe!==null&&St<oe.length;St++){Xe.index>St?(Mt=Xe,Xe=null):Mt=Xe.sibling;var Vt=ue(ae,Xe,oe[St],Te);if(Vt===null){Xe===null&&(Xe=Mt);break}l&&Xe&&Vt.alternate===null&&d(ae,Xe),X=_(Vt,X,St),qt===null?at=Vt:qt.sibling=Vt,qt=Vt,Xe=Mt}if(St===oe.length)return p(ae,Xe),Dt&&Zi(ae,St),at;if(Xe===null){for(;St<oe.length;St++)Xe=Ce(ae,oe[St],Te),Xe!==null&&(X=_(Xe,X,St),qt===null?at=Xe:qt.sibling=Xe,qt=Xe);return Dt&&Zi(ae,St),at}for(Xe=y(Xe);St<oe.length;St++)Mt=ge(Xe,ae,St,oe[St],Te),Mt!==null&&(l&&Mt.alternate!==null&&Xe.delete(Mt.key===null?St:Mt.key),X=_(Mt,X,St),qt===null?at=Mt:qt.sibling=Mt,qt=Mt);return l&&Xe.forEach(function(sl){return d(ae,sl)}),Dt&&Zi(ae,St),at}function ht(ae,X,oe,Te){if(oe==null)throw Error(r(151));for(var at=null,qt=null,Xe=X,St=X=0,Mt=null,Vt=oe.next();Xe!==null&&!Vt.done;St++,Vt=oe.next()){Xe.index>St?(Mt=Xe,Xe=null):Mt=Xe.sibling;var sl=ue(ae,Xe,Vt.value,Te);if(sl===null){Xe===null&&(Xe=Mt);break}l&&Xe&&sl.alternate===null&&d(ae,Xe),X=_(sl,X,St),qt===null?at=sl:qt.sibling=sl,qt=sl,Xe=Mt}if(Vt.done)return p(ae,Xe),Dt&&Zi(ae,St),at;if(Xe===null){for(;!Vt.done;St++,Vt=oe.next())Vt=Ce(ae,Vt.value,Te),Vt!==null&&(X=_(Vt,X,St),qt===null?at=Vt:qt.sibling=Vt,qt=Vt);return Dt&&Zi(ae,St),at}for(Xe=y(Xe);!Vt.done;St++,Vt=oe.next())Vt=ge(Xe,ae,St,Vt.value,Te),Vt!==null&&(l&&Vt.alternate!==null&&Xe.delete(Vt.key===null?St:Vt.key),X=_(Vt,X,St),qt===null?at=Vt:qt.sibling=Vt,qt=Vt);return l&&Xe.forEach(function(eZ){return d(ae,eZ)}),Dt&&Zi(ae,St),at}function ln(ae,X,oe,Te){if(typeof oe=="object"&&oe!==null&&oe.type===x&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case b:e:{for(var at=oe.key;X!==null;){if(X.key===at){if(at=oe.type,at===x){if(X.tag===7){p(ae,X.sibling),Te=v(X,oe.props.children),Te.return=ae,ae=Te;break e}}else if(X.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&ec(at)===X.type){p(ae,X.sibling),Te=v(X,oe.props),Fh(Te,oe),Te.return=ae,ae=Te;break e}p(ae,X);break}else d(ae,X);X=X.sibling}oe.type===x?(Te=Wl(oe.props.children,ae.mode,Te,oe.key),Te.return=ae,ae=Te):(Te=mg(oe.type,oe.key,oe.props,null,ae.mode,Te),Fh(Te,oe),Te.return=ae,ae=Te)}return E(ae);case w:e:{for(at=oe.key;X!==null;){if(X.key===at)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){p(ae,X.sibling),Te=v(X,oe.children||[]),Te.return=ae,ae=Te;break e}else{p(ae,X);break}else d(ae,X);X=X.sibling}Te=sw(oe,ae.mode,Te),Te.return=ae,ae=Te}return E(ae);case j:return oe=ec(oe),ln(ae,X,oe,Te)}if(H(oe))return Ve(ae,X,oe,Te);if(ie(oe)){if(at=ie(oe),typeof at!="function")throw Error(r(150));return oe=at.call(oe),ht(ae,X,oe,Te)}if(typeof oe.then=="function")return ln(ae,X,_g(oe),Te);if(oe.$$typeof===T)return ln(ae,X,bg(ae,oe),Te);kg(ae,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(p(ae,X.sibling),Te=v(X,oe),Te.return=ae,ae=Te):(p(ae,X),Te=rw(oe,ae.mode,Te),Te.return=ae,ae=Te),E(ae)):p(ae,X)}return function(ae,X,oe,Te){try{Uh=0;var at=ln(ae,X,oe,Te);return Su=null,at}catch(Xe){if(Xe===ku||Xe===vg)throw Xe;var qt=Os(29,Xe,null,ae.mode);return qt.lanes=Te,qt.return=ae,qt}}}var nc=s2(!0),a2=s2(!1),Fo=!1;function gw(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yw(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Bo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ho(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Wt&2)!==0){var v=y.pending;return v===null?d.next=d:(d.next=v.next,v.next=d),y.pending=d,d=pg(l),BA(l,null,p),d}return fg(l,y,d,p),pg(l)}function Bh(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,JN(l,p)}}function bw(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var v=null,_=null;if(p=p.firstBaseUpdate,p!==null){do{var E={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};_===null?v=_=E:_=_.next=E,p=p.next}while(p!==null);_===null?v=_=d:_=_.next=d}else v=_=d;p={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var xw=!1;function Hh(){if(xw){var l=_u;if(l!==null)throw l}}function qh(l,d,p,y){xw=!1;var v=l.updateQueue;Fo=!1;var _=v.firstBaseUpdate,E=v.lastBaseUpdate,M=v.shared.pending;if(M!==null){v.shared.pending=null;var q=M,le=q.next;q.next=null,E===null?_=le:E.next=le,E=q;var ve=l.alternate;ve!==null&&(ve=ve.updateQueue,M=ve.lastBaseUpdate,M!==E&&(M===null?ve.firstBaseUpdate=le:M.next=le,ve.lastBaseUpdate=q))}if(_!==null){var Ce=v.baseState;E=0,ve=le=q=null,M=_;do{var ue=M.lane&-536870913,ge=ue!==M.lane;if(ge?(Pt&ue)===ue:(y&ue)===ue){ue!==0&&ue===wu&&(xw=!0),ve!==null&&(ve=ve.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ve=l,ht=M;ue=d;var ln=p;switch(ht.tag){case 1:if(Ve=ht.payload,typeof Ve=="function"){Ce=Ve.call(ln,Ce,ue);break e}Ce=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=ht.payload,ue=typeof Ve=="function"?Ve.call(ln,Ce,ue):Ve,ue==null)break e;Ce=m({},Ce,ue);break e;case 2:Fo=!0}}ue=M.callback,ue!==null&&(l.flags|=64,ge&&(l.flags|=8192),ge=v.callbacks,ge===null?v.callbacks=[ue]:ge.push(ue))}else ge={lane:ue,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ve===null?(le=ve=ge,q=Ce):ve=ve.next=ge,E|=ue;if(M=M.next,M===null){if(M=v.shared.pending,M===null)break;ge=M,M=ge.next,ge.next=null,v.lastBaseUpdate=ge,v.shared.pending=null}}while(!0);ve===null&&(q=Ce),v.baseState=q,v.firstBaseUpdate=le,v.lastBaseUpdate=ve,_===null&&(v.shared.lanes=0),Zo|=E,l.lanes=E,l.memoizedState=Ce}}function i2(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function o2(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)i2(p[l],d)}var Tu=F(null),Sg=F(0);function l2(l,d){l=ao,O(Sg,l),O(Tu,d),ao=l|d.baseLanes}function vw(){O(Sg,ao),O(Tu,Tu.current)}function ww(){ao=Sg.current,Q(Tu),Q(Sg)}var Rs=F(null),ua=null;function qo(l){var d=l.alternate;O(Ln,Ln.current&1),O(Rs,l),ua===null&&(d===null||Tu.current!==null||d.memoizedState!==null)&&(ua=l)}function _w(l){O(Ln,Ln.current),O(Rs,l),ua===null&&(ua=l)}function c2(l){l.tag===22?(O(Ln,Ln.current),O(Rs,l),ua===null&&(ua=l)):Vo()}function Vo(){O(Ln,Ln.current),O(Rs,Rs.current)}function Ps(l){Q(Rs),ua===l&&(ua=null),Q(Ln)}var Ln=F(0);function Tg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||j_(p)||N_(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Yi=0,_t=null,an=null,qn=null,Cg=!1,Cu=!1,rc=!1,Eg=0,Vh=0,Eu=null,qG=0;function On(){throw Error(r(321))}function kw(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Is(l[p],d[p]))return!1;return!0}function Sw(l,d,p,y,v,_){return Yi=_,_t=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,L.H=l===null||l.memoizedState===null?G2:zw,rc=!1,_=p(y,v),rc=!1,Cu&&(_=d2(d,p,y,v)),u2(l),_}function u2(l){L.H=Zh;var d=an!==null&&an.next!==null;if(Yi=0,qn=an=_t=null,Cg=!1,Vh=0,Eu=null,d)throw Error(r(300));l===null||Vn||(l=l.dependencies,l!==null&&yg(l)&&(Vn=!0))}function d2(l,d,p,y){_t=l;var v=0;do{if(Cu&&(Eu=null),Vh=0,Cu=!1,25<=v)throw Error(r(301));if(v+=1,qn=an=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}L.H=K2,_=d(p,y)}while(Cu);return _}function VG(){var l=L.H,d=l.useState()[0];return d=typeof d.then=="function"?Gh(d):d,l=l.useState()[0],(an!==null?an.memoizedState:null)!==l&&(_t.flags|=1024),d}function Tw(){var l=Eg!==0;return Eg=0,l}function Cw(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function Ew(l){if(Cg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Cg=!1}Yi=0,qn=an=_t=null,Cu=!1,Vh=Eg=0,Eu=null}function Qr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?_t.memoizedState=qn=l:qn=qn.next=l,qn}function zn(){if(an===null){var l=_t.alternate;l=l!==null?l.memoizedState:null}else l=an.next;var d=qn===null?_t.memoizedState:qn.next;if(d!==null)qn=d,an=l;else{if(l===null)throw _t.alternate===null?Error(r(467)):Error(r(310));an=l,l={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},qn===null?_t.memoizedState=qn=l:qn=qn.next=l}return qn}function jg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gh(l){var d=Vh;return Vh+=1,Eu===null&&(Eu=[]),l=t2(Eu,l,d),d=_t,(qn===null?d.memoizedState:qn.next)===null&&(d=d.alternate,L.H=d===null||d.memoizedState===null?G2:zw),l}function Ng(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Gh(l);if(l.$$typeof===T)return Er(l)}throw Error(r(438,String(l)))}function jw(l){var d=null,p=_t.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=_t.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(v){return v.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=jg(),_t.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=B;return d.index++,p}function Qi(l,d){return typeof d=="function"?d(l):d}function Ag(l){var d=zn();return Nw(d,an,l)}function Nw(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var v=l.baseQueue,_=y.pending;if(_!==null){if(v!==null){var E=v.next;v.next=_.next,_.next=E}d.baseQueue=v=_,y.pending=null}if(_=l.baseState,v===null)l.memoizedState=_;else{d=v.next;var M=E=null,q=null,le=d,ve=!1;do{var Ce=le.lane&-536870913;if(Ce!==le.lane?(Pt&Ce)===Ce:(Yi&Ce)===Ce){var ue=le.revertLane;if(ue===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ce===wu&&(ve=!0);else if((Yi&ue)===ue){le=le.next,ue===wu&&(ve=!0);continue}else Ce={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},q===null?(M=q=Ce,E=_):q=q.next=Ce,_t.lanes|=ue,Zo|=ue;Ce=le.action,rc&&p(_,Ce),_=le.hasEagerState?le.eagerState:p(_,Ce)}else ue={lane:Ce,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},q===null?(M=q=ue,E=_):q=q.next=ue,_t.lanes|=Ce,Zo|=Ce;le=le.next}while(le!==null&&le!==d);if(q===null?E=_:q.next=M,!Is(_,l.memoizedState)&&(Vn=!0,ve&&(p=_u,p!==null)))throw p;l.memoizedState=_,l.baseState=E,l.baseQueue=q,y.lastRenderedState=_}return v===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Aw(l){var d=zn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,v=p.pending,_=d.memoizedState;if(v!==null){p.pending=null;var E=v=v.next;do _=l(_,E.action),E=E.next;while(E!==v);Is(_,d.memoizedState)||(Vn=!0),d.memoizedState=_,d.baseQueue===null&&(d.baseState=_),p.lastRenderedState=_}return[_,y]}function h2(l,d,p){var y=_t,v=zn(),_=Dt;if(_){if(p===void 0)throw Error(r(407));p=p()}else p=d();var E=!Is((an||v).memoizedState,p);if(E&&(v.memoizedState=p,Vn=!0),v=v.queue,Rw(m2.bind(null,y,v,l),[l]),v.getSnapshot!==d||E||qn!==null&&qn.memoizedState.tag&1){if(y.flags|=2048,ju(9,{destroy:void 0},p2.bind(null,y,v,p,d),null),un===null)throw Error(r(349));_||(Yi&127)!==0||f2(y,d,p)}return p}function f2(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=_t.updateQueue,d===null?(d=jg(),_t.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function p2(l,d,p,y){d.value=p,d.getSnapshot=y,g2(d)&&y2(l)}function m2(l,d,p){return p(function(){g2(d)&&y2(l)})}function g2(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Is(l,p)}catch{return!0}}function y2(l){var d=Zl(l,2);d!==null&&ps(d,l,2)}function Iw(l){var d=Qr();if(typeof l=="function"){var p=l;if(l=p(),rc){Yr(!0);try{p()}finally{Yr(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:l},d}function b2(l,d,p,y){return l.baseState=p,Nw(l,an,typeof y=="function"?y:Qi)}function GG(l,d,p,y,v){if(Rg(l))throw Error(r(485));if(l=d.action,l!==null){var _={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){_.listeners.push(E)}};L.T!==null?p(!0):_.isTransition=!1,y(_),p=d.pending,p===null?(_.next=d.pending=_,x2(d,_)):(_.next=p.next,d.pending=p.next=_)}}function x2(l,d){var p=d.action,y=d.payload,v=l.state;if(d.isTransition){var _=L.T,E={};L.T=E;try{var M=p(v,y),q=L.S;q!==null&&q(E,M),v2(l,d,M)}catch(le){Ow(l,d,le)}finally{_!==null&&E.types!==null&&(_.types=E.types),L.T=_}}else try{_=p(v,y),v2(l,d,_)}catch(le){Ow(l,d,le)}}function v2(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){w2(l,d,y)},function(y){return Ow(l,d,y)}):w2(l,d,p)}function w2(l,d,p){d.status="fulfilled",d.value=p,_2(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,x2(l,p)))}function Ow(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,_2(d),d=d.next;while(d!==y)}l.action=null}function _2(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function k2(l,d){return d}function S2(l,d){if(Dt){var p=un.formState;if(p!==null){e:{var y=_t;if(Dt){if(yn){t:{for(var v=yn,_=ca;v.nodeType!==8;){if(!_){v=null;break t}if(v=da(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){yn=da(v.nextSibling),y=v.data==="F!";break e}}zo(y)}y=!1}y&&(d=p[0])}}return p=Qr(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k2,lastRenderedState:d},p.queue=y,p=H2.bind(null,_t,y),y.dispatch=p,y=Iw(!1),_=Lw.bind(null,_t,!1,y.queue),y=Qr(),v={state:d,dispatch:null,action:l,pending:null},y.queue=v,p=GG.bind(null,_t,v,_,p),v.dispatch=p,y.memoizedState=l,[d,p,!1]}function T2(l){var d=zn();return C2(d,an,l)}function C2(l,d,p){if(d=Nw(l,d,k2)[0],l=Ag(Qi)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Gh(d)}catch(E){throw E===ku?vg:E}else y=d;d=zn();var v=d.queue,_=v.dispatch;return p!==d.memoizedState&&(_t.flags|=2048,ju(9,{destroy:void 0},KG.bind(null,v,p),null)),[y,_,l]}function KG(l,d){l.action=d}function E2(l){var d=zn(),p=an;if(p!==null)return C2(d,p,l);zn(),d=d.memoizedState,p=zn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function ju(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=_t.updateQueue,d===null&&(d=jg(),_t.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function j2(){return zn().memoizedState}function Ig(l,d,p,y){var v=Qr();_t.flags|=l,v.memoizedState=ju(1|d,{destroy:void 0},p,y===void 0?null:y)}function Og(l,d,p,y){var v=zn();y=y===void 0?null:y;var _=v.memoizedState.inst;an!==null&&y!==null&&kw(y,an.memoizedState.deps)?v.memoizedState=ju(d,_,p,y):(_t.flags|=l,v.memoizedState=ju(1|d,_,p,y))}function N2(l,d){Ig(8390656,8,l,d)}function Rw(l,d){Og(2048,8,l,d)}function ZG(l){_t.flags|=4;var d=_t.updateQueue;if(d===null)d=jg(),_t.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function A2(l){var d=zn().memoizedState;return ZG({ref:d,nextImpl:l}),function(){if((Wt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function I2(l,d){return Og(4,2,l,d)}function O2(l,d){return Og(4,4,l,d)}function R2(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function P2(l,d,p){p=p!=null?p.concat([l]):null,Og(4,4,R2.bind(null,d,l),p)}function Pw(){}function M2(l,d){var p=zn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&kw(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function D2(l,d){var p=zn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&kw(d,y[1]))return y[0];if(y=l(),rc){Yr(!0);try{l()}finally{Yr(!1)}}return p.memoizedState=[y,d],y}function Mw(l,d,p){return p===void 0||(Yi&1073741824)!==0&&(Pt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=$I(),_t.lanes|=l,Zo|=l,p)}function $2(l,d,p,y){return Is(p,d)?p:Tu.current!==null?(l=Mw(l,p,y),Is(l,d)||(Vn=!0),l):(Yi&42)===0||(Yi&1073741824)!==0&&(Pt&261930)===0?(Vn=!0,l.memoizedState=p):(l=$I(),_t.lanes|=l,Zo|=l,d)}function L2(l,d,p,y,v){var _=Z.p;Z.p=_!==0&&8>_?_:8;var E=L.T,M={};L.T=M,Lw(l,!1,d,p);try{var q=v(),le=L.S;if(le!==null&&le(M,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ve=HG(q,y);Kh(l,d,ve,$s(l))}else Kh(l,d,y,$s(l))}catch(Ce){Kh(l,d,{then:function(){},status:"rejected",reason:Ce},$s())}finally{Z.p=_,E!==null&&M.types!==null&&(E.types=M.types),L.T=E}}function WG(){}function Dw(l,d,p,y){if(l.tag!==5)throw Error(r(476));var v=z2(l).queue;L2(l,v,d,W,p===null?WG:function(){return U2(l),p(y)})}function z2(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:W},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function U2(l){var d=z2(l);d.next===null&&(d=l.alternate.memoizedState),Kh(l,d.next.queue,{},$s())}function $w(){return Er(df)}function F2(){return zn().memoizedState}function B2(){return zn().memoizedState}function JG(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=$s();l=Bo(p);var y=Ho(d,l,p);y!==null&&(ps(y,d,p),Bh(y,d,p)),d={cache:hw()},l.payload=d;return}d=d.return}}function YG(l,d,p){var y=$s();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Rg(l)?q2(d,p):(p=tw(l,d,p,y),p!==null&&(ps(p,l,y),V2(p,d,y)))}function H2(l,d,p){var y=$s();Kh(l,d,p,y)}function Kh(l,d,p,y){var v={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Rg(l))q2(d,v);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=d.lastRenderedReducer,_!==null))try{var E=d.lastRenderedState,M=_(E,p);if(v.hasEagerState=!0,v.eagerState=M,Is(M,E))return fg(l,d,v,0),un===null&&hg(),!1}catch{}if(p=tw(l,d,v,y),p!==null)return ps(p,l,y),V2(p,d,y),!0}return!1}function Lw(l,d,p,y){if(y={lane:2,revertLane:g_(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Rg(l)){if(d)throw Error(r(479))}else d=tw(l,p,y,2),d!==null&&ps(d,l,2)}function Rg(l){var d=l.alternate;return l===_t||d!==null&&d===_t}function q2(l,d){Cu=Cg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function V2(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,JN(l,p)}}var Zh={readContext:Er,use:Ng,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};Zh.useEffectEvent=On;var G2={readContext:Er,use:Ng,useCallback:function(l,d){return Qr().memoizedState=[l,d===void 0?null:d],l},useContext:Er,useEffect:N2,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Ig(4194308,4,R2.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Ig(4194308,4,l,d)},useInsertionEffect:function(l,d){Ig(4,2,l,d)},useMemo:function(l,d){var p=Qr();d=d===void 0?null:d;var y=l();if(rc){Yr(!0);try{l()}finally{Yr(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=Qr();if(p!==void 0){var v=p(d);if(rc){Yr(!0);try{p(d)}finally{Yr(!1)}}}else v=d;return y.memoizedState=y.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},y.queue=l,l=l.dispatch=YG.bind(null,_t,l),[y.memoizedState,l]},useRef:function(l){var d=Qr();return l={current:l},d.memoizedState=l},useState:function(l){l=Iw(l);var d=l.queue,p=H2.bind(null,_t,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:Pw,useDeferredValue:function(l,d){var p=Qr();return Mw(p,l,d)},useTransition:function(){var l=Iw(!1);return l=L2.bind(null,_t,l.queue,!0,!1),Qr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=_t,v=Qr();if(Dt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),un===null)throw Error(r(349));(Pt&127)!==0||f2(y,d,p)}v.memoizedState=p;var _={value:p,getSnapshot:d};return v.queue=_,N2(m2.bind(null,y,_,l),[l]),y.flags|=2048,ju(9,{destroy:void 0},p2.bind(null,y,_,p,d),null),p},useId:function(){var l=Qr(),d=un.identifierPrefix;if(Dt){var p=gi,y=mi;p=(y&~(1<<32-Bt(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Eg++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=qG++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:$w,useFormState:S2,useActionState:S2,useOptimistic:function(l){var d=Qr();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=Lw.bind(null,_t,!0,p),p.dispatch=d,[l,d]},useMemoCache:jw,useCacheRefresh:function(){return Qr().memoizedState=JG.bind(null,_t)},useEffectEvent:function(l){var d=Qr(),p={impl:l};return d.memoizedState=p,function(){if((Wt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},zw={readContext:Er,use:Ng,useCallback:M2,useContext:Er,useEffect:Rw,useImperativeHandle:P2,useInsertionEffect:I2,useLayoutEffect:O2,useMemo:D2,useReducer:Ag,useRef:j2,useState:function(){return Ag(Qi)},useDebugValue:Pw,useDeferredValue:function(l,d){var p=zn();return $2(p,an.memoizedState,l,d)},useTransition:function(){var l=Ag(Qi)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Gh(l),d]},useSyncExternalStore:h2,useId:F2,useHostTransitionStatus:$w,useFormState:T2,useActionState:T2,useOptimistic:function(l,d){var p=zn();return b2(p,an,l,d)},useMemoCache:jw,useCacheRefresh:B2};zw.useEffectEvent=A2;var K2={readContext:Er,use:Ng,useCallback:M2,useContext:Er,useEffect:Rw,useImperativeHandle:P2,useInsertionEffect:I2,useLayoutEffect:O2,useMemo:D2,useReducer:Aw,useRef:j2,useState:function(){return Aw(Qi)},useDebugValue:Pw,useDeferredValue:function(l,d){var p=zn();return an===null?Mw(p,l,d):$2(p,an.memoizedState,l,d)},useTransition:function(){var l=Aw(Qi)[0],d=zn().memoizedState;return[typeof l=="boolean"?l:Gh(l),d]},useSyncExternalStore:h2,useId:F2,useHostTransitionStatus:$w,useFormState:E2,useActionState:E2,useOptimistic:function(l,d){var p=zn();return an!==null?b2(p,an,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:jw,useCacheRefresh:B2};K2.useEffectEvent=A2;function Uw(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:m({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var Fw={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=$s(),v=Bo(y);v.payload=d,p!=null&&(v.callback=p),d=Ho(l,v,y),d!==null&&(ps(d,l,y),Bh(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=$s(),v=Bo(y);v.tag=1,v.payload=d,p!=null&&(v.callback=p),d=Ho(l,v,y),d!==null&&(ps(d,l,y),Bh(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=$s(),y=Bo(p);y.tag=2,d!=null&&(y.callback=d),d=Ho(l,y,p),d!==null&&(ps(d,l,p),Bh(d,l,p))}};function Z2(l,d,p,y,v,_,E){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,_,E):d.prototype&&d.prototype.isPureReactComponent?!Ph(p,y)||!Ph(v,_):!0}function W2(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&Fw.enqueueReplaceState(d,d.state,null)}function sc(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=m({},p));for(var v in l)p[v]===void 0&&(p[v]=l[v])}return p}function J2(l){dg(l)}function Y2(l){console.error(l)}function Q2(l){dg(l)}function Pg(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function X2(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Bw(l,d,p){return p=Bo(p),p.tag=3,p.payload={element:null},p.callback=function(){Pg(l,d)},p}function eI(l){return l=Bo(l),l.tag=3,l}function tI(l,d,p,y){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var _=y.value;l.payload=function(){return v(_)},l.callback=function(){X2(d,p,y)}}var E=p.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(l.callback=function(){X2(d,p,y),typeof v!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var M=y.stack;this.componentDidCatch(y.value,{componentStack:M!==null?M:""})})}function QG(l,d,p,y,v){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&vu(d,p,v,!0),p=Rs.current,p!==null){switch(p.tag){case 31:case 13:return ua===null?Gg():p.alternate===null&&Rn===0&&(Rn=3),p.flags&=-257,p.flags|=65536,p.lanes=v,y===wg?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),f_(l,y,v)),!1;case 22:return p.flags|=65536,y===wg?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),f_(l,y,v)),!1}throw Error(r(435,p.tag))}return f_(l,y,v),Gg(),!1}if(Dt)return d=Rs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=v,y!==ow&&(l=Error(r(422),{cause:y}),$h(ia(l,p)))):(y!==ow&&(d=Error(r(423),{cause:y}),$h(ia(d,p))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,y=ia(y,p),v=Bw(l.stateNode,y,v),bw(l,v),Rn!==4&&(Rn=2)),!1;var _=Error(r(520),{cause:y});if(_=ia(_,p),nf===null?nf=[_]:nf.push(_),Rn!==4&&(Rn=2),d===null)return!0;y=ia(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=v&-v,p.lanes|=l,l=Bw(p.stateNode,y,l),bw(p,l),!1;case 1:if(d=p.type,_=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Wo===null||!Wo.has(_))))return p.flags|=65536,v&=-v,p.lanes|=v,v=eI(v),tI(v,l,p,y),bw(p,v),!1}p=p.return}while(p!==null);return!1}var Hw=Error(r(461)),Vn=!1;function jr(l,d,p,y){d.child=l===null?a2(d,null,p,y):nc(d,l.child,p,y)}function nI(l,d,p,y,v){p=p.render;var _=d.ref;if("ref"in y){var E={};for(var M in y)M!=="ref"&&(E[M]=y[M])}else E=y;return Ql(d),y=Sw(l,d,p,E,_,v),M=Tw(),l!==null&&!Vn?(Cw(l,d,v),Xi(l,d,v)):(Dt&&M&&aw(d),d.flags|=1,jr(l,d,y,v),d.child)}function rI(l,d,p,y,v){if(l===null){var _=p.type;return typeof _=="function"&&!nw(_)&&_.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=_,sI(l,d,_,y,v)):(l=mg(p.type,null,y,d,d.mode,v),l.ref=d.ref,l.return=d,d.child=l)}if(_=l.child,!Yw(l,v)){var E=_.memoizedProps;if(p=p.compare,p=p!==null?p:Ph,p(E,y)&&l.ref===d.ref)return Xi(l,d,v)}return d.flags|=1,l=Ki(_,y),l.ref=d.ref,l.return=d,d.child=l}function sI(l,d,p,y,v){if(l!==null){var _=l.memoizedProps;if(Ph(_,y)&&l.ref===d.ref)if(Vn=!1,d.pendingProps=y=_,Yw(l,v))(l.flags&131072)!==0&&(Vn=!0);else return d.lanes=l.lanes,Xi(l,d,v)}return qw(l,d,p,y,v)}function aI(l,d,p,y){var v=y.children,_=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(_=_!==null?_.baseLanes|p:p,l!==null){for(y=d.child=l.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;y=v&~_}else y=0,d.child=null;return iI(l,d,_,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&xg(d,_!==null?_.cachePool:null),_!==null?l2(d,_):vw(),c2(d);else return y=d.lanes=536870912,iI(l,d,_!==null?_.baseLanes|p:p,p,y)}else _!==null?(xg(d,_.cachePool),l2(d,_),Vo(),d.memoizedState=null):(l!==null&&xg(d,null),vw(),Vo());return jr(l,d,v,p),d.child}function Wh(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function iI(l,d,p,y,v){var _=pw();return _=_===null?null:{parent:Hn._currentValue,pool:_},d.memoizedState={baseLanes:p,cachePool:_},l!==null&&xg(d,null),vw(),c2(d),l!==null&&vu(l,d,y,!0),d.childLanes=v,null}function Mg(l,d){return d=$g({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function oI(l,d,p){return nc(d,l.child,null,p),l=Mg(d,d.pendingProps),l.flags|=2,Ps(d),d.memoizedState=null,l}function XG(l,d,p){var y=d.pendingProps,v=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Dt){if(y.mode==="hidden")return l=Mg(d,y),d.lanes=536870912,Wh(null,l);if(_w(d),(l=yn)?(l=xO(l,ca),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:$o!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},p=qA(l),p.return=d,d.child=p,Cr=d,yn=null)):l=null,l===null)throw zo(d);return d.lanes=536870912,null}return Mg(d,y)}var _=l.memoizedState;if(_!==null){var E=_.dehydrated;if(_w(d),v)if(d.flags&256)d.flags&=-257,d=oI(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Vn||vu(l,d,p,!1),v=(p&l.childLanes)!==0,Vn||v){if(y=un,y!==null&&(E=YN(y,p),E!==0&&E!==_.retryLane))throw _.retryLane=E,Zl(l,E),ps(y,l,E),Hw;Gg(),d=oI(l,d,p)}else l=_.treeContext,yn=da(E.nextSibling),Cr=d,Dt=!0,Lo=null,ca=!1,l!==null&&KA(d,l),d=Mg(d,y),d.flags|=4096;return d}return l=Ki(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function Dg(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function qw(l,d,p,y,v){return Ql(d),p=Sw(l,d,p,y,void 0,v),y=Tw(),l!==null&&!Vn?(Cw(l,d,v),Xi(l,d,v)):(Dt&&y&&aw(d),d.flags|=1,jr(l,d,p,v),d.child)}function lI(l,d,p,y,v,_){return Ql(d),d.updateQueue=null,p=d2(d,y,p,v),u2(l),y=Tw(),l!==null&&!Vn?(Cw(l,d,_),Xi(l,d,_)):(Dt&&y&&aw(d),d.flags|=1,jr(l,d,p,_),d.child)}function cI(l,d,p,y,v){if(Ql(d),d.stateNode===null){var _=gu,E=p.contextType;typeof E=="object"&&E!==null&&(_=Er(E)),_=new p(y,_),d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Fw,d.stateNode=_,_._reactInternals=d,_=d.stateNode,_.props=y,_.state=d.memoizedState,_.refs={},gw(d),E=p.contextType,_.context=typeof E=="object"&&E!==null?Er(E):gu,_.state=d.memoizedState,E=p.getDerivedStateFromProps,typeof E=="function"&&(Uw(d,p,E,y),_.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(E=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),E!==_.state&&Fw.enqueueReplaceState(_,_.state,null),qh(d,y,_,v),Hh(),_.state=d.memoizedState),typeof _.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){_=d.stateNode;var M=d.memoizedProps,q=sc(p,M);_.props=q;var le=_.context,ve=p.contextType;E=gu,typeof ve=="object"&&ve!==null&&(E=Er(ve));var Ce=p.getDerivedStateFromProps;ve=typeof Ce=="function"||typeof _.getSnapshotBeforeUpdate=="function",M=d.pendingProps!==M,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M||le!==E)&&W2(d,_,y,E),Fo=!1;var ue=d.memoizedState;_.state=ue,qh(d,y,_,v),Hh(),le=d.memoizedState,M||ue!==le||Fo?(typeof Ce=="function"&&(Uw(d,p,Ce,y),le=d.memoizedState),(q=Fo||Z2(d,p,q,y,ue,le,E))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(d.flags|=4194308)):(typeof _.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=le),_.props=y,_.state=le,_.context=E,y=q):(typeof _.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{_=d.stateNode,yw(l,d),E=d.memoizedProps,ve=sc(p,E),_.props=ve,Ce=d.pendingProps,ue=_.context,le=p.contextType,q=gu,typeof le=="object"&&le!==null&&(q=Er(le)),M=p.getDerivedStateFromProps,(le=typeof M=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(E!==Ce||ue!==q)&&W2(d,_,y,q),Fo=!1,ue=d.memoizedState,_.state=ue,qh(d,y,_,v),Hh();var ge=d.memoizedState;E!==Ce||ue!==ge||Fo||l!==null&&l.dependencies!==null&&yg(l.dependencies)?(typeof M=="function"&&(Uw(d,p,M,y),ge=d.memoizedState),(ve=Fo||Z2(d,p,ve,y,ue,ge,q)||l!==null&&l.dependencies!==null&&yg(l.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(y,ge,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(y,ge,q)),typeof _.componentDidUpdate=="function"&&(d.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof _.componentDidUpdate!="function"||E===l.memoizedProps&&ue===l.memoizedState||(d.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===l.memoizedProps&&ue===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=ge),_.props=y,_.state=ge,_.context=q,y=ve):(typeof _.componentDidUpdate!="function"||E===l.memoizedProps&&ue===l.memoizedState||(d.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===l.memoizedProps&&ue===l.memoizedState||(d.flags|=1024),y=!1)}return _=y,Dg(l,d),y=(d.flags&128)!==0,_||y?(_=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:_.render(),d.flags|=1,l!==null&&y?(d.child=nc(d,l.child,null,v),d.child=nc(d,null,p,v)):jr(l,d,p,v),d.memoizedState=_.state,l=d.child):l=Xi(l,d,v),l}function uI(l,d,p,y){return Jl(),d.flags|=256,jr(l,d,p,y),d.child}var Vw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gw(l){return{baseLanes:l,cachePool:XA()}}function Kw(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=Ds),l}function dI(l,d,p){var y=d.pendingProps,v=!1,_=(d.flags&128)!==0,E;if((E=_)||(E=l!==null&&l.memoizedState===null?!1:(Ln.current&2)!==0),E&&(v=!0,d.flags&=-129),E=(d.flags&32)!==0,d.flags&=-33,l===null){if(Dt){if(v?qo(d):Vo(),(l=yn)?(l=xO(l,ca),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:$o!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},p=qA(l),p.return=d,d.child=p,Cr=d,yn=null)):l=null,l===null)throw zo(d);return N_(l)?d.lanes=32:d.lanes=536870912,null}var M=y.children;return y=y.fallback,v?(Vo(),v=d.mode,M=$g({mode:"hidden",children:M},v),y=Wl(y,v,p,null),M.return=d,y.return=d,M.sibling=y,d.child=M,y=d.child,y.memoizedState=Gw(p),y.childLanes=Kw(l,E,p),d.memoizedState=Vw,Wh(null,y)):(qo(d),Zw(d,M))}var q=l.memoizedState;if(q!==null&&(M=q.dehydrated,M!==null)){if(_)d.flags&256?(qo(d),d.flags&=-257,d=Ww(l,d,p)):d.memoizedState!==null?(Vo(),d.child=l.child,d.flags|=128,d=null):(Vo(),M=y.fallback,v=d.mode,y=$g({mode:"visible",children:y.children},v),M=Wl(M,v,p,null),M.flags|=2,y.return=d,M.return=d,y.sibling=M,d.child=y,nc(d,l.child,null,p),y=d.child,y.memoizedState=Gw(p),y.childLanes=Kw(l,E,p),d.memoizedState=Vw,d=Wh(null,y));else if(qo(d),N_(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var le=E.dgst;E=le,y=Error(r(419)),y.stack="",y.digest=E,$h({value:y,source:null,stack:null}),d=Ww(l,d,p)}else if(Vn||vu(l,d,p,!1),E=(p&l.childLanes)!==0,Vn||E){if(E=un,E!==null&&(y=YN(E,p),y!==0&&y!==q.retryLane))throw q.retryLane=y,Zl(l,y),ps(E,l,y),Hw;j_(M)||Gg(),d=Ww(l,d,p)}else j_(M)?(d.flags|=192,d.child=l.child,d=null):(l=q.treeContext,yn=da(M.nextSibling),Cr=d,Dt=!0,Lo=null,ca=!1,l!==null&&KA(d,l),d=Zw(d,y.children),d.flags|=4096);return d}return v?(Vo(),M=y.fallback,v=d.mode,q=l.child,le=q.sibling,y=Ki(q,{mode:"hidden",children:y.children}),y.subtreeFlags=q.subtreeFlags&65011712,le!==null?M=Ki(le,M):(M=Wl(M,v,p,null),M.flags|=2),M.return=d,y.return=d,y.sibling=M,d.child=y,Wh(null,y),y=d.child,M=l.child.memoizedState,M===null?M=Gw(p):(v=M.cachePool,v!==null?(q=Hn._currentValue,v=v.parent!==q?{parent:q,pool:q}:v):v=XA(),M={baseLanes:M.baseLanes|p,cachePool:v}),y.memoizedState=M,y.childLanes=Kw(l,E,p),d.memoizedState=Vw,Wh(l.child,y)):(qo(d),p=l.child,l=p.sibling,p=Ki(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(E=d.deletions,E===null?(d.deletions=[l],d.flags|=16):E.push(l)),d.child=p,d.memoizedState=null,p)}function Zw(l,d){return d=$g({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function $g(l,d){return l=Os(22,l,null,d),l.lanes=0,l}function Ww(l,d,p){return nc(d,l.child,null,p),l=Zw(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function hI(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),uw(l.return,d,p)}function Jw(l,d,p,y,v,_){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:v,treeForkCount:_}:(E.isBackwards=d,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=v,E.treeForkCount=_)}function fI(l,d,p){var y=d.pendingProps,v=y.revealOrder,_=y.tail;y=y.children;var E=Ln.current,M=(E&2)!==0;if(M?(E=E&1|2,d.flags|=128):E&=1,O(Ln,E),jr(l,d,y,p),y=Dt?Dh:0,!M&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&hI(l,p,d);else if(l.tag===19)hI(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(v){case"forwards":for(p=d.child,v=null;p!==null;)l=p.alternate,l!==null&&Tg(l)===null&&(v=p),p=p.sibling;p=v,p===null?(v=d.child,d.child=null):(v=p.sibling,p.sibling=null),Jw(d,!1,v,p,_,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,v=d.child,d.child=null;v!==null;){if(l=v.alternate,l!==null&&Tg(l)===null){d.child=v;break}l=v.sibling,v.sibling=p,p=v,v=l}Jw(d,!0,p,null,_,y);break;case"together":Jw(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Xi(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),Zo|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(vu(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Ki(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Ki(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function Yw(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&yg(l)))}function eK(l,d,p){switch(d.tag){case 3:ne(d,d.stateNode.containerInfo),Uo(d,Hn,l.memoizedState.cache),Jl();break;case 27:case 5:re(d);break;case 4:ne(d,d.stateNode.containerInfo);break;case 10:Uo(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,_w(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(qo(d),d.flags|=128,null):(p&d.child.childLanes)!==0?dI(l,d,p):(qo(d),l=Xi(l,d,p),l!==null?l.sibling:null);qo(d);break;case 19:var v=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(vu(l,d,p,!1),y=(p&d.childLanes)!==0),v){if(y)return fI(l,d,p);d.flags|=128}if(v=d.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),O(Ln,Ln.current),y)break;return null;case 22:return d.lanes=0,aI(l,d,p,d.pendingProps);case 24:Uo(d,Hn,l.memoizedState.cache)}return Xi(l,d,p)}function pI(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Vn=!0;else{if(!Yw(l,p)&&(d.flags&128)===0)return Vn=!1,eK(l,d,p);Vn=(l.flags&131072)!==0}else Vn=!1,Dt&&(d.flags&1048576)!==0&&GA(d,Dh,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=ec(d.elementType),d.type=l,typeof l=="function")nw(l)?(y=sc(l,y),d.tag=1,d=cI(null,d,l,y,p)):(d.tag=0,d=qw(null,d,l,y,p));else{if(l!=null){var v=l.$$typeof;if(v===P){d.tag=11,d=nI(null,d,l,y,p);break e}else if(v===U){d.tag=14,d=rI(null,d,l,y,p);break e}}throw d=G(l)||l,Error(r(306,d,""))}}return d;case 0:return qw(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,v=sc(y,d.pendingProps),cI(l,d,y,v,p);case 3:e:{if(ne(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var _=d.memoizedState;v=_.element,yw(l,d),qh(d,y,null,p);var E=d.memoizedState;if(y=E.cache,Uo(d,Hn,y),y!==_.cache&&dw(d,[Hn],p,!0),Hh(),y=E.element,_.isDehydrated)if(_={element:y,isDehydrated:!1,cache:E.cache},d.updateQueue.baseState=_,d.memoizedState=_,d.flags&256){d=uI(l,d,y,p);break e}else if(y!==v){v=ia(Error(r(424)),d),$h(v),d=uI(l,d,y,p);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,yn=da(l.firstChild),Cr=d,Dt=!0,Lo=null,ca=!0,p=a2(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Jl(),y===v){d=Xi(l,d,p);break e}jr(l,d,y,p)}d=d.child}return d;case 26:return Dg(l,d),l===null?(p=TO(d.type,null,d.pendingProps,null))?d.memoizedState=p:Dt||(p=d.type,l=d.pendingProps,y=Xg(I.current).createElement(p),y[Tr]=d,y[ls]=l,Nr(y,p,l),gr(y),d.stateNode=y):d.memoizedState=TO(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return re(d),l===null&&Dt&&(y=d.stateNode=_O(d.type,d.pendingProps,I.current),Cr=d,ca=!0,v=yn,Xo(d.type)?(A_=v,yn=da(y.firstChild)):yn=v),jr(l,d,d.pendingProps.children,p),Dg(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Dt&&((v=y=yn)&&(y=AK(y,d.type,d.pendingProps,ca),y!==null?(d.stateNode=y,Cr=d,yn=da(y.firstChild),ca=!1,v=!0):v=!1),v||zo(d)),re(d),v=d.type,_=d.pendingProps,E=l!==null?l.memoizedProps:null,y=_.children,T_(v,_)?y=null:E!==null&&T_(v,E)&&(d.flags|=32),d.memoizedState!==null&&(v=Sw(l,d,VG,null,null,p),df._currentValue=v),Dg(l,d),jr(l,d,y,p),d.child;case 6:return l===null&&Dt&&((l=p=yn)&&(p=IK(p,d.pendingProps,ca),p!==null?(d.stateNode=p,Cr=d,yn=null,l=!0):l=!1),l||zo(d)),null;case 13:return dI(l,d,p);case 4:return ne(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=nc(d,null,y,p):jr(l,d,y,p),d.child;case 11:return nI(l,d,d.type,d.pendingProps,p);case 7:return jr(l,d,d.pendingProps,p),d.child;case 8:return jr(l,d,d.pendingProps.children,p),d.child;case 12:return jr(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,Uo(d,d.type,y.value),jr(l,d,y.children,p),d.child;case 9:return v=d.type._context,y=d.pendingProps.children,Ql(d),v=Er(v),y=y(v),d.flags|=1,jr(l,d,y,p),d.child;case 14:return rI(l,d,d.type,d.pendingProps,p);case 15:return sI(l,d,d.type,d.pendingProps,p);case 19:return fI(l,d,p);case 31:return XG(l,d,p);case 22:return aI(l,d,p,d.pendingProps);case 24:return Ql(d),y=Er(Hn),l===null?(v=pw(),v===null&&(v=un,_=hw(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=p),v=_),d.memoizedState={parent:y,cache:v},gw(d),Uo(d,Hn,v)):((l.lanes&p)!==0&&(yw(l,d),qh(d,null,null,p),Hh()),v=l.memoizedState,_=d.memoizedState,v.parent!==y?(v={parent:y,cache:y},d.memoizedState=v,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=v),Uo(d,Hn,y)):(y=_.cache,Uo(d,Hn,y),y!==v.cache&&dw(d,[Hn],p,!0))),jr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function eo(l){l.flags|=4}function Qw(l,d,p,y,v){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(v&335544128)===v)if(l.stateNode.complete)l.flags|=8192;else if(FI())l.flags|=8192;else throw tc=wg,mw}else l.flags&=-16777217}function mI(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!AO(d))if(FI())l.flags|=8192;else throw tc=wg,mw}function Lg(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?ZN():536870912,l.lanes|=d,Ou|=d)}function Jh(l,d){if(!Dt)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function bn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags&65011712,y|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function tK(l,d,p){var y=d.pendingProps;switch(iw(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(d),null;case 1:return bn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),Ji(Hn),K(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(xu(d)?eo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,lw())),bn(d),null;case 26:var v=d.type,_=d.memoizedState;return l===null?(eo(d),_!==null?(bn(d),mI(d,_)):(bn(d),Qw(d,v,null,y,p))):_?_!==l.memoizedState?(eo(d),bn(d),mI(d,_)):(bn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&eo(d),bn(d),Qw(d,v,l,y,p)),null;case 27:if(be(d),p=I.current,v=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&eo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return bn(d),null}l=V.current,xu(d)?ZA(d):(l=_O(v,y,p),d.stateNode=l,eo(d))}return bn(d),null;case 5:if(be(d),v=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&eo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return bn(d),null}if(_=V.current,xu(d))ZA(d);else{var E=Xg(I.current);switch(_){case 1:_=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=E.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?_.multiple=!0:y.size&&(_.size=y.size);break;default:_=typeof y.is=="string"?E.createElement(v,{is:y.is}):E.createElement(v)}}_[Tr]=d,_[ls]=y;e:for(E=d.child;E!==null;){if(E.tag===5||E.tag===6)_.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break e;for(;E.sibling===null;){if(E.return===null||E.return===d)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}d.stateNode=_;e:switch(Nr(_,v,y),v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&eo(d)}}return bn(d),Qw(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&eo(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=I.current,xu(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,v=Cr,v!==null)switch(v.tag){case 27:case 5:y=v.memoizedProps}l[Tr]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||dO(l.nodeValue,p)),l||zo(d,!0)}else l=Xg(l).createTextNode(y),l[Tr]=d,d.stateNode=l}return bn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=xu(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Tr]=d}else Jl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;bn(d),l=!1}else p=lw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Ps(d),d):(Ps(d),null);if((d.flags&128)!==0)throw Error(r(558))}return bn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=xu(d),y!==null&&y.dehydrated!==null){if(l===null){if(!v)throw Error(r(318));if(v=d.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Tr]=d}else Jl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;bn(d),v=!1}else v=lw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return d.flags&256?(Ps(d),d):(Ps(d),null)}return Ps(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,v=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(v=y.alternate.memoizedState.cachePool.pool),_=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(_=y.memoizedState.cachePool.pool),_!==v&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),Lg(d,d.updateQueue),bn(d),null);case 4:return K(),l===null&&v_(d.stateNode.containerInfo),bn(d),null;case 10:return Ji(d.type),bn(d),null;case 19:if(Q(Ln),y=d.memoizedState,y===null)return bn(d),null;if(v=(d.flags&128)!==0,_=y.rendering,_===null)if(v)Jh(y,!1);else{if(Rn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(_=Tg(l),_!==null){for(d.flags|=128,Jh(y,!1),l=_.updateQueue,d.updateQueue=l,Lg(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)HA(p,l),p=p.sibling;return O(Ln,Ln.current&1|2),Dt&&Zi(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&Je()>Hg&&(d.flags|=128,v=!0,Jh(y,!1),d.lanes=4194304)}else{if(!v)if(l=Tg(_),l!==null){if(d.flags|=128,v=!0,l=l.updateQueue,d.updateQueue=l,Lg(d,l),Jh(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!Dt)return bn(d),null}else 2*Je()-y.renderingStartTime>Hg&&p!==536870912&&(d.flags|=128,v=!0,Jh(y,!1),d.lanes=4194304);y.isBackwards?(_.sibling=d.child,d.child=_):(l=y.last,l!==null?l.sibling=_:d.child=_,y.last=_)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=Je(),l.sibling=null,p=Ln.current,O(Ln,v?p&1|2:p&1),Dt&&Zi(d,y.treeForkCount),l):(bn(d),null);case 22:case 23:return Ps(d),ww(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(bn(d),d.subtreeFlags&6&&(d.flags|=8192)):bn(d),p=d.updateQueue,p!==null&&Lg(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&Q(Xl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Ji(Hn),bn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function nK(l,d){switch(iw(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ji(Hn),K(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return be(d),null;case 31:if(d.memoizedState!==null){if(Ps(d),d.alternate===null)throw Error(r(340));Jl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ps(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Jl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Q(Ln),null;case 4:return K(),null;case 10:return Ji(d.type),null;case 22:case 23:return Ps(d),ww(),l!==null&&Q(Xl),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ji(Hn),null;case 25:return null;default:return null}}function gI(l,d){switch(iw(d),d.tag){case 3:Ji(Hn),K();break;case 26:case 27:case 5:be(d);break;case 4:K();break;case 31:d.memoizedState!==null&&Ps(d);break;case 13:Ps(d);break;case 19:Q(Ln);break;case 10:Ji(d.type);break;case 22:case 23:Ps(d),ww(),l!==null&&Q(Xl);break;case 24:Ji(Hn)}}function Yh(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var v=y.next;p=v;do{if((p.tag&l)===l){y=void 0;var _=p.create,E=p.inst;y=_(),E.destroy=y}p=p.next}while(p!==v)}}catch(M){nn(d,d.return,M)}}function Go(l,d,p){try{var y=d.updateQueue,v=y!==null?y.lastEffect:null;if(v!==null){var _=v.next;y=_;do{if((y.tag&l)===l){var E=y.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,v=d;var q=p,le=M;try{le()}catch(ve){nn(v,q,ve)}}}y=y.next}while(y!==_)}}catch(ve){nn(d,d.return,ve)}}function yI(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{o2(d,p)}catch(y){nn(l,l.return,y)}}}function bI(l,d,p){p.props=sc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){nn(l,d,y)}}function Qh(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(v){nn(l,d,v)}}function yi(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(v){nn(l,d,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){nn(l,d,v)}else p.current=null}function xI(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(v){nn(l,l.return,v)}}function Xw(l,d,p){try{var y=l.stateNode;SK(y,l.type,p,d),y[ls]=d}catch(v){nn(l,l.return,v)}}function vI(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Xo(l.type)||l.tag===4}function e_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||vI(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Xo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function t_(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Vi));else if(y!==4&&(y===27&&Xo(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(t_(l,d,p),l=l.sibling;l!==null;)t_(l,d,p),l=l.sibling}function zg(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&Xo(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(zg(l,d,p),l=l.sibling;l!==null;)zg(l,d,p),l=l.sibling}function wI(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,v=d.attributes;v.length;)d.removeAttributeNode(v[0]);Nr(d,y,p),d[Tr]=l,d[ls]=p}catch(_){nn(l,l.return,_)}}var to=!1,Gn=!1,n_=!1,_I=typeof WeakSet=="function"?WeakSet:Set,yr=null;function rK(l,d){if(l=l.containerInfo,k_=iy,l=PA(l),Wv(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var v=y.anchorOffset,_=y.focusNode;y=y.focusOffset;try{p.nodeType,_.nodeType}catch{p=null;break e}var E=0,M=-1,q=-1,le=0,ve=0,Ce=l,ue=null;t:for(;;){for(var ge;Ce!==p||v!==0&&Ce.nodeType!==3||(M=E+v),Ce!==_||y!==0&&Ce.nodeType!==3||(q=E+y),Ce.nodeType===3&&(E+=Ce.nodeValue.length),(ge=Ce.firstChild)!==null;)ue=Ce,Ce=ge;for(;;){if(Ce===l)break t;if(ue===p&&++le===v&&(M=E),ue===_&&++ve===y&&(q=E),(ge=Ce.nextSibling)!==null)break;Ce=ue,ue=Ce.parentNode}Ce=ge}p=M===-1||q===-1?null:{start:M,end:q}}else p=null}p=p||{start:0,end:0}}else p=null;for(S_={focusedElem:l,selectionRange:p},iy=!1,yr=d;yr!==null;)if(d=yr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,yr=l;else for(;yr!==null;){switch(d=yr,_=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)v=l[p],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,p=d,v=_.memoizedProps,_=_.memoizedState,y=p.stateNode;try{var Ve=sc(p.type,v);l=y.getSnapshotBeforeUpdate(Ve,_),y.__reactInternalSnapshotBeforeUpdate=l}catch(ht){nn(p,p.return,ht)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)E_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":E_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,yr=l;break}yr=d.return}}function kI(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:ro(l,p),y&4&&Yh(5,p);break;case 1:if(ro(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(E){nn(p,p.return,E)}else{var v=sc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(v,d,l.__reactInternalSnapshotBeforeUpdate)}catch(E){nn(p,p.return,E)}}y&64&&yI(p),y&512&&Qh(p,p.return);break;case 3:if(ro(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{o2(l,d)}catch(E){nn(p,p.return,E)}}break;case 27:d===null&&y&4&&wI(p);case 26:case 5:ro(l,p),d===null&&y&4&&xI(p),y&512&&Qh(p,p.return);break;case 12:ro(l,p);break;case 31:ro(l,p),y&4&&CI(l,p);break;case 13:ro(l,p),y&4&&EI(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=hK.bind(null,p),OK(l,p))));break;case 22:if(y=p.memoizedState!==null||to,!y){d=d!==null&&d.memoizedState!==null||Gn,v=to;var _=Gn;to=y,(Gn=d)&&!_?so(l,p,(p.subtreeFlags&8772)!==0):ro(l,p),to=v,Gn=_}break;case 30:break;default:ro(l,p)}}function SI(l){var d=l.alternate;d!==null&&(l.alternate=null,SI(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Ov(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var wn=null,us=!1;function no(l,d,p){for(p=p.child;p!==null;)TI(l,d,p),p=p.sibling}function TI(l,d,p){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Bn,p)}catch{}switch(p.tag){case 26:Gn||yi(p,d),no(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Gn||yi(p,d);var y=wn,v=us;Xo(p.type)&&(wn=p.stateNode,us=!1),no(l,d,p),lf(p.stateNode),wn=y,us=v;break;case 5:Gn||yi(p,d);case 6:if(y=wn,v=us,wn=null,no(l,d,p),wn=y,us=v,wn!==null)if(us)try{(wn.nodeType===9?wn.body:wn.nodeName==="HTML"?wn.ownerDocument.body:wn).removeChild(p.stateNode)}catch(_){nn(p,d,_)}else try{wn.removeChild(p.stateNode)}catch(_){nn(p,d,_)}break;case 18:wn!==null&&(us?(l=wn,yO(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Uu(l)):yO(wn,p.stateNode));break;case 4:y=wn,v=us,wn=p.stateNode.containerInfo,us=!0,no(l,d,p),wn=y,us=v;break;case 0:case 11:case 14:case 15:Go(2,p,d),Gn||Go(4,p,d),no(l,d,p);break;case 1:Gn||(yi(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&bI(p,d,y)),no(l,d,p);break;case 21:no(l,d,p);break;case 22:Gn=(y=Gn)||p.memoizedState!==null,no(l,d,p),Gn=y;break;default:no(l,d,p)}}function CI(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Uu(l)}catch(p){nn(d,d.return,p)}}}function EI(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Uu(l)}catch(p){nn(d,d.return,p)}}function sK(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new _I),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new _I),d;default:throw Error(r(435,l.tag))}}function Ug(l,d){var p=sK(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var v=fK.bind(null,l,y);y.then(v,v)}})}function ds(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var v=p[y],_=l,E=d,M=E;e:for(;M!==null;){switch(M.tag){case 27:if(Xo(M.type)){wn=M.stateNode,us=!1;break e}break;case 5:wn=M.stateNode,us=!1;break e;case 3:case 4:wn=M.stateNode.containerInfo,us=!0;break e}M=M.return}if(wn===null)throw Error(r(160));TI(_,E,v),wn=null,us=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)jI(d,l),d=d.sibling}var Pa=null;function jI(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ds(d,l),hs(l),y&4&&(Go(3,l,l.return),Yh(3,l),Go(5,l,l.return));break;case 1:ds(d,l),hs(l),y&512&&(Gn||p===null||yi(p,p.return)),y&64&&to&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var v=Pa;if(ds(d,l),hs(l),y&512&&(Gn||p===null||yi(p,p.return)),y&4){var _=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,v=v.ownerDocument||v;t:switch(y){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Th]||_[Tr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(y),v.head.insertBefore(_,v.querySelector("head > title"))),Nr(_,y,p),_[Tr]=l,gr(_),y=_;break e;case"link":var E=jO("link","href",v).get(y+(p.href||""));if(E){for(var M=0;M<E.length;M++)if(_=E[M],_.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&_.getAttribute("rel")===(p.rel==null?null:p.rel)&&_.getAttribute("title")===(p.title==null?null:p.title)&&_.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){E.splice(M,1);break t}}_=v.createElement(y),Nr(_,y,p),v.head.appendChild(_);break;case"meta":if(E=jO("meta","content",v).get(y+(p.content||""))){for(M=0;M<E.length;M++)if(_=E[M],_.getAttribute("content")===(p.content==null?null:""+p.content)&&_.getAttribute("name")===(p.name==null?null:p.name)&&_.getAttribute("property")===(p.property==null?null:p.property)&&_.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&_.getAttribute("charset")===(p.charSet==null?null:p.charSet)){E.splice(M,1);break t}}_=v.createElement(y),Nr(_,y,p),v.head.appendChild(_);break;default:throw Error(r(468,y))}_[Tr]=l,gr(_),y=_}l.stateNode=y}else NO(v,l.type,l.stateNode);else l.stateNode=EO(v,y,l.memoizedProps);else _!==y?(_===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):_.count--,y===null?NO(v,l.type,l.stateNode):EO(v,y,l.memoizedProps)):y===null&&l.stateNode!==null&&Xw(l,l.memoizedProps,p.memoizedProps)}break;case 27:ds(d,l),hs(l),y&512&&(Gn||p===null||yi(p,p.return)),p!==null&&y&4&&Xw(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ds(d,l),hs(l),y&512&&(Gn||p===null||yi(p,p.return)),l.flags&32){v=l.stateNode;try{cu(v,"")}catch(Ve){nn(l,l.return,Ve)}}y&4&&l.stateNode!=null&&(v=l.memoizedProps,Xw(l,v,p!==null?p.memoizedProps:v)),y&1024&&(n_=!0);break;case 6:if(ds(d,l),hs(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Ve){nn(l,l.return,Ve)}}break;case 3:if(ny=null,v=Pa,Pa=ey(d.containerInfo),ds(d,l),Pa=v,hs(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Uu(d.containerInfo)}catch(Ve){nn(l,l.return,Ve)}n_&&(n_=!1,NI(l));break;case 4:y=Pa,Pa=ey(l.stateNode.containerInfo),ds(d,l),hs(l),Pa=y;break;case 12:ds(d,l),hs(l);break;case 31:ds(d,l),hs(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Ug(l,y)));break;case 13:ds(d,l),hs(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Bg=Je()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Ug(l,y)));break;case 22:v=l.memoizedState!==null;var q=p!==null&&p.memoizedState!==null,le=to,ve=Gn;if(to=le||v,Gn=ve||q,ds(d,l),Gn=ve,to=le,hs(l),y&8192)e:for(d=l.stateNode,d._visibility=v?d._visibility&-2:d._visibility|1,v&&(p===null||q||to||Gn||ac(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){q=p=d;try{if(_=q.stateNode,v)E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=q.stateNode;var Ce=q.memoizedProps.style,ue=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;M.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ve){nn(q,q.return,Ve)}}}else if(d.tag===6){if(p===null){q=d;try{q.stateNode.nodeValue=v?"":q.memoizedProps}catch(Ve){nn(q,q.return,Ve)}}}else if(d.tag===18){if(p===null){q=d;try{var ge=q.stateNode;v?bO(ge,!0):bO(q.stateNode,!1)}catch(Ve){nn(q,q.return,Ve)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Ug(l,p))));break;case 19:ds(d,l),hs(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Ug(l,y)));break;case 30:break;case 21:break;default:ds(d,l),hs(l)}}function hs(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(vI(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var v=p.stateNode,_=e_(l);zg(l,_,v);break;case 5:var E=p.stateNode;p.flags&32&&(cu(E,""),p.flags&=-33);var M=e_(l);zg(l,M,E);break;case 3:case 4:var q=p.stateNode.containerInfo,le=e_(l);t_(l,le,q);break;default:throw Error(r(161))}}catch(ve){nn(l,l.return,ve)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function NI(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;NI(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function ro(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)kI(l,d.alternate,d),d=d.sibling}function ac(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Go(4,d,d.return),ac(d);break;case 1:yi(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&bI(d,d.return,p),ac(d);break;case 27:lf(d.stateNode);case 26:case 5:yi(d,d.return),ac(d);break;case 22:d.memoizedState===null&&ac(d);break;case 30:ac(d);break;default:ac(d)}l=l.sibling}}function so(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,v=l,_=d,E=_.flags;switch(_.tag){case 0:case 11:case 15:so(v,_,p),Yh(4,_);break;case 1:if(so(v,_,p),y=_,v=y.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(le){nn(y,y.return,le)}if(y=_,v=y.updateQueue,v!==null){var M=y.stateNode;try{var q=v.shared.hiddenCallbacks;if(q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<q.length;v++)i2(q[v],M)}catch(le){nn(y,y.return,le)}}p&&E&64&&yI(_),Qh(_,_.return);break;case 27:wI(_);case 26:case 5:so(v,_,p),p&&y===null&&E&4&&xI(_),Qh(_,_.return);break;case 12:so(v,_,p);break;case 31:so(v,_,p),p&&E&4&&CI(v,_);break;case 13:so(v,_,p),p&&E&4&&EI(v,_);break;case 22:_.memoizedState===null&&so(v,_,p),Qh(_,_.return);break;case 30:break;default:so(v,_,p)}d=d.sibling}}function r_(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Lh(p))}function s_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Lh(l))}function Ma(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)AI(l,d,p,y),d=d.sibling}function AI(l,d,p,y){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Ma(l,d,p,y),v&2048&&Yh(9,d);break;case 1:Ma(l,d,p,y);break;case 3:Ma(l,d,p,y),v&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Lh(l)));break;case 12:if(v&2048){Ma(l,d,p,y),l=d.stateNode;try{var _=d.memoizedProps,E=_.id,M=_.onPostCommit;typeof M=="function"&&M(E,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(q){nn(d,d.return,q)}}else Ma(l,d,p,y);break;case 31:Ma(l,d,p,y);break;case 13:Ma(l,d,p,y);break;case 23:break;case 22:_=d.stateNode,E=d.alternate,d.memoizedState!==null?_._visibility&2?Ma(l,d,p,y):Xh(l,d):_._visibility&2?Ma(l,d,p,y):(_._visibility|=2,Nu(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),v&2048&&r_(E,d);break;case 24:Ma(l,d,p,y),v&2048&&s_(d.alternate,d);break;default:Ma(l,d,p,y)}}function Nu(l,d,p,y,v){for(v=v&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var _=l,E=d,M=p,q=y,le=E.flags;switch(E.tag){case 0:case 11:case 15:Nu(_,E,M,q,v),Yh(8,E);break;case 23:break;case 22:var ve=E.stateNode;E.memoizedState!==null?ve._visibility&2?Nu(_,E,M,q,v):Xh(_,E):(ve._visibility|=2,Nu(_,E,M,q,v)),v&&le&2048&&r_(E.alternate,E);break;case 24:Nu(_,E,M,q,v),v&&le&2048&&s_(E.alternate,E);break;default:Nu(_,E,M,q,v)}d=d.sibling}}function Xh(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,v=y.flags;switch(y.tag){case 22:Xh(p,y),v&2048&&r_(y.alternate,y);break;case 24:Xh(p,y),v&2048&&s_(y.alternate,y);break;default:Xh(p,y)}d=d.sibling}}var ef=8192;function Au(l,d,p){if(l.subtreeFlags&ef)for(l=l.child;l!==null;)II(l,d,p),l=l.sibling}function II(l,d,p){switch(l.tag){case 26:Au(l,d,p),l.flags&ef&&l.memoizedState!==null&&qK(p,Pa,l.memoizedState,l.memoizedProps);break;case 5:Au(l,d,p);break;case 3:case 4:var y=Pa;Pa=ey(l.stateNode.containerInfo),Au(l,d,p),Pa=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=ef,ef=16777216,Au(l,d,p),ef=y):Au(l,d,p));break;default:Au(l,d,p)}}function OI(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function tf(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];yr=y,PI(y,l)}OI(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)RI(l),l=l.sibling}function RI(l){switch(l.tag){case 0:case 11:case 15:tf(l),l.flags&2048&&Go(9,l,l.return);break;case 3:tf(l);break;case 12:tf(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Fg(l)):tf(l);break;default:tf(l)}}function Fg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];yr=y,PI(y,l)}OI(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Go(8,d,d.return),Fg(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,Fg(d));break;default:Fg(d)}l=l.sibling}}function PI(l,d){for(;yr!==null;){var p=yr;switch(p.tag){case 0:case 11:case 15:Go(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Lh(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,yr=y;else e:for(p=l;yr!==null;){y=yr;var v=y.sibling,_=y.return;if(SI(y),y===p){yr=null;break e}if(v!==null){v.return=_,yr=v;break e}yr=_}}}var aK={getCacheForType:function(l){var d=Er(Hn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Er(Hn).controller.signal}},iK=typeof WeakMap=="function"?WeakMap:Map,Wt=0,un=null,At=null,Pt=0,tn=0,Ms=null,Ko=!1,Iu=!1,a_=!1,ao=0,Rn=0,Zo=0,ic=0,i_=0,Ds=0,Ou=0,nf=null,fs=null,o_=!1,Bg=0,MI=0,Hg=1/0,qg=null,Wo=null,nr=0,Jo=null,Ru=null,io=0,l_=0,c_=null,DI=null,rf=0,u_=null;function $s(){return(Wt&2)!==0&&Pt!==0?Pt&-Pt:L.T!==null?g_():QN()}function $I(){if(Ds===0)if((Pt&536870912)===0||Dt){var l=Qm;Qm<<=1,(Qm&3932160)===0&&(Qm=262144),Ds=l}else Ds=536870912;return l=Rs.current,l!==null&&(l.flags|=32),Ds}function ps(l,d,p){(l===un&&(tn===2||tn===9)||l.cancelPendingCommit!==null)&&(Pu(l,0),Yo(l,Pt,Ds,!1)),Sh(l,p),((Wt&2)===0||l!==un)&&(l===un&&((Wt&2)===0&&(ic|=p),Rn===4&&Yo(l,Pt,Ds,!1)),bi(l))}function LI(l,d,p){if((Wt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||kh(l,d),v=y?cK(l,d):h_(l,d,!0),_=y;do{if(v===0){Iu&&!y&&Yo(l,d,0,!1);break}else{if(p=l.current.alternate,_&&!oK(p)){v=h_(l,d,!1),_=!1;continue}if(v===2){if(_=d,l.errorRecoveryDisabledLanes&_)var E=0;else E=l.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){d=E;e:{var M=l;v=nf;var q=M.current.memoizedState.isDehydrated;if(q&&(Pu(M,E).flags|=256),E=h_(M,E,!1),E!==2){if(a_&&!q){M.errorRecoveryDisabledLanes|=_,ic|=_,v=4;break e}_=fs,fs=v,_!==null&&(fs===null?fs=_:fs.push.apply(fs,_))}v=E}if(_=!1,v!==2)continue}}if(v===1){Pu(l,0),Yo(l,d,0,!0);break}e:{switch(y=l,_=v,_){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Yo(y,d,Ds,!Ko);break e;case 2:fs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(v=Bg+300-Je(),10<v)){if(Yo(y,d,Ds,!Ko),eg(y,0,!0)!==0)break e;io=d,y.timeoutHandle=mO(zI.bind(null,y,p,fs,qg,o_,d,Ds,ic,Ou,Ko,_,"Throttled",-0,0),v);break e}zI(y,p,fs,qg,o_,d,Ds,ic,Ou,Ko,_,null,-0,0)}}break}while(!0);bi(l)}function zI(l,d,p,y,v,_,E,M,q,le,ve,Ce,ue,ge){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},II(d,_,Ce);var Ve=(_&62914560)===_?Bg-Je():(_&4194048)===_?MI-Je():0;if(Ve=VK(Ce,Ve),Ve!==null){io=_,l.cancelPendingCommit=Ve(KI.bind(null,l,d,_,p,y,v,E,M,q,ve,Ce,null,ue,ge)),Yo(l,_,E,!le);return}}KI(l,d,_,p,y,v,E,M,q)}function oK(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var v=p[y],_=v.getSnapshot;v=v.value;try{if(!Is(_(),v))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Yo(l,d,p,y){d&=~i_,d&=~ic,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var v=d;0<v;){var _=31-Bt(v),E=1<<_;y[_]=-1,v&=~E}p!==0&&WN(l,p,d)}function Vg(){return(Wt&6)===0?(sf(0),!1):!0}function d_(){if(At!==null){if(tn===0)var l=At.return;else l=At,Wi=Yl=null,Ew(l),Su=null,Uh=0,l=At;for(;l!==null;)gI(l.alternate,l),l=l.return;At=null}}function Pu(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,EK(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),io=0,d_(),un=l,At=p=Ki(l.current,null),Pt=d,tn=0,Ms=null,Ko=!1,Iu=kh(l,d),a_=!1,Ou=Ds=i_=ic=Zo=Rn=0,fs=nf=null,o_=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var v=31-Bt(y),_=1<<v;d|=l[v],y&=~_}return ao=d,hg(),p}function UI(l,d){_t=null,L.H=Zh,d===ku||d===vg?(d=n2(),tn=3):d===mw?(d=n2(),tn=4):tn=d===Hw?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ms=d,At===null&&(Rn=1,Pg(l,ia(d,l.current)))}function FI(){var l=Rs.current;return l===null?!0:(Pt&4194048)===Pt?ua===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?l===ua:!1}function BI(){var l=L.H;return L.H=Zh,l===null?Zh:l}function HI(){var l=L.A;return L.A=aK,l}function Gg(){Rn=4,Ko||(Pt&4194048)!==Pt&&Rs.current!==null||(Iu=!0),(Zo&134217727)===0&&(ic&134217727)===0||un===null||Yo(un,Pt,Ds,!1)}function h_(l,d,p){var y=Wt;Wt|=2;var v=BI(),_=HI();(un!==l||Pt!==d)&&(qg=null,Pu(l,d)),d=!1;var E=Rn;e:do try{if(tn!==0&&At!==null){var M=At,q=Ms;switch(tn){case 8:d_(),E=6;break e;case 3:case 2:case 9:case 6:Rs.current===null&&(d=!0);var le=tn;if(tn=0,Ms=null,Mu(l,M,q,le),p&&Iu){E=0;break e}break;default:le=tn,tn=0,Ms=null,Mu(l,M,q,le)}}lK(),E=Rn;break}catch(ve){UI(l,ve)}while(!0);return d&&l.shellSuspendCounter++,Wi=Yl=null,Wt=y,L.H=v,L.A=_,At===null&&(un=null,Pt=0,hg()),E}function lK(){for(;At!==null;)qI(At)}function cK(l,d){var p=Wt;Wt|=2;var y=BI(),v=HI();un!==l||Pt!==d?(qg=null,Hg=Je()+500,Pu(l,d)):Iu=kh(l,d);e:do try{if(tn!==0&&At!==null){d=At;var _=Ms;t:switch(tn){case 1:tn=0,Ms=null,Mu(l,d,_,1);break;case 2:case 9:if(e2(_)){tn=0,Ms=null,VI(d);break}d=function(){tn!==2&&tn!==9||un!==l||(tn=7),bi(l)},_.then(d,d);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:e2(_)?(tn=0,Ms=null,VI(d)):(tn=0,Ms=null,Mu(l,d,_,7));break;case 5:var E=null;switch(At.tag){case 26:E=At.memoizedState;case 5:case 27:var M=At;if(E?AO(E):M.stateNode.complete){tn=0,Ms=null;var q=M.sibling;if(q!==null)At=q;else{var le=M.return;le!==null?(At=le,Kg(le)):At=null}break t}}tn=0,Ms=null,Mu(l,d,_,5);break;case 6:tn=0,Ms=null,Mu(l,d,_,6);break;case 8:d_(),Rn=6;break e;default:throw Error(r(462))}}uK();break}catch(ve){UI(l,ve)}while(!0);return Wi=Yl=null,L.H=y,L.A=v,Wt=p,At!==null?0:(un=null,Pt=0,hg(),Rn)}function uK(){for(;At!==null&&!ut();)qI(At)}function qI(l){var d=pI(l.alternate,l,ao);l.memoizedProps=l.pendingProps,d===null?Kg(l):At=d}function VI(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=lI(p,d,d.pendingProps,d.type,void 0,Pt);break;case 11:d=lI(p,d,d.pendingProps,d.type.render,d.ref,Pt);break;case 5:Ew(d);default:gI(p,d),d=At=HA(d,ao),d=pI(p,d,ao)}l.memoizedProps=l.pendingProps,d===null?Kg(l):At=d}function Mu(l,d,p,y){Wi=Yl=null,Ew(d),Su=null,Uh=0;var v=d.return;try{if(QG(l,v,d,p,Pt)){Rn=1,Pg(l,ia(p,l.current)),At=null;return}}catch(_){if(v!==null)throw At=v,_;Rn=1,Pg(l,ia(p,l.current)),At=null;return}d.flags&32768?(Dt||y===1?l=!0:Iu||(Pt&536870912)!==0?l=!1:(Ko=l=!0,(y===2||y===9||y===3||y===6)&&(y=Rs.current,y!==null&&y.tag===13&&(y.flags|=16384))),GI(d,l)):Kg(d)}function Kg(l){var d=l;do{if((d.flags&32768)!==0){GI(d,Ko);return}l=d.return;var p=tK(d.alternate,d,ao);if(p!==null){At=p;return}if(d=d.sibling,d!==null){At=d;return}At=d=l}while(d!==null);Rn===0&&(Rn=5)}function GI(l,d){do{var p=nK(l.alternate,l);if(p!==null){p.flags&=32767,At=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){At=l;return}At=l=p}while(l!==null);Rn=6,At=null}function KI(l,d,p,y,v,_,E,M,q){l.cancelPendingCommit=null;do Zg();while(nr!==0);if((Wt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(_=d.lanes|d.childLanes,_|=ew,HV(l,p,_,E,M,q),l===un&&(At=un=null,Pt=0),Ru=d,Jo=l,io=p,l_=_,c_=v,DI=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,pK(ye,function(){return QI(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=L.T,L.T=null,v=Z.p,Z.p=2,E=Wt,Wt|=4;try{rK(l,d,p)}finally{Wt=E,Z.p=v,L.T=y}}nr=1,ZI(),WI(),JI()}}function ZI(){if(nr===1){nr=0;var l=Jo,d=Ru,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=L.T,L.T=null;var y=Z.p;Z.p=2;var v=Wt;Wt|=4;try{jI(d,l);var _=S_,E=PA(l.containerInfo),M=_.focusedElem,q=_.selectionRange;if(E!==M&&M&&M.ownerDocument&&RA(M.ownerDocument.documentElement,M)){if(q!==null&&Wv(M)){var le=q.start,ve=q.end;if(ve===void 0&&(ve=le),"selectionStart"in M)M.selectionStart=le,M.selectionEnd=Math.min(ve,M.value.length);else{var Ce=M.ownerDocument||document,ue=Ce&&Ce.defaultView||window;if(ue.getSelection){var ge=ue.getSelection(),Ve=M.textContent.length,ht=Math.min(q.start,Ve),ln=q.end===void 0?ht:Math.min(q.end,Ve);!ge.extend&&ht>ln&&(E=ln,ln=ht,ht=E);var ae=OA(M,ht),X=OA(M,ln);if(ae&&X&&(ge.rangeCount!==1||ge.anchorNode!==ae.node||ge.anchorOffset!==ae.offset||ge.focusNode!==X.node||ge.focusOffset!==X.offset)){var oe=Ce.createRange();oe.setStart(ae.node,ae.offset),ge.removeAllRanges(),ht>ln?(ge.addRange(oe),ge.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),ge.addRange(oe))}}}}for(Ce=[],ge=M;ge=ge.parentNode;)ge.nodeType===1&&Ce.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<Ce.length;M++){var Te=Ce[M];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}iy=!!k_,S_=k_=null}finally{Wt=v,Z.p=y,L.T=p}}l.current=d,nr=2}}function WI(){if(nr===2){nr=0;var l=Jo,d=Ru,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=L.T,L.T=null;var y=Z.p;Z.p=2;var v=Wt;Wt|=4;try{kI(l,d.alternate,d)}finally{Wt=v,Z.p=y,L.T=p}}nr=3}}function JI(){if(nr===4||nr===3){nr=0,Ye();var l=Jo,d=Ru,p=io,y=DI;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?nr=5:(nr=0,Ru=Jo=null,YI(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(Wo=null),Av(p),d=d.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Bn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=L.T,v=Z.p,Z.p=2,L.T=null;try{for(var _=l.onRecoverableError,E=0;E<y.length;E++){var M=y[E];_(M.value,{componentStack:M.stack})}}finally{L.T=d,Z.p=v}}(io&3)!==0&&Zg(),bi(l),v=l.pendingLanes,(p&261930)!==0&&(v&42)!==0?l===u_?rf++:(rf=0,u_=l):rf=0,sf(0)}}function YI(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Lh(d)))}function Zg(){return ZI(),WI(),JI(),QI()}function QI(){if(nr!==5)return!1;var l=Jo,d=l_;l_=0;var p=Av(io),y=L.T,v=Z.p;try{Z.p=32>p?32:p,L.T=null,p=c_,c_=null;var _=Jo,E=io;if(nr=0,Ru=Jo=null,io=0,(Wt&6)!==0)throw Error(r(331));var M=Wt;if(Wt|=4,RI(_.current),AI(_,_.current,E,p),Wt=M,sf(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Bn,_)}catch{}return!0}finally{Z.p=v,L.T=y,YI(l,d)}}function XI(l,d,p){d=ia(p,d),d=Bw(l.stateNode,d,2),l=Ho(l,d,2),l!==null&&(Sh(l,2),bi(l))}function nn(l,d,p){if(l.tag===3)XI(l,l,p);else for(;d!==null;){if(d.tag===3){XI(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Wo===null||!Wo.has(y))){l=ia(p,l),p=eI(2),y=Ho(d,p,2),y!==null&&(tI(p,y,d,l),Sh(y,2),bi(y));break}}d=d.return}}function f_(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new iK;var v=new Set;y.set(d,v)}else v=y.get(d),v===void 0&&(v=new Set,y.set(d,v));v.has(p)||(a_=!0,v.add(p),l=dK.bind(null,l,d,p),d.then(l,l))}function dK(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,un===l&&(Pt&p)===p&&(Rn===4||Rn===3&&(Pt&62914560)===Pt&&300>Je()-Bg?(Wt&2)===0&&Pu(l,0):i_|=p,Ou===Pt&&(Ou=0)),bi(l)}function eO(l,d){d===0&&(d=ZN()),l=Zl(l,d),l!==null&&(Sh(l,d),bi(l))}function hK(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),eO(l,p)}function fK(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,v=l.memoizedState;v!==null&&(p=v.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),eO(l,p)}function pK(l,d){return Me(l,d)}var Wg=null,Du=null,p_=!1,Jg=!1,m_=!1,Qo=0;function bi(l){l!==Du&&l.next===null&&(Du===null?Wg=Du=l:Du=Du.next=l),Jg=!0,p_||(p_=!0,gK())}function sf(l,d){if(!m_&&Jg){m_=!0;do for(var p=!1,y=Wg;y!==null;){if(l!==0){var v=y.pendingLanes;if(v===0)var _=0;else{var E=y.suspendedLanes,M=y.pingedLanes;_=(1<<31-Bt(42|l)+1)-1,_&=v&~(E&~M),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(p=!0,sO(y,_))}else _=Pt,_=eg(y,y===un?_:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(_&3)===0||kh(y,_)||(p=!0,sO(y,_));y=y.next}while(p);m_=!1}}function mK(){tO()}function tO(){Jg=p_=!1;var l=0;Qo!==0&&CK()&&(l=Qo);for(var d=Je(),p=null,y=Wg;y!==null;){var v=y.next,_=nO(y,d);_===0?(y.next=null,p===null?Wg=v:p.next=v,v===null&&(Du=p)):(p=y,(l!==0||(_&3)!==0)&&(Jg=!0)),y=v}nr!==0&&nr!==5||sf(l),Qo!==0&&(Qo=0)}function nO(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,v=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var E=31-Bt(_),M=1<<E,q=v[E];q===-1?((M&p)===0||(M&y)!==0)&&(v[E]=BV(M,d)):q<=d&&(l.expiredLanes|=M),_&=~M}if(d=un,p=Pt,p=eg(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&(tn===2||tn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Jr(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||kh(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Jr(y),Av(p)){case 2:case 8:p=Y;break;case 32:p=ye;break;case 268435456:p=Rt;break;default:p=ye}return y=rO.bind(null,l),p=Me(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Jr(y),l.callbackPriority=2,l.callbackNode=null,2}function rO(l,d){if(nr!==0&&nr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Zg()&&l.callbackNode!==p)return null;var y=Pt;return y=eg(l,l===un?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(LI(l,y,d),nO(l,Je()),l.callbackNode!=null&&l.callbackNode===p?rO.bind(null,l):null)}function sO(l,d){if(Zg())return null;LI(l,d,!0)}function gK(){jK(function(){(Wt&6)!==0?Me(te,mK):tO()})}function g_(){if(Qo===0){var l=wu;l===0&&(l=Ym,Ym<<=1,(Ym&261888)===0&&(Ym=256)),Qo=l}return Qo}function aO(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:sg(""+l)}function iO(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function yK(l,d,p,y,v){if(d==="submit"&&p&&p.stateNode===v){var _=aO((v[ls]||null).action),E=y.submitter;E&&(d=(d=E[ls]||null)?aO(d.formAction):E.getAttribute("formAction"),d!==null&&(_=d,E=null));var M=new lg("action","action",null,y,v);l.push({event:M,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Qo!==0){var q=E?iO(v,E):new FormData(v);Dw(p,{pending:!0,data:q,method:v.method,action:_},null,q)}}else typeof _=="function"&&(M.preventDefault(),q=E?iO(v,E):new FormData(v),Dw(p,{pending:!0,data:q,method:v.method,action:_},_,q))},currentTarget:v}]})}}for(var y_=0;y_<Xv.length;y_++){var b_=Xv[y_],bK=b_.toLowerCase(),xK=b_[0].toUpperCase()+b_.slice(1);Ra(bK,"on"+xK)}Ra($A,"onAnimationEnd"),Ra(LA,"onAnimationIteration"),Ra(zA,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(MG,"onTransitionRun"),Ra(DG,"onTransitionStart"),Ra($G,"onTransitionCancel"),Ra(UA,"onTransitionEnd"),ou("onMouseEnter",["mouseout","mouseover"]),ou("onMouseLeave",["mouseout","mouseover"]),ou("onPointerEnter",["pointerout","pointerover"]),ou("onPointerLeave",["pointerout","pointerover"]),ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ql("onBeforeInput",["compositionend","keypress","textInput","paste"]),ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(af));function oO(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],v=y.event;y=y.listeners;e:{var _=void 0;if(d)for(var E=y.length-1;0<=E;E--){var M=y[E],q=M.instance,le=M.currentTarget;if(M=M.listener,q!==_&&v.isPropagationStopped())break e;_=M,v.currentTarget=le;try{_(v)}catch(ve){dg(ve)}v.currentTarget=null,_=q}else for(E=0;E<y.length;E++){if(M=y[E],q=M.instance,le=M.currentTarget,M=M.listener,q!==_&&v.isPropagationStopped())break e;_=M,v.currentTarget=le;try{_(v)}catch(ve){dg(ve)}v.currentTarget=null,_=q}}}}function It(l,d){var p=d[Iv];p===void 0&&(p=d[Iv]=new Set);var y=l+"__bubble";p.has(y)||(lO(d,l,2,!1),p.add(y))}function x_(l,d,p){var y=0;d&&(y|=4),lO(p,l,y,d)}var Yg="_reactListening"+Math.random().toString(36).slice(2);function v_(l){if(!l[Yg]){l[Yg]=!0,tA.forEach(function(p){p!=="selectionchange"&&(vK.has(p)||x_(p,!1,l),x_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Yg]||(d[Yg]=!0,x_("selectionchange",!1,d))}}function lO(l,d,p,y){switch($O(d)){case 2:var v=ZK;break;case 8:v=WK;break;default:v=M_}p=v.bind(null,d,p,l),v=void 0,!Uv||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(v=!0),y?v!==void 0?l.addEventListener(d,p,{capture:!0,passive:v}):l.addEventListener(d,p,!0):v!==void 0?l.addEventListener(d,p,{passive:v}):l.addEventListener(d,p,!1)}function w_(l,d,p,y,v){var _=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var E=y.tag;if(E===3||E===4){var M=y.stateNode.containerInfo;if(M===v)break;if(E===4)for(E=y.return;E!==null;){var q=E.tag;if((q===3||q===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;M!==null;){if(E=su(M),E===null)return;if(q=E.tag,q===5||q===6||q===26||q===27){y=_=E;continue e}M=M.parentNode}}y=y.return}fA(function(){var le=_,ve=Lv(p),Ce=[];e:{var ue=FA.get(l);if(ue!==void 0){var ge=lg,Ve=l;switch(l){case"keypress":if(ig(p)===0)break e;case"keydown":case"keyup":ge=fG;break;case"focusin":Ve="focus",ge=qv;break;case"focusout":Ve="blur",ge=qv;break;case"beforeblur":case"afterblur":ge=qv;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=gA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=tG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=gG;break;case $A:case LA:case zA:ge=sG;break;case UA:ge=bG;break;case"scroll":case"scrollend":ge=XV;break;case"wheel":ge=vG;break;case"copy":case"cut":case"paste":ge=iG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=bA;break;case"toggle":case"beforetoggle":ge=_G}var ht=(d&4)!==0,ln=!ht&&(l==="scroll"||l==="scrollend"),ae=ht?ue!==null?ue+"Capture":null:ue;ht=[];for(var X=le,oe;X!==null;){var Te=X;if(oe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||oe===null||ae===null||(Te=Eh(X,ae),Te!=null&&ht.push(of(X,Te,oe))),ln)break;X=X.return}0<ht.length&&(ue=new ge(ue,Ve,null,p,ve),Ce.push({event:ue,listeners:ht}))}}if((d&7)===0){e:{if(ue=l==="mouseover"||l==="pointerover",ge=l==="mouseout"||l==="pointerout",ue&&p!==$v&&(Ve=p.relatedTarget||p.fromElement)&&(su(Ve)||Ve[ru]))break e;if((ge||ue)&&(ue=ve.window===ve?ve:(ue=ve.ownerDocument)?ue.defaultView||ue.parentWindow:window,ge?(Ve=p.relatedTarget||p.toElement,ge=le,Ve=Ve?su(Ve):null,Ve!==null&&(ln=a(Ve),ht=Ve.tag,Ve!==ln||ht!==5&&ht!==27&&ht!==6)&&(Ve=null)):(ge=null,Ve=le),ge!==Ve)){if(ht=gA,Te="onMouseLeave",ae="onMouseEnter",X="mouse",(l==="pointerout"||l==="pointerover")&&(ht=bA,Te="onPointerLeave",ae="onPointerEnter",X="pointer"),ln=ge==null?ue:Ch(ge),oe=Ve==null?ue:Ch(Ve),ue=new ht(Te,X+"leave",ge,p,ve),ue.target=ln,ue.relatedTarget=oe,Te=null,su(ve)===le&&(ht=new ht(ae,X+"enter",Ve,p,ve),ht.target=oe,ht.relatedTarget=ln,Te=ht),ln=Te,ge&&Ve)t:{for(ht=wK,ae=ge,X=Ve,oe=0,Te=ae;Te;Te=ht(Te))oe++;Te=0;for(var at=X;at;at=ht(at))Te++;for(;0<oe-Te;)ae=ht(ae),oe--;for(;0<Te-oe;)X=ht(X),Te--;for(;oe--;){if(ae===X||X!==null&&ae===X.alternate){ht=ae;break t}ae=ht(ae),X=ht(X)}ht=null}else ht=null;ge!==null&&cO(Ce,ue,ge,ht,!1),Ve!==null&&ln!==null&&cO(Ce,ln,Ve,ht,!0)}}e:{if(ue=le?Ch(le):window,ge=ue.nodeName&&ue.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ue.type==="file")var qt=CA;else if(SA(ue))if(EA)qt=OG;else{qt=AG;var Xe=NG}else ge=ue.nodeName,!ge||ge.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Dv(le.elementType)&&(qt=CA):qt=IG;if(qt&&(qt=qt(l,le))){TA(Ce,qt,p,ve);break e}Xe&&Xe(l,ue,le),l==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Mv(ue,"number",ue.value)}switch(Xe=le?Ch(le):window,l){case"focusin":(SA(Xe)||Xe.contentEditable==="true")&&(fu=Xe,Jv=le,Mh=null);break;case"focusout":Mh=Jv=fu=null;break;case"mousedown":Yv=!0;break;case"contextmenu":case"mouseup":case"dragend":Yv=!1,MA(Ce,p,ve);break;case"selectionchange":if(PG)break;case"keydown":case"keyup":MA(Ce,p,ve)}var St;if(Gv)e:{switch(l){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else hu?_A(l,p)&&(Mt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Mt="onCompositionStart");Mt&&(xA&&p.locale!=="ko"&&(hu||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&hu&&(St=pA()):(Do=ve,Fv="value"in Do?Do.value:Do.textContent,hu=!0)),Xe=Qg(le,Mt),0<Xe.length&&(Mt=new yA(Mt,l,null,p,ve),Ce.push({event:Mt,listeners:Xe}),St?Mt.data=St:(St=kA(p),St!==null&&(Mt.data=St)))),(St=SG?TG(l,p):CG(l,p))&&(Mt=Qg(le,"onBeforeInput"),0<Mt.length&&(Xe=new yA("onBeforeInput","beforeinput",null,p,ve),Ce.push({event:Xe,listeners:Mt}),Xe.data=St)),yK(Ce,l,le,p,ve)}oO(Ce,d)})}function of(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Qg(l,d){for(var p=d+"Capture",y=[];l!==null;){var v=l,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=Eh(l,p),v!=null&&y.unshift(of(l,v,_)),v=Eh(l,d),v!=null&&y.push(of(l,v,_))),l.tag===3)return y;l=l.return}return[]}function wK(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function cO(l,d,p,y,v){for(var _=d._reactName,E=[];p!==null&&p!==y;){var M=p,q=M.alternate,le=M.stateNode;if(M=M.tag,q!==null&&q===y)break;M!==5&&M!==26&&M!==27||le===null||(q=le,v?(le=Eh(p,_),le!=null&&E.unshift(of(p,le,q))):v||(le=Eh(p,_),le!=null&&E.push(of(p,le,q)))),p=p.return}E.length!==0&&l.push({event:d,listeners:E})}var _K=/\r\n?/g,kK=/\u0000|\uFFFD/g;function uO(l){return(typeof l=="string"?l:""+l).replace(_K,`
`).replace(kK,"")}function dO(l,d){return d=uO(d),uO(l)===d}function on(l,d,p,y,v,_){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||cu(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&cu(l,""+y);break;case"className":ng(l,"class",y);break;case"tabIndex":ng(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ng(l,p,y);break;case"style":dA(l,y,_);break;case"data":if(d!=="object"){ng(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=sg(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(p==="formAction"?(d!=="input"&&on(l,d,"name",v.name,v,null),on(l,d,"formEncType",v.formEncType,v,null),on(l,d,"formMethod",v.formMethod,v,null),on(l,d,"formTarget",v.formTarget,v,null)):(on(l,d,"encType",v.encType,v,null),on(l,d,"method",v.method,v,null),on(l,d,"target",v.target,v,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=sg(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=Vi);break;case"onScroll":y!=null&&It("scroll",l);break;case"onScrollEnd":y!=null&&It("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=sg(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":It("beforetoggle",l),It("toggle",l),tg(l,"popover",y);break;case"xlinkActuate":qi(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":qi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":qi(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":qi(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":qi(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":qi(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":qi(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":qi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":qi(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":tg(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=YV.get(p)||p,tg(l,p,y))}}function __(l,d,p,y,v,_){switch(p){case"style":dA(l,y,_);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?cu(l,y):(typeof y=="number"||typeof y=="bigint")&&cu(l,""+y);break;case"onScroll":y!=null&&It("scroll",l);break;case"onScrollEnd":y!=null&&It("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nA.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),d=p.slice(2,v?p.length-7:void 0),_=l[ls]||null,_=_!=null?_[p]:null,typeof _=="function"&&l.removeEventListener(d,_,v),typeof y=="function")){typeof _!="function"&&_!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,v);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):tg(l,p,y)}}}function Nr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",l),It("load",l);var y=!1,v=!1,_;for(_ in p)if(p.hasOwnProperty(_)){var E=p[_];if(E!=null)switch(_){case"src":y=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:on(l,d,_,E,p,null)}}v&&on(l,d,"srcSet",p.srcSet,p,null),y&&on(l,d,"src",p.src,p,null);return;case"input":It("invalid",l);var M=_=E=v=null,q=null,le=null;for(y in p)if(p.hasOwnProperty(y)){var ve=p[y];if(ve!=null)switch(y){case"name":v=ve;break;case"type":E=ve;break;case"checked":q=ve;break;case"defaultChecked":le=ve;break;case"value":_=ve;break;case"defaultValue":M=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,d));break;default:on(l,d,y,ve,p,null)}}oA(l,_,M,q,le,E,v,!1);return;case"select":It("invalid",l),y=E=_=null;for(v in p)if(p.hasOwnProperty(v)&&(M=p[v],M!=null))switch(v){case"value":_=M;break;case"defaultValue":E=M;break;case"multiple":y=M;default:on(l,d,v,M,p,null)}d=_,p=E,l.multiple=!!y,d!=null?lu(l,!!y,d,!1):p!=null&&lu(l,!!y,p,!0);return;case"textarea":It("invalid",l),_=v=y=null;for(E in p)if(p.hasOwnProperty(E)&&(M=p[E],M!=null))switch(E){case"value":y=M;break;case"defaultValue":v=M;break;case"children":_=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:on(l,d,E,M,p,null)}cA(l,y,v,_);return;case"option":for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null)&&(q==="selected"?l.selected=y&&typeof y!="function"&&typeof y!="symbol":on(l,d,q,y,p,null));return;case"dialog":It("beforetoggle",l),It("toggle",l),It("cancel",l),It("close",l);break;case"iframe":case"object":It("load",l);break;case"video":case"audio":for(y=0;y<af.length;y++)It(af[y],l);break;case"image":It("error",l),It("load",l);break;case"details":It("toggle",l);break;case"embed":case"source":case"link":It("error",l),It("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in p)if(p.hasOwnProperty(le)&&(y=p[le],y!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:on(l,d,le,y,p,null)}return;default:if(Dv(d)){for(ve in p)p.hasOwnProperty(ve)&&(y=p[ve],y!==void 0&&__(l,d,ve,y,p,void 0));return}}for(M in p)p.hasOwnProperty(M)&&(y=p[M],y!=null&&on(l,d,M,y,p,null))}function SK(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,E=null,M=null,q=null,le=null,ve=null;for(ge in p){var Ce=p[ge];if(p.hasOwnProperty(ge)&&Ce!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":q=Ce;default:y.hasOwnProperty(ge)||on(l,d,ge,null,y,Ce)}}for(var ue in y){var ge=y[ue];if(Ce=p[ue],y.hasOwnProperty(ue)&&(ge!=null||Ce!=null))switch(ue){case"type":_=ge;break;case"name":v=ge;break;case"checked":le=ge;break;case"defaultChecked":ve=ge;break;case"value":E=ge;break;case"defaultValue":M=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,d));break;default:ge!==Ce&&on(l,d,ue,ge,y,Ce)}}Pv(l,E,M,q,le,ve,_,v);return;case"select":ge=E=M=ue=null;for(_ in p)if(q=p[_],p.hasOwnProperty(_)&&q!=null)switch(_){case"value":break;case"multiple":ge=q;default:y.hasOwnProperty(_)||on(l,d,_,null,y,q)}for(v in y)if(_=y[v],q=p[v],y.hasOwnProperty(v)&&(_!=null||q!=null))switch(v){case"value":ue=_;break;case"defaultValue":M=_;break;case"multiple":E=_;default:_!==q&&on(l,d,v,_,y,q)}d=M,p=E,y=ge,ue!=null?lu(l,!!p,ue,!1):!!y!=!!p&&(d!=null?lu(l,!!p,d,!0):lu(l,!!p,p?[]:"",!1));return;case"textarea":ge=ue=null;for(M in p)if(v=p[M],p.hasOwnProperty(M)&&v!=null&&!y.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:on(l,d,M,null,y,v)}for(E in y)if(v=y[E],_=p[E],y.hasOwnProperty(E)&&(v!=null||_!=null))switch(E){case"value":ue=v;break;case"defaultValue":ge=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==_&&on(l,d,E,v,y,_)}lA(l,ue,ge);return;case"option":for(var Ve in p)ue=p[Ve],p.hasOwnProperty(Ve)&&ue!=null&&!y.hasOwnProperty(Ve)&&(Ve==="selected"?l.selected=!1:on(l,d,Ve,null,y,ue));for(q in y)ue=y[q],ge=p[q],y.hasOwnProperty(q)&&ue!==ge&&(ue!=null||ge!=null)&&(q==="selected"?l.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":on(l,d,q,ue,y,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in p)ue=p[ht],p.hasOwnProperty(ht)&&ue!=null&&!y.hasOwnProperty(ht)&&on(l,d,ht,null,y,ue);for(le in y)if(ue=y[le],ge=p[le],y.hasOwnProperty(le)&&ue!==ge&&(ue!=null||ge!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,d));break;default:on(l,d,le,ue,y,ge)}return;default:if(Dv(d)){for(var ln in p)ue=p[ln],p.hasOwnProperty(ln)&&ue!==void 0&&!y.hasOwnProperty(ln)&&__(l,d,ln,void 0,y,ue);for(ve in y)ue=y[ve],ge=p[ve],!y.hasOwnProperty(ve)||ue===ge||ue===void 0&&ge===void 0||__(l,d,ve,ue,y,ge);return}}for(var ae in p)ue=p[ae],p.hasOwnProperty(ae)&&ue!=null&&!y.hasOwnProperty(ae)&&on(l,d,ae,null,y,ue);for(Ce in y)ue=y[Ce],ge=p[Ce],!y.hasOwnProperty(Ce)||ue===ge||ue==null&&ge==null||on(l,d,Ce,ue,y,ge)}function hO(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TK(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var v=p[y],_=v.transferSize,E=v.initiatorType,M=v.duration;if(_&&M&&hO(E)){for(E=0,M=v.responseEnd,y+=1;y<p.length;y++){var q=p[y],le=q.startTime;if(le>M)break;var ve=q.transferSize,Ce=q.initiatorType;ve&&hO(Ce)&&(q=q.responseEnd,E+=ve*(q<M?1:(M-le)/(q-le)))}if(--y,d+=8*(_+E)/(v.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var k_=null,S_=null;function Xg(l){return l.nodeType===9?l:l.ownerDocument}function fO(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pO(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function T_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var C_=null;function CK(){var l=window.event;return l&&l.type==="popstate"?l===C_?!1:(C_=l,!0):(C_=null,!1)}var mO=typeof setTimeout=="function"?setTimeout:void 0,EK=typeof clearTimeout=="function"?clearTimeout:void 0,gO=typeof Promise=="function"?Promise:void 0,jK=typeof queueMicrotask=="function"?queueMicrotask:typeof gO<"u"?function(l){return gO.resolve(null).then(l).catch(NK)}:mO;function NK(l){setTimeout(function(){throw l})}function Xo(l){return l==="head"}function yO(l,d){var p=d,y=0;do{var v=p.nextSibling;if(l.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(v),Uu(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")lf(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,lf(p);for(var _=p.firstChild;_;){var E=_.nextSibling,M=_.nodeName;_[Th]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&_.rel.toLowerCase()==="stylesheet"||p.removeChild(_),_=E}}else p==="body"&&lf(l.ownerDocument.body);p=v}while(p);Uu(d)}function bO(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function E_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":E_(p),Ov(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function AK(l,d,p,y){for(;l.nodeType===1;){var v=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Th])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=da(l.nextSibling),l===null)break}return null}function IK(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=da(l.nextSibling),l===null))return null;return l}function xO(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=da(l.nextSibling),l===null))return null;return l}function j_(l){return l.data==="$?"||l.data==="$~"}function N_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function OK(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function da(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var A_=null;function vO(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return da(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function wO(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function _O(l,d,p){switch(d=Xg(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function lf(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Ov(l)}var ha=new Map,kO=new Set;function ey(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var oo=Z.d;Z.d={f:RK,r:PK,D:MK,C:DK,L:$K,m:LK,X:UK,S:zK,M:FK};function RK(){var l=oo.f(),d=Vg();return l||d}function PK(l){var d=au(l);d!==null&&d.tag===5&&d.type==="form"?U2(d):oo.r(l)}var $u=typeof document>"u"?null:document;function SO(l,d,p){var y=$u;if(y&&typeof d=="string"&&d){var v=sa(d);v='link[rel="'+l+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),kO.has(v)||(kO.add(v),l={rel:l,crossOrigin:p,href:d},y.querySelector(v)===null&&(d=y.createElement("link"),Nr(d,"link",l),gr(d),y.head.appendChild(d)))}}function MK(l){oo.D(l),SO("dns-prefetch",l,null)}function DK(l,d){oo.C(l,d),SO("preconnect",l,d)}function $K(l,d,p){oo.L(l,d,p);var y=$u;if(y&&l&&d){var v='link[rel="preload"][as="'+sa(d)+'"]';d==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+sa(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+sa(p.imageSizes)+'"]')):v+='[href="'+sa(l)+'"]';var _=v;switch(d){case"style":_=Lu(l);break;case"script":_=zu(l)}ha.has(_)||(l=m({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),ha.set(_,l),y.querySelector(v)!==null||d==="style"&&y.querySelector(cf(_))||d==="script"&&y.querySelector(uf(_))||(d=y.createElement("link"),Nr(d,"link",l),gr(d),y.head.appendChild(d)))}}function LK(l,d){oo.m(l,d);var p=$u;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",v='link[rel="modulepreload"][as="'+sa(y)+'"][href="'+sa(l)+'"]',_=v;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=zu(l)}if(!ha.has(_)&&(l=m({rel:"modulepreload",href:l},d),ha.set(_,l),p.querySelector(v)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(uf(_)))return}y=p.createElement("link"),Nr(y,"link",l),gr(y),p.head.appendChild(y)}}}function zK(l,d,p){oo.S(l,d,p);var y=$u;if(y&&l){var v=iu(y).hoistableStyles,_=Lu(l);d=d||"default";var E=v.get(_);if(!E){var M={loading:0,preload:null};if(E=y.querySelector(cf(_)))M.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":d},p),(p=ha.get(_))&&I_(l,p);var q=E=y.createElement("link");gr(q),Nr(q,"link",l),q._p=new Promise(function(le,ve){q.onload=le,q.onerror=ve}),q.addEventListener("load",function(){M.loading|=1}),q.addEventListener("error",function(){M.loading|=2}),M.loading|=4,ty(E,d,y)}E={type:"stylesheet",instance:E,count:1,state:M},v.set(_,E)}}}function UK(l,d){oo.X(l,d);var p=$u;if(p&&l){var y=iu(p).hoistableScripts,v=zu(l),_=y.get(v);_||(_=p.querySelector(uf(v)),_||(l=m({src:l,async:!0},d),(d=ha.get(v))&&O_(l,d),_=p.createElement("script"),gr(_),Nr(_,"link",l),p.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},y.set(v,_))}}function FK(l,d){oo.M(l,d);var p=$u;if(p&&l){var y=iu(p).hoistableScripts,v=zu(l),_=y.get(v);_||(_=p.querySelector(uf(v)),_||(l=m({src:l,async:!0,type:"module"},d),(d=ha.get(v))&&O_(l,d),_=p.createElement("script"),gr(_),Nr(_,"link",l),p.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},y.set(v,_))}}function TO(l,d,p,y){var v=(v=I.current)?ey(v):null;if(!v)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Lu(p.href),p=iu(v).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Lu(p.href);var _=iu(v).hoistableStyles,E=_.get(l);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,E),(_=v.querySelector(cf(l)))&&!_._p&&(E.instance=_,E.state.loading=5),ha.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ha.set(l,p),_||BK(v,l,p,E.state))),d&&y===null)throw Error(r(528,""));return E}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=zu(p),p=iu(v).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Lu(l){return'href="'+sa(l)+'"'}function cf(l){return'link[rel="stylesheet"]['+l+"]"}function CO(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function BK(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Nr(d,"link",p),gr(d),l.head.appendChild(d))}function zu(l){return'[src="'+sa(l)+'"]'}function uf(l){return"script[async]"+l}function EO(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+sa(p.href)+'"]');if(y)return d.instance=y,gr(y),y;var v=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),gr(y),Nr(y,"style",v),ty(y,p.precedence,l),d.instance=y;case"stylesheet":v=Lu(p.href);var _=l.querySelector(cf(v));if(_)return d.state.loading|=4,d.instance=_,gr(_),_;y=CO(p),(v=ha.get(v))&&I_(y,v),_=(l.ownerDocument||l).createElement("link"),gr(_);var E=_;return E._p=new Promise(function(M,q){E.onload=M,E.onerror=q}),Nr(_,"link",y),d.state.loading|=4,ty(_,p.precedence,l),d.instance=_;case"script":return _=zu(p.src),(v=l.querySelector(uf(_)))?(d.instance=v,gr(v),v):(y=p,(v=ha.get(_))&&(y=m({},p),O_(y,v)),l=l.ownerDocument||l,v=l.createElement("script"),gr(v),Nr(v,"link",y),l.head.appendChild(v),d.instance=v);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,ty(y,p.precedence,l));return d.instance}function ty(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=y.length?y[y.length-1]:null,_=v,E=0;E<y.length;E++){var M=y[E];if(M.dataset.precedence===d)_=M;else if(_!==v)break}_?_.parentNode.insertBefore(l,_.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function I_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function O_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var ny=null;function jO(l,d,p){if(ny===null){var y=new Map,v=ny=new Map;v.set(p,y)}else v=ny,y=v.get(p),y||(y=new Map,v.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),v=0;v<p.length;v++){var _=p[v];if(!(_[Th]||_[Tr]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var E=_.getAttribute(d)||"";E=l+E;var M=y.get(E);M?M.push(_):y.set(E,[_])}}return y}function NO(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function HK(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function AO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function qK(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var v=Lu(y.href),_=d.querySelector(cf(v));if(_){d=_._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=ry.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=_,gr(_);return}_=d.ownerDocument||d,y=CO(y),(v=ha.get(v))&&I_(y,v),_=_.createElement("link"),gr(_);var E=_;E._p=new Promise(function(M,q){E.onload=M,E.onerror=q}),Nr(_,"link",y),p.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=ry.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var R_=0;function VK(l,d){return l.stylesheets&&l.count===0&&ay(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+d);0<l.imgBytes&&R_===0&&(R_=62500*TK());var v=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>R_?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(v)}}:null}function ry(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ay(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var sy=null;function ay(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,sy=new Map,d.forEach(GK,l),sy=null,ry.call(l))}function GK(l,d){if(!(d.state.loading&4)){var p=sy.get(l);if(p)var y=p.get(null);else{p=new Map,sy.set(l,p);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var E=v[_];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(p.set(E.dataset.precedence,E),y=E)}y&&p.set(null,y)}v=d.instance,E=v.getAttribute("data-precedence"),_=p.get(E)||y,_===y&&p.set(null,v),p.set(E,v),this.count++,y=ry.bind(this),v.addEventListener("load",y),v.addEventListener("error",y),_?_.parentNode.insertBefore(v,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),d.state.loading|=4}}var df={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function KK(l,d,p,y,v,_,E,M,q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jv(0),this.hiddenUpdates=jv(null),this.identifierPrefix=y,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function IO(l,d,p,y,v,_,E,M,q,le,ve,Ce){return l=new KK(l,d,p,E,q,le,ve,Ce,M),d=1,_===!0&&(d|=24),_=Os(3,null,null,d),l.current=_,_.stateNode=l,d=hw(),d.refCount++,l.pooledCache=d,d.refCount++,_.memoizedState={element:y,isDehydrated:p,cache:d},gw(_),l}function OO(l){return l?(l=gu,l):gu}function RO(l,d,p,y,v,_){v=OO(v),y.context===null?y.context=v:y.pendingContext=v,y=Bo(d),y.payload={element:p},_=_===void 0?null:_,_!==null&&(y.callback=_),p=Ho(l,y,d),p!==null&&(ps(p,l,d),Bh(p,l,d))}function PO(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function P_(l,d){PO(l,d),(l=l.alternate)&&PO(l,d)}function MO(l){if(l.tag===13||l.tag===31){var d=Zl(l,67108864);d!==null&&ps(d,l,67108864),P_(l,67108864)}}function DO(l){if(l.tag===13||l.tag===31){var d=$s();d=Nv(d);var p=Zl(l,d);p!==null&&ps(p,l,d),P_(l,d)}}var iy=!0;function ZK(l,d,p,y){var v=L.T;L.T=null;var _=Z.p;try{Z.p=2,M_(l,d,p,y)}finally{Z.p=_,L.T=v}}function WK(l,d,p,y){var v=L.T;L.T=null;var _=Z.p;try{Z.p=8,M_(l,d,p,y)}finally{Z.p=_,L.T=v}}function M_(l,d,p,y){if(iy){var v=D_(y);if(v===null)w_(l,d,y,oy,p),LO(l,y);else if(YK(v,l,d,p,y))y.stopPropagation();else if(LO(l,y),d&4&&-1<JK.indexOf(l)){for(;v!==null;){var _=au(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var E=Hl(_.pendingLanes);if(E!==0){var M=_;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var q=1<<31-Bt(E);M.entanglements[1]|=q,E&=~q}bi(_),(Wt&6)===0&&(Hg=Je()+500,sf(0))}}break;case 31:case 13:M=Zl(_,2),M!==null&&ps(M,_,2),Vg(),P_(_,2)}if(_=D_(y),_===null&&w_(l,d,y,oy,p),_===v)break;v=_}v!==null&&y.stopPropagation()}else w_(l,d,y,null,p)}}function D_(l){return l=Lv(l),$_(l)}var oy=null;function $_(l){if(oy=null,l=su(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=i(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return oy=l,null}function $O(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case te:return 2;case Y:return 8;case ye:case De:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var L_=!1,el=null,tl=null,nl=null,hf=new Map,ff=new Map,rl=[],JK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LO(l,d){switch(l){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":hf.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ff.delete(d.pointerId)}}function pf(l,d,p,y,v,_){return l===null||l.nativeEvent!==_?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:_,targetContainers:[v]},d!==null&&(d=au(d),d!==null&&MO(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,v!==null&&d.indexOf(v)===-1&&d.push(v),l)}function YK(l,d,p,y,v){switch(d){case"focusin":return el=pf(el,l,d,p,y,v),!0;case"dragenter":return tl=pf(tl,l,d,p,y,v),!0;case"mouseover":return nl=pf(nl,l,d,p,y,v),!0;case"pointerover":var _=v.pointerId;return hf.set(_,pf(hf.get(_)||null,l,d,p,y,v)),!0;case"gotpointercapture":return _=v.pointerId,ff.set(_,pf(ff.get(_)||null,l,d,p,y,v)),!0}return!1}function zO(l){var d=su(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=i(p),d!==null){l.blockedOn=d,XN(l.priority,function(){DO(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,XN(l.priority,function(){DO(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ly(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=D_(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);$v=y,p.target.dispatchEvent(y),$v=null}else return d=au(p),d!==null&&MO(d),l.blockedOn=p,!1;d.shift()}return!0}function UO(l,d,p){ly(l)&&p.delete(d)}function QK(){L_=!1,el!==null&&ly(el)&&(el=null),tl!==null&&ly(tl)&&(tl=null),nl!==null&&ly(nl)&&(nl=null),hf.forEach(UO),ff.forEach(UO)}function cy(l,d){l.blockedOn===d&&(l.blockedOn=null,L_||(L_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,QK)))}var uy=null;function FO(l){uy!==l&&(uy=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uy===l&&(uy=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],v=l[d+2];if(typeof y!="function"){if($_(y||p)===null)continue;break}var _=au(p);_!==null&&(l.splice(d,3),d-=3,Dw(_,{pending:!0,data:v,method:p.method,action:y},y,v))}}))}function Uu(l){function d(q){return cy(q,l)}el!==null&&cy(el,l),tl!==null&&cy(tl,l),nl!==null&&cy(nl,l),hf.forEach(d),ff.forEach(d);for(var p=0;p<rl.length;p++){var y=rl[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<rl.length&&(p=rl[0],p.blockedOn===null);)zO(p),p.blockedOn===null&&rl.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var v=p[y],_=p[y+1],E=v[ls]||null;if(typeof _=="function")E||FO(p);else if(E){var M=null;if(_&&_.hasAttribute("formAction")){if(v=_,E=_[ls]||null)M=E.formAction;else if($_(v)!==null)continue}else M=E.action;typeof M=="function"?p[y+1]=M:(p.splice(y,3),y-=3),FO(p)}}}function BO(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function d(){v!==null&&(v(),v=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,v=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),v!==null&&(v(),v=null)}}}function z_(l){this._internalRoot=l}dy.prototype.render=z_.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=$s();RO(p,y,l,d,null,null)},dy.prototype.unmount=z_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;RO(l.current,2,null,l,null,null),Vg(),d[ru]=null}};function dy(l){this._internalRoot=l}dy.prototype.unstable_scheduleHydration=function(l){if(l){var d=QN();l={blockedOn:null,target:l,priority:d};for(var p=0;p<rl.length&&d!==0&&d<rl[p].priority;p++);rl.splice(p,0,l),p===0&&zO(l)}};var HO=t.version;if(HO!=="19.2.3")throw Error(r(527,HO,"19.2.3"));Z.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=h(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var XK={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hy.isDisabled&&hy.supportsFiber)try{Bn=hy.inject(XK),In=hy}catch{}}return gf.createRoot=function(l,d){if(!s(l))throw Error(r(299));var p=!1,y="",v=J2,_=Y2,E=Q2;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(v=d.onUncaughtError),d.onCaughtError!==void 0&&(_=d.onCaughtError),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=IO(l,1,!1,null,null,p,y,null,v,_,E,BO),l[ru]=d.current,v_(l),new z_(d)},gf.hydrateRoot=function(l,d,p){if(!s(l))throw Error(r(299));var y=!1,v="",_=J2,E=Y2,M=Q2,q=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(_=p.onUncaughtError),p.onCaughtError!==void 0&&(E=p.onCaughtError),p.onRecoverableError!==void 0&&(M=p.onRecoverableError),p.formState!==void 0&&(q=p.formState)),d=IO(l,1,!0,d,p??null,y,v,q,_,E,M,BO),d.context=OO(null),p=d.current,y=$s(),y=Nv(y),v=Bo(y),v.callback=null,Ho(p,v,y),p=y,d.current.lanes=p,Sh(d,p),bi(d),l[ru]=d.current,v_(l),new dy(d)},gf.version="19.2.3",gf}var XO;function cZ(){if(XO)return B_.exports;XO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),B_.exports=lZ(),B_.exports}var uZ=cZ(),Zd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dZ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},hZ=class{#e=dZ;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Cc=new hZ;function fZ(e){setTimeout(e,0)}var Uc=typeof window>"u"||"Deno"in globalThis;function ss(){}function pZ(e,t){return typeof e=="function"?e(t):e}function TS(e){return typeof e=="number"&&e>=0&&e!==1/0}function g5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function _l(e,t){return typeof e=="function"?e(t):e}function ba(e,t){return typeof e=="function"?e(t):e}function eR(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i){if(r){if(t.queryHash!==qC(i,t.options))return!1}else if(!Mp(t.queryKey,i))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||a&&!a(t))}function tR(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Fc(t.options.mutationKey)!==Fc(a))return!1}else if(!Mp(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function qC(e,t){return(t?.queryKeyHashFn||Fc)(e)}function Fc(e){return JSON.stringify(e,(t,n)=>CS(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Mp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Mp(e[n],t[n])):!1}var mZ=Object.prototype.hasOwnProperty;function y5(e,t){if(e===t)return e;const n=nR(e)&&nR(t);if(!n&&!(CS(e)&&CS(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),i=a.length,o=n?new Array(i):{};let u=0;for(let h=0;h<i;h++){const f=n?h:a[h],m=e[f],g=t[f];if(m===g){o[f]=m,(n?h<s:mZ.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){o[f]=g;continue}const b=y5(m,g);o[f]=b,b===m&&u++}return s===i&&u===s?e:o}function eb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function nR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function CS(e){if(!rR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!rR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rR(e){return Object.prototype.toString.call(e)==="[object Object]"}function gZ(e){return new Promise(t=>{Cc.setTimeout(t,e)})}function ES(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?y5(e,t):t}function yZ(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function bZ(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var VC=Symbol();function b5(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===VC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function GC(e,t){return typeof e=="function"?e(...t):!!e}function xZ(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var vZ=class extends Zd{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Uc&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},KC=new vZ;function jS(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var wZ=fZ;function _Z(){let e=[],t=0,n=o=>{o()},r=o=>{o()},s=wZ;const a=o=>{t?e.push(o):s(()=>{n(o)})},i=()=>{const o=e;e=[],o.length&&s(()=>{r(()=>{o.forEach(u=>{n(u)})})})};return{batch:o=>{let u;t++;try{u=o()}finally{t--,t||i()}return u},batchCalls:o=>(...u)=>{a(()=>{o(...u)})},schedule:a,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var cr=_Z(),kZ=class extends Zd{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Uc&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},tb=new kZ;function SZ(e){return Math.min(1e3*2**e,3e4)}function x5(e){return(e??"online")==="online"?tb.isOnline():!0}var NS=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function v5(e){let t=!1,n=0,r;const s=jS(),a=()=>s.status!=="pending",i=x=>{if(!a()){const S=new NS(x);g(S),e.onCancel?.(S)}},o=()=>{t=!0},u=()=>{t=!1},h=()=>KC.isFocused()&&(e.networkMode==="always"||tb.isOnline())&&e.canRun(),f=()=>x5(e.networkMode)&&e.canRun(),m=x=>{a()||(r?.(),s.resolve(x))},g=x=>{a()||(r?.(),s.reject(x))},b=()=>new Promise(x=>{r=S=>{(a()||h())&&x(S)},e.onPause?.()}).then(()=>{r=void 0,a()||e.onContinue?.()}),w=()=>{if(a())return;let x;const S=n===0?e.initialPromise:void 0;try{x=S??e.fn()}catch(k){x=Promise.reject(k)}Promise.resolve(x).then(m).catch(k=>{if(a())return;const C=e.retry??(Uc?0:3),T=e.retryDelay??SZ,P=typeof T=="function"?T(n,k):T,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,k);if(t||!D){g(k);return}n++,e.onFail?.(n,k),gZ(P).then(()=>h()?void 0:b()).then(()=>{t?g(k):w()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(r?.(),s),cancelRetry:o,continueRetry:u,canStart:f,start:()=>(f()?w():b().then(w),s)}}var w5=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),TS(this.gcTime)&&(this.#e=Cc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Uc?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Cc.clearTimeout(this.#e),this.#e=void 0)}},TZ=class extends w5{#e;#t;#n;#s;#r;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=aR(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=aR(this.options);t.data!==void 0&&(this.setState(sR(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=ES(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(ss).catch(ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ba(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===VC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>_l(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!g5(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(u=>u.options.queryFn);o&&this.setOptions(o.options)}const n=new AbortController,r=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},s=()=>{const o=b5(this.options,t),h=(()=>{const f={client:this.#s,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#o=!1,this.options.persister?this.options.persister(o,h,this):o(h)},i=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return r(o),o})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#a({type:"fetch",meta:i.fetchOptions?.meta}),this.#r=v5({initialPromise:t?.initialPromise,fn:i.fetchFn,onCancel:o=>{o instanceof NS&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(o,u)=>{this.#a({type:"failed",failureCount:o,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{const o=await this.#r.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#n.config.onSuccess?.(o,this),this.#n.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof NS){if(o.silent)return this.#r.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#a({type:"error",error:o}),this.#n.config.onError?.(o,this),this.#n.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,..._5(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...sR(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),cr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function _5(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:x5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sR(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function aR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var CZ=class extends Zd{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=jS(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#i;#o;#a;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),iR(this.#t,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return AS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return AS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ba(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),t._defaulted&&!eb(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&oR(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),r&&(this.#t!==n||ba(this.options.enabled,this.#t)!==ba(t.enabled,this.#t)||_l(this.options.staleTime,this.#t)!==_l(t.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||ba(this.options.enabled,this.#t)!==ba(t.enabled,this.#t)||s!==this.#l)&&this.#b(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return jZ(this,n)&&(this.#s=n,this.#i=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ss)),t}#g(){this.#v();const e=_l(this.options.staleTime,this.#t);if(Uc||this.#s.isStale||!TS(e))return;const n=g5(this.#s.dataUpdatedAt,e)+1;this.#c=Cc.setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#l=e,!(Uc||ba(this.options.enabled,this.#t)===!1||!TS(this.#l)||this.#l===0)&&(this.#u=Cc.setInterval(()=>{(this.options.refetchIntervalInBackground||KC.isFocused())&&this.#d()},this.#l))}#x(){this.#g(),this.#b(this.#y())}#v(){this.#c&&(Cc.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Cc.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#s,a=this.#r,i=this.#i,u=e!==n?e.state:this.#n,{state:h}=e;let f={...h},m=!1,g;if(t._optimisticResults){const j=this.hasListeners(),se=!j&&iR(e,t),B=j&&oR(e,n,t,r);(se||B)&&(f={...f,..._5(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:x}=f;g=f.data;let S=!1;if(t.placeholderData!==void 0&&g===void 0&&x==="pending"){let j;s?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(j=s.data,S=!0):j=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,j!==void 0&&(x="success",g=ES(s?.data,j,t),m=!0)}if(t.select&&g!==void 0&&!S)if(s&&g===a?.data&&t.select===this.#m)g=this.#h;else try{this.#m=t.select,g=t.select(g),g=ES(s?.data,g,t),this.#h=g,this.#a=null}catch(j){this.#a=j}this.#a&&(b=this.#a,g=this.#h,w=Date.now(),x="error");const k=f.fetchStatus==="fetching",C=x==="pending",T=x==="error",P=C&&k,D=g!==void 0,U={status:x,fetchStatus:f.fetchStatus,isPending:C,isSuccess:x==="success",isError:T,isInitialLoading:P,isLoading:P,data:g,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:T&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&D,isStale:ZC(e,t),refetch:this.refetch,promise:this.#o,isEnabled:ba(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=ee=>{U.status==="error"?ee.reject(U.error):U.data!==void 0&&ee.resolve(U.data)},se=()=>{const ee=this.#o=U.promise=jS();j(ee)},B=this.#o;switch(B.status){case"pending":e.queryHash===n.queryHash&&j(B);break;case"fulfilled":(U.status==="error"||U.data!==B.value)&&se();break;case"rejected":(U.status!=="error"||U.error!==B.reason)&&se();break}}return U}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#f=this.#t),eb(t,e))return;this.#s=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const a=new Set(s??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(i=>{const o=i;return this.#s[o]!==e[o]&&a.has(o)})};this.#k({listeners:n()})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#k(e){cr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function EZ(e,t){return ba(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function iR(e,t){return EZ(e,t)||e.state.data!==void 0&&AS(e,t,t.refetchOnMount)}function AS(e,t,n){if(ba(t.enabled,e)!==!1&&_l(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ZC(e,t)}return!1}function oR(e,t,n,r){return(e!==t||ba(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ZC(e,n)}function ZC(e,t){return ba(t.enabled,e)!==!1&&e.isStaleByTime(_l(t.staleTime,e))}function jZ(e,t){return!eb(e.getCurrentResult(),t)}function lR(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},u=0;const h=async()=>{let f=!1;const m=w=>{xZ(w,()=>t.signal,()=>f=!0)},g=b5(t.options,t.fetchOptions),b=async(w,x,S)=>{if(f)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:x,direction:S?"backward":"forward",meta:t.options.meta};return m(R),R})(),T=await g(C),{maxPages:P}=t.options,D=S?bZ:yZ;return{pages:D(w.pages,T,P),pageParams:D(w.pageParams,x,P)}};if(s&&a.length){const w=s==="backward",x=w?NZ:cR,S={pages:a,pageParams:i},k=x(r,S);o=await b(S,k,w)}else{const w=e??a.length;do{const x=u===0?i[0]??r.initialPageParam:cR(r,o);if(u>0&&x==null)break;o=await b(o,x),u++}while(u<w)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=h}}}function cR(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function NZ(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var AZ=class extends w5{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||k5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=v5({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#r({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:s}),await this.#n.config.onMutate?.(e,this,n);const i=await this.options.onMutate?.(e,n);i!==this.state.context&&this.#r({type:"pending",context:i,variables:e,isPaused:s})}const a=await this.#s.start();return await this.#n.config.onSuccess?.(a,e,this.state.context,this,n),await this.options.onSuccess?.(a,e,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,e,this.state.context,n),this.#r({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,e,this.state.context,this,n)}catch(i){Promise.reject(i)}try{await this.options.onError?.(a,e,this.state.context,n)}catch(i){Promise.reject(i)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(i){Promise.reject(i)}try{await this.options.onSettled?.(void 0,a,e,this.state.context,n)}catch(i){Promise.reject(i)}throw this.#r({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),cr.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function k5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var IZ=class extends Zd{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new AZ({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=fy(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=fy(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=fy(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=fy(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){cr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>tR(t,n))}findAll(e={}){return this.getAll().filter(t=>tR(e,t))}notify(e){cr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return cr.batch(()=>Promise.all(e.map(t=>t.continue().catch(ss))))}};function fy(e){return e.options.scope?.id}var OZ=class extends Zd{#e;#t=void 0;#n;#s;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),eb(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Fc(n.mutationKey)!==Fc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#i()}mutate(t,n){return this.#s=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??k5();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){cr.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#s.onSuccess?.(t.data,n,r,s)}catch(a){Promise.reject(a)}try{this.#s.onSettled?.(t.data,null,n,r,s)}catch(a){Promise.reject(a)}}else if(t?.type==="error"){try{this.#s.onError?.(t.error,n,r,s)}catch(a){Promise.reject(a)}try{this.#s.onSettled?.(void 0,t.error,n,r,s)}catch(a){Promise.reject(a)}}}this.listeners.forEach(n=>{n(this.#t)})})}},RZ=class extends Zd{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??qC(r,t);let a=this.get(s);return a||(a=new TZ({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>eR(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>eR(e,n)):t}notify(e){cr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},PZ=class{#e;#t;#n;#s;#r;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new RZ,this.#t=e.mutationCache||new IZ,this.#n=e.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=KC.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=tb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(_l(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,i=pZ(t,a);if(i!==void 0)return this.#e.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return cr.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;cr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return cr.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=cr.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(ss).catch(ss)}invalidateQueries(e,t={}){return cr.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=cr.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(ss)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(ss)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(_l(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ss).catch(ss)}fetchInfiniteQuery(e){return e.behavior=lR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ss).catch(ss)}ensureInfiniteQueryData(e){return e.behavior=lR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return tb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#s.set(Fc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(r=>{Mp(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(Fc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{Mp(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=qC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===VC&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},S5=A.createContext(void 0),Ml=e=>{const t=A.useContext(S5);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},MZ=({client:e,children:t})=>(A.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(S5.Provider,{value:e,children:t})),T5=A.createContext(!1),DZ=()=>A.useContext(T5);T5.Provider;function $Z(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var LZ=A.createContext($Z()),zZ=()=>A.useContext(LZ),UZ=(e,t,n)=>{const r=n?.state.error&&typeof e.throwOnError=="function"?GC(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},FZ=e=>{A.useEffect(()=>{e.clearReset()},[e])},BZ=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||GC(n,[e.error,r])),HZ=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},qZ=(e,t)=>e.isLoading&&e.isFetching&&!t,VZ=(e,t)=>e?.suspense&&t.isPending,uR=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function GZ(e,t,n){const r=DZ(),s=zZ(),a=Ml(),i=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(i);const o=a.getQueryCache().get(i.queryHash);i._optimisticResults=r?"isRestoring":"optimistic",HZ(i),UZ(i,s,o),FZ(s);const u=!a.getQueryCache().get(i.queryHash),[h]=A.useState(()=>new t(a,i)),f=h.getOptimisticResult(i),m=!r&&e.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(g=>{const b=m?h.subscribe(cr.batchCalls(g)):ss;return h.updateResult(),b},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),A.useEffect(()=>{h.setOptions(i)},[i,h]),VZ(i,f))throw uR(i,h,s);if(BZ({result:f,errorResetBoundary:s,throwOnError:i.throwOnError,query:o,suspense:i.suspense}))throw f.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(i,f),i.experimental_prefetchInRender&&!Uc&&qZ(f,r)&&(u?uR(i,h,s):o?.promise)?.catch(ss).finally(()=>{h.updateResult()}),i.notifyOnChangeProps?f:h.trackResult(f)}function Wd(e,t){return GZ(e,CZ)}function hr(e,t){const n=Ml(),[r]=A.useState(()=>new OZ(n,e));A.useEffect(()=>{r.setOptions(e)},[r,e]);const s=A.useSyncExternalStore(A.useCallback(i=>r.subscribe(cr.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=A.useCallback((i,o)=>{r.mutate(i,o).catch(ss)},[r]);if(s.error&&GC(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const KZ="Logging",ZZ="NoHubcallbackProvidedException";var Vs;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(Vs||(Vs={}));const dR={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class wa{constructor(t,n=Vs.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let r=this.level;wa.LOG_LEVEL&&(r=wa.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);const s=dR[r];if(!(dR[t]>=s))return;let i=console.log.bind(console);t===Vs.ERROR&&console.error&&(i=console.error.bind(console)),t===Vs.WARN&&console.warn&&(i=console.warn.bind(console)),wa.BIND_ALL_LOG_LEVELS&&(t===Vs.INFO&&console.info&&(i=console.info.bind(console)),t===Vs.DEBUG&&console.debug&&(i=console.debug.bind(console)));const o=`[${t}] ${this._ts()} ${this.name}`;let u="";if(n.length===1&&typeof n[0]=="string")u=`${o} - ${n[0]}`,i(u);else if(n.length===1)u=`${o} ${n[0]}`,i(o,n[0]);else if(typeof n[0]=="string"){let h=n.slice(1);h.length===1&&(h=h[0]),u=`${o} - ${n[0]} ${h}`,i(`${o} - ${n[0]}`,h)}else u=`${o} ${n}`,i(o,n);for(const h of this._pluggables){const f={message:u,timestamp:Date.now()};h.pushLogs([f])}}log(...t){this._log(Vs.INFO,...t)}info(...t){this._log(Vs.INFO,...t)}warn(...t){this._log(Vs.WARN,...t)}error(...t){this._log(Vs.ERROR,...t)}debug(...t){this._log(Vs.DEBUG,...t)}verbose(...t){this._log(Vs.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===KZ&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}wa.LOG_LEVEL=null;wa.BIND_ALL_LOG_LEVELS=!1;class Mi extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:s,metadata:a}){if(super(t),this.name=n,this.underlyingError=s,this.recoverySuggestion=r,a){const{extendedRequestId:i,httpStatusCode:o,requestId:u}=a;this.metadata={extendedRequestId:i,httpStatusCode:o,requestId:u}}this.constructor=Mi,Object.setPrototypeOf(this,Mi.prototype)}}var jd;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(jd||(jd={}));const C5=(e,t=Mi)=>(n,r,s)=>{const{message:a,recoverySuggestion:i}=e[r];if(!n)throw new t({name:r,message:s?`${a} ${s}`:a,recoverySuggestion:i})},nb=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",yf=new wa("Hub");class WZ{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const r=this.listeners.get(t);if(!r){yf.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...r.filter(({callback:s})=>s!==n)])}dispatch(t,n,r,s){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(s===nb||yf.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const a={channel:t,payload:{...n},source:r,patternInfo:[]};try{this._toListeners(a)}catch(i){yf.error(i)}}listen(t,n,r="noname"){let s;if(typeof n!="function")throw new Mi({name:ZZ,message:"No callback supplied to Hub"});s=n;let a=this.listeners.get(t);return a||(a=[],this.listeners.set(t,a)),a.push({name:r,callback:s}),()=>{this._remove(t,s)}}_toListeners(t){const{channel:n,payload:r}=t,s=this.listeners.get(n);s&&s.forEach(a=>{yf.debug(`Dispatching to ${n} with `,r);try{a.callback(t)}catch(i){yf.error(i)}})}}const IS=new WZ("__default__"),JZ=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new Mi({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},YZ={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),JZ()(n)}};var yo;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(yo||(yo={}));const QZ={[yo.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[yo.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[yo.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[yo.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[yo.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},E5=C5(QZ);function bs(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,E5(t,yo.AuthUserPoolException)}function T0(e){const t=!!e?.identityPoolId;E5(t,yo.InvalidIdentityPoolIdException)}function Dp(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const r=t[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(YZ.convert(r).split("").map(i=>`%${`00${i.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),a=JSON.parse(s);return{toString:()=>e,payload:a}}catch{throw new Error("Invalid token payload")}}const j5=e=>{const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&j5(r)}return Object.freeze(e)},XZ=new wa("parseAWSExports"),eW={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},tW=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new Mi({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:s,aws_bots_config:a,aws_cognito_identity_pool_id:i,aws_cognito_sign_up_verification_method:o,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:h,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:m,aws_cognito_signup_attributes:g,aws_cognito_social_providers:b,aws_cognito_username_attributes:w,aws_mandatory_sign_in:x,aws_mobile_analytics_app_id:S,aws_mobile_analytics_app_region:k,aws_user_files_s3_bucket:C,aws_user_files_s3_bucket_region:T,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:P,aws_user_pools_id:D,aws_user_pools_web_client_id:R,geo:U,oauth:j,predictions:se,aws_cloud_logic_custom:B,Notifications:ee,modelIntrospection:ie}=e,_e={};S&&(_e.Analytics={Pinpoint:{appId:S,region:k}});const{InAppMessaging:G,Push:H}=ee??{};if(G?.AWSPinpoint||H?.AWSPinpoint){if(G?.AWSPinpoint){const{appId:V,region:he}=G.AWSPinpoint;_e.Notifications={InAppMessaging:{Pinpoint:{appId:V,region:he}}}}if(H?.AWSPinpoint){const{appId:V,region:he}=H.AWSPinpoint;_e.Notifications={..._e.Notifications,PushNotification:{Pinpoint:{appId:V,region:he}}}}}if(Array.isArray(a)&&(_e.Interactions={LexV1:Object.fromEntries(a.map(V=>[V.name,V]))}),r){const V=eW[n];V||XZ.debug(`Invalid authentication type ${n}. Falling back to IAM.`),_e.API={GraphQL:{endpoint:r,apiKey:t,region:s,defaultAuthMode:V??"iam"}},ie&&(_e.API.GraphQL.modelIntrospection=ie)}const L=u?{status:u&&u.toLowerCase(),totpEnabled:h?.includes("TOTP")??!1,smsEnabled:h?.includes("SMS")??!1}:void 0,Z=f?{minLength:f.passwordPolicyMinLength,requireLowercase:f.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:f.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:f.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:f.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,de=Array.from(new Set([...m??[],...g??[]])).reduce((V,he)=>({...V,[he.toLowerCase()]:{required:!0}}),{}),$=w?.includes("EMAIL")??!1,F=w?.includes("PHONE_NUMBER")??!1;(i||D)&&(_e.Auth={Cognito:{identityPoolId:i,allowGuestAccess:x!=="enable",signUpVerificationMethod:o,userAttributes:de,userPoolClientId:R,userPoolId:D,mfa:L,passwordFormat:Z,loginWith:{username:!($||F),email:$,phone:F}}});const Q=j?Object.keys(j).length>0:!1,O=b?b.length>0:!1;if(_e.Auth&&Q&&(_e.Auth.Cognito.loginWith={..._e.Auth.Cognito.loginWith,oauth:{...nW(j),...O&&{providers:rW(b)}}}),C&&(_e.Storage={S3:{bucket:C,region:T,dangerouslyConnectToHttpEndpointForTesting:P}}),U){const{amazon_location_service:V}=U;_e.Geo={LocationService:{maps:V.maps,geofenceCollections:V.geofenceCollections,searchIndices:V.search_indices,region:V.region}}}if(B&&(_e.API={..._e.API,REST:B.reduce((V,he)=>{const{name:I,endpoint:N,region:ne,service:K}=he;return{...V,[I]:{endpoint:N,...K?{service:K}:void 0,...ne?{region:ne}:void 0}}},{})}),se){const{VoiceId:V}=se?.convert?.speechGenerator?.defaults??{};_e.Predictions=V?{...se,convert:{...se.convert,speechGenerator:{...se.convert.speechGenerator,defaults:{voiceId:V}}}}:se}return _e},hR=e=>e?.split(",")??[],nW=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:s})=>({domain:e,scopes:t,redirectSignIn:hR(n),redirectSignOut:hR(r),responseType:s}),rW=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),sW=Symbol("oauth-listener"),Ar=[];for(let e=0;e<256;++e)Ar.push((e+256).toString(16).slice(1));function aW(e,t=0){return(Ar[e[t+0]]+Ar[e[t+1]]+Ar[e[t+2]]+Ar[e[t+3]]+"-"+Ar[e[t+4]]+Ar[e[t+5]]+"-"+Ar[e[t+6]]+Ar[e[t+7]]+"-"+Ar[e[t+8]]+Ar[e[t+9]]+"-"+Ar[e[t+10]]+Ar[e[t+11]]+Ar[e[t+12]]+Ar[e[t+13]]+Ar[e[t+14]]+Ar[e[t+15]]).toLowerCase()}let G_;const iW=new Uint8Array(16);function oW(){if(!G_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");G_=crypto.getRandomValues.bind(crypto)}return G_(iW)}const lW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fR={randomUUID:lW};function WC(e,t,n){if(fR.randomUUID&&!t&&!e)return fR.randomUUID();e=e||{};const r=e.random??e.rng?.()??oW();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let s=0;s<16;++s)t[n+s]=r[s];return t}return aW(r)}function cW(e){const{version:t}=e;return t?t.startsWith("1"):!1}function uW(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&wW(r)}}}function dW(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:s,mfa_configuration:a,mfa_methods:i,unauthenticated_identities_enabled:o,oauth:u,username_attributes:h,standard_required_attributes:f,groups:m}=e,g={Cognito:{userPoolId:t,userPoolClientId:n,groups:m}};return r&&(g.Cognito={...g.Cognito,identityPoolId:r}),s&&(g.Cognito.passwordFormat={requireLowercase:s.require_lowercase,requireNumbers:s.require_numbers,requireUppercase:s.require_uppercase,requireSpecialCharacters:s.require_symbols,minLength:s.min_length??6}),a&&(g.Cognito.mfa={status:vW(a),smsEnabled:i?.includes("SMS"),totpEnabled:i?.includes("TOTP")}),o&&(g.Cognito.allowGuestAccess=o),u&&(g.Cognito.loginWith={oauth:{domain:u.domain,redirectSignIn:u.redirect_sign_in_uri,redirectSignOut:u.redirect_sign_out_uri,responseType:u.response_type==="token"?"token":"code",scopes:u.scopes,providers:xW(u.identity_providers)}}),h&&(g.Cognito.loginWith={...g.Cognito.loginWith,email:h.includes("email"),phone:h.includes("phone_number"),username:h.includes("username")}),f&&(g.Cognito.userAttributes=f.reduce((b,w)=>({...b,[w]:{required:!0}}),{})),g}function hW(e){if(!e?.amazon_pinpoint)return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function fW(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:r,search_indices:s}=e;return{LocationService:{region:t,searchIndices:s,geofenceCollections:n,maps:r}}}function pW(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:r,api_key:s,model_introspection:a}=e;return{GraphQL:{endpoint:r,defaultAuthMode:N5(n),region:t,apiKey:s,modelIntrospection:a}}}function mW(e){if(!e?.events)return;const{url:t,aws_region:n,api_key:r,default_authorization_type:s}=e.events;return{Events:{endpoint:t,defaultAuthMode:N5(s),region:n,apiKey:r}}}function gW(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,s=n.includes("IN_APP_MESSAGING"),a=n.includes("APNS")||n.includes("FCM");if(!(s||a))return;const i={};return s&&(i.InAppMessaging={Pinpoint:{appId:r,region:t}}),a&&(i.PushNotification={Pinpoint:{appId:r,region:t}}),i}function yW(e){const t={};if(e.storage&&(t.Storage=uW(e.storage)),e.auth&&(t.Auth=dW(e.auth)),e.analytics&&(t.Analytics=hW(e.analytics)),e.geo&&(t.Geo=fW(e.geo)),e.data&&(t.API=pW(e.data)),e.custom){const n=mW(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=gW(e.notifications)),t}const bW={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function N5(e){return bW[e]}const pR={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function xW(e=[]){return e.reduce((t,n)=>(pR[n]!==void 0&&t.push(pR[n]),t),[])}function vW(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function wW(e){const t={};return e.forEach(({name:n,bucket_name:r,aws_region:s,paths:a})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);const i=a?Object.entries(a).reduce((o,[u,h])=>(h!==void 0&&(o[u]=h),o),{}):void 0;t[n]={bucketName:r,region:s,paths:i}}),t}const A5=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?tW(e):cW(e)?yW(e):e,_W=e=>new TextEncoder().encode(e);typeof Buffer<"u"&&Buffer.from;for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var Zn;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(Zn||(Zn={}));var mR;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(mR||(mR={}));var gR;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(gR||(gR={}));var yR;(function(e){e.Record="1",e.IdentifyUser="2"})(yR||(yR={}));var bR;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(bR||(bR={}));var xR;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(xR||(xR={}));var vR;(function(e){e.Subscribe="1",e.GraphQl="2"})(vR||(vR={}));var wR;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(wR||(wR={}));var _R;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(_R||(_R={}));var kR;(function(e){e.None="0"})(kR||(kR={}));var SR;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(SR||(SR={}));var TR;(function(e){e.Subscribe="1"})(TR||(TR={}));var CR;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(CR||(CR={}));var ER;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(ER||(ER={}));const kW="6.15.9",dx=()=>typeof global<"u",Jd=()=>typeof window<"u",I5=()=>typeof document<"u",JC=()=>typeof process<"u",$p=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var jR={};function SW(){const e=r=>r.startsWith("_react")||r.startsWith("__react"),t=r=>Object.keys(r).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return I5()&&n().some(t)}function TW(){return JC()&&typeof jR<"u"&&!!Object.keys(jR).find(e=>e.includes("react"))}function CW(){return Jd()&&$p(window,"__VUE")}function EW(){return dx()&&$p(global,"__VUE")}var NR={};function jW(){return Jd()&&$p(window,"__SVELTE")}function NW(){return JC()&&typeof NR<"u"&&!!Object.keys(NR).find(e=>e.includes("svelte"))}function AW(){return Jd()&&window.next&&typeof window.next=="object"}function IW(){return dx()&&($p(global,"__next")||$p(global,"__NEXT"))}function OW(){return Jd()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function RW(){return dx()&&typeof global.__NUXT_PATHS__<"u"}var AR={};function PW(){const e=!!(I5()&&document.querySelector("[ng-version]")),t=!!(Jd()&&typeof window.ng<"u");return e||t}function MW(){return JC()&&typeof AR=="object"&&AR.npm_lifecycle_script?.startsWith("ng ")||!1}function DW(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function $W(){return dx()&&typeof global.expo<"u"}function LW(){return Jd()}const zW=[{platform:Zn.Expo,detectionMethod:$W},{platform:Zn.ReactNative,detectionMethod:DW},{platform:Zn.NextJs,detectionMethod:AW},{platform:Zn.Nuxt,detectionMethod:OW},{platform:Zn.Angular,detectionMethod:PW},{platform:Zn.React,detectionMethod:SW},{platform:Zn.VueJs,detectionMethod:CW},{platform:Zn.Svelte,detectionMethod:jW},{platform:Zn.WebUnknown,detectionMethod:LW},{platform:Zn.NextJsSSR,detectionMethod:IW},{platform:Zn.NuxtSSR,detectionMethod:RW},{platform:Zn.ReactSSR,detectionMethod:TW},{platform:Zn.VueJsSSR,detectionMethod:EW},{platform:Zn.AngularSSR,detectionMethod:MW},{platform:Zn.SvelteSSR,detectionMethod:NW}];function UW(){return zW.find(e=>e.detectionMethod())?.platform||Zn.ServerSideUnknown}let yp;const K_=[];let OS=!1;const FW=10,BW=10,HW=1e3,O5=()=>{if(!yp){if(yp=UW(),OS)for(;K_.length;)K_.pop()?.();else K_.forEach(e=>{e()});IR(Zn.ServerSideUnknown,FW),IR(Zn.WebUnknown,BW)}return yp};function qW(){yp=void 0}function IR(e,t){yp===e&&!OS&&setTimeout(()=>{qW(),OS=!0,setTimeout(O5,HW)},t)}const VW={},GW=(e,t)=>VW[e]?.[t]?.additionalDetails,KW="aws-amplify",ZW=e=>e.replace(/\+.*/,""),WW=({category:e,action:t}={})=>{const n=[[KW,ZW(kW)]];if(e&&n.push([e,t]),n.push(["framework",O5()]),e&&t){const r=GW(e,t);r&&r.forEach(s=>{n.push(s)})}return n},YC=e=>WW(e).map(([r,s])=>r&&s?`${r}/${s}`:r).join(" "),JW=()=>typeof window<"u"&&typeof window.document<"u",OR=new wa("Auth");class YW{configure(t,n){this.authConfig=t,this.authOptions=n,t&&t.Cognito?.userPoolEndpoint&&OR.warn(RR("Amazon Cognito User Pool")),t&&t.Cognito?.identityPoolEndpoint&&OR.warn(RR("Amazon Cognito Identity Pool"))}async fetchAuthSession(t={}){let n,r;const s=await this.getTokens(t);return s?(r=s.accessToken?.payload?.sub,n=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:s,authenticated:!0,forceRefresh:t.forceRefresh})):n=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:s,credentials:n?.credentials,identityId:n?.identityId,userSub:r}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(t){return await this.authOptions?.tokenProvider?.getTokens(t)??void 0}}const RR=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;class QW{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new YW}configure(t,n){const r=A5(t);this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=j5(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),IS.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",nb),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[sW](t){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?t(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=t}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}const al=new QW,hx=e=>{const{headers:t,statusCode:n}=e;return{...XW(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},XW=e=>typeof e?.$metadata=="object",fm=async e=>{if(!e||e.statusCode<300)return;const t=await fx(e),r=(i=>{const[o]=i.toString().split(/[,:]+/);return o.includes("#")?o.split("#")[1]:o})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),s=t.message??t.Message??"Unknown error",a=new Error(s);return Object.assign(a,{name:r,$metadata:hx(e)})},fx=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:hx(e)})},QC=(e,t,n,r)=>async(s,a)=>{const i={...r,...s},o=await i.endpointResolver(i,a),u=await t(a,o),h=await e(u,{...i});return n(h)},eJ=300*1e3;function tJ(e=eJ){return r=>{const s=2**r*100+100*Math.random();return s>e?!1:s}}const R5=3,PR="amz-sdk-invocation-id",nJ="amz-sdk-request",MR=300*1e3,P5=e=>{const n=tJ(MR)(e);return n===!1?MR:n},rJ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],sJ=e=>!!e&&rJ.includes(e),M5=e=>async(t,n)=>{const r=n??await e(t)??void 0,s=r?.code||r?.name,a=t?.statusCode;return{retryable:lJ(n)||oJ(a,s)||sJ(s)||cJ(a,s)}},aJ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],iJ=["TimeoutError","RequestTimeout","RequestTimeoutException"],oJ=(e,t)=>e===429||!!t&&aJ.includes(t),lJ=e=>[jd.NetworkError,"ERR_NETWORK"].includes(e?.name),cJ=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&iJ.includes(t),D5="cognito-identity",$5={service:D5,retryDecider:M5(fm),computeDelay:P5,cache:"no-store"},uJ=({maxAttempts:e=R5,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(s,a)=>async function(o){let u,h=a.attemptsCount??0,f;const m=()=>{if(f)return DR(f,h),f;throw DR(u,h),u};for(;!r?.aborted&&h<e;){try{f=await s(o),u=void 0}catch(w){u=w,f=void 0}h=(a.attemptsCount??0)>h?a.attemptsCount??0:h+1,a.attemptsCount=h;const{isCredentialsExpiredError:g,retryable:b}=await t(f,u,a);if(b){if(a.isCredentialsExpired=!!g,!r?.aborted&&h<e){const w=n(h);await dJ(w,r)}continue}else return m()}if(r?.aborted)throw new Error("Request aborted.");return m()}},dJ=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,r;const s=new Promise(a=>{r=a,n=setTimeout(a,e)});return t?.addEventListener("abort",function a(i){clearTimeout(n),t?.removeEventListener("abort",a),r()}),s},DR=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},hJ=WC,fJ=()=>e=>async function(n){return n.headers[PR]||(n.headers[PR]=hJ()),e(n)},pJ=({maxAttempts:e=R5})=>(t,n)=>async function(s){const a=n.attemptsCount??0;return s.headers[nJ]=`attempt=${a+1}; max=${e}`,t(s)},mJ=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(s){if(t.trim().length===0)return await n(s);{const a=e.toLowerCase();return s.headers[a]=s.headers[a]?`${s.headers[a]} ${t}`:t,await n(s)}},XC=(e,t)=>(n,r)=>{const s={};let a=i=>e(i,r);for(let i=t.length-1;i>=0;i--){const o=t[i];a=o(r)(a,s)}return a(n)},Z_=e=>{let t;return()=>(t||(t=e()),t)},gJ=e=>!["HEAD","GET"].includes(e.toUpperCase()),yJ=async({url:e,method:t,headers:n,body:r},{abortSignal:s,cache:a,withCrossDomainCredentials:i})=>{let o;try{o=await fetch(e,{method:t,headers:n,body:gJ(t)?r:void 0,signal:s,cache:a,credentials:i?"include":"same-origin"})}catch(m){throw m instanceof TypeError?new Mi({name:jd.NetworkError,message:"A network error has occurred.",underlyingError:m}):m}const u={};o.headers?.forEach((m,g)=>{u[g.toLowerCase()]=m});const h={statusCode:o.status,headers:u,body:null},f=Object.assign(o.body??{},{text:Z_(()=>o.text()),blob:Z_(()=>o.blob()),json:Z_(()=>o.json())});return{...h,body:f}},L5=XC(yJ,[mJ,fJ,uJ,pJ]),bJ=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},z5=XC(L5,[bJ]),U5=e=>(t,n)=>{const r=xJ(e),s=JSON.stringify(t);return vJ(n,r,s)},xJ=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),vJ=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),$R=e=>QC(z5,U5("GetCredentialsForIdentity"),wJ,{...$5,...e,userAgentValue:YC()}),wJ=async e=>{if(e.statusCode>=300)throw await fm(e);const t=await fx(e);return{IdentityId:t.IdentityId,Credentials:_J(t.Credentials),$metadata:hx(e)}},_J=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(e*1e3)}),kJ=e=>QC(z5,U5("GetId"),SJ,{...$5,...e,userAgentValue:YC()}),SJ=async e=>{if(e.statusCode>=300)throw await fm(e);return{IdentityId:(await fx(e)).IdentityId,$metadata:hx(e)}},F5={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},TJ={partitions:[F5,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},B5=e=>{const{partitions:t}=TJ;for(const{regions:n,outputs:r,regionRegex:s}of t){const a=new RegExp(s);if(n.includes(e)||a.test(e))return r.dnsSuffix}return F5.outputs.dnsSuffix},px=URL,CJ=({region:e})=>({url:new px(`https://${D5}.${e}.${B5(e)}`)});class Kf extends Mi{constructor(){super({name:jd.PlatformNotSupported,message:"Function not supported on current platform"})}}class H5{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new Kf;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new Kf;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new Kf;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new Kf;this.storage.clear()}}class q5{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const V5=new wa("CoreStorageUtils"),EJ=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{V5.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new q5},G5=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return V5.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new q5}};class jJ extends H5{constructor(){super(EJ())}}class NJ extends H5{constructor(){super(G5())}}class AJ{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new Kf;return this._storage}setItem(t,n){this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}class IJ extends AJ{constructor(){super(G5())}}function py(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var OJ={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function RS(e,t){function n(s,a,i){if(!(typeof document>"u")){i=py({},t,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var u in i)i[u]&&(o+="; "+u,i[u]!==!0&&(o+="="+i[u].split(";")[0]));return document.cookie=s+"="+e.write(a,s)+o}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var a=document.cookie?document.cookie.split("; "):[],i={},o=0;o<a.length;o++){var u=a[o].split("="),h=u.slice(1).join("=");try{var f=decodeURIComponent(u[0]);if(i[f]=e.read(h,f),s===f)break}catch{}}return s?i[s]:i}}return Object.create({set:n,get:r,remove:function(s,a){n(s,"",py({},a,{expires:-1}))},withAttributes:function(s){return RS(this.converter,py({},this.attributes,s))},withConverter:function(s){return RS(py({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var my=RS(OJ,{path:"/"});class RJ{constructor(t={}){const{path:n,domain:r,expires:s,sameSite:a,secure:i}=t;if(this.domain=r,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?s:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?i:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!a||!["strict","lax","none"].includes(a))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(a==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=a}}async setItem(t,n){my.set(t,n,this.getData())}async getItem(t){return my.get(t)??null}async removeItem(t){my.remove(t,this.getData())}async clear(){const t=my.get(),n=Object.keys(t).map(r=>this.removeItem(r));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const mx=new jJ;new NJ;new IJ;const PJ=e=>{let t;return async(...n)=>t||(t=new Promise((r,s)=>{e(...n).then(a=>{r(a)}).catch(a=>{s(a)}).finally(()=>{t=void 0})}),t)};function LR({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}class pn extends Mi{constructor(t){super(t),this.constructor=pn,Object.setPrototypeOf(this,pn.prototype)}}function MJ(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new pn({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function PS(e){if(!e||!e.includes(":"))throw new pn({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const K5="UserUnAuthenticatedException",DJ="InvalidRedirectException",$J="InvalidAppSchemeException",LJ="InvalidPreferredRedirectUrlException";new pn({name:DJ,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new pn({name:$J,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new pn({name:LJ,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const zJ="InvalidOriginException";new pn({name:zJ,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const UJ="TokenRefreshException";function FJ(e){if(!e||!e.idToken)throw new pn({name:K5,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const BJ=new pn({name:UJ,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),HJ=new pn({name:K5,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function qJ(e){if(KJ(e))throw BJ;if(!GJ(e))throw HJ}const VJ={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Z5(e){return e?.accessToken||e?.idToken}function GJ(e){return Z5(e)&&e?.refreshToken}function KJ(e){return Z5(e)&&!e?.refreshToken}const ZJ=e=>(t,n)=>{const r=WJ(e),s=JSON.stringify(t);return JJ(n,r,s)},WJ=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),JJ=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function Lp(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new pn({name:jd.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const YJ=()=>async e=>{if(e.statusCode>=300){const t=await fm(e);throw Lp(t),new pn({name:t.name,message:t.message,metadata:t.$metadata})}return fx(e)},QJ=()=>(e,t)=>async function(r){return r.headers["cache-control"]="no-store",e(r)},XJ=XC(L5,[QJ]),W5="cognito-idp",eY={service:W5,retryDecider:M5(fm),computeDelay:P5,get userAgentValue(){return YC()},cache:"no-store"},tY=({region:e})=>({url:new px(`https://${W5}.${e}.${B5(e)}`)}),nY=({endpointOverride:e})=>t=>e?{url:new px(e)}:tY(t),rY=e=>QC(XJ,ZJ("GetTokensFromRefreshToken"),YJ(),{...eY,...e}),sY=async({tokens:e,authConfig:t,username:n,clientMetadata:r})=>{bs(t?.Cognito);const{userPoolId:s,userPoolClientId:a,userPoolEndpoint:i}=t.Cognito,o=MJ(s);qJ(e);const u=rY({endpointResolver:nY({endpointOverride:i})}),{AuthenticationResult:h}=await u({region:o},{ClientId:a,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey,ClientMetadata:r}),f=Dp(h?.AccessToken??""),m=h?.IdToken?Dp(h.IdToken):void 0,{iat:g}=f.payload;if(!g)throw new pn({name:"iatNotFoundException",message:"iat not found in access token"});const b=g*1e3-new Date().getTime();return{accessToken:f,idToken:m,clockDrift:b,refreshToken:h?.RefreshToken??e.refreshToken,username:n}},aY=PJ(sY),iY={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var rb;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(rb||(rb={}));const oY={[rb.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},lY=C5(oY),zR="CognitoIdentityServiceProvider";class cY{getKeyValueStorage(){if(!this.keyValueStorage)throw new pn({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new pn({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=Dp(n),s=await this.getKeyValueStorage().getItem(t.idToken),a=s?Dp(s):void 0,i=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,o=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",u=Number.parseInt(o),h=await this.getKeyValueStorage().getItem(t.signInDetails),f={accessToken:r,idToken:a,refreshToken:i,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return h&&(f.signInDetails=JSON.parse(h)),f}catch{return null}}async storeTokens(t){lY(t!==void 0,rb.InvalidAuthTokens);const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const r=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken?await this.getKeyValueStorage().setItem(r.idToken,t.idToken.toString()):await this.getKeyValueStorage().removeItem(r.idToken),t.refreshToken?await this.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken):await this.getKeyValueStorage().removeItem(r.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?await this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails)):await this.getKeyValueStorage().removeItem(r.signInDetails),await this.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),r=await this.getKeyValueStorage().getItem(n.deviceKey),s=await this.getKeyValueStorage().getItem(n.deviceGroupKey),a=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return a&&s&&r?{deviceKey:r,deviceGroupKey:s,randomPassword:a}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){bs(this.authConfig?.Cognito);const n=t??await this.getLastAuthUser();return uY(zR,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){bs(this.authConfig?.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${zR}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){const{oauthMetadata:n}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n,JSON.stringify(t))}async getOAuthMetadata(){const{oauthMetadata:t}=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)}}const uY=(e,t)=>eE(iY)(`${e}`,t);function eE(e){const t=Object.values({...e});return(n,r)=>t.reduce((s,a)=>({...s,[a]:`${n}.${r}.${a}`}),{})}const UR="amplify-signin-with-hostedUI",xi="CognitoIdentityServiceProvider";class dY{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(UR),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){bs(this.cognitoConfig);const n=vi(xi,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){bs(this.cognitoConfig);const n=vi(xi,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){bs(this.cognitoConfig);const n=vi(xi,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)}async loadOAuthSignIn(){bs(this.cognitoConfig);const t=vi(xi,this.cognitoConfig.userPoolClientId),n=await this.keyValueStorage.getItem(UR),[r,s]=(await this.keyValueStorage.getItem(t.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:r==="true"||n==="true",preferPrivateSession:s==="true"}}async storeOAuthSignIn(t,n=!1){bs(this.cognitoConfig);const r=vi(xi,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.oauthSignIn,`${t},${n}`)}}const vi=(e,t)=>eE(VJ)(e,t),FR=new dY(mx);class hY{constructor(){this.waitForInflightOAuth=JW()?async()=>{if(await FR.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){FR.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new pn({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new pn({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(t){this.clientMetadataProvider=t}async getTokens(t){let n;try{bs(this.authConfig?.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,n=await this.getTokenStore().loadTokens();const r=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const s=!!n?.idToken&&LR({expiresAt:(n.idToken?.payload?.exp??0)*1e3,clockDrift:n.clockDrift??0}),a=LR({expiresAt:(n.accessToken?.payload?.exp??0)*1e3,clockDrift:n.clockDrift??0});return(t?.forceRefresh||s||a)&&(n=await this.refreshTokens({tokens:n,username:r,clientMetadata:t?.clientMetadata??await this.clientMetadataProvider?.()}),n===null)?null:{accessToken:n?.accessToken,idToken:n?.idToken,signInDetails:n?.signInDetails}}async refreshTokens({tokens:t,username:n,clientMetadata:r}){try{const{signInDetails:s}=t,a=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n,clientMetadata:r});return a.signInDetails=s,await this.setTokens({tokens:a}),IS.dispatch("auth",{event:"tokenRefresh"},"Auth",nb),a}catch(s){return this.handleErrors(s)}}handleErrors(t){if(Lp(t),this.isAuthenticationError(t)&&this.clearTokens(),IS.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",nb),t.name.startsWith("NotAuthorizedException"))return null;throw t}isAuthenticationError(t){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(r=>t?.name?.startsWith?.(r))}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class fY{constructor(){this.authTokenStore=new cY,this.authTokenStore.setKeyValueStorage(mx),this.tokenOrchestrator=new hY,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(aY)}getTokens(t={}){return this.tokenOrchestrator.getTokens(t)}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setClientMetadataProvider(t){this.tokenOrchestrator.setClientMetadataProvider(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Zf=new fY,{tokenOrchestrator:PRe}=Zf,pY={identityId:"identityId"},mY=new wa("DefaultIdentityIdStore");class J5{setAuthConfig(t){T0(t.Cognito),this.authConfig=t,this._authKeys=gY("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}async loadIdentityId(){T0(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const t=await this.keyValueStorage.getItem(this._authKeys.identityId);return t?(this._hasGuestIdentityId=!0,{id:t,type:"guest"}):null}}catch(t){return mY.log("Error getting stored IdentityId.",t),null}}async storeIdentityId(t){T0(this.authConfig?.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const gY=(e,t)=>eE(pY)(`com.amplify.${e}`,t),MS=({endpointOverride:e})=>t=>e?{url:new px(e)}:CJ(t);function Y5(e){const t=Dp(e).payload.iss,n={};if(!t)throw new pn({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const r=t.replace(/(^\w+:|^)\/\//,"");return n[r]=e,n}async function yY({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const r=await n.loadIdentityId();if(r)return r.id;const s=e?.idToken?Y5(e.idToken.toString()):{},a=await bY(s,t);return n.storeIdentityId({id:a,type:e?"primary":"guest"}),a}async function bY(e,t){const n=t?.identityPoolId,r=PS(n),s=kJ({endpointResolver:MS({endpointOverride:t.identityPoolEndpoint})});let a;try{a=(await s({region:r},{IdentityPoolId:n,Logins:e})).IdentityId}catch(i){throw Lp(i),new pn(i)}if(!a)throw new pn({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return a}const gy=new wa("CognitoCredentialsProvider"),BR=3e3*1e3;class Q5{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){gy.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){gy.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,{tokens:r}=t,{authConfig:s}=t;try{T0(s?.Cognito)}catch{return}if(!n&&!s.Cognito.allowGuestAccess)return;const{forceRefresh:a}=t,i=this.hasTokenChanged(r),o=await yY({tokens:r,authConfig:s.Cognito,identityIdStore:this._identityIdStore});return(a||i)&&this.clearCredentials(),n?(FJ(r),this.credsForOIDCTokens(s.Cognito,r,o)):this.getGuestCredentials(o,s.Cognito)}async getGuestCredentials(t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return gy.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=PS(n.identityPoolId),s=$R({endpointResolver:MS({endpointOverride:n.identityPoolEndpoint})});let a;try{a=await s({region:r},{IdentityId:t})}catch(i){throw Lp(i),new pn(i)}if(a?.Credentials?.AccessKeyId&&a?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+BR;const i={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:t};return a.IdentityId&&(i.identityId=a.IdentityId,this._identityIdStore.storeIdentityId({id:a.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...i,isAuthenticatedCreds:!1},i}else throw new pn({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,r){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return gy.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const s=n.idToken?Y5(n.idToken.toString()):{},a=PS(t.identityPoolId),i=$R({endpointResolver:MS({endpointOverride:t.identityPoolEndpoint})});let o;try{o=await i({region:a},{IdentityId:r,Logins:s})}catch(u){throw Lp(u),new pn(u)}if(o?.Credentials?.AccessKeyId&&o?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+BR;const u={credentials:{accessKeyId:o.Credentials.AccessKeyId,secretAccessKey:o.Credentials.SecretKey,sessionToken:o.Credentials.SessionToken,expiration:o.Credentials.Expiration},identityId:r};return o.IdentityId&&(u.identityId=o.IdentityId,this._identityIdStore.storeIdentityId({id:o.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...u,isAuthenticatedCreds:!0,associatedIdToken:n.idToken?.toString()},u}else throw new pn({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){return!!t&&!!this._credentialsAndIdentityId?.associatedIdToken&&t.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}const xY=new Q5(new J5(mx)),vY={configure(e,t){const n=A5(e),r=new RJ({sameSite:"lax"}),s=t?.ssr?r:mx,a=t?.ssr?new Q5(new J5(r)):xY;if(!n.Auth){al.configure(n,t);return}if(t?.Auth){al.configure(n,t);return}if(!al.libraryOptions.Auth){Zf.setAuthConfig(n.Auth),Zf.setKeyValueStorage(s),al.configure(n,{...t,Auth:{tokenProvider:Zf,credentialsProvider:a}});return}if(t){const i=al.libraryOptions.Auth;t.ssr!==void 0&&(Zf.setKeyValueStorage(s),i.credentialsProvider=a),al.configure(n,{Auth:i,...t});return}al.configure(n)},getConfig(){return al.getConfig()}},wY={Auth:{Cognito:{region:"us-east-1",userPoolId:"your_user_pool_id_here",userPoolClientId:"your_web_client_id_here",identityPoolId:"your_identity_pool_id_here"}}},_Y=()=>{vY.configure(wY)},kY="gs_";class br{storageKey;constructor(t){this.storageKey=`${kY}${t}`}getData(){const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):{}}setData(t){localStorage.setItem(this.storageKey,JSON.stringify(t))}getAll(){const t=this.getData();return Object.values(t)}getById(t){return this.getData()[t]||null}create(t,n){const r=this.getData();return r[t]=n,this.setData(r),n}update(t,n){const r=this.getData(),s=r[t];if(!s)return null;const a={...s,...n};return r[t]=a,this.setData(r),a}delete(t){const n=this.getData();return n[t]?(delete n[t],this.setData(n),!0):!1}clear(){localStorage.removeItem(this.storageKey)}seed(t){const n={};t.forEach(r=>{const s=r.id;n[s]=r}),this.setData(n)}}function rt(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function SY(e){return new Promise(t=>setTimeout(t,e))}function lt(e=100,t=500){const n=Math.floor(Math.random()*(t-e+1))+e;return SY(n)}const gt="user-1";function fe(e){return e.toISOString().split("T")[0]}function Oe(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function TY(){const e=new Date,t=[],n=[],r=[],s=[],a=[],i=[],o=[],u=[],h=[],f=[],m=[],g=[],b=[],w=[],x=[],S=[],k=[],C=[],T={id:rt(),title:"Launch Side Project",description:"Build and launch a SaaS product to generate passive income",area:"Wealth",subCategory:"Income",timeHorizon:"Yearly",priority:"P1",status:"Active",targetDate:fe(Oe(e,180)),completedDate:null,successCriteria:["Complete MVP with core features","Acquire 100 paying customers","Generate $5,000 MRR"],notes:null,userId:gt,createdAt:fe(Oe(e,-90)),updatedAt:fe(e)};r.push(T);const P={id:rt(),title:"Run First Marathon",description:"Train for and complete a full marathon",area:"Health",subCategory:"Exercise",timeHorizon:"Yearly",priority:"P2",status:"OnTrack",targetDate:fe(Oe(e,120)),completedDate:null,successCriteria:["Build up to 40 miles per week","Complete a half marathon","Finish marathon in under 4 hours"],notes:null,userId:gt,createdAt:fe(Oe(e,-60)),updatedAt:fe(e)};r.push(P);const D={id:rt(),title:"Q1 Revenue Target",description:"Hit quarterly revenue goals for the business",area:"DayJob",subCategory:"Performance",timeHorizon:"Quarterly",priority:"P1",status:"Active",targetDate:fe(Oe(e,30)),completedDate:null,successCriteria:["Close 15 new deals","Achieve $150K in revenue","Maintain 95% customer retention"],notes:null,userId:gt,createdAt:fe(Oe(e,-60)),updatedAt:fe(e)};r.push(D);const R={id:rt(),title:"Strengthen Family Relationships",description:"Spend quality time with family and improve communication",area:"Love",subCategory:"Family",timeHorizon:"Monthly",priority:"P2",status:"OnTrack",targetDate:fe(Oe(e,30)),completedDate:null,successCriteria:["Have weekly family dinners","Plan and execute one family outing","Call parents twice per week"," Start monthly family game night"],notes:"Focus on being present and engaged during family time",userId:gt,createdAt:fe(Oe(e,-15)),updatedAt:fe(e)};r.push(R);const U={id:rt(),title:"This Week: Complete Sprint Tasks",description:"Finish all committed sprint work items",area:"DayJob",subCategory:"Projects",timeHorizon:"Weekly",priority:"P1",status:"Active",targetDate:fe(Oe(e,5)),completedDate:null,successCriteria:[" Complete user authentication feature"," Write unit tests for API endpoints","Deploy to staging environment","Code review for team members"],notes:null,userId:gt,createdAt:fe(Oe(e,-2)),updatedAt:fe(e)};r.push(U);const j={id:rt(),title:"Daily Meditation Practice",description:"Build a consistent meditation habit",area:"Health",subCategory:"Mental",timeHorizon:"Daily",priority:"P2",status:"Active",targetDate:null,completedDate:null,successCriteria:[" Meditate for 10 minutes"," Practice mindful breathing","Journal after meditation"],notes:"Best time is early morning before work",userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};r.push(j);const se={id:rt(),title:"Learn Spanish",description:"Achieve conversational fluency in Spanish",area:"Happiness",subCategory:"Purpose",timeHorizon:"Yearly",priority:"P3",status:"Planning",targetDate:fe(Oe(e,365)),completedDate:null,successCriteria:["Complete Duolingo Spanish course","Have 50 conversation sessions with native speakers","Watch 10 Spanish movies without subtitles","Pass DELE A2 exam"],notes:"Planning to start after Q1 work commitments ease up",userId:gt,createdAt:fe(Oe(e,-5)),updatedAt:fe(e)};r.push(se);const B={id:rt(),title:"Reduce Credit Card Debt",description:"Pay off high-interest credit card balance",area:"Wealth",subCategory:"Debt",timeHorizon:"Quarterly",priority:"P1",status:"AtRisk",targetDate:fe(Oe(e,90)),completedDate:null,successCriteria:[" Create debt payoff plan","Pay $2,000 per month toward balance","Reduce total debt by 50%","Avoid new credit card purchases"],notes:"Behind schedule due to unexpected expenses. Need to cut discretionary spending.",userId:gt,createdAt:fe(Oe(e,-45)),updatedAt:fe(e)};r.push(B);const ee={id:rt(),title:"Organize Home Office",description:"Create an efficient and inspiring workspace",area:"Operations",subCategory:"Organization",timeHorizon:"Monthly",priority:"P3",status:"Active",targetDate:fe(Oe(e,20)),completedDate:null,successCriteria:[" Declutter desk and shelves"," Install better lighting","Set up ergonomic monitor stand","Create filing system for documents"],notes:null,userId:gt,createdAt:fe(Oe(e,-10)),updatedAt:fe(e)};r.push(ee);const ie={id:rt(),title:"Achieve Work-Life Balance",description:"Establish boundaries and maintain healthy work habits",area:"Happiness",subCategory:"Peace",timeHorizon:"Quarterly",priority:"P2",status:"Achieved",targetDate:fe(Oe(e,-15)),completedDate:fe(Oe(e,-15)),successCriteria:[" No work emails after 6 PM"," Take all vacation days"," Exercise 3x per week"," Have one hobby activity per week"],notes:"Successfully implemented boundaries. Feeling much better!",userId:gt,createdAt:fe(Oe(e,-90)),updatedAt:fe(Oe(e,-15))};r.push(ie);const _e={id:rt(),name:"SaaS MVP Development",description:"Build minimum viable product with core features",area:"Wealth",subCategory:"Projects",priority:"P1",status:"Active",impact:9,startDate:fe(Oe(e,-30)),endDate:fe(Oe(e,90)),completedDate:null,notes:null,userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};n.push(_e),g.push({projectId:_e.id,goalId:T.id,createdAt:fe(e)});const G={id:rt(),name:"Marathon Training Program",description:"16-week marathon training plan",area:"Health",subCategory:"Exercise",priority:"P2",status:"Active",impact:8,startDate:fe(Oe(e,-45)),endDate:fe(Oe(e,75)),completedDate:null,notes:null,userId:gt,createdAt:fe(Oe(e,-45)),updatedAt:fe(e)};n.push(G),g.push({projectId:G.id,goalId:P.id,createdAt:fe(e)});const H={id:rt(),title:"Design database schema",description:"Create PostgreSQL schema for user data",extendedDescription:"Include users, subscriptions, and usage tables. Consider multi-tenancy.",area:"Wealth",subCategory:"Projects",priority:"P1",status:"Done",size:5,dueDate:fe(Oe(e,-5)),scheduledDate:fe(Oe(e,-7)),completedDate:fe(Oe(e,-3)),notes:null,isRecurring:!1,recurrenceRule:null,userId:gt,createdAt:fe(Oe(e,-20)),updatedAt:fe(Oe(e,-3))};t.push(H),f.push({taskId:H.id,projectId:_e.id,createdAt:fe(e)}),m.push({taskId:H.id,goalId:T.id,createdAt:fe(e)});const L={id:rt(),title:"Build authentication system",description:"Implement user auth with JWT",extendedDescription:null,area:"Wealth",subCategory:"Projects",priority:"P1",status:"InProgress",size:8,dueDate:fe(Oe(e,3)),scheduledDate:fe(e),completedDate:null,notes:"Consider using OAuth for social login",isRecurring:!1,recurrenceRule:null,userId:gt,createdAt:fe(Oe(e,-15)),updatedAt:fe(e)};t.push(L),f.push({taskId:L.id,projectId:_e.id,createdAt:fe(e)}),m.push({taskId:L.id,goalId:T.id,createdAt:fe(e)}),h.push({id:rt(),taskId:L.id,dependsOnTaskId:H.id,createdAt:fe(e)});const Z={id:rt(),title:"Create API endpoints",description:"Build RESTful API for core features",extendedDescription:null,area:"Wealth",subCategory:"Projects",priority:"P1",status:"Blocked",size:13,dueDate:fe(Oe(e,7)),scheduledDate:fe(Oe(e,3)),completedDate:null,notes:"Blocked by authentication system",isRecurring:!1,recurrenceRule:null,userId:gt,createdAt:fe(Oe(e,-15)),updatedAt:fe(e)};t.push(Z),f.push({taskId:Z.id,projectId:_e.id,createdAt:fe(e)}),h.push({id:rt(),taskId:Z.id,dependsOnTaskId:L.id,createdAt:fe(e)});const W={id:rt(),title:"Long run: 10 miles",description:"Build endurance with long slow distance run",extendedDescription:null,area:"Health",subCategory:"Exercise",priority:"P2",status:"NotStarted",size:3,dueDate:fe(Oe(e,2)),scheduledDate:fe(Oe(e,2)),completedDate:null,notes:"Easy pace, focus on completing distance",isRecurring:!0,recurrenceRule:{frequency:"Weekly",interval:1,endDate:fe(Oe(e,75))},userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};t.push(W),f.push({taskId:W.id,projectId:G.id,createdAt:fe(e)}),m.push({taskId:W.id,goalId:P.id,createdAt:fe(e)});const de={id:rt(),name:"Weekly Running Miles",description:"Total miles run per week",area:"Health",subCategory:"Exercise",unit:"count",customUnit:"miles",direction:"Higher",targetValue:40,thresholdLow:20,thresholdHigh:50,source:"Manual",status:"Active",userId:gt,createdAt:fe(Oe(e,-45)),updatedAt:fe(e)};s.push(de),b.push({goalId:P.id,metricId:de.id,createdAt:fe(e)});for(let Se=0;Se<6;Se++)a.push({id:rt(),metricId:de.id,value:15+Se*3,notes:null,loggedAt:fe(Oe(e,-35+Se*7)),userId:gt,createdAt:fe(Oe(e,-35+Se*7))});const $={id:rt(),name:"MRR",description:"Monthly Recurring Revenue",area:"Wealth",subCategory:"Income",unit:"dollars",customUnit:null,direction:"Higher",targetValue:5e3,thresholdLow:1e3,thresholdHigh:1e4,source:"App",status:"Active",userId:gt,createdAt:fe(Oe(e,-90)),updatedAt:fe(e)};s.push($),b.push({goalId:T.id,metricId:$.id,createdAt:fe(e)}),a.push({id:rt(),metricId:$.id,value:0,notes:"Pre-launch",loggedAt:fe(Oe(e,-30)),userId:gt,createdAt:fe(Oe(e,-30))});const F={id:rt(),name:"Body Weight",description:"Track body weight to monitor health",area:"Health",subCategory:"Physical",unit:"pounds",customUnit:null,direction:"Lower",targetValue:175,thresholdLow:170,thresholdHigh:180,source:"Device",status:"Active",userId:gt,createdAt:fe(Oe(e,-60)),updatedAt:fe(e)};s.push(F);for(let Se=0;Se<8;Se++)a.push({id:rt(),metricId:F.id,value:183-Se*.5,notes:null,loggedAt:fe(Oe(e,-56+Se*7)),userId:gt,createdAt:fe(Oe(e,-56+Se*7))});const Q={id:rt(),name:"Daily Meditation",description:"Minutes of meditation practice",area:"Health",subCategory:"Mental",unit:"minutes",customUnit:null,direction:"Higher",targetValue:20,thresholdLow:10,thresholdHigh:30,source:"Manual",status:"Active",userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};s.push(Q);for(let Se=0;Se<5;Se++)a.push({id:rt(),metricId:Q.id,value:8+Se*2,notes:Se===4?"Starting to feel the benefits":null,loggedAt:fe(Oe(e,-4+Se)),userId:gt,createdAt:fe(Oe(e,-4+Se))});const O={id:rt(),name:"Time with Family",description:"Quality hours spent with family per week",area:"Love",subCategory:"Family",unit:"hours",customUnit:null,direction:"Higher",targetValue:15,thresholdLow:10,thresholdHigh:20,source:"Manual",status:"Active",userId:gt,createdAt:fe(Oe(e,-20)),updatedAt:fe(e)};s.push(O);for(let Se=0;Se<3;Se++)a.push({id:rt(),metricId:O.id,value:12+Se*1.5,notes:null,loggedAt:fe(Oe(e,-14+Se*7)),userId:gt,createdAt:fe(Oe(e,-14+Se*7))});const V={id:rt(),name:"Sleep Quality",description:"Subjective sleep quality rating",area:"Health",subCategory:"Sleep",unit:"rating",customUnit:null,direction:"Higher",targetValue:8,thresholdLow:6,thresholdHigh:10,source:"Manual",status:"Active",userId:gt,createdAt:fe(Oe(e,-45)),updatedAt:fe(e)};s.push(V);for(let Se=0;Se<7;Se++)a.push({id:rt(),metricId:V.id,value:5+Math.floor(Math.random()*3),notes:null,loggedAt:fe(Oe(e,-6+Se)),userId:gt,createdAt:fe(Oe(e,-6+Se))});const he={id:rt(),name:"Emergency Fund",description:"Savings reserved for emergencies",area:"Wealth",subCategory:"NetWorth",unit:"dollars",customUnit:null,direction:"Higher",targetValue:1e4,thresholdLow:5e3,thresholdHigh:15e3,source:"App",status:"Active",userId:gt,createdAt:fe(Oe(e,-120)),updatedAt:fe(e)};s.push(he);for(let Se=0;Se<4;Se++)a.push({id:rt(),metricId:he.id,value:6e3+Se*800,notes:Se===3?"On track to hit goal!":null,loggedAt:fe(Oe(e,-90+Se*30)),userId:gt,createdAt:fe(Oe(e,-90+Se*30))});const I={id:rt(),name:"Focus Score",description:"Daily productivity and focus rating",area:"Operations",subCategory:"Productivity",unit:"rating",customUnit:null,direction:"Higher",targetValue:8,thresholdLow:5,thresholdHigh:10,source:"Manual",status:"Paused",userId:gt,createdAt:fe(Oe(e,-100)),updatedAt:fe(e)};s.push(I),a.push({id:rt(),metricId:I.id,value:6,notes:"Pausing this metric to focus on others",loggedAt:fe(Oe(e,-30)),userId:gt,createdAt:fe(Oe(e,-30))});const N={id:rt(),name:"Morning Run",description:"Run 3-5 miles in the morning",area:"Health",subCategory:"Exercise",habitType:"Build",frequency:"Daily",dailyTarget:1,weeklyTarget:5,intent:"Build cardiovascular fitness and mental clarity",trigger:"After waking up and having water",action:"Put on running clothes and run 3-5 miles",reward:"Feel energized and track progress",frictionUp:null,frictionDown:"Lay out running clothes the night before, prep water bottle",notes:null,userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};i.push(N),w.push({habitId:N.id,goalId:P.id,createdAt:fe(e)});for(let Se=0;Se<20;Se++)Se%7!==6&&o.push({id:rt(),habitId:N.id,completedAt:fe(Oe(e,-20+Se)),amount:1,notes:null,userId:gt,createdAt:fe(Oe(e,-20+Se))});const ne={id:rt(),name:"Daily Coding",description:"Work on side project for at least 1 hour",area:"Wealth",subCategory:"Projects",habitType:"Build",frequency:"Daily",dailyTarget:1,weeklyTarget:5,intent:"Make consistent progress on SaaS product",trigger:"After dinner when laptop is open",action:"Code for 1 hour on side project",reward:"Update progress tracker and celebrate small wins",frictionUp:null,frictionDown:"Have development environment ready, clear task list prepared",notes:null,userId:gt,createdAt:fe(Oe(e,-30)),updatedAt:fe(e)};i.push(ne),w.push({habitId:ne.id,goalId:T.id,createdAt:fe(e)});for(let Se=0;Se<15;Se++)o.push({id:rt(),habitId:ne.id,completedAt:fe(Oe(e,-15+Se)),amount:1,notes:null,userId:gt,createdAt:fe(Oe(e,-15+Se))});const K={id:rt(),name:"Reduce Social Media",description:"Limit social media to 30 minutes per day",area:"Operations",subCategory:"Productivity",habitType:"Reduce",frequency:"Daily",dailyTarget:30,weeklyTarget:null,intent:"Reclaim time for more productive activities",trigger:"When feeling bored or procrastinating",action:"Check screen time limit before opening apps",reward:"More time for meaningful work",frictionUp:"Delete apps from phone, use browser only with blocker extensions",frictionDown:null,notes:null,userId:gt,createdAt:fe(Oe(e,-20)),updatedAt:fe(e)};i.push(K);const re={id:rt(),name:"Drink 8 Glasses of Water",description:"Stay hydrated throughout the day",area:"Health",subCategory:"Nutrition",habitType:"Maintain",frequency:"Daily",dailyTarget:8,weeklyTarget:null,intent:"Maintain proper hydration for health and energy",trigger:"Every time I finish a task",action:"Drink one glass of water",reward:"Feel refreshed and energized",frictionUp:null,frictionDown:"Keep water bottle on desk at all times",notes:null,userId:gt,createdAt:fe(Oe(e,-25)),updatedAt:fe(e)};i.push(re);for(let Se=0;Se<10;Se++)o.push({id:rt(),habitId:re.id,completedAt:fe(Oe(e,-10+Se)),amount:6+Math.floor(Math.random()*3),notes:null,userId:gt,createdAt:fe(Oe(e,-10+Se))});const be={id:rt(),name:"Evening Screen-Free Time",description:"No screens 1 hour before bed",area:"Health",subCategory:"Sleep",habitType:"Quit",frequency:"Daily",dailyTarget:1,weeklyTarget:7,intent:"Improve sleep quality by reducing blue light exposure",trigger:"9 PM alarm",action:"Put all devices in another room",reward:"Better sleep and more time for reading",frictionUp:"Use app blockers, set devices to grayscale mode",frictionDown:null,notes:null,userId:gt,createdAt:fe(Oe(e,-14)),updatedAt:fe(e)};i.push(be);for(let Se=0;Se<8;Se++)Se%3!==0&&o.push({id:rt(),habitId:be.id,completedAt:fe(Oe(e,-8+Se)),amount:1,notes:null,userId:gt,createdAt:fe(Oe(e,-8+Se))});const z={id:rt(),date:fe(Oe(e,-1)),title:"Productive Day on MVP",notes:"Made great progress on authentication system. Feeling good about the architecture decisions. Energy was high in the morning after my run.",mood:"High",energy:8,userId:gt,createdAt:fe(Oe(e,-1)),updatedAt:fe(Oe(e,-1))};u.push(z),x.push({logbookEntryId:z.id,taskId:L.id,createdAt:fe(e)}),S.push({logbookEntryId:z.id,projectId:_e.id,createdAt:fe(e)}),C.push({logbookEntryId:z.id,habitId:N.id,createdAt:fe(e)}),C.push({logbookEntryId:z.id,habitId:ne.id,createdAt:fe(e)});const Ne={id:rt(),date:fe(e),title:null,notes:"Rest day from running. Focused on planning the API architecture.",mood:"Steady",energy:7,userId:gt,createdAt:fe(e),updatedAt:fe(e)};u.push(Ne),C.push({logbookEntryId:Ne.id,habitId:ne.id,createdAt:fe(e)});const je={id:rt(),date:fe(Oe(e,-3)),title:"Challenges with API Design",notes:"Struggled with the authentication flow today. Spent too much time debugging. Need to ask for help sooner. Did complete my morning run which helped clear my head.",mood:"Low",energy:5,userId:gt,createdAt:fe(Oe(e,-3)),updatedAt:fe(Oe(e,-3))};u.push(je),x.push({logbookEntryId:je.id,taskId:L.id,createdAt:fe(e)}),C.push({logbookEntryId:je.id,habitId:N.id,createdAt:fe(e)});const ft={id:rt(),date:fe(Oe(e,-5)),title:"Great Family Weekend",notes:"Spent quality time with family. Went hiking and had a picnic. Feeling grateful for these moments. Work can wait - balance is important.",mood:"High",energy:9,userId:gt,createdAt:fe(Oe(e,-5)),updatedAt:fe(Oe(e,-5))};u.push(ft);const Fe={id:rt(),date:fe(Oe(e,-7)),title:"Week in Review",notes:"Solid week of progress. Completed database schema design, made good progress on auth system. Running streak at 12 days! Feeling strong and energized. Ready to tackle the API endpoints next week.",mood:"High",energy:8,userId:gt,createdAt:fe(Oe(e,-7)),updatedAt:fe(Oe(e,-7))};return u.push(Fe),x.push({logbookEntryId:Fe.id,taskId:H.id,createdAt:fe(e)}),S.push({logbookEntryId:Fe.id,projectId:_e.id,createdAt:fe(e)}),C.push({logbookEntryId:Fe.id,habitId:N.id,createdAt:fe(e)}),C.push({logbookEntryId:Fe.id,habitId:ne.id,createdAt:fe(e)}),{tasks:t,projects:n,goals:r,metrics:s,metricLogs:a,habits:i,habitLogs:o,logbookEntries:u,taskDependencies:h,taskProjects:f,taskGoals:m,projectGoals:g,goalMetrics:b,habitGoals:w,logbookTasks:x,logbookProjects:S,logbookGoals:k,logbookHabits:C}}const HR="gs_seeded";function DS(){if(localStorage.getItem(HR))return;const t=TY(),n=new br("tasks"),r=new br("projects"),s=new br("goals"),a=new br("metrics"),i=new br("metricLogs"),o=new br("habits"),u=new br("habitLogs"),h=new br("logbookEntries"),f=new br("taskDependencies"),m=new br("taskProjects"),g=new br("taskGoals"),b=new br("projectGoals"),w=new br("goalMetrics"),x=new br("habitGoals"),S=new br("logbookTasks"),k=new br("logbookProjects"),C=new br("logbookGoals"),T=new br("logbookHabits");n.seed(t.tasks),r.seed(t.projects),s.seed(t.goals),a.seed(t.metrics),i.seed(t.metricLogs),o.seed(t.habits),u.seed(t.habitLogs),h.seed(t.logbookEntries),f.seed(t.taskDependencies),m.seed(t.taskProjects),g.seed(t.taskGoals),b.seed(t.projectGoals),w.seed(t.goalMetrics),x.seed(t.habitGoals),S.seed(t.logbookTasks),k.seed(t.logbookProjects),C.seed(t.logbookGoals),T.seed(t.logbookHabits),localStorage.setItem(HR,"true"),console.log("Mock data seeded successfully!"),console.log("Tasks:",t.tasks.length),console.log("Projects:",t.projects.length),console.log("Goals:",t.goals.length),console.log("Metrics:",t.metrics.length),console.log("Habits:",t.habits.length)}const yy="gs_auth_user",X5=A.createContext(void 0),tE=()=>{const e=A.useContext(X5);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},CY=({children:e})=>{const[t,n]=A.useState(null),[r,s]=A.useState(!0),[a,i]=A.useState(null);A.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const g=localStorage.getItem(yy);n(g?JSON.parse(g):null)}catch(g){console.error("Error checking user:",g),n(null)}finally{s(!1)}},m={user:t,loading:r,error:a,signIn:async(g,b)=>{try{i(null),s(!0);const w={id:"user-1",email:g};localStorage.setItem(yy,JSON.stringify(w)),n(w),DS()}catch(w){const x=w instanceof Error?w.message:"Failed to sign in";throw i(x),new Error(x)}finally{s(!1)}},signOut:async()=>{try{i(null),s(!0),localStorage.removeItem(yy),n(null)}catch(g){const b=g instanceof Error?g.message:"Failed to sign out";throw i(b),new Error(b)}finally{s(!1)}},signUp:async(g,b)=>{try{i(null),s(!0);const w={id:"user-1",email:g};localStorage.setItem(yy,JSON.stringify(w)),n(w),DS()}catch(w){const x=w instanceof Error?w.message:"Failed to sign up";throw i(x),new Error(x)}finally{s(!1)}}};return c.jsx(X5.Provider,{value:m,children:e})};var qR="popstate";function EY(e={}){function t(r,s){let{pathname:a,search:i,hash:o}=r.location;return $S("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zp(s)}return NY(t,n,null,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ta(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jY(){return Math.random().toString(36).substring(2,10)}function VR(e,t){return{usr:e.state,key:e.key,idx:t}}function $S(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yd(t):t,state:n,key:t&&t.key||r||jY()}}function zp({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function NY(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",u=null,h=f();h==null&&(h=0,i.replaceState({...i.state,idx:h},""));function f(){return(i.state||{idx:null}).idx}function m(){o="POP";let S=f(),k=S==null?null:S-h;h=S,u&&u({action:o,location:x.location,delta:k})}function g(S,k){o="PUSH";let C=$S(x.location,S,k);h=f()+1;let T=VR(C,h),P=x.createHref(C);try{i.pushState(T,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(P)}a&&u&&u({action:o,location:x.location,delta:1})}function b(S,k){o="REPLACE";let C=$S(x.location,S,k);h=f();let T=VR(C,h),P=x.createHref(C);i.replaceState(T,"",P),a&&u&&u({action:o,location:x.location,delta:0})}function w(S){return AY(S)}let x={get action(){return o},get location(){return e(s,i)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(qR,m),u=S,()=>{s.removeEventListener(qR,m),u=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let k=w(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:b,go(S){return i.go(S)}};return x}function AY(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:zp(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function e6(e,t,n="/"){return IY(e,t,n,!1)}function IY(e,t,n,r){let s=typeof t=="string"?Yd(t):t,a=_o(s.pathname||"/",n);if(a==null)return null;let i=t6(e);OY(i);let o=null;for(let u=0;o==null&&u<i.length;++u){let h=HY(a);o=FY(i[u],h,r)}return o}function t6(e,t=[],n=[],r="",s=!1){let a=(i,o,u=s,h)=>{let f={relativePath:h===void 0?i.path||"":h,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Tn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=vo([r,f.relativePath]),g=n.concat(f);i.children&&i.children.length>0&&(Tn(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),t6(i.children,t,g,m,u)),!(i.path==null&&!i.index)&&t.push({path:m,score:zY(m,i.index),routesMeta:g})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))a(i,o);else for(let u of n6(i.path))a(i,o,!0,u)}),t}function n6(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=n6(r.join("/")),o=[];return o.push(...i.map(u=>u===""?a:[a,u].join("/"))),s&&o.push(...i),o.map(u=>e.startsWith("/")&&u===""?"/":u)}function OY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var RY=/^:[\w-]+$/,PY=3,MY=2,DY=1,$Y=10,LY=-2,GR=e=>e==="*";function zY(e,t){let n=e.split("/"),r=n.length;return n.some(GR)&&(r+=LY),t&&(r+=MY),n.filter(s=>!GR(s)).reduce((s,a)=>s+(RY.test(a)?PY:a===""?DY:$Y),r)}function UY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function FY(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let u=r[o],h=o===r.length-1,f=a==="/"?t:t.slice(a.length)||"/",m=sb({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),g=u.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=sb({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),i.push({params:s,pathname:vo([a,m.pathname]),pathnameBase:KY(vo([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=vo([a,m.pathnameBase]))}return i}function sb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BY(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:m},g)=>{if(f==="*"){let w=o[g]||"";i=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=o[g];return m&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:i,pattern:e}}function BY(e,t=!1,n=!0){Ta(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function HY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ta(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _o(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var r6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qY=e=>r6.test(e);function VY(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Yd(e):e,a;if(n)if(qY(n))a=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Ta(!1,`Pathnames cannot have embedded double slashes - normalizing ${i} -> ${n}`)}n.startsWith("/")?a=KR(n.substring(1),"/"):a=KR(n,t)}else a=t;return{pathname:a,search:ZY(r),hash:WY(s)}}function KR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function W_(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nE(e){let t=GY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function rE(e,t,n,r=!1){let s;typeof e=="string"?s=Yd(e):(s={...e},Tn(!s.pathname||!s.pathname.includes("?"),W_("?","pathname","search",s)),Tn(!s.pathname||!s.pathname.includes("#"),W_("#","pathname","hash",s)),Tn(!s.search||!s.search.includes("#"),W_("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=n;else{let m=t.length-1;if(!r&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}o=m>=0?t[m]:"/"}let u=VY(s,o),h=i&&i!=="/"&&i.endsWith("/"),f=(a||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var vo=e=>e.join("/").replace(/\/\/+/g,"/"),KY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,JY=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function YY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function QY(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var s6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function a6(e,t){let n=e;if(typeof n!="string"||!r6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(s6)try{let a=new URL(window.location.href),i=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=_o(i.pathname,t);i.origin===a.origin&&o!=null?n=o+i.search+i.hash:s=!0}catch{Ta(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var i6=["POST","PUT","PATCH","DELETE"];new Set(i6);var XY=["GET",...i6];new Set(XY);var Qd=A.createContext(null);Qd.displayName="DataRouter";var gx=A.createContext(null);gx.displayName="DataRouterState";var eQ=A.createContext(!1),o6=A.createContext({isTransitioning:!1});o6.displayName="ViewTransition";var tQ=A.createContext(new Map);tQ.displayName="Fetchers";var nQ=A.createContext(null);nQ.displayName="Await";var ta=A.createContext(null);ta.displayName="Navigation";var pm=A.createContext(null);pm.displayName="Location";var ci=A.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var sE=A.createContext(null);sE.displayName="RouteError";var l6="REACT_ROUTER_ERROR",rQ="REDIRECT",sQ="ROUTE_ERROR_RESPONSE";function aQ(e){if(e.startsWith(`${l6}:${rQ}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function iQ(e){if(e.startsWith(`${l6}:${sQ}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new JY(t.status,t.statusText,t.data)}catch{}}function oQ(e,{relative:t}={}){Tn(Xd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(ta),{hash:s,pathname:a,search:i}=gm(e,{relative:t}),o=a;return n!=="/"&&(o=a==="/"?n:vo([n,a])),r.createHref({pathname:o,search:i,hash:s})}function Xd(){return A.useContext(pm)!=null}function Na(){return Tn(Xd(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(pm).location}var c6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function u6(e){A.useContext(ta).static||A.useLayoutEffect(e)}function mm(){let{isDataRoute:e}=A.useContext(ci);return e?_Q():lQ()}function lQ(){Tn(Xd(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(Qd),{basename:t,navigator:n}=A.useContext(ta),{matches:r}=A.useContext(ci),{pathname:s}=Na(),a=JSON.stringify(nE(r)),i=A.useRef(!1);return u6(()=>{i.current=!0}),A.useCallback((u,h={})=>{if(Ta(i.current,c6),!i.current)return;if(typeof u=="number"){n.go(u);return}let f=rE(u,JSON.parse(a),s,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:vo([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,a,s,e])}var cQ=A.createContext(null);function uQ(e){let t=A.useContext(ci).outlet;return A.useMemo(()=>t&&A.createElement(cQ.Provider,{value:e},t),[t,e])}function gm(e,{relative:t}={}){let{matches:n}=A.useContext(ci),{pathname:r}=Na(),s=JSON.stringify(nE(n));return A.useMemo(()=>rE(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function dQ(e,t){return d6(e,t)}function d6(e,t,n,r,s){Tn(Xd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(ta),{matches:i}=A.useContext(ci),o=i[i.length-1],u=o?o.params:{},h=o?o.pathname:"/",f=o?o.pathnameBase:"/",m=o&&o.route;{let C=m&&m.path||"";f6(h,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=Na(),b;if(t){let C=typeof t=="string"?Yd(t):t;Tn(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=g;let w=b.pathname||"/",x=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=e6(e,{pathname:x});Ta(m||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ta(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=gQ(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:vo([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:vo([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),i,n,r,s);return t&&k?A.createElement(pm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},k):k}function hQ(){let e=wQ(),t=YY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:s},n):null,i)}var fQ=A.createElement(hQ,null),h6=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=iQ(e.digest);n&&(e=n)}let t=e!==void 0?A.createElement(ci.Provider,{value:this.props.routeContext},A.createElement(sE.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?A.createElement(pQ,{error:e},t):t}};h6.contextType=eQ;var J_=new WeakMap;function pQ({children:e,error:t}){let{basename:n}=A.useContext(ta);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=aQ(t.digest);if(r){let s=J_.get(t);if(s)throw s;let a=a6(r.location,n);if(s6&&!J_.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const i=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw J_.set(t,i),i}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function mQ({routeContext:e,match:t,children:n}){let r=A.useContext(Qd);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(ci.Provider,{value:e},n)}function gQ(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=n?.errors;if(i!=null){let f=a.findIndex(m=>m.route.id&&i?.[m.route.id]!==void 0);Tn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,u=-1;if(n)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:g,errors:b}=n,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!b||b[m.route.id]===void 0);if(m.route.lazy||w){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let h=n&&r?(f,m)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:QY(n.matches),errorInfo:m})}:void 0;return a.reduceRight((f,m,g)=>{let b,w=!1,x=null,S=null;n&&(b=i&&m.route.id?i[m.route.id]:void 0,x=m.route.errorElement||fQ,o&&(u<0&&g===0?(f6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===g&&(w=!0,S=m.route.hydrateFallbackElement||null)));let k=t.concat(a.slice(0,g+1)),C=()=>{let T;return b?T=x:w?T=S:m.route.Component?T=A.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,A.createElement(mQ,{match:m,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?A.createElement(h6,{location:n.location,revalidation:n.revalidation,component:x,error:b,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:h}):C()},null)}function aE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yQ(e){let t=A.useContext(Qd);return Tn(t,aE(e)),t}function bQ(e){let t=A.useContext(gx);return Tn(t,aE(e)),t}function xQ(e){let t=A.useContext(ci);return Tn(t,aE(e)),t}function iE(e){let t=xQ(e),n=t.matches[t.matches.length-1];return Tn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function vQ(){return iE("useRouteId")}function wQ(){let e=A.useContext(sE),t=bQ("useRouteError"),n=iE("useRouteError");return e!==void 0?e:t.errors?.[n]}function _Q(){let{router:e}=yQ("useNavigate"),t=iE("useNavigate"),n=A.useRef(!1);return u6(()=>{n.current=!0}),A.useCallback(async(s,a={})=>{Ta(n.current,c6),n.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var ZR={};function f6(e,t,n){!t&&!ZR[e]&&(ZR[e]=!0,Ta(!1,n))}A.memo(kQ);function kQ({routes:e,future:t,state:n,onError:r}){return d6(e,void 0,n,r,t)}function p6({to:e,replace:t,state:n,relative:r}){Tn(Xd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(ta);Ta(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=A.useContext(ci),{pathname:i}=Na(),o=mm(),u=rE(e,nE(a),i,r==="path"),h=JSON.stringify(u);return A.useEffect(()=>{o(JSON.parse(h),{replace:t,state:n,relative:r})},[o,h,r,t,n]),null}function m6(e){return uQ(e.context)}function Kn(e){Tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SQ({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:i}){Tn(!Xd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:o,navigator:s,static:a,unstable_useTransitions:i,future:{}}),[o,s,a,i]);typeof n=="string"&&(n=Yd(n));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:b="default"}=n,w=A.useMemo(()=>{let x=_o(h,o);return x==null?null:{location:{pathname:x,search:f,hash:m,state:g,key:b},navigationType:r}},[o,h,f,m,g,b,r]);return Ta(w!=null,`<Router basename="${o}"> is not able to match the URL "${h}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:A.createElement(ta.Provider,{value:u},A.createElement(pm.Provider,{children:t,value:w}))}function TQ({children:e,location:t}){return dQ(LS(e),t)}function LS(e,t=[]){let n=[];return A.Children.forEach(e,(r,s)=>{if(!A.isValidElement(r))return;let a=[...t,s];if(r.type===A.Fragment){n.push.apply(n,LS(r.props.children,a));return}Tn(r.type===Kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=LS(r.props.children,a)),n.push(i)}),n}var C0="get",E0="application/x-www-form-urlencoded";function yx(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function CQ(e){return yx(e)&&e.tagName.toLowerCase()==="button"}function EQ(e){return yx(e)&&e.tagName.toLowerCase()==="form"}function jQ(e){return yx(e)&&e.tagName.toLowerCase()==="input"}function NQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function AQ(e,t){return e.button===0&&(!t||t==="_self")&&!NQ(e)}var by=null;function IQ(){if(by===null)try{new FormData(document.createElement("form"),0),by=!1}catch{by=!0}return by}var OQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Y_(e){return e!=null&&!OQ.has(e)?(Ta(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${E0}"`),null):e}function RQ(e,t){let n,r,s,a,i;if(EQ(e)){let o=e.getAttribute("action");r=o?_o(o,t):null,n=e.getAttribute("method")||C0,s=Y_(e.getAttribute("enctype"))||E0,a=new FormData(e)}else if(CQ(e)||jQ(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||o.getAttribute("action");if(r=u?_o(u,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||C0,s=Y_(e.getAttribute("formenctype"))||Y_(o.getAttribute("enctype"))||E0,a=new FormData(o,e),!IQ()){let{name:h,type:f,value:m}=e;if(f==="image"){let g=h?`${h}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else h&&a.append(h,m)}}else{if(yx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=C0,r=null,s=E0,i=e}return a&&s==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PQ(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&_o(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function MQ(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $Q(e,t,n){let r=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let i=await MQ(a,n);return i.links?i.links():[]}return[]}));return FQ(r.flat(1).filter(DQ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function WR(e,t,n,r,s,a){let i=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,o=(u,h)=>n[h].pathname!==u.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,h)=>i(u,h)||o(u,h)):a==="data"?t.filter((u,h)=>{let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(i(u,h)||o(u,h))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function LQ(e,t,{includeHydrateFallback:n}={}){return zQ(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function zQ(e){return[...new Set(e)]}function UQ(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function FQ(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let a=JSON.stringify(UQ(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function g6(){let e=A.useContext(Qd);return oE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function BQ(){let e=A.useContext(gx);return oE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lE=A.createContext(void 0);lE.displayName="FrameworkContext";function y6(){let e=A.useContext(lE);return oE(e,"You must render this element inside a <HydratedRouter> element"),e}function HQ(e,t){let n=A.useContext(lE),[r,s]=A.useState(!1),[a,i]=A.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=t,g=A.useRef(null);A.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=k=>{k.forEach(C=>{i(C.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[e]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[r]);let b=()=>{s(!0)},w=()=>{s(!1),i(!1)};return n?e!=="intent"?[a,g,{}]:[a,g,{onFocus:bf(o,b),onBlur:bf(u,w),onMouseEnter:bf(h,b),onMouseLeave:bf(f,w),onTouchStart:bf(m,b)}]:[!1,g,{}]}function bf(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function qQ({page:e,...t}){let{router:n}=g6(),r=A.useMemo(()=>e6(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?A.createElement(GQ,{page:e,matches:r,...t}):null}function VQ(e){let{manifest:t,routeModules:n}=y6(),[r,s]=A.useState([]);return A.useEffect(()=>{let a=!1;return $Q(e,t,n).then(i=>{a||s(i)}),()=>{a=!0}},[e,t,n]),r}function GQ({page:e,matches:t,...n}){let r=Na(),{manifest:s,routeModules:a}=y6(),{basename:i}=g6(),{loaderData:o,matches:u}=BQ(),h=A.useMemo(()=>WR(e,t,u,s,r,"data"),[e,t,u,s,r]),f=A.useMemo(()=>WR(e,t,u,s,r,"assets"),[e,t,u,s,r]),m=A.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,x=!1;if(t.forEach(k=>{let C=s.routes[k.route.id];!C||!C.hasLoader||(!h.some(T=>T.route.id===k.route.id)&&k.route.id in o&&a[k.route.id]?.shouldRevalidate||C.hasClientLoader?x=!0:w.add(k.route.id))}),w.size===0)return[];let S=PQ(e,i,"data");return x&&w.size>0&&S.searchParams.set("_routes",t.filter(k=>w.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[i,o,r,s,h,t,e,a]),g=A.useMemo(()=>LQ(f,s),[f,s]),b=VQ(f);return A.createElement(A.Fragment,null,m.map(w=>A.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),g.map(w=>A.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:x})=>A.createElement("link",{key:w,nonce:n.nonce,...x})))}function KQ(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ZQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZQ&&(window.__reactRouterVersion="7.11.0")}catch{}function WQ({basename:e,children:t,unstable_useTransitions:n,window:r}){let s=A.useRef();s.current==null&&(s.current=EY({window:r,v5Compat:!0}));let a=s.current,[i,o]=A.useState({action:a.action,location:a.location}),u=A.useCallback(h=>{n===!1?o(h):A.startTransition(()=>o(h))},[n]);return A.useLayoutEffect(()=>a.listen(u),[a,u]),A.createElement(SQ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a,unstable_useTransitions:n})}var b6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ur=A.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:i,state:o,target:u,to:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:g,...b},w){let{basename:x,unstable_useTransitions:S}=A.useContext(ta),k=typeof h=="string"&&b6.test(h),C=a6(h,x);h=C.to;let T=oQ(h,{relative:s}),[P,D,R]=HQ(r,b),U=XQ(h,{replace:i,state:o,target:u,preventScrollReset:f,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:g,unstable_useTransitions:S});function j(B){t&&t(B),B.defaultPrevented||U(B)}let se=A.createElement("a",{...b,...R,href:C.absoluteURL||T,onClick:C.isExternal||a?t:j,ref:KQ(w,D),target:u,"data-discover":!k&&n==="render"?"true":void 0});return P&&!k?A.createElement(A.Fragment,null,se,A.createElement(qQ,{page:T})):se});Ur.displayName="Link";var JQ=A.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:i,viewTransition:o,children:u,...h},f){let m=gm(i,{relative:h.relative}),g=Na(),b=A.useContext(gx),{navigator:w,basename:x}=A.useContext(ta),S=b!=null&&sX(m)&&o===!0,k=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,C=g.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),T=T?T.toLowerCase():null,k=k.toLowerCase()),T&&x&&(T=_o(T,x)||T);const P=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let D=C===k||!s&&C.startsWith(k)&&C.charAt(P)==="/",R=T!=null&&(T===k||!s&&T.startsWith(k)&&T.charAt(k.length)==="/"),U={isActive:D,isPending:R,isTransitioning:S},j=D?t:void 0,se;typeof r=="function"?se=r(U):se=[r,D?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(U):a;return A.createElement(Ur,{...h,"aria-current":j,className:se,ref:f,style:B,to:i,viewTransition:o},typeof u=="function"?u(U):u)});JQ.displayName="NavLink";var YQ=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:i=C0,action:o,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:g,...b},w)=>{let{unstable_useTransitions:x}=A.useContext(ta),S=nX(),k=rX(o,{relative:h}),C=i.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&b6.test(o),P=D=>{if(u&&u(D),D.defaultPrevented)return;D.preventDefault();let R=D.nativeEvent.submitter,U=R?.getAttribute("formmethod")||i,j=()=>S(R||D.currentTarget,{fetcherKey:t,method:U,navigate:n,replace:s,state:a,relative:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>j()):j()};return A.createElement("form",{ref:w,method:C,action:k,onSubmit:r?u:P,...b,"data-discover":!T&&e==="render"?"true":void 0})});YQ.displayName="Form";function QQ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x6(e){let t=A.useContext(Qd);return Tn(t,QQ(e)),t}function XQ(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:o,unstable_useTransitions:u}={}){let h=mm(),f=Na(),m=gm(e,{relative:a});return A.useCallback(g=>{if(AQ(g,t)){g.preventDefault();let b=n!==void 0?n:zp(f)===zp(m),w=()=>h(e,{replace:b,state:r,preventScrollReset:s,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:o});u?A.startTransition(()=>w()):w()}},[f,h,m,n,r,t,e,s,a,i,o,u])}var eX=0,tX=()=>`__${String(++eX)}__`;function nX(){let{router:e}=x6("useSubmit"),{basename:t}=A.useContext(ta),n=vQ(),r=e.fetch,s=e.navigate;return A.useCallback(async(a,i={})=>{let{action:o,method:u,encType:h,formData:f,body:m}=RQ(a,t);if(i.navigate===!1){let g=i.fetcherKey||tX();await r(g,n,i.action||o,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await s(i.action||o,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,s,t,n])}function rX(e,{relative:t}={}){let{basename:n}=A.useContext(ta),r=A.useContext(ci);Tn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...gm(e||".",{relative:t})},i=Na();if(e==null){a.search=i.search;let o=new URLSearchParams(a.search),u=o.getAll("index");if(u.some(f=>f==="")){o.delete("index"),u.filter(m=>m).forEach(m=>o.append("index",m));let f=o.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:vo([n,a.pathname])),zp(a)}function sX(e,{relative:t}={}){let n=A.useContext(o6);Tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=x6("useViewTransitionState"),s=gm(e,{relative:t});if(!n.isTransitioning)return!1;let a=_o(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=_o(n.nextLocation.pathname,r)||n.nextLocation.pathname;return sb(s.pathname,i)!=null||sb(s.pathname,a)!=null}const aX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iX=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),JR=e=>{const t=iX(e);return t.charAt(0).toUpperCase()+t.slice(1)},v6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),oX=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var lX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cX=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},u)=>A.createElement("svg",{ref:u,...lX,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:v6("lucide",s),...!a&&!oX(o)&&{"aria-hidden":"true"},...o},[...i.map(([h,f])=>A.createElement(h,f)),...Array.isArray(a)?a:[a]]));const ze=(e,t)=>{const n=A.forwardRef(({className:r,...s},a)=>A.createElement(cX,{ref:a,iconNode:t,className:v6(`lucide-${aX(JR(e))}`,`lucide-${e}`,r),...s}));return n.displayName=JR(e),n};const uX=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],YR=ze("activity",uX);const dX=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],hX=ze("archive",dX);const fX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eh=ze("arrow-left",fX);const pX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bl=ze("arrow-right",pX);const mX=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bc=ze("book-open",mX);const gX=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],yX=ze("brain",gX);const bX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dn=ze("calendar",bX);const xX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vX=ze("chart-column",xX);const wX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ks=ze("check",wX);const _X=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fi=ze("chevron-down",_X);const kX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w6=ze("chevron-left",kX);const SX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ym=ze("chevron-right",SX);const TX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Io=ze("chevron-up",TX);const CX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qs=ze("circle-alert",CX);const EX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jX=ze("circle-check-big",EX);const NX=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AX=ze("clock",NX);const IX=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],OX=ze("cloud",IX);const RX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],zS=ze("command",RX);const PX=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],MX=ze("database",PX);const DX=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],$X=ze("ellipsis-vertical",DX);const LX=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],zX=ze("eye-off",LX);const UX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FX=ze("eye",UX);const BX=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],HX=ze("flame",BX);const qX=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],Nd=ze("folder-kanban",qX);const VX=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],GX=ze("folder-open",VX);const KX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],_6=ze("frown",KX);const ZX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],WX=ze("funnel",ZX);const JX=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],k6=ze("git-branch",JX);const YX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],S6=ze("house",YX);const QX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],T6=ze("info",QX);const XX=[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]],eee=ze("kanban",XX);const tee=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],nee=ze("layers",tee);const ree=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],see=ze("layout-dashboard",ree);const aee=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],iee=ze("layout-grid",aee);const oee=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],lee=ze("lightbulb",oee);const cee=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],C6=ze("link-2",cee);const uee=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],dee=ze("link",uee);const hee=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],fee=ze("list",hee);const pee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Q_=ze("loader-circle",pee);const mee=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gee=ze("log-out",mee);const yee=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],bee=ze("mail",yee);const xee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],E6=ze("meh",xee);const vee=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],j6=ze("menu",vee);const wee=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],N6=ze("message-circle",wee);const _ee=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],US=ze("monitor",_ee);const kee=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],FS=ze("moon",kee);const See=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Tee=ze("network",See);const Cee=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Eee=ze("package",Cee);const jee=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Hc=ze("pen",jee);const Nee=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],A6=ze("pencil",Nee);const Aee=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Iee=ze("phone",Aee);const Oee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ca=ze("plus",Oee);const Ree=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ab=ze("refresh-cw",Ree);const Pee=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Ad=ze("repeat",Pee);const Mee=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dee=ze("save",Mee);const $ee=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ri=ze("search",$ee);const Lee=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zee=ze("send",Lee);const Uee=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I6=ze("settings",Uee);const Fee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],cE=ze("smile",Fee);const Bee=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Jt=ze("sparkles",Bee);const Hee=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Di=ze("square-check-big",Hee);const qee=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ib=ze("sun",qee);const Vee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_r=ze("target",Vee);const Gee=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dl=ze("trash-2",Gee);const Kee=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],QR=ze("trending-down",Kee);const Zee=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kr=ze("trending-up",Zee);const Wee=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qc=ze("triangle-alert",Wee);const Jee=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],ob=ze("wand-sparkles",Jee);const Yee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cn=ze("x",Yee);const Qee=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],uE=ze("zap",Qee),dE=A.createContext({});function hE(e){const t=A.useRef(null);return t.current===null&&(t.current=e()),t.current}const fE=typeof window<"u",O6=fE?A.useLayoutEffect:A.useEffect,bx=A.createContext(null);function pE(e,t){e.indexOf(t)===-1&&e.push(t)}function mE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ko=(e,t,n)=>n>t?t:n<e?e:n;let gE=()=>{};const So={},R6=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function P6(e){return typeof e=="object"&&e!==null}const M6=e=>/^0[^.\s]+$/u.test(e);function yE(e){let t;return()=>(t===void 0&&(t=e()),t)}const _a=e=>e,Xee=(e,t)=>n=>t(e(n)),bm=(...e)=>e.reduce(Xee),Up=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class bE{constructor(){this.subscriptions=[]}add(t){return pE(this.subscriptions,t),()=>mE(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ai=e=>e*1e3,va=e=>e/1e3;function D6(e,t){return t?e*(1e3/t):0}const $6=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ete=1e-7,tte=12;function nte(e,t,n,r,s){let a,i,o=0;do i=t+(n-t)/2,a=$6(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>ete&&++o<tte);return i}function xm(e,t,n,r){if(e===t&&n===r)return _a;const s=a=>nte(a,0,1,e,n);return a=>a===0||a===1?a:$6(s(a),t,r)}const L6=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,z6=e=>t=>1-e(1-t),U6=xm(.33,1.53,.69,.99),xE=z6(U6),F6=L6(xE),B6=e=>(e*=2)<1?.5*xE(e):.5*(2-Math.pow(2,-10*(e-1))),vE=e=>1-Math.sin(Math.acos(e)),H6=z6(vE),q6=L6(vE),rte=xm(.42,0,1,1),ste=xm(0,0,.58,1),V6=xm(.42,0,.58,1),ate=e=>Array.isArray(e)&&typeof e[0]!="number",G6=e=>Array.isArray(e)&&typeof e[0]=="number",ite={linear:_a,easeIn:rte,easeInOut:V6,easeOut:ste,circIn:vE,circInOut:q6,circOut:H6,backIn:xE,backInOut:F6,backOut:U6,anticipate:B6},ote=e=>typeof e=="string",XR=e=>{if(G6(e)){gE(e.length===4);const[t,n,r,s]=e;return xm(t,n,r,s)}else if(ote(e))return ite[e];return e},xy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lte(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function u(f){i.has(f)&&(h.schedule(f),e()),f(o)}const h={schedule:(f,m=!1,g=!1)=>{const w=g&&s?n:r;return m&&i.add(f),w.has(f)||w.add(f),f},cancel:f=>{r.delete(f),i.delete(f)},process:f=>{if(o=f,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),n.clear(),s=!1,a&&(a=!1,h.process(f))}};return h}const cte=40;function K6(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=xy.reduce((T,P)=>(T[P]=lte(a),T),{}),{setup:o,read:u,resolveKeyframes:h,preUpdate:f,update:m,preRender:g,render:b,postRender:w}=i,x=()=>{const T=So.useManualTiming?s.timestamp:performance.now();n=!1,So.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(T-s.timestamp,cte),1)),s.timestamp=T,s.isProcessing=!0,o.process(s),u.process(s),h.process(s),f.process(s),m.process(s),g.process(s),b.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(x))},S=()=>{n=!0,r=!0,s.isProcessing||e(x)};return{schedule:xy.reduce((T,P)=>{const D=i[P];return T[P]=(R,U=!1,j=!1)=>(n||S(),D.schedule(R,U,j)),T},{}),cancel:T=>{for(let P=0;P<xy.length;P++)i[xy[P]].cancel(T)},state:s,steps:i}}const{schedule:Sn,cancel:Cl,state:Rr,steps:X_}=K6(typeof requestAnimationFrame<"u"?requestAnimationFrame:_a,!0);let j0;function ute(){j0=void 0}const ks={now:()=>(j0===void 0&&ks.set(Rr.isProcessing||So.useManualTiming?Rr.timestamp:performance.now()),j0),set:e=>{j0=e,queueMicrotask(ute)}},Z6=e=>t=>typeof t=="string"&&t.startsWith(e),W6=Z6("--"),dte=Z6("var(--"),wE=e=>dte(e)?hte.test(e.split("/*")[0].trim()):!1,hte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,th={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Fp={...th,transform:e=>ko(0,1,e)},vy={...th,default:1},bp=e=>Math.round(e*1e5)/1e5,_E=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fte(e){return e==null}const pte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kE=(e,t)=>n=>!!(typeof n=="string"&&pte.test(n)&&n.startsWith(e)||t&&!fte(n)&&Object.prototype.hasOwnProperty.call(n,t)),J6=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,o]=r.match(_E);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},mte=e=>ko(0,255,e),ek={...th,transform:e=>Math.round(mte(e))},Ec={test:kE("rgb","red"),parse:J6("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ek.transform(e)+", "+ek.transform(t)+", "+ek.transform(n)+", "+bp(Fp.transform(r))+")"};function gte(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const BS={test:kE("#"),parse:gte,transform:Ec.transform},vm=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ml=vm("deg"),Ii=vm("%"),pt=vm("px"),yte=vm("vh"),bte=vm("vw"),eP={...Ii,parse:e=>Ii.parse(e)/100,transform:e=>Ii.transform(e*100)},cd={test:kE("hsl","hue"),parse:J6("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ii.transform(bp(t))+", "+Ii.transform(bp(n))+", "+bp(Fp.transform(r))+")"},Jn={test:e=>Ec.test(e)||BS.test(e)||cd.test(e),parse:e=>Ec.test(e)?Ec.parse(e):cd.test(e)?cd.parse(e):BS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ec.transform(e):cd.transform(e),getAnimatableNone:e=>{const t=Jn.parse(e);return t.alpha=0,Jn.transform(t)}},xte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vte(e){return isNaN(e)&&typeof e=="string"&&(e.match(_E)?.length||0)+(e.match(xte)?.length||0)>0}const Y6="number",Q6="color",wte="var",_te="var(",tP="${}",kte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bp(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(kte,u=>(Jn.test(u)?(r.color.push(a),s.push(Q6),n.push(Jn.parse(u))):u.startsWith(_te)?(r.var.push(a),s.push(wte),n.push(u)):(r.number.push(a),s.push(Y6),n.push(parseFloat(u))),++a,tP)).split(tP);return{values:n,split:o,indexes:r,types:s}}function X6(e){return Bp(e).values}function ez(e){const{split:t,types:n}=Bp(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const o=n[i];o===Y6?a+=bp(s[i]):o===Q6?a+=Jn.transform(s[i]):a+=s[i]}return a}}const Ste=e=>typeof e=="number"?0:Jn.test(e)?Jn.getAnimatableNone(e):e;function Tte(e){const t=X6(e);return ez(e)(t.map(Ste))}const El={test:vte,parse:X6,createTransformer:ez,getAnimatableNone:Tte};function tk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Cte({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;s=tk(u,o,e+1/3),a=tk(u,o,e),i=tk(u,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function lb(e,t){return n=>n>0?t:e}const Nn=(e,t,n)=>e+(t-e)*n,nk=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},Ete=[BS,Ec,cd],jte=e=>Ete.find(t=>t.test(e));function nP(e){const t=jte(e);if(!t)return!1;let n=t.parse(e);return t===cd&&(n=Cte(n)),n}const rP=(e,t)=>{const n=nP(e),r=nP(t);if(!n||!r)return lb(e,t);const s={...n};return a=>(s.red=nk(n.red,r.red,a),s.green=nk(n.green,r.green,a),s.blue=nk(n.blue,r.blue,a),s.alpha=Nn(n.alpha,r.alpha,a),Ec.transform(s))},HS=new Set(["none","hidden"]);function Nte(e,t){return HS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Ate(e,t){return n=>Nn(e,t,n)}function SE(e){return typeof e=="number"?Ate:typeof e=="string"?wE(e)?lb:Jn.test(e)?rP:Rte:Array.isArray(e)?tz:typeof e=="object"?Jn.test(e)?rP:Ite:lb}function tz(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>SE(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function Ite(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=SE(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function Ote(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],o=e.values[i]??0;n[s]=o,r[a]++}return n}const Rte=(e,t)=>{const n=El.createTransformer(t),r=Bp(e),s=Bp(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?HS.has(e)&&!s.values.length||HS.has(t)&&!r.values.length?Nte(e,t):bm(tz(Ote(r,s),s.values),n):lb(e,t)};function nz(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Nn(e,t,n):SE(e)(e,t)}const Pte=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Sn.update(t,n),stop:()=>Cl(t),now:()=>Rr.isProcessing?Rr.timestamp:ks.now()}},rz=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},cb=2e4;function TE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<cb;)t+=n,r=e.next(t);return t>=cb?1/0:t}function Mte(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(TE(r),cb);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:va(s)}}const Dte=5;function sz(e,t,n){const r=Math.max(t-Dte,0);return D6(n-e(r),t-r)}const Pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rk=.001;function $te({duration:e=Pn.duration,bounce:t=Pn.bounce,velocity:n=Pn.velocity,mass:r=Pn.mass}){let s,a,i=1-t;i=ko(Pn.minDamping,Pn.maxDamping,i),e=ko(Pn.minDuration,Pn.maxDuration,va(e)),i<1?(s=h=>{const f=h*i,m=f*e,g=f-n,b=qS(h,i),w=Math.exp(-m);return rk-g/b*w},a=h=>{const m=h*i*e,g=m*n+n,b=Math.pow(i,2)*Math.pow(h,2)*e,w=Math.exp(-m),x=qS(Math.pow(h,2),i);return(-s(h)+rk>0?-1:1)*((g-b)*w)/x}):(s=h=>{const f=Math.exp(-h*e),m=(h-n)*e+1;return-rk+f*m},a=h=>{const f=Math.exp(-h*e),m=(n-h)*(e*e);return f*m});const o=5/e,u=zte(s,a,o);if(e=Ai(e),isNaN(u))return{stiffness:Pn.stiffness,damping:Pn.damping,duration:e};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:i*2*Math.sqrt(r*h),duration:e}}}const Lte=12;function zte(e,t,n){let r=n;for(let s=1;s<Lte;s++)r=r-e(r)/t(r);return r}function qS(e,t){return e*Math.sqrt(1-t*t)}const Ute=["duration","bounce"],Fte=["stiffness","damping","mass"];function sP(e,t){return t.some(n=>e[n]!==void 0)}function Bte(e){let t={velocity:Pn.velocity,stiffness:Pn.stiffness,damping:Pn.damping,mass:Pn.mass,isResolvedFromDuration:!1,...e};if(!sP(e,Fte)&&sP(e,Ute))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*ko(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Pn.mass,stiffness:s,damping:a}}else{const n=$te(e);t={...t,...n,mass:Pn.mass},t.isResolvedFromDuration=!0}return t}function ub(e=Pn.visualDuration,t=Pn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:b}=Bte({...n,velocity:-va(n.velocity||0)}),w=g||0,x=h/(2*Math.sqrt(u*f)),S=i-a,k=va(Math.sqrt(u/f)),C=Math.abs(S)<5;r||(r=C?Pn.restSpeed.granular:Pn.restSpeed.default),s||(s=C?Pn.restDelta.granular:Pn.restDelta.default);let T;if(x<1){const D=qS(k,x);T=R=>{const U=Math.exp(-x*k*R);return i-U*((w+x*k*S)/D*Math.sin(D*R)+S*Math.cos(D*R))}}else if(x===1)T=D=>i-Math.exp(-k*D)*(S+(w+k*S)*D);else{const D=k*Math.sqrt(x*x-1);T=R=>{const U=Math.exp(-x*k*R),j=Math.min(D*R,300);return i-U*((w+x*k*S)*Math.sinh(j)+D*S*Math.cosh(j))/D}}const P={calculatedDuration:b&&m||null,next:D=>{const R=T(D);if(b)o.done=D>=m;else{let U=D===0?w:0;x<1&&(U=D===0?Ai(w):sz(T,D,R));const j=Math.abs(U)<=r,se=Math.abs(i-R)<=s;o.done=j&&se}return o.value=o.done?i:R,o},toString:()=>{const D=Math.min(TE(P),cb),R=rz(U=>P.next(D*U).value,D,30);return D+"ms "+R},toTransition:()=>{}};return P}ub.applyToOptions=e=>{const t=Mte(e,100,ub);return e.ease=t.ease,e.duration=Ai(t.duration),e.type="keyframes",e};function VS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:u,restDelta:h=.5,restSpeed:f}){const m=e[0],g={done:!1,value:m},b=j=>o!==void 0&&j<o||u!==void 0&&j>u,w=j=>o===void 0?u:u===void 0||Math.abs(o-j)<Math.abs(u-j)?o:u;let x=n*t;const S=m+x,k=i===void 0?S:i(S);k!==S&&(x=k-m);const C=j=>-x*Math.exp(-j/r),T=j=>k+C(j),P=j=>{const se=C(j),B=T(j);g.done=Math.abs(se)<=h,g.value=g.done?k:B};let D,R;const U=j=>{b(g.value)&&(D=j,R=ub({keyframes:[g.value,w(g.value)],velocity:sz(T,j,g.value),damping:s,stiffness:a,restDelta:h,restSpeed:f}))};return U(0),{calculatedDuration:null,next:j=>{let se=!1;return!R&&D===void 0&&(se=!0,P(j),U(j)),D!==void 0&&j>=D?R.next(j-D):(!se&&P(j),g)}}}function Hte(e,t,n){const r=[],s=n||So.mix||nz,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const u=Array.isArray(t)?t[i]||_a:t;o=bm(u,o)}r.push(o)}return r}function qte(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(gE(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Hte(t,r,s),u=o.length,h=f=>{if(i&&f<e[0])return t[0];let m=0;if(u>1)for(;m<e.length-2&&!(f<e[m+1]);m++);const g=Up(e[m],e[m+1],f);return o[m](g)};return n?f=>h(ko(e[0],e[a-1],f)):h}function Vte(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Up(0,t,r);e.push(Nn(n,1,s))}}function Gte(e){const t=[0];return Vte(t,e.length-1),t}function Kte(e,t){return e.map(n=>n*t)}function Zte(e,t){return e.map(()=>t||V6).splice(0,e.length-1)}function xp({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=ate(r)?r.map(XR):XR(r),a={done:!1,value:t[0]},i=Kte(n&&n.length===t.length?n:Gte(t),e),o=qte(i,t,{ease:Array.isArray(s)?s:Zte(t,s)});return{calculatedDuration:e,next:u=>(a.value=o(u),a.done=u>=e,a)}}const Wte=e=>e!==null;function CE(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(Wte),o=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Jte={decay:VS,inertia:VS,tween:xp,keyframes:xp,spring:ub};function az(e){typeof e.type=="string"&&(e.type=Jte[e.type])}class EE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Yte=e=>e/100;class jE extends EE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ks.now()&&this.tick(ks.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;az(t);const{type:n=xp,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const u=n||xp;u!==xp&&typeof o[0]!="number"&&(this.mixKeyframes=bm(Yte,nz(o[0],o[1])),o=[0,100]);const h=u({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...o].reverse(),velocity:-i})),h.calculatedDuration===null&&(h.calculatedDuration=TE(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:m,repeatType:g,repeatDelay:b,type:w,onUpdate:x,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const k=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?k<0:k>s;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let T=this.currentTime,P=r;if(m){const j=Math.min(this.currentTime,s)/o;let se=Math.floor(j),B=j%1;!B&&j>=1&&(B=1),B===1&&se--,se=Math.min(se,m+1),se%2&&(g==="reverse"?(B=1-B,b&&(B-=b/o)):g==="mirror"&&(P=i)),T=ko(0,1,B)*o}const D=C?{done:!1,value:f[0]}:P.next(T);a&&(D.value=a(D.value));let{done:R}=D;!C&&u!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return U&&w!==VS&&(D.value=CE(f,this.options,S,this.speed)),x&&x(D.value),U&&this.finish(),D}then(t,n){return this.finished.then(t,n)}get duration(){return va(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+va(t)}get time(){return va(this.currentTime)}set time(t){t=Ai(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ks.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=va(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Pte,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ks.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Qte(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const jc=e=>e*180/Math.PI,GS=e=>{const t=jc(Math.atan2(e[1],e[0]));return KS(t)},Xte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:GS,rotateZ:GS,skewX:e=>jc(Math.atan(e[1])),skewY:e=>jc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},KS=e=>(e=e%360,e<0&&(e+=360),e),aP=GS,iP=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),oP=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ene={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iP,scaleY:oP,scale:e=>(iP(e)+oP(e))/2,rotateX:e=>KS(jc(Math.atan2(e[6],e[5]))),rotateY:e=>KS(jc(Math.atan2(-e[2],e[0]))),rotateZ:aP,rotate:aP,skewX:e=>jc(Math.atan(e[4])),skewY:e=>jc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ZS(e){return e.includes("scale")?1:0}function WS(e,t){if(!e||e==="none")return ZS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=ene,s=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Xte,s=o}if(!s)return ZS(t);const a=r[t],i=s[1].split(",").map(nne);return typeof a=="function"?a(i):i[a]}const tne=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return WS(n,t)};function nne(e){return parseFloat(e.trim())}const nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rh=new Set(nh),lP=e=>e===th||e===pt,rne=new Set(["x","y","z"]),sne=nh.filter(e=>!rne.has(e));function ane(e){const t=[];return sne.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Rc={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>WS(t,"x"),y:(e,{transform:t})=>WS(t,"y")};Rc.translateX=Rc.x;Rc.translateY=Rc.y;const Pc=new Set;let JS=!1,YS=!1,QS=!1;function iz(){if(YS){const e=Array.from(Pc).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=ane(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{r.getValue(a)?.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}YS=!1,JS=!1,Pc.forEach(e=>e.complete(QS)),Pc.clear()}function oz(){Pc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(YS=!0)})}function ine(){QS=!0,oz(),iz(),QS=!1}class NE{constructor(t,n,r,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Pc.add(this),JS||(JS=!0,Sn.read(oz),Sn.resolveKeyframes(iz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const o=r.readValue(n,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}Qte(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Pc.delete(this)}cancel(){this.state==="scheduled"&&(Pc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const one=e=>e.startsWith("--");function lne(e,t,n){one(t)?e.style.setProperty(t,n):e.style[t]=n}const cne=yE(()=>window.ScrollTimeline!==void 0),une={};function dne(e,t){const n=yE(e);return()=>une[t]??n()}const lz=dne(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wf=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,cP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wf([0,.65,.55,1]),circOut:Wf([.55,0,1,.45]),backIn:Wf([.31,.01,.66,-.59]),backOut:Wf([.33,1.53,.69,.99])};function cz(e,t){if(e)return typeof e=="function"?lz()?rz(e,t):"ease-out":G6(e)?Wf(e):Array.isArray(e)?e.map(n=>cz(n,t)||cP.easeOut):cP[e]}function hne(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:u}={},h=void 0){const f={[t]:n};u&&(f.offset=u);const m=cz(o,s);Array.isArray(m)&&(f.easing=m);const g={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),e.animate(f,g)}function uz(e){return typeof e=="function"&&"applyToOptions"in e}function fne({type:e,...t}){return uz(e)&&lz()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class pne extends EE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:u}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,gE(typeof t.type!="string");const h=fne(t);this.animation=hne(n,r,s,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=CE(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):lne(n,r,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return va(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+va(t)}get time(){return va(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ai(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&cne()?(this.animation.timeline=t,_a):n(this)}}const dz={anticipate:B6,backInOut:F6,circInOut:q6};function mne(e){return e in dz}function gne(e){typeof e.ease=="string"&&mne(e.ease)&&(e.ease=dz[e.ease])}const uP=10;class yne extends pne{constructor(t){gne(t),az(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new jE({...i,autoplay:!1}),u=Ai(this.finishedTime??this.time);n.setWithVelocity(o.sample(u-uP).value,o.sample(u).value,uP),o.stop()}}const dP=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(El.test(e)||e==="0")&&!e.startsWith("url("));function bne(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function xne(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=dP(s,t),o=dP(a,t);return!i||!o?!1:bne(e)||(n==="spring"||uz(n))&&r}function XS(e){e.duration=0,e.type="keyframes"}const vne=new Set(["opacity","clipPath","filter","transform"]),wne=yE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _ne(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return wne()&&n&&vne.has(n)&&(n!=="transform"||!h)&&!u&&!r&&s!=="mirror"&&a!==0&&i!=="inertia"}const kne=40;class Sne extends EE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:u,motionValue:h,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ks.now();const g={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,name:u,motionValue:h,element:f,...m},b=f?.KeyframeResolver||NE;this.keyframeResolver=new b(o,(w,x,S)=>this.onKeyframesResolved(w,x,g,!S),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:u,isHandoff:h,onUpdate:f}=r;this.resolvedAt=ks.now(),xne(t,a,i,o)||((So.instantAnimations||!u)&&f?.(CE(t,r,n)),t[0]=t[t.length-1],XS(r),r.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>kne?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},b=!h&&_ne(g)?new yne({...g,element:g.motionValue.owner.current}):new jE(g);b.finished.then(()=>this.notifyFinished()).catch(_a),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ine()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Tne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Cne(e){const t=Tne.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function hz(e,t,n=1){const[r,s]=Cne(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return R6(i)?parseFloat(i):i}return wE(s)?hz(s,t,n+1):s}function AE(e,t){return e?.[t]??e?.default??e}const fz=new Set(["width","height","top","left","right","bottom",...nh]),Ene={test:e=>e==="auto",parse:e=>e},pz=e=>t=>t.test(e),mz=[th,pt,Ii,ml,bte,yte,Ene],hP=e=>mz.find(pz(e));function jne(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||M6(e):!0}const Nne=new Set(["brightness","contrast","saturate","opacity"]);function Ane(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(_E)||[];if(!r)return e;const s=n.replace(r,"");let a=Nne.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const Ine=/\b([a-z-]*)\(.*?\)/gu,eT={...El,getAnimatableNone:e=>{const t=e.match(Ine);return t?t.map(Ane).join(" "):e}},fP={...th,transform:Math.round},One={rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:vy,scaleX:vy,scaleY:vy,scaleZ:vy,skew:ml,skewX:ml,skewY:ml,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:Fp,originX:eP,originY:eP,originZ:pt},IE={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...One,zIndex:fP,fillOpacity:Fp,strokeOpacity:Fp,numOctaves:fP},Rne={...IE,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:eT,WebkitFilter:eT},gz=e=>Rne[e];function yz(e,t){let n=gz(e);return n!==eT&&(n=El),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Pne=new Set(["auto","none","0"]);function Mne(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!Pne.has(a)&&Bp(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=yz(n,s)}class Dne extends NE{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),wE(h))){const f=hz(h,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!fz.has(r)||t.length!==2)return;const[s,a]=t,i=hP(s),o=hP(a);if(i!==o)if(lP(i)&&lP(o))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else Rc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||jne(t[s]))&&r.push(s);r.length&&Mne(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=Rc[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,u])=>{t.getValue(o).set(u)}),this.resolveNoneKeyframes()}}function $ne(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const bz=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function xz(e){return P6(e)&&"offsetHeight"in e}const pP=30,Lne=e=>!isNaN(parseFloat(e));class zne{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=ks.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ks.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Lne(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new bE);const r=this.events[t].add(n);return t==="change"?()=>{r(),Sn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ks.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pP);return D6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Id(e,t){return new zne(e,t)}const{schedule:OE}=K6(queueMicrotask,!1),Ka={x:!1,y:!1};function vz(){return Ka.x||Ka.y}function Une(e){return e==="x"||e==="y"?Ka[e]?null:(Ka[e]=!0,()=>{Ka[e]=!1}):Ka.x||Ka.y?null:(Ka.x=Ka.y=!0,()=>{Ka.x=Ka.y=!1})}function wz(e,t){const n=$ne(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function mP(e){return!(e.pointerType==="touch"||vz())}function Fne(e,t,n={}){const[r,s,a]=wz(e,n),i=o=>{if(!mP(o))return;const{target:u}=o,h=t(u,o);if(typeof h!="function"||!u)return;const f=m=>{mP(m)&&(h(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,s)};return r.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const _z=(e,t)=>t?e===t?!0:_z(e,t.parentElement):!1,RE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Bne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Hne(e){return Bne.has(e.tagName)||e.tabIndex!==-1}const N0=new WeakSet;function gP(e){return t=>{t.key==="Enter"&&e(t)}}function sk(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const qne=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=gP(()=>{if(N0.has(n))return;sk(n,"down");const s=gP(()=>{sk(n,"up")}),a=()=>sk(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function yP(e){return RE(e)&&!vz()}function Vne(e,t,n={}){const[r,s,a]=wz(e,n),i=o=>{const u=o.currentTarget;if(!yP(o))return;N0.add(u);const h=t(u,o),f=(b,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),N0.has(u)&&N0.delete(u),yP(b)&&typeof h=="function"&&h(b,{success:w})},m=b=>{f(b,u===window||u===document||n.useGlobalTarget||_z(u,b.target))},g=b=>{f(b,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",g,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),xz(o)&&(o.addEventListener("focus",h=>qne(h,s)),!Hne(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function kz(e){return P6(e)&&"ownerSVGElement"in e}function Gne(e){return kz(e)&&e.tagName==="svg"}const qr=e=>!!(e&&e.getVelocity),Kne=[...mz,Jn,El],Zne=e=>Kne.find(pz(e)),PE=A.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function bP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Wne(...e){return t=>{let n=!1;const r=e.map(s=>{const a=bP(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():bP(e[s],null)}}}}function Jne(...e){return A.useCallback(Wne(...e),e)}class Yne extends A.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=xz(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Qne({children:e,isPresent:t,anchorX:n,root:r}){const s=A.useId(),a=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(PE),u=Jne(a,e?.ref);return A.useInsertionEffect(()=>{const{width:h,height:f,top:m,left:g,right:b}=i.current;if(t||!a.current||!h||!f)return;const w=n==="left"?`left: ${g}`:`right: ${b}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const S=r??document.head;return S.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{S.contains(x)&&S.removeChild(x)}},[t]),c.jsx(Yne,{isPresent:t,childRef:a,sizeRef:i,children:A.cloneElement(e,{ref:u})})}const Xne=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:u})=>{const h=hE(ere),f=A.useId();let m=!0,g=A.useMemo(()=>(m=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:b=>{h.set(b,!0);for(const w of h.values())if(!w)return;r&&r()},register:b=>(h.set(b,!1),()=>h.delete(b))}),[n,h,r]);return a&&m&&(g={...g}),A.useMemo(()=>{h.forEach((b,w)=>h.set(w,!1))},[n]),A.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),i==="popLayout"&&(e=c.jsx(Qne,{isPresent:n,anchorX:o,root:u,children:e})),c.jsx(bx.Provider,{value:g,children:e})};function ere(){return new Map}function Sz(e=!0){const t=A.useContext(bx);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=A.useId();A.useEffect(()=>{if(e)return s(a)},[e]);const i=A.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const wy=e=>e.key||"";function xP(e){const t=[];return A.Children.forEach(e,n=>{A.isValidElement(n)&&t.push(n)}),t}const ME=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:u})=>{const[h,f]=Sz(i),m=A.useMemo(()=>xP(e),[e]),g=i&&!h?[]:m.map(wy),b=A.useRef(!0),w=A.useRef(m),x=hE(()=>new Map),[S,k]=A.useState(m),[C,T]=A.useState(m);O6(()=>{b.current=!1,w.current=m;for(let R=0;R<C.length;R++){const U=wy(C[R]);g.includes(U)?x.delete(U):x.get(U)!==!0&&x.set(U,!1)}},[C,g.length,g.join("-")]);const P=[];if(m!==S){let R=[...m];for(let U=0;U<C.length;U++){const j=C[U],se=wy(j);g.includes(se)||(R.splice(U,0,j),P.push(j))}return a==="wait"&&P.length&&(R=P),T(xP(R)),k(m),null}const{forceRender:D}=A.useContext(dE);return c.jsx(c.Fragment,{children:C.map(R=>{const U=wy(R),j=i&&!h?!1:m===C||g.includes(U),se=()=>{if(x.has(U))x.set(U,!0);else return;let B=!0;x.forEach(ee=>{ee||(B=!1)}),B&&(D?.(),T(w.current),i&&f?.(),r&&r())};return c.jsx(Xne,{isPresent:j,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:u,onExitComplete:j?void 0:se,anchorX:o,children:R},U)})})},Tz=A.createContext({strict:!1}),vP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Od={};for(const e in vP)Od[e]={isEnabled:t=>vP[e].some(n=>!!t[n])};function tre(e){for(const t in e)Od[t]={...Od[t],...e[t]}}const nre=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function db(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nre.has(e)}let Cz=e=>!db(e);function rre(e){typeof e=="function"&&(Cz=t=>t.startsWith("on")?!db(t):e(t))}try{rre(require("@emotion/is-prop-valid").default)}catch{}function sre(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Cz(s)||n===!0&&db(s)||!t&&!db(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const xx=A.createContext({});function vx(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Hp(e){return typeof e=="string"||Array.isArray(e)}const DE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$E=["initial",...DE];function wx(e){return vx(e.animate)||$E.some(t=>Hp(e[t]))}function Ez(e){return!!(wx(e)||e.variants)}function are(e,t){if(wx(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Hp(n)?n:void 0,animate:Hp(r)?r:void 0}}return e.inherit!==!1?t:{}}function ire(e){const{initial:t,animate:n}=are(e,A.useContext(xx));return A.useMemo(()=>({initial:t,animate:n}),[wP(t),wP(n)])}function wP(e){return Array.isArray(e)?e.join(" "):e}function _P(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pt.test(e))e=parseFloat(e);else return e;const n=_P(e,t.target.x),r=_P(e,t.target.y);return`${n}% ${r}%`}},ore={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=El.parse(e);if(s.length>5)return r;const a=El.createTransformer(e),i=typeof s[0]!="number"?1:0,o=n.x.scale*t.x,u=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=u;const h=Nn(o,u,.5);return typeof s[2+i]=="number"&&(s[2+i]/=h),typeof s[3+i]=="number"&&(s[3+i]/=h),a(s)}},tT={borderRadius:{...xf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xf,borderTopRightRadius:xf,borderBottomLeftRadius:xf,borderBottomRightRadius:xf,boxShadow:ore};function jz(e,{layout:t,layoutId:n}){return rh.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!tT[e]||e==="opacity")}const lre={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cre=nh.length;function ure(e,t,n){let r="",s=!0;for(let a=0;a<cre;a++){const i=nh[a],o=e[i];if(o===void 0)continue;let u=!0;if(typeof o=="number"?u=o===(i.startsWith("scale")?1:0):u=parseFloat(o)===0,!u||n){const h=bz(o,IE[i]);if(!u){s=!1;const f=lre[i]||i;r+=`${f}(${h}) `}n&&(t[i]=h)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function LE(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const u in t){const h=t[u];if(rh.has(u)){i=!0;continue}else if(W6(u)){s[u]=h;continue}else{const f=bz(h,IE[u]);u.startsWith("origin")?(o=!0,a[u]=f):r[u]=f}}if(t.transform||(i||n?r.transform=ure(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:u="50%",originY:h="50%",originZ:f=0}=a;r.transformOrigin=`${u} ${h} ${f}`}}const zE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Nz(e,t,n){for(const r in t)!qr(t[r])&&!jz(r,n)&&(e[r]=t[r])}function dre({transformTemplate:e},t){return A.useMemo(()=>{const n=zE();return LE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function hre(e,t){const n=e.style||{},r={};return Nz(r,n,e),Object.assign(r,dre(e,t)),r}function fre(e,t){const n={},r=hre(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const pre={offset:"stroke-dashoffset",array:"stroke-dasharray"},mre={offset:"strokeDashoffset",array:"strokeDasharray"};function gre(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?pre:mre;e[a.offset]=pt.transform(-r);const i=pt.transform(t),o=pt.transform(n);e[a.array]=`${i} ${o}`}function Az(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},u,h,f){if(LE(e,o,h),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g}=e;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&gre(m,s,a,i,!1)}const Iz=()=>({...zE(),attrs:{}}),Oz=e=>typeof e=="string"&&e.toLowerCase()==="svg";function yre(e,t,n,r){const s=A.useMemo(()=>{const a=Iz();return Az(a,t,Oz(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Nz(a,e.style,e),s.style={...a,...s.style}}return s}const bre=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UE(e){return typeof e!="string"||e.includes("-")?!1:!!(bre.indexOf(e)>-1||/[A-Z]/u.test(e))}function xre(e,t,n,{latestValues:r},s,a=!1){const o=(UE(e)?yre:fre)(t,r,s,e),u=sre(t,typeof e=="string",a),h=e!==A.Fragment?{...u,...o,ref:n}:{},{children:f}=t,m=A.useMemo(()=>qr(f)?f.get():f,[f]);return A.createElement(e,{...h,children:m})}function kP(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function FE(e,t,n,r){if(typeof t=="function"){const[s,a]=kP(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=kP(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function A0(e){return qr(e)?e.get():e}function vre({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:wre(n,r,s,e),renderState:t()}}function wre(e,t,n,r){const s={},a=r(e,{});for(const g in a)s[g]=A0(a[g]);let{initial:i,animate:o}=e;const u=wx(e),h=Ez(e);t&&h&&!u&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let f=n?n.initial===!1:!1;f=f||i===!1;const m=f?o:i;if(m&&typeof m!="boolean"&&!vx(m)){const g=Array.isArray(m)?m:[m];for(let b=0;b<g.length;b++){const w=FE(e,g[b]);if(w){const{transitionEnd:x,transition:S,...k}=w;for(const C in k){let T=k[C];if(Array.isArray(T)){const P=f?T.length-1:0;T=T[P]}T!==null&&(s[C]=T)}for(const C in x)s[C]=x[C]}}}return s}const Rz=e=>(t,n)=>{const r=A.useContext(xx),s=A.useContext(bx),a=()=>vre(e,t,r,s);return n?a():hE(a)};function BE(e,t,n){const{style:r}=e,s={};for(const a in r)(qr(r[a])||t.style&&qr(t.style[a])||jz(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const _re=Rz({scrapeMotionValuesFromProps:BE,createRenderState:zE});function Pz(e,t,n){const r=BE(e,t,n);for(const s in e)if(qr(e[s])||qr(t[s])){const a=nh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const kre=Rz({scrapeMotionValuesFromProps:Pz,createRenderState:Iz}),Sre=Symbol.for("motionComponentSymbol");function ud(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Tre(e,t,n){return A.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ud(n)&&(n.current=r))},[t])}const HE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cre="framerAppearId",Mz="data-"+HE(Cre),Dz=A.createContext({});function Ere(e,t,n,r,s){const{visualElement:a}=A.useContext(xx),i=A.useContext(Tz),o=A.useContext(bx),u=A.useContext(PE).reducedMotion,h=A.useRef(null);r=r||i.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=A.useContext(Dz);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&jre(h.current,n,s,m);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const b=n[Mz],w=A.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return O6(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1),f.enteringChildren=void 0)}),f}function jre(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:$z(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&ud(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:h})}function $z(e){if(e)return e.options.allowProjection!==!1?e.projection:$z(e.parent)}function ak(e,{forwardMotionProps:t=!1}={},n,r){n&&tre(n);const s=UE(e)?kre:_re;function a(o,u){let h;const f={...A.useContext(PE),...o,layoutId:Nre(o)},{isStatic:m}=f,g=ire(o),b=s(o,m);if(!m&&fE){Are();const w=Ire(f);h=w.MeasureLayout,g.visualElement=Ere(e,b,f,r,w.ProjectionNode)}return c.jsxs(xx.Provider,{value:g,children:[h&&g.visualElement?c.jsx(h,{visualElement:g.visualElement,...f}):null,xre(e,o,Tre(b,g.visualElement,u),b,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=A.forwardRef(a);return i[Sre]=e,i}function Nre({layoutId:e}){const t=A.useContext(dE).id;return t&&e!==void 0?t+"-"+e:e}function Are(e,t){A.useContext(Tz).strict}function Ire(e){const{drag:t,layout:n}=Od;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Ore(e,t){if(typeof Proxy>"u")return ak;const n=new Map,r=(a,i)=>ak(a,i,e,t),s=(a,i)=>r(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,ak(i,void 0,e,t)),n.get(i))})}function Lz({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Rre({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Pre(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ik(e){return e===void 0||e===1}function nT({scale:e,scaleX:t,scaleY:n}){return!ik(e)||!ik(t)||!ik(n)}function gc(e){return nT(e)||zz(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function zz(e){return SP(e.x)||SP(e.y)}function SP(e){return e&&e!=="0%"}function hb(e,t,n){const r=e-n,s=t*r;return n+s}function TP(e,t,n,r,s){return s!==void 0&&(e=hb(e,s,r)),hb(e,n,r)+t}function rT(e,t=0,n=1,r,s){e.min=TP(e.min,t,n,r,s),e.max=TP(e.max,t,n,r,s)}function Uz(e,{x:t,y:n}){rT(e.x,t.translate,t.scale,t.originPoint),rT(e.y,n.translate,n.scale,n.originPoint)}const CP=.999999999999,EP=1.0000000000001;function Mre(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&hd(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Uz(e,i)),r&&gc(a.latestValues)&&hd(e,a.latestValues))}t.x<EP&&t.x>CP&&(t.x=1),t.y<EP&&t.y>CP&&(t.y=1)}function dd(e,t){e.min=e.min+t,e.max=e.max+t}function jP(e,t,n,r,s=.5){const a=Nn(e.min,e.max,s);rT(e,t,n,a,r)}function hd(e,t){jP(e.x,t.x,t.scaleX,t.scale,t.originX),jP(e.y,t.y,t.scaleY,t.scale,t.originY)}function Fz(e,t){return Lz(Pre(e.getBoundingClientRect(),t))}function Dre(e,t,n){const r=Fz(e,n),{scroll:s}=t;return s&&(dd(r.x,s.offset.x),dd(r.y,s.offset.y)),r}const NP=()=>({translate:0,scale:1,origin:0,originPoint:0}),fd=()=>({x:NP(),y:NP()}),AP=()=>({min:0,max:0}),or=()=>({x:AP(),y:AP()}),sT={current:null},Bz={current:!1};function $re(){if(Bz.current=!0,!!fE)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sT.current=e.matches;e.addEventListener("change",t),t()}else sT.current=!1}const Lre=new WeakMap;function zre(e,t,n){for(const r in t){const s=t[r],a=n[r];if(qr(s))e.addValue(r,s);else if(qr(a))e.addValue(r,Id(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,Id(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const IP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ure{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=NE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=ks.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Sn.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=i;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=wx(n),this.isVariantNode=Ez(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const b=m[g];u[g]!==void 0&&qr(b)&&b.set(u[g])}}mount(t){this.current=t,Lre.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Bz.current||$re(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sT.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Cl(this.notifyUpdate),Cl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=rh.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Sn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Od){const n=Od[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):or()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<IP.length;r++){const s=IP[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=zre(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Id(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(R6(r)||M6(r))?r=parseFloat(r):!Zne(r)&&El.test(n)&&(r=yz(t,n)),this.setBaseTarget(t,qr(r)?r.get():r)),qr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=FE(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!qr(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new bE),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){OE.render(this.render)}}class Hz extends Ure{constructor(){super(...arguments),this.KeyframeResolver=Dne}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qz(e,{style:t,vars:n},r,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function Fre(e){return window.getComputedStyle(e)}class Bre extends Hz{constructor(){super(...arguments),this.type="html",this.renderInstance=qz}readValueFromInstance(t,n){if(rh.has(n))return this.projection?.isProjecting?ZS(n):tne(t,n);{const r=Fre(t),s=(W6(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Fz(t,n)}build(t,n,r){LE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return BE(t,n,r)}}const Vz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hre(e,t,n,r){qz(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Vz.has(s)?s:HE(s),t.attrs[s])}class qre extends Hz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=or}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(rh.has(n)){const r=gz(n);return r&&r.default||0}return n=Vz.has(n)?n:HE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Pz(t,n,r)}build(t,n,r){Az(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){Hre(t,n,r,s)}mount(t){this.isSVGTag=Oz(t.tagName),super.mount(t)}}const Vre=(e,t)=>UE(e)?new qre(t):new Bre(t,{allowProjection:e!==A.Fragment});function _d(e,t,n){const r=e.getProps();return FE(r,t,n!==void 0?n:r.custom,e)}const aT=e=>Array.isArray(e);function Gre(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Id(n))}function Kre(e){return aT(e)?e[e.length-1]||0:e}function Zre(e,t){const n=_d(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const o=Kre(a[i]);Gre(e,i,o)}}function Wre(e){return!!(qr(e)&&e.add)}function iT(e,t){const n=e.getValue("willChange");if(Wre(n))return n.add(t);if(!n&&So.WillChange){const r=new So.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Gz(e){return e.props[Mz]}const Jre=e=>e!==null;function Yre(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Jre),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Qre={type:"spring",stiffness:500,damping:25,restSpeed:10},Xre=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ese={type:"keyframes",duration:.8},tse={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nse=(e,{keyframes:t})=>t.length>2?ese:rh.has(e)?e.startsWith("scale")?Xre(t[1]):Qre:tse;function rse({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const qE=(e,t,n,r={},s,a)=>i=>{const o=AE(r,e)||{},u=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ai(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};rse(o)||Object.assign(f,nse(e,f)),f.duration&&(f.duration=Ai(f.duration)),f.repeatDelay&&(f.repeatDelay=Ai(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(XS(f),f.delay===0&&(m=!0)),(So.instantAnimations||So.skipAnimations)&&(m=!0,XS(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,m&&!a&&t.get()!==void 0){const g=Yre(f.keyframes,o);if(g!==void 0){Sn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new jE(f):new Sne(f)};function sse({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Kz(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;r&&(a=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const f in o){const m=e.getValue(f,e.latestValues[f]??null),g=o[f];if(g===void 0||h&&sse(h,f))continue;const b={delay:n,...AE(a||{},f)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===w&&!b.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const k=Gz(e);if(k){const C=window.MotionHandoffAnimation(k,f,Sn);C!==null&&(b.startTime=C,x=!0)}}iT(e,f),m.start(qE(f,m,g,e.shouldReduceMotion&&fz.has(f)?{type:!1}:b,e,x));const S=m.animation;S&&u.push(S)}return i&&Promise.all(u).then(()=>{Sn.update(()=>{i&&Zre(e,i)})}),u}function Zz(e,t,n,r=0,s=1){const a=Array.from(e).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),i=e.size,o=(i-1)*r;return typeof n=="function"?n(a,i):s===1?a*r:o-a*r}function oT(e,t,n={}){const r=_d(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(Kz(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=s;return ase(e,t,u,h,f,m,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,h]=o==="beforeChildren"?[a,i]:[i,a];return u().then(()=>h())}else return Promise.all([a(),i(n.delay)])}function ase(e,t,n=0,r=0,s=0,a=1,i){const o=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),o.push(oT(u,t,{...i,delay:n+(typeof r=="function"?0:r)+Zz(e.variantChildren,u,r,s,a)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(o)}function ise(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>oT(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=oT(e,t,n);else{const s=typeof t=="function"?_d(e,t,n.custom):t;r=Promise.all(Kz(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Wz(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const ose=$E.length;function Jz(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Jz(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<ose;n++){const r=$E[n],s=e.props[r];(Hp(s)||s===!1)&&(t[r]=s)}return t}const lse=[...DE].reverse(),cse=DE.length;function use(e){return t=>Promise.all(t.map(({animation:n,options:r})=>ise(e,n,r)))}function dse(e){let t=use(e),n=OP(),r=!0;const s=u=>(h,f)=>{const m=_d(e,f,u==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:b,...w}=m;h={...h,...w,...b}}return h};function a(u){t=u(e)}function i(u){const{props:h}=e,f=Jz(e.parent)||{},m=[],g=new Set;let b={},w=1/0;for(let S=0;S<cse;S++){const k=lse[S],C=n[k],T=h[k]!==void 0?h[k]:f[k],P=Hp(T),D=k===u?C.isActive:null;D===!1&&(w=S);let R=T===f[k]&&T!==h[k]&&P;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...b},!C.isActive&&D===null||!T&&!C.prevProp||vx(T)||typeof T=="boolean")continue;const U=hse(C.prevProp,T);let j=U||k===u&&C.isActive&&!R&&P||S>w&&P,se=!1;const B=Array.isArray(T)?T:[T];let ee=B.reduce(s(k),{});D===!1&&(ee={});const{prevResolvedValues:ie={}}=C,_e={...ie,...ee},G=Z=>{j=!0,g.has(Z)&&(se=!0,g.delete(Z)),C.needsAnimating[Z]=!0;const W=e.getValue(Z);W&&(W.liveStyle=!1)};for(const Z in _e){const W=ee[Z],de=ie[Z];if(b.hasOwnProperty(Z))continue;let $=!1;aT(W)&&aT(de)?$=!Wz(W,de):$=W!==de,$?W!=null?G(Z):g.add(Z):W!==void 0&&g.has(Z)?G(Z):C.protectedKeys[Z]=!0}C.prevProp=T,C.prevResolvedValues=ee,C.isActive&&(b={...b,...ee}),r&&e.blockInitialAnimation&&(j=!1);const H=R&&U;j&&(!H||se)&&m.push(...B.map(Z=>{const W={type:k};if(typeof Z=="string"&&r&&!H&&e.manuallyAnimateOnMount&&e.parent){const{parent:de}=e,$=_d(de,Z);if(de.enteringChildren&&$){const{delayChildren:F}=$.transition||{};W.delay=Zz(de.enteringChildren,e,F)}}return{animation:Z,options:W}}))}if(g.size){const S={};if(typeof h.initial!="boolean"){const k=_d(e,Array.isArray(h.initial)?h.initial[0]:h.initial);k&&k.transition&&(S.transition=k.transition)}g.forEach(k=>{const C=e.getBaseTarget(k),T=e.getValue(k);T&&(T.liveStyle=!0),S[k]=C??null}),m.push({animation:S})}let x=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(m):Promise.resolve()}function o(u,h){if(n[u].isActive===h)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(u,h)),n[u].isActive=h;const f=i(u);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=OP()}}}function hse(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Wz(t,e):!1}function oc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OP(){return{animate:oc(!0),whileInView:oc(),whileHover:oc(),whileTap:oc(),whileDrag:oc(),whileFocus:oc(),exit:oc()}}class $l{constructor(t){this.isMounted=!1,this.node=t}update(){}}class fse extends $l{constructor(t){super(t),t.animationState||(t.animationState=dse(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();vx(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let pse=0;class mse extends $l{constructor(){super(...arguments),this.id=pse++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const gse={animation:{Feature:fse},exit:{Feature:mse}};function qp(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wm(e){return{point:{x:e.pageX,y:e.pageY}}}const yse=e=>t=>RE(t)&&e(t,wm(t));function vp(e,t,n,r){return qp(e,t,yse(n),r)}const Yz=1e-4,bse=1-Yz,xse=1+Yz,Qz=.01,vse=0-Qz,wse=0+Qz;function is(e){return e.max-e.min}function _se(e,t,n){return Math.abs(e-t)<=n}function RP(e,t,n,r=.5){e.origin=r,e.originPoint=Nn(t.min,t.max,e.origin),e.scale=is(n)/is(t),e.translate=Nn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=bse&&e.scale<=xse||isNaN(e.scale))&&(e.scale=1),(e.translate>=vse&&e.translate<=wse||isNaN(e.translate))&&(e.translate=0)}function wp(e,t,n,r){RP(e.x,t.x,n.x,r?r.originX:void 0),RP(e.y,t.y,n.y,r?r.originY:void 0)}function PP(e,t,n){e.min=n.min+t.min,e.max=e.min+is(t)}function kse(e,t,n){PP(e.x,t.x,n.x),PP(e.y,t.y,n.y)}function MP(e,t,n){e.min=t.min-n.min,e.max=e.min+is(t)}function fb(e,t,n){MP(e.x,t.x,n.x),MP(e.y,t.y,n.y)}function ya(e){return[e("x"),e("y")]}const Xz=({current:e})=>e?e.ownerDocument.defaultView:null,DP=(e,t)=>Math.abs(e-t);function Sse(e,t){const n=DP(e.x,t.x),r=DP(e.y,t.y);return Math.sqrt(n**2+r**2)}class e9{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=lk(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=Sse(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:x}=g,{timestamp:S}=Rr;this.history.push({...x,timestamp:S});const{onStart:k,onMove:C}=this.handlers;b||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=ok(b,this.transformPagePoint),Sn.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=lk(g.type==="pointercancel"?this.lastMoveEventInfo:ok(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,k),x&&x(g,k)},!RE(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const o=wm(t),u=ok(o,this.transformPagePoint),{point:h}=u,{timestamp:f}=Rr;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(t,lk(u,this.history)),this.removeListeners=bm(vp(this.contextWindow,"pointermove",this.handlePointerMove),vp(this.contextWindow,"pointerup",this.handlePointerUp),vp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Cl(this.updatePoint)}}function ok(e,t){return t?{point:t(e.point)}:e}function $P(e,t){return{x:e.x-t.x,y:e.y-t.y}}function lk({point:e},t){return{point:e,delta:$P(e,t9(t)),offset:$P(e,Tse(t)),velocity:Cse(t,.1)}}function Tse(e){return e[0]}function t9(e){return e[e.length-1]}function Cse(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=t9(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Ai(t)));)n--;if(!r)return{x:0,y:0};const a=va(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ese(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Nn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Nn(n,e,r.max):Math.min(e,n)),e}function LP(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function jse(e,{top:t,left:n,bottom:r,right:s}){return{x:LP(e.x,n,s),y:LP(e.y,t,r)}}function zP(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Nse(e,t){return{x:zP(e.x,t.x),y:zP(e.y,t.y)}}function Ase(e,t){let n=.5;const r=is(e),s=is(t);return s>r?n=Up(t.min,t.max-r,e.min):r>s&&(n=Up(e.min,e.max-s,t.min)),ko(0,1,n)}function Ise(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const lT=.35;function Ose(e=lT){return e===!1?e=0:e===!0&&(e=lT),{x:UP(e,"left","right"),y:UP(e,"top","bottom")}}function UP(e,t,n){return{min:FP(e,t),max:FP(e,n)}}function FP(e,t){return typeof e=="number"?e:e[t]||0}const Rse=new WeakMap;class Pse{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=or(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wm(m).point)},i=(m,g)=>{const{drag:b,dragPropagation:w,onDragStart:x}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Une(b),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ya(k=>{let C=this.getAxisMotionValue(k).get()||0;if(Ii.test(C)){const{projection:T}=this.visualElement;if(T&&T.layout){const P=T.layout.layoutBox[k];P&&(C=is(P)*(parseFloat(C)/100))}}this.originPoint[k]=C}),x&&Sn.postRender(()=>x(m,g)),iT(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:x,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=g;if(w&&this.currentDirection===null){this.currentDirection=Mse(k),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,k),this.updateAxis("y",g.point,k),this.visualElement.render(),S&&S(m,g)},u=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ya(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new e9(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:Xz(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Sn.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!_y(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=Ese(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&ud(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=jse(r.layoutBox,t):this.constraints=!1,this.elastic=Ose(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ya(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Ise(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ud(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=Dre(r,s.root,this.visualElement.getTransformPagePoint());let i=Nse(s.layout.layoutBox,a);if(n){const o=n(Rre(i));this.hasMutatedConstraints=!!o,o&&(i=Lz(o))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),u=this.constraints||{},h=ya(f=>{if(!_y(f,n,this.currentDirection))return;let m=u&&u[f]||{};i&&(m={min:0,max:0});const g=s?200:1e6,b=s?40:1e7,w={type:"inertia",velocity:r?t[f]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(f,w)});return Promise.all(h).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return iT(this.visualElement,t),r.start(qE(t,r,0,n,this.visualElement,!1))}stopAnimation(){ya(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ya(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ya(n=>{const{drag:r}=this.getProps();if(!_y(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[n];a.set(t[n]-Nn(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ud(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ya(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const u=o.get();s[i]=Ase({min:u,max:u},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ya(i=>{if(!_y(i,t,null))return;const o=this.getAxisMotionValue(i),{min:u,max:h}=this.constraints[i];o.set(Nn(u,h,s[i]))})}addListeners(){if(!this.visualElement.current)return;Rse.set(this.visualElement,this);const t=this.visualElement.current,n=vp(t,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();ud(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Sn.read(r);const i=qp(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ya(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{i(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=lT,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function _y(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Mse(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Dse extends $l{constructor(t){super(t),this.removeGroupControls=_a,this.removeListeners=_a,this.controls=new Pse(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_a}unmount(){this.removeGroupControls(),this.removeListeners()}}const BP=e=>(t,n)=>{e&&Sn.postRender(()=>e(t,n))};class $se extends $l{constructor(){super(...arguments),this.removePointerDownListener=_a}onPointerDown(t){this.session=new e9(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:BP(t),onStart:BP(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&Sn.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=vp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const I0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let ck=!1;class Lse extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),ck&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),I0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,ck=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Sn.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),OE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;ck=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function n9(e){const[t,n]=Sz(),r=A.useContext(dE);return c.jsx(Lse,{...e,layoutGroup:r,switchLayoutGroup:A.useContext(Dz),isPresent:t,safeToRemove:n})}function zse(e,t,n){const r=qr(e)?e:Id(e);return r.start(qE("",r,t,n)),r.animation}const Use=(e,t)=>e.depth-t.depth;class Fse{constructor(){this.children=[],this.isDirty=!1}add(t){pE(this.children,t),this.isDirty=!0}remove(t){mE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Use),this.isDirty=!1,this.children.forEach(t)}}function Bse(e,t){const n=ks.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Cl(r),e(a-t))};return Sn.setup(r,!0),()=>Cl(r)}const r9=["TopLeft","TopRight","BottomLeft","BottomRight"],Hse=r9.length,HP=e=>typeof e=="string"?parseFloat(e):e,qP=e=>typeof e=="number"||pt.test(e);function qse(e,t,n,r,s,a){s?(e.opacity=Nn(0,n.opacity??1,Vse(r)),e.opacityExit=Nn(t.opacity??1,0,Gse(r))):a&&(e.opacity=Nn(t.opacity??1,n.opacity??1,r));for(let i=0;i<Hse;i++){const o=`border${r9[i]}Radius`;let u=VP(t,o),h=VP(n,o);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||qP(u)===qP(h)?(e[o]=Math.max(Nn(HP(u),HP(h),r),0),(Ii.test(h)||Ii.test(u))&&(e[o]+="%")):e[o]=h}(t.rotate||n.rotate)&&(e.rotate=Nn(t.rotate||0,n.rotate||0,r))}function VP(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Vse=s9(0,.5,H6),Gse=s9(.5,.95,_a);function s9(e,t,n){return r=>r<e?0:r>t?1:n(Up(e,t,r))}function GP(e,t){e.min=t.min,e.max=t.max}function Da(e,t){GP(e.x,t.x),GP(e.y,t.y)}function KP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ZP(e,t,n,r,s){return e-=t,e=hb(e,1/n,r),s!==void 0&&(e=hb(e,1/s,r)),e}function Kse(e,t=0,n=1,r=.5,s,a=e,i=e){if(Ii.test(t)&&(t=parseFloat(t),t=Nn(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Nn(a.min,a.max,r);e===a&&(o-=t),e.min=ZP(e.min,t,n,o,s),e.max=ZP(e.max,t,n,o,s)}function WP(e,t,[n,r,s],a,i){Kse(e,t[n],t[r],t[s],t.scale,a,i)}const Zse=["x","scaleX","originX"],Wse=["y","scaleY","originY"];function JP(e,t,n,r){WP(e.x,t,Zse,n?n.x:void 0,r?r.x:void 0),WP(e.y,t,Wse,n?n.y:void 0,r?r.y:void 0)}function YP(e){return e.translate===0&&e.scale===1}function a9(e){return YP(e.x)&&YP(e.y)}function QP(e,t){return e.min===t.min&&e.max===t.max}function Jse(e,t){return QP(e.x,t.x)&&QP(e.y,t.y)}function XP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function i9(e,t){return XP(e.x,t.x)&&XP(e.y,t.y)}function e4(e){return is(e.x)/is(e.y)}function t4(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Yse{constructor(){this.members=[]}add(t){pE(this.members,t),t.scheduleRender()}remove(t){if(mE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Qse(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:g,skewX:b,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),g&&(r+=`rotateY(${g}deg) `),b&&(r+=`skewX(${b}deg) `),w&&(r+=`skewY(${w}deg) `)}const o=e.x.scale*t.x,u=e.y.scale*t.y;return(o!==1||u!==1)&&(r+=`scale(${o}, ${u})`),r||"none"}const uk=["","X","Y","Z"],Xse=1e3;let eae=0;function dk(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function o9(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Gz(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Sn,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&o9(r)}function l9({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=eae++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rae),this.nodes.forEach(oae),this.nodes.forEach(lae),this.nodes.forEach(sae)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fse)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new bE),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const u=this.eventHandlers.get(i);u&&u.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=kz(i)&&!Gne(i),this.instance=i;const{layoutId:o,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||o)&&(this.isLayoutDirty=!0),e){let f,m=0;const g=()=>this.root.updateBlockedByResize=!1;Sn.read(()=>{m=window.innerWidth}),e(i,()=>{const b=window.innerWidth;b!==m&&(m=b,this.root.updateBlockedByResize=!0,f&&f(),f=Bse(g,250),I0.hasAnimatedSinceResize&&(I0.hasAnimatedSinceResize=!1,this.nodes.forEach(s4)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||fae,{onLayoutAnimationStart:x,onLayoutAnimationComplete:S}=h.getProps(),k=!this.targetLayout||!i9(this.targetLayout,b),C=!m&&g;if(this.options.layoutRoot||this.resumeFrom||C||m&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...AE(w,"layout"),onPlay:x,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,C)}else m||s4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cae),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&o9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:u}=this.options;if(o===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(r4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iae),this.nodes.forEach(tae),this.nodes.forEach(nae)):this.nodes.forEach(r4),this.clearAllSnapshots();const o=ks.now();Rr.delta=ko(0,1e3/60,o-Rr.timestamp),Rr.timestamp=o,Rr.isProcessing=!0,X_.update.process(Rr),X_.preRender.process(Rr),X_.render.process(Rr),Rr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,OE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aae),this.sharedNodes.forEach(uae)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!is(this.snapshot.measuredBox.x)&&!is(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=or(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!a9(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;i&&this.instance&&(o||gc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let u=this.removeElementScroll(o);return i&&(u=this.removeTransform(u)),pae(u),{animationId:this.root.animationId,measuredBox:o,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return or();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(mae))){const{scroll:h}=this.root;h&&(dd(o.x,h.offset.x),dd(o.y,h.offset.y))}return o}removeElementScroll(i){const o=or();if(Da(o,i),this.scroll?.wasRoot)return o;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Da(o,i),dd(o.x,f.offset.x),dd(o.y,f.offset.y))}return o}applyTransform(i,o=!1){const u=or();Da(u,i);for(let h=0;h<this.path.length;h++){const f=this.path[h];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&hd(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),gc(f.latestValues)&&hd(u,f.latestValues)}return gc(this.latestValues)&&hd(u,this.latestValues),u}removeTransform(i){const o=or();Da(o,i);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!gc(h.latestValues))continue;nT(h.latestValues)&&h.updateSnapshot();const f=or(),m=h.measurePageBox();Da(f,m),JP(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return gc(this.latestValues)&&JP(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==o;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!this.layout||!(f||m))return;this.resolvedRelativeTargetAt=Rr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=or(),this.targetWithTransforms=or()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kse(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Da(this.target,this.layout.layoutBox),Uz(this.target,this.targetDelta)):Da(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||nT(this.parent.latestValues)||zz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(i,o,u){this.relativeParent=i,this.linkedParentVersion=i.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=or(),this.relativeTargetOrigin=or(),fb(this.relativeTargetOrigin,o,u),Da(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Rr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Da(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;Mre(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=or());const{target:b}=i;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KP(this.prevProjectionDelta.x,this.projectionDelta.x),KP(this.prevProjectionDelta.y,this.projectionDelta.y)),wp(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!t4(this.projectionDelta.x,this.prevProjectionDelta.x)||!t4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fd(),this.projectionDelta=fd(),this.projectionDeltaWithTransform=fd()}setAnimationOrigin(i,o=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},m=fd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=or(),b=u?u.source:void 0,w=this.layout?this.layout.source:void 0,x=b!==w,S=this.getStack(),k=!S||S.members.length<=1,C=!!(x&&!k&&this.options.crossfade===!0&&!this.path.some(hae));this.animationProgress=0;let T;this.mixTargetDelta=P=>{const D=P/1e3;a4(m.x,i.x,D),a4(m.y,i.y,D),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fb(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dae(this.relativeTarget,this.relativeTargetOrigin,g,D),T&&Jse(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=or()),Da(T,this.relativeTarget)),x&&(this.animationValues=f,qse(f,h,this.latestValues,D,C,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Sn.update(()=>{I0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Id(0)),this.currentAnimation=zse(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:u,layout:h,latestValues:f}=i;if(!(!o||!u||!h)){if(this!==i&&this.layout&&h&&c9(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||or();const m=is(this.layout.layoutBox.x);u.x.min=i.target.x.min,u.x.max=u.x.min+m;const g=is(this.layout.layoutBox.y);u.y.min=i.target.y.min,u.y.max=u.y.min+g}Da(o,u),hd(o,f),wp(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Yse),this.sharedNodes.get(i).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:u}=i;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(o=!0),!o)return;const h={};u.z&&dk("z",i,h,this.animationValues);for(let f=0;f<uk.length;f++)dk(`rotate${uk[f]}`,i,h,this.animationValues),dk(`skew${uk[f]}`,i,h,this.animationValues);i.render();for(const f in h)i.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=A0(o?.pointerEvents)||"",i.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=A0(o?.pointerEvents)||""),this.hasProjected&&!gc(this.latestValues)&&(i.transform=u?u({},""):"none",this.hasProjected=!1);return}i.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=Qse(this.projectionDeltaWithTransform,this.treeScale,f);u&&(m=u(f,m)),i.transform=m;const{x:g,y:b}=this.projectionDelta;i.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,h.animationValues?i.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:i.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in tT){if(f[w]===void 0)continue;const{correct:x,applyTo:S,isCSSVariable:k}=tT[w],C=m==="none"?f[w]:x(f[w],h);if(S){const T=S.length;for(let P=0;P<T;P++)i[S[P]]=C}else k?this.options.visualElement.renderState.vars[w]=C:i[w]=C}this.options.layoutId&&(i.pointerEvents=h===this?A0(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(n4),this.root.sharedNodes.clear()}}}function tae(e){e.updateLayout()}function nae(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?ya(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],g=is(m);m.min=n[f].min,m.max=m.min+g}):c9(s,t.layoutBox,n)&&ya(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],g=is(n[f]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+g)});const i=fd();wp(i,n,t.layoutBox);const o=fd();a?wp(o,e.applyTransform(r,!0),t.measuredBox):wp(o,n,t.layoutBox);const u=!a9(i);let h=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const b=or();fb(b,t.layoutBox,m.layoutBox);const w=or();fb(w,n,g.layoutBox),i9(b,w)||(h=!0),f.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=b,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function rae(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function sae(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function aae(e){e.clearSnapshot()}function n4(e){e.clearMeasurements()}function r4(e){e.isLayoutDirty=!1}function iae(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function s4(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oae(e){e.resolveTargetDelta()}function lae(e){e.calcProjection()}function cae(e){e.resetSkewAndRotation()}function uae(e){e.removeLeadSnapshot()}function a4(e,t,n){e.translate=Nn(t.translate,0,n),e.scale=Nn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function i4(e,t,n,r){e.min=Nn(t.min,n.min,r),e.max=Nn(t.max,n.max,r)}function dae(e,t,n,r){i4(e.x,t.x,n.x,r),i4(e.y,t.y,n.y,r)}function hae(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const fae={duration:.45,ease:[.4,0,.1,1]},o4=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),l4=o4("applewebkit/")&&!o4("chrome/")?Math.round:_a;function c4(e){e.min=l4(e.min),e.max=l4(e.max)}function pae(e){c4(e.x),c4(e.y)}function c9(e,t,n){return e==="position"||e==="preserve-aspect"&&!_se(e4(t),e4(n),.2)}function mae(e){return e!==e.root&&e.scroll?.wasRoot}const gae=l9({attachResizeListener:(e,t)=>qp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hk={current:void 0},u9=l9({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!hk.current){const e=new gae({});e.mount(window),e.setOptions({layoutScroll:!0}),hk.current=e}return hk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),yae={pan:{Feature:$se},drag:{Feature:Dse,ProjectionNode:u9,MeasureLayout:n9}};function u4(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Sn.postRender(()=>a(t,wm(t)))}class bae extends $l{mount(){const{current:t}=this.node;t&&(this.unmount=Fne(t,(n,r)=>(u4(this.node,r,"Start"),s=>u4(this.node,s,"End"))))}unmount(){}}class xae extends $l{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bm(qp(this.node.current,"focus",()=>this.onFocus()),qp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function d4(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Sn.postRender(()=>a(t,wm(t)))}class vae extends $l{mount(){const{current:t}=this.node;t&&(this.unmount=Vne(t,(n,r)=>(d4(this.node,r,"Start"),(s,{success:a})=>d4(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cT=new WeakMap,fk=new WeakMap,wae=e=>{const t=cT.get(e.target);t&&t(e)},_ae=e=>{e.forEach(wae)};function kae({root:e,...t}){const n=e||document;fk.has(n)||fk.set(n,{});const r=fk.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(_ae,{root:e,...t})),r[s]}function Sae(e,t,n){const r=kae(t);return cT.set(e,n),r.observe(e),()=>{cT.delete(e),r.unobserve(e)}}const Tae={some:0,all:1};class Cae extends $l{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Tae[s]},o=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=h?f:m;g&&g(u)};return Sae(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Eae(t,n))&&this.startObserver()}unmount(){}}function Eae({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const jae={inView:{Feature:Cae},tap:{Feature:vae},focus:{Feature:xae},hover:{Feature:bae}},Nae={layout:{ProjectionNode:u9,MeasureLayout:n9}},Aae={...gse,...jae,...yae,...Nae},dn=Ore(Aae,Vre);function h4(){const[e,t]=A.useState("system"),[n,r]=A.useState(!1);A.useEffect(()=>{const i=localStorage.getItem("theme");t(i||"system")},[]);const s=i=>{t(i),localStorage.setItem("theme",i);let o=i;i==="system"&&(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),r(!1)},a=()=>e==="light"?c.jsx(ib,{size:18}):e==="dark"?c.jsx(FS,{size:18}):c.jsx(US,{size:18});return c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>r(!n),className:"p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition","aria-label":"Toggle theme",children:a()}),n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-36 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[c.jsxs("button",{onClick:()=>s("light"),className:`w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition ${e==="light"?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[c.jsx(ib,{size:16}),"Light"]}),c.jsxs("button",{onClick:()=>s("dark"),className:`w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition ${e==="dark"?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[c.jsx(FS,{size:16}),"Dark"]}),c.jsxs("button",{onClick:()=>s("system"),className:`w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition ${e==="system"?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[c.jsx(US,{size:16}),"System"]})]})]})]})}function Iae(){const[e,t]=A.useState(!1),[n,r]=A.useState(!1),s=mm(),a=Na();A.useEffect(()=>{const u=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const i=[{label:"Home",href:"/#home"},{label:"Skills",href:"/#skills"},{label:"Portfolio",href:"/#portfolio"},{label:"Products",href:"/products"},{label:"Experience",href:"/#experience"},{label:"Blog",href:"/#blog"},{label:"Contact",href:"/#contact"}],o=(u,h)=>{if(u.preventDefault(),r(!1),h.startsWith("/#")){const f=h.substring(1);if(a.pathname==="/"){window.location.hash=f;const m=document.querySelector(f);m&&m.scrollIntoView({behavior:"smooth"})}else s("/"+f)}};return c.jsxs("header",{className:`fixed top-0 left-0 right-0 z-30 transition-all duration-300 ${e?"bg-white dark:bg-gray-900 shadow-md py-4":"bg-transparent py-6"}`,children:[c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Ur,{to:"/",className:"text-2xl font-bold text-gray-900 dark:text-white hover:text-primary dark:hover:text-blue-400 transition-colors",children:"Sunny Singh"}),c.jsxs("nav",{className:"hidden xl:flex items-center gap-8",children:[i.map(u=>u.href.startsWith("/#")?c.jsx("a",{href:u.href,onClick:h=>o(h,u.href),className:"text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-blue-400 transition-colors font-medium",children:u.label},u.label):c.jsx(Ur,{to:u.href,className:"text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-blue-400 transition-colors font-medium",children:u.label},u.label)),c.jsx(h4,{})]}),c.jsxs("div",{className:"xl:hidden flex items-center gap-2",children:[c.jsx(h4,{}),c.jsx("button",{onClick:()=>r(!n),className:"text-gray-900 dark:text-white hover:text-primary dark:hover:text-blue-400 transition-colors",children:n?c.jsx(cn,{size:28}):c.jsx(j6,{size:28})})]})]})}),c.jsx(ME,{children:n&&c.jsx(dn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"xl:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 overflow-hidden",children:c.jsx("nav",{className:"container mx-auto px-4 py-6 flex flex-col gap-4",children:i.map(u=>u.href.startsWith("/#")?c.jsx("a",{href:u.href,onClick:h=>o(h,u.href),className:"text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-blue-400 transition-colors font-medium py-2",children:u.label},u.label):c.jsx(Ur,{to:u.href,onClick:()=>r(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-blue-400 transition-colors font-medium py-2",children:u.label},u.label))})})})]})}function Oae(){const e=new Date().getFullYear();return c.jsx("footer",{className:"bg-gray-900 text-white py-16",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"About Me"}),c.jsxs("div",{className:"space-y-4 text-gray-300",children:[c.jsx("p",{children:"My coding adventure started at 14, when I needed to earn some money. This challenge led me to learn coding and build websites for friends, sparking a passion for technology that has grown ever since."}),c.jsx("p",{children:"Over the last 4 years, I've worked professionally, taking on real-world projects that have taught me a lot. I've gained hands-on experience in working on a software development team, collaborating with various team members to gather requirements and build solutions to problems for stakeholders, making a real difference at work."}),c.jsx("p",{children:"Besides my job, I've also created and published my own applications, with CanvasCraft being my latest. These projects have allowed me to explore how to quickly prototype an MVP solution with serverless computing and providing it to real users, showing what I can do from start to finish."}),c.jsx("p",{children:"I'm always learning and excited to tackle new challenges. My journey from making websites for Xbox Live to developing professional applications and working on impactful projects shows my dedication and ability to grow in the tech field."})]})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Let's Connect"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("a",{href:"https://www.medium.com/@SunnyChopper",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors text-2xl",children:"M"}),c.jsx("a",{href:"https://www.twitter.com/sunnychopper",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors text-2xl",children:""}),c.jsx("a",{href:"https://www.linkedin.com/in/sunnychopper",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors text-2xl",children:"in"})]})]})]}),c.jsx("div",{className:"border-t border-gray-700 pt-8 text-center text-gray-400",children:c.jsxs("p",{children:["Copyright  ",e," All rights reserved | This template is made with  by"," ",c.jsx("a",{href:"https://colorlib.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary-dark transition-colors",children:"Colorlib"})]})})]})})}function Rae(){return c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(Iae,{}),c.jsx("main",{className:"flex-grow",children:c.jsx(m6,{})}),c.jsx(Oae,{})]})}const Pae="gs_";class Mae{storageKey;constructor(t){this.storageKey=`${Pae}${t}`}getData(){const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):{}}setData(t){localStorage.setItem(this.storageKey,JSON.stringify(t))}getAll(){const t=this.getData();return Object.values(t)}getById(t){return this.getData()[t]||null}create(t,n){const r=this.getData();return r[t]=n,this.setData(r),n}update(t,n){const r=this.getData(),s=r[t];if(!s)return null;const a={...s,...n};return r[t]=a,this.setData(r),a}delete(t){const n=this.getData();return n[t]?(delete n[t],this.setData(n),!0):!1}clear(){localStorage.removeItem(this.storageKey)}seed(t){const n={};t.forEach(r=>{const s=r.id;n[s]=r}),this.setData(n)}}class f4{collections=new Map;getCollection(t){return this.collections.has(t)||this.collections.set(t,new Mae(t)),this.collections.get(t)}async getAll(t){return Promise.resolve(this.getCollection(t).getAll())}async getById(t,n){return Promise.resolve(this.getCollection(t).getById(n))}async create(t,n,r){return Promise.resolve(this.getCollection(t).create(n,r))}async update(t,n,r){return Promise.resolve(this.getCollection(t).update(n,r))}async delete(t,n){return Promise.resolve(this.getCollection(t).delete(n))}clear(t){this.getCollection(t).clear()}seed(t,n){this.getCollection(t).seed(n)}async createRelation(t,n,r){await this.getCollection(t).create(n,r)}async deleteRelation(t,n){return this.delete(t,n)}async getRelations(t,n){return(await this.getAll(t)).filter(s=>Object.entries(n).every(([a,i])=>s[a]===i))}}function d9(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dae}=Object.prototype,{getPrototypeOf:VE}=Object,{iterator:_x,toStringTag:h9}=Symbol,kx=(e=>t=>{const n=Dae.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ui=e=>(e=e.toLowerCase(),t=>kx(t)===e),Sx=e=>t=>typeof t===e,{isArray:sh}=Array,Rd=Sx("undefined");function _m(e){return e!==null&&!Rd(e)&&e.constructor!==null&&!Rd(e.constructor)&&Ss(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const f9=ui("ArrayBuffer");function $ae(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&f9(e.buffer),t}const Lae=Sx("string"),Ss=Sx("function"),p9=Sx("number"),km=e=>e!==null&&typeof e=="object",zae=e=>e===!0||e===!1,O0=e=>{if(kx(e)!=="object")return!1;const t=VE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(h9 in e)&&!(_x in e)},Uae=e=>{if(!km(e)||_m(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Fae=ui("Date"),Bae=ui("File"),Hae=ui("Blob"),qae=ui("FileList"),Vae=e=>km(e)&&Ss(e.pipe),Gae=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ss(e.append)&&((t=kx(e))==="formdata"||t==="object"&&Ss(e.toString)&&e.toString()==="[object FormData]"))},Kae=ui("URLSearchParams"),[Zae,Wae,Jae,Yae]=["ReadableStream","Request","Response","Headers"].map(ui),Qae=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sm(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),sh(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(_m(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let o;for(r=0;r<i;r++)o=a[r],t.call(null,e[o],o,e)}}function m9(e,t){if(_m(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Nc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,g9=e=>!Rd(e)&&e!==Nc;function uT(){const{caseless:e,skipUndefined:t}=g9(this)&&this||{},n={},r=(s,a)=>{const i=e&&m9(n,a)||a;O0(n[i])&&O0(s)?n[i]=uT(n[i],s):O0(s)?n[i]=uT({},s):sh(s)?n[i]=s.slice():(!t||!Rd(s))&&(n[i]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Sm(arguments[s],r);return n}const Xae=(e,t,n,{allOwnKeys:r}={})=>(Sm(t,(s,a)=>{n&&Ss(s)?e[a]=d9(s,n):e[a]=s},{allOwnKeys:r}),e),eie=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tie=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},nie=(e,t,n,r)=>{let s,a,i;const o={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],(!r||r(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=n!==!1&&VE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},rie=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},sie=e=>{if(!e)return null;if(sh(e))return e;let t=e.length;if(!p9(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},aie=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&VE(Uint8Array)),iie=(e,t)=>{const r=(e&&e[_x]).call(e);let s;for(;(s=r.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},oie=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},lie=ui("HTMLFormElement"),cie=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),p4=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),uie=ui("RegExp"),y9=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sm(n,(s,a)=>{let i;(i=t(s,a,e))!==!1&&(r[a]=i||s)}),Object.defineProperties(e,r)},die=e=>{y9(e,(t,n)=>{if(Ss(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Ss(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hie=(e,t)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return sh(e)?r(e):r(String(e).split(t)),n},fie=()=>{},pie=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function mie(e){return!!(e&&Ss(e.append)&&e[h9]==="FormData"&&e[_x])}const gie=e=>{const t=new Array(10),n=(r,s)=>{if(km(r)){if(t.indexOf(r)>=0)return;if(_m(r))return r;if(!("toJSON"in r)){t[s]=r;const a=sh(r)?[]:{};return Sm(r,(i,o)=>{const u=n(i,s+1);!Rd(u)&&(a[o]=u)}),t[s]=void 0,a}}return r};return n(e,0)},yie=ui("AsyncFunction"),bie=e=>e&&(km(e)||Ss(e))&&Ss(e.then)&&Ss(e.catch),b9=((e,t)=>e?setImmediate:t?((n,r)=>(Nc.addEventListener("message",({source:s,data:a})=>{s===Nc&&a===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Nc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ss(Nc.postMessage)),xie=typeof queueMicrotask<"u"?queueMicrotask.bind(Nc):typeof process<"u"&&process.nextTick||b9,vie=e=>e!=null&&Ss(e[_x]),me={isArray:sh,isArrayBuffer:f9,isBuffer:_m,isFormData:Gae,isArrayBufferView:$ae,isString:Lae,isNumber:p9,isBoolean:zae,isObject:km,isPlainObject:O0,isEmptyObject:Uae,isReadableStream:Zae,isRequest:Wae,isResponse:Jae,isHeaders:Yae,isUndefined:Rd,isDate:Fae,isFile:Bae,isBlob:Hae,isRegExp:uie,isFunction:Ss,isStream:Vae,isURLSearchParams:Kae,isTypedArray:aie,isFileList:qae,forEach:Sm,merge:uT,extend:Xae,trim:Qae,stripBOM:eie,inherits:tie,toFlatObject:nie,kindOf:kx,kindOfTest:ui,endsWith:rie,toArray:sie,forEachEntry:iie,matchAll:oie,isHTMLForm:lie,hasOwnProperty:p4,hasOwnProp:p4,reduceDescriptors:y9,freezeMethods:die,toObjectSet:hie,toCamelCase:cie,noop:fie,toFiniteNumber:pie,findKey:m9,global:Nc,isContextDefined:g9,isSpecCompliantForm:mie,toJSONObject:gie,isAsyncFn:yie,isThenable:bie,setImmediate:b9,asap:xie,isIterable:vie};function kt(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}me.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const x9=kt.prototype,v9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{v9[e]={value:e}});Object.defineProperties(kt,v9);Object.defineProperty(x9,"isAxiosError",{value:!0});kt.from=(e,t,n,r,s,a)=>{const i=Object.create(x9);me.toFlatObject(e,i,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const o=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return kt.call(i,o,u,n,r,s),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const wie=null;function dT(e){return me.isPlainObject(e)||me.isArray(e)}function w9(e){return me.endsWith(e,"[]")?e.slice(0,-2):e}function m4(e,t,n){return e?e.concat(t).map(function(s,a){return s=w9(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function _ie(e){return me.isArray(e)&&!e.some(dT)}const kie=me.toFlatObject(me,{},null,function(t){return/^is[A-Z]/.test(t)});function Tx(e,t,n){if(!me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,S){return!me.isUndefined(S[x])});const r=n.metaTokens,s=n.visitor||f,a=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(t);if(!me.isFunction(s))throw new TypeError("visitor must be a function");function h(w){if(w===null)return"";if(me.isDate(w))return w.toISOString();if(me.isBoolean(w))return w.toString();if(!u&&me.isBlob(w))throw new kt("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(w)||me.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,x,S){let k=w;if(w&&!S&&typeof w=="object"){if(me.endsWith(x,"{}"))x=r?x:x.slice(0,-2),w=JSON.stringify(w);else if(me.isArray(w)&&_ie(w)||(me.isFileList(w)||me.endsWith(x,"[]"))&&(k=me.toArray(w)))return x=w9(x),k.forEach(function(T,P){!(me.isUndefined(T)||T===null)&&t.append(i===!0?m4([x],P,a):i===null?x:x+"[]",h(T))}),!1}return dT(w)?!0:(t.append(m4(S,x,a),h(w)),!1)}const m=[],g=Object.assign(kie,{defaultVisitor:f,convertValue:h,isVisitable:dT});function b(w,x){if(!me.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(w),me.forEach(w,function(k,C){(!(me.isUndefined(k)||k===null)&&s.call(t,k,me.isString(C)?C.trim():C,x,g))===!0&&b(k,x?x.concat(C):[C])}),m.pop()}}if(!me.isObject(e))throw new TypeError("data must be an object");return b(e),t}function g4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function GE(e,t){this._pairs=[],e&&Tx(e,this,t)}const _9=GE.prototype;_9.append=function(t,n){this._pairs.push([t,n])};_9.toString=function(t){const n=t?function(r){return t.call(this,r,g4)}:g4;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Sie(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function k9(e,t,n){if(!t)return e;const r=n&&n.encode||Sie;me.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=me.isURLSearchParams(t)?t.toString():new GE(t,n).toString(r),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class y4{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){me.forEach(this.handlers,function(r){r!==null&&t(r)})}}const S9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tie=typeof URLSearchParams<"u"?URLSearchParams:GE,Cie=typeof FormData<"u"?FormData:null,Eie=typeof Blob<"u"?Blob:null,jie={isBrowser:!0,classes:{URLSearchParams:Tie,FormData:Cie,Blob:Eie},protocols:["http","https","file","blob","url","data"]},KE=typeof window<"u"&&typeof document<"u",hT=typeof navigator=="object"&&navigator||void 0,Nie=KE&&(!hT||["ReactNative","NativeScript","NS"].indexOf(hT.product)<0),Aie=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Iie=KE&&window.location.href||"http://localhost",Oie=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:KE,hasStandardBrowserEnv:Nie,hasStandardBrowserWebWorkerEnv:Aie,navigator:hT,origin:Iie},Symbol.toStringTag,{value:"Module"})),Br={...Oie,...jie};function Rie(e,t){return Tx(e,new Br.classes.URLSearchParams,{visitor:function(n,r,s,a){return Br.isNode&&me.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function Pie(e){return me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Mie(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}function T9(e){function t(n,r,s,a){let i=n[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),u=a>=n.length;return i=!i&&me.isArray(s)?s.length:i,u?(me.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!o):((!s[i]||!me.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],a)&&me.isArray(s[i])&&(s[i]=Mie(s[i])),!o)}if(me.isFormData(e)&&me.isFunction(e.entries)){const n={};return me.forEachEntry(e,(r,s)=>{t(Pie(r),s,n,0)}),n}return null}function Die(e,t,n){if(me.isString(e))try{return(t||JSON.parse)(e),me.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tm={transitional:S9,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,a=me.isObject(t);if(a&&me.isHTMLForm(t)&&(t=new FormData(t)),me.isFormData(t))return s?JSON.stringify(T9(t)):t;if(me.isArrayBuffer(t)||me.isBuffer(t)||me.isStream(t)||me.isFile(t)||me.isBlob(t)||me.isReadableStream(t))return t;if(me.isArrayBufferView(t))return t.buffer;if(me.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Rie(t,this.formSerializer).toString();if((o=me.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Tx(o?{"files[]":t}:t,u&&new u,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),Die(t)):t}],transformResponse:[function(t){const n=this.transitional||Tm.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(me.isResponse(t)||me.isReadableStream(t))return t;if(t&&me.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?kt.from(o,kt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Br.classes.FormData,Blob:Br.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],e=>{Tm.headers[e]={}});const $ie=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lie=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&$ie[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},b4=Symbol("internals");function vf(e){return e&&String(e).trim().toLowerCase()}function R0(e){return e===!1||e==null?e:me.isArray(e)?e.map(R0):String(e)}function zie(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Uie=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pk(e,t,n,r,s){if(me.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!me.isString(t)){if(me.isString(r))return t.indexOf(r)!==-1;if(me.isRegExp(r))return r.test(t)}}function Fie(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Bie(e,t){const n=me.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,a,i){return this[r].call(this,t,s,a,i)},configurable:!0})})}let Ts=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function a(o,u,h){const f=vf(u);if(!f)throw new Error("header name must be a non-empty string");const m=me.findKey(s,f);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||u]=R0(o))}const i=(o,u)=>me.forEach(o,(h,f)=>a(h,f,u));if(me.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(me.isString(t)&&(t=t.trim())&&!Uie(t))i(Lie(t),n);else if(me.isObject(t)&&me.isIterable(t)){let o={},u,h;for(const f of t){if(!me.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[h=f[0]]=(u=o[h])?me.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}i(o,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=vf(t),t){const r=me.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return zie(s);if(me.isFunction(n))return n.call(this,s,r);if(me.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=vf(t),t){const r=me.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||pk(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function a(i){if(i=vf(i),i){const o=me.findKey(r,i);o&&(!n||pk(r,r[o],o,n))&&(delete r[o],s=!0)}}return me.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const a=n[r];(!t||pk(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,r={};return me.forEach(this,(s,a)=>{const i=me.findKey(r,a);if(i){n[i]=R0(s),delete n[a];return}const o=t?Fie(a):String(a).trim();o!==a&&delete n[a],n[o]=R0(s),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return me.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&me.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[b4]=this[b4]={accessors:{}}).accessors,s=this.prototype;function a(i){const o=vf(i);r[o]||(Bie(s,i),r[o]=!0)}return me.isArray(t)?t.forEach(a):a(t),this}};Ts.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(Ts.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});me.freezeMethods(Ts);function mk(e,t){const n=this||Tm,r=t||n,s=Ts.from(r.headers);let a=r.data;return me.forEach(e,function(o){a=o.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function C9(e){return!!(e&&e.__CANCEL__)}function ah(e,t,n){kt.call(this,e??"canceled",kt.ERR_CANCELED,t,n),this.name="CanceledError"}me.inherits(ah,kt,{__CANCEL__:!0});function E9(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new kt("Request failed with status code "+n.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Hie(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qie(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,a=0,i;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),f=r[a];i||(i=h),n[s]=u,r[s]=h;let m=a,g=0;for(;m!==s;)g+=n[m++],m=m%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),h-i<t)return;const b=f&&h-f;return b?Math.round(g*1e3/b):void 0}}function Vie(e,t){let n=0,r=1e3/t,s,a;const i=(h,f=Date.now())=>{n=f,s=null,a&&(clearTimeout(a),a=null),e(...h)};return[(...h)=>{const f=Date.now(),m=f-n;m>=r?i(h,f):(s=h,a||(a=setTimeout(()=>{a=null,i(s)},r-m)))},()=>s&&i(s)]}const pb=(e,t,n=3)=>{let r=0;const s=qie(50,250);return Vie(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,u=i-r,h=s(u),f=i<=o;r=i;const m={loaded:i,total:o,progress:o?i/o:void 0,bytes:u,rate:h||void 0,estimated:h&&o&&f?(o-i)/h:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(m)},n)},x4=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},v4=e=>(...t)=>me.asap(()=>e(...t)),Gie=Br.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Br.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Br.origin),Br.navigator&&/(msie|trident)/i.test(Br.navigator.userAgent)):()=>!0,Kie=Br.hasStandardBrowserEnv?{write(e,t,n,r,s,a,i){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];me.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),me.isString(r)&&o.push(`path=${r}`),me.isString(s)&&o.push(`domain=${s}`),a===!0&&o.push("secure"),me.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Zie(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Wie(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function j9(e,t,n){let r=!Zie(t);return e&&(r||n==!1)?Wie(e,t):t}const w4=e=>e instanceof Ts?{...e}:e;function Vc(e,t){t=t||{};const n={};function r(h,f,m,g){return me.isPlainObject(h)&&me.isPlainObject(f)?me.merge.call({caseless:g},h,f):me.isPlainObject(f)?me.merge({},f):me.isArray(f)?f.slice():f}function s(h,f,m,g){if(me.isUndefined(f)){if(!me.isUndefined(h))return r(void 0,h,m,g)}else return r(h,f,m,g)}function a(h,f){if(!me.isUndefined(f))return r(void 0,f)}function i(h,f){if(me.isUndefined(f)){if(!me.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function o(h,f,m){if(m in t)return r(h,f);if(m in e)return r(void 0,h)}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(h,f,m)=>s(w4(h),w4(f),m,!0)};return me.forEach(Object.keys({...e,...t}),function(f){const m=u[f]||s,g=m(e[f],t[f],f);me.isUndefined(g)&&m!==o||(n[f]=g)}),n}const N9=e=>{const t=Vc({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=t;if(t.headers=i=Ts.from(i),t.url=k9(j9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),me.isFormData(n)){if(Br.hasStandardBrowserEnv||Br.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(me.isFunction(n.getHeaders)){const u=n.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,m])=>{h.includes(f.toLowerCase())&&i.set(f,m)})}}if(Br.hasStandardBrowserEnv&&(r&&me.isFunction(r)&&(r=r(t)),r||r!==!1&&Gie(t.url))){const u=s&&a&&Kie.read(a);u&&i.set(s,u)}return t},Jie=typeof XMLHttpRequest<"u",Yie=Jie&&function(e){return new Promise(function(n,r){const s=N9(e);let a=s.data;const i=Ts.from(s.headers).normalize();let{responseType:o,onUploadProgress:u,onDownloadProgress:h}=s,f,m,g,b,w;function x(){b&&b(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function k(){if(!S)return;const T=Ts.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),D={data:!o||o==="text"||o==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:T,config:e,request:S};E9(function(U){n(U),x()},function(U){r(U),x()},D),S=null}"onloadend"in S?S.onloadend=k:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(k)},S.onabort=function(){S&&(r(new kt("Request aborted",kt.ECONNABORTED,e,S)),S=null)},S.onerror=function(P){const D=P&&P.message?P.message:"Network Error",R=new kt(D,kt.ERR_NETWORK,e,S);R.event=P||null,r(R),S=null},S.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const D=s.transitional||S9;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),r(new kt(P,D.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,S)),S=null},a===void 0&&i.setContentType(null),"setRequestHeader"in S&&me.forEach(i.toJSON(),function(P,D){S.setRequestHeader(D,P)}),me.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),o&&o!=="json"&&(S.responseType=s.responseType),h&&([g,w]=pb(h,!0),S.addEventListener("progress",g)),u&&S.upload&&([m,b]=pb(u),S.upload.addEventListener("progress",m),S.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(f=T=>{S&&(r(!T||T.type?new ah(null,e,S):T),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const C=Hie(s.url);if(C&&Br.protocols.indexOf(C)===-1){r(new kt("Unsupported protocol "+C+":",kt.ERR_BAD_REQUEST,e));return}S.send(a||null)})},Qie=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const a=function(h){if(!s){s=!0,o();const f=h instanceof Error?h:this.reason;r.abort(f instanceof kt?f:new ah(f instanceof Error?f.message:f))}};let i=t&&setTimeout(()=>{i=null,a(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),e=null)};e.forEach(h=>h.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>me.asap(o),u}},Xie=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},eoe=async function*(e,t){for await(const n of toe(e))yield*Xie(n,t)},toe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},_4=(e,t,n,r)=>{const s=eoe(e,t);let a=0,i,o=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await s.next();if(h){o(),u.close();return}let m=f.byteLength;if(n){let g=a+=m;n(g)}u.enqueue(new Uint8Array(f))}catch(h){throw o(h),h}},cancel(u){return o(u),s.return()}},{highWaterMark:2})},k4=64*1024,{isFunction:ky}=me,noe=(({Request:e,Response:t})=>({Request:e,Response:t}))(me.global),{ReadableStream:S4,TextEncoder:T4}=me.global,C4=(e,...t)=>{try{return!!e(...t)}catch{return!1}},roe=e=>{e=me.merge.call({skipUndefined:!0},noe,e);const{fetch:t,Request:n,Response:r}=e,s=t?ky(t):typeof fetch=="function",a=ky(n),i=ky(r);if(!s)return!1;const o=s&&ky(S4),u=s&&(typeof T4=="function"?(w=>x=>w.encode(x))(new T4):async w=>new Uint8Array(await new n(w).arrayBuffer())),h=a&&o&&C4(()=>{let w=!1;const x=new n(Br.origin,{body:new S4,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!x}),f=i&&o&&C4(()=>me.isReadableStream(new r("").body)),m={stream:f&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!m[w]&&(m[w]=(x,S)=>{let k=x&&x[w];if(k)return k.call(x);throw new kt(`Response type '${w}' is not supported`,kt.ERR_NOT_SUPPORT,S)})});const g=async w=>{if(w==null)return 0;if(me.isBlob(w))return w.size;if(me.isSpecCompliantForm(w))return(await new n(Br.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(me.isArrayBufferView(w)||me.isArrayBuffer(w))return w.byteLength;if(me.isURLSearchParams(w)&&(w=w+""),me.isString(w))return(await u(w)).byteLength},b=async(w,x)=>{const S=me.toFiniteNumber(w.getContentLength());return S??g(x)};return async w=>{let{url:x,method:S,data:k,signal:C,cancelToken:T,timeout:P,onDownloadProgress:D,onUploadProgress:R,responseType:U,headers:j,withCredentials:se="same-origin",fetchOptions:B}=N9(w),ee=t||fetch;U=U?(U+"").toLowerCase():"text";let ie=Qie([C,T&&T.toAbortSignal()],P),_e=null;const G=ie&&ie.unsubscribe&&(()=>{ie.unsubscribe()});let H;try{if(R&&h&&S!=="get"&&S!=="head"&&(H=await b(j,k))!==0){let F=new n(x,{method:"POST",body:k,duplex:"half"}),Q;if(me.isFormData(k)&&(Q=F.headers.get("content-type"))&&j.setContentType(Q),F.body){const[O,V]=x4(H,pb(v4(R)));k=_4(F.body,k4,O,V)}}me.isString(se)||(se=se?"include":"omit");const L=a&&"credentials"in n.prototype,Z={...B,signal:ie,method:S.toUpperCase(),headers:j.normalize().toJSON(),body:k,duplex:"half",credentials:L?se:void 0};_e=a&&new n(x,Z);let W=await(a?ee(_e,B):ee(x,Z));const de=f&&(U==="stream"||U==="response");if(f&&(D||de&&G)){const F={};["status","statusText","headers"].forEach(he=>{F[he]=W[he]});const Q=me.toFiniteNumber(W.headers.get("content-length")),[O,V]=D&&x4(Q,pb(v4(D),!0))||[];W=new r(_4(W.body,k4,O,()=>{V&&V(),G&&G()}),F)}U=U||"text";let $=await m[me.findKey(m,U)||"text"](W,w);return!de&&G&&G(),await new Promise((F,Q)=>{E9(F,Q,{data:$,headers:Ts.from(W.headers),status:W.status,statusText:W.statusText,config:w,request:_e})})}catch(L){throw G&&G(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,w,_e),{cause:L.cause||L}):kt.from(L,L&&L.code,w,_e)}}},soe=new Map,A9=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,a=[r,s,n];let i=a.length,o=i,u,h,f=soe;for(;o--;)u=a[o],h=f.get(u),h===void 0&&f.set(u,h=o?new Map:roe(t)),f=h;return h};A9();const ZE={http:wie,xhr:Yie,fetch:{get:A9}};me.forEach(ZE,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const E4=e=>`- ${e}`,aoe=e=>me.isFunction(e)||e===null||e===!1;function ioe(e,t){e=me.isArray(e)?e:[e];const{length:n}=e;let r,s;const a={};for(let i=0;i<n;i++){r=e[i];let o;if(s=r,!aoe(r)&&(s=ZE[(o=String(r)).toLowerCase()],s===void 0))throw new kt(`Unknown adapter '${o}'`);if(s&&(me.isFunction(s)||(s=s.get(t))))break;a[o||"#"+i]=s}if(!s){const i=Object.entries(a).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map(E4).join(`
`):" "+E4(i[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s}const I9={getAdapter:ioe,adapters:ZE};function gk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ah(null,e)}function j4(e){return gk(e),e.headers=Ts.from(e.headers),e.data=mk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),I9.getAdapter(e.adapter||Tm.adapter,e)(e).then(function(r){return gk(e),r.data=mk.call(e,e.transformResponse,r),r.headers=Ts.from(r.headers),r},function(r){return C9(r)||(gk(e),r&&r.response&&(r.response.data=mk.call(e,e.transformResponse,r.response),r.response.headers=Ts.from(r.response.headers))),Promise.reject(r)})}const O9="1.13.2",Cx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Cx[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const N4={};Cx.transitional=function(t,n,r){function s(a,i){return"[Axios v"+O9+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,o)=>{if(t===!1)throw new kt(s(i," has been removed"+(n?" in "+n:"")),kt.ERR_DEPRECATED);return n&&!N4[i]&&(N4[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,i,o):!0}};Cx.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function ooe(e,t,n){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],i=t[a];if(i){const o=e[a],u=o===void 0||i(o,a,e);if(u!==!0)throw new kt("option "+a+" must be "+u,kt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new kt("Unknown option "+a,kt.ERR_BAD_OPTION)}}const P0={assertOptions:ooe,validators:Cx},wi=P0.validators;let Mc=class{constructor(t){this.defaults=t||{},this.interceptors={request:new y4,response:new y4}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vc(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&P0.assertOptions(r,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),s!=null&&(me.isFunction(s)?n.paramsSerializer={serialize:s}:P0.assertOptions(s,{encode:wi.function,serialize:wi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),P0.assertOptions(n,{baseUrl:wi.spelling("baseURL"),withXsrfToken:wi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&me.merge(a.common,a[n.method]);a&&me.forEach(["delete","get","head","post","put","patch","common"],w=>{delete a[w]}),n.headers=Ts.concat(i,a);const o=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});const h=[];this.interceptors.response.forEach(function(x){h.push(x.fulfilled,x.rejected)});let f,m=0,g;if(!u){const w=[j4.bind(this),void 0];for(w.unshift(...o),w.push(...h),g=w.length,f=Promise.resolve(n);m<g;)f=f.then(w[m++],w[m++]);return f}g=o.length;let b=n;for(;m<g;){const w=o[m++],x=o[m++];try{b=w(b)}catch(S){x.call(this,S);break}}try{f=j4.call(this,b)}catch(w){return Promise.reject(w)}for(m=0,g=h.length;m<g;)f=f.then(h[m++],h[m++]);return f}getUri(t){t=Vc(this.defaults,t);const n=j9(t.baseURL,t.url,t.allowAbsoluteUrls);return k9(n,t.params,t.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(t){Mc.prototype[t]=function(n,r){return this.request(Vc(r||{},{method:t,url:n,data:(r||{}).data}))}});me.forEach(["post","put","patch"],function(t){function n(r){return function(a,i,o){return this.request(Vc(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Mc.prototype[t]=n(),Mc.prototype[t+"Form"]=n(!0)});let loe=class R9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(o=>{r.subscribe(o),a=o}).then(s);return i.cancel=function(){r.unsubscribe(a)},i},t(function(a,i,o){r.reason||(r.reason=new ah(a,i,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new R9(function(s){t=s}),cancel:t}}};function coe(e){return function(n){return e.apply(null,n)}}function uoe(e){return me.isObject(e)&&e.isAxiosError===!0}const fT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fT).forEach(([e,t])=>{fT[t]=e});function P9(e){const t=new Mc(e),n=d9(Mc.prototype.request,t);return me.extend(n,Mc.prototype,t,{allOwnKeys:!0}),me.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return P9(Vc(e,s))},n}const $n=P9(Tm);$n.Axios=Mc;$n.CanceledError=ah;$n.CancelToken=loe;$n.isCancel=C9;$n.VERSION=O9;$n.toFormData=Tx;$n.AxiosError=kt;$n.Cancel=$n.CanceledError;$n.all=function(t){return Promise.all(t)};$n.spread=coe;$n.isAxiosError=uoe;$n.mergeConfig=Vc;$n.AxiosHeaders=Ts;$n.formToJSON=e=>T9(me.isHTMLForm(e)?new FormData(e):e);$n.getAdapter=I9.getAdapter;$n.HttpStatusCode=fT;$n.default=$n;const{Axios:LRe,AxiosError:zRe,CanceledError:URe,isCancel:FRe,CancelToken:BRe,VERSION:HRe,all:qRe,Cancel:VRe,isAxiosError:GRe,spread:KRe,toFormData:ZRe,AxiosHeaders:WRe,HttpStatusCode:JRe,formToJSON:YRe,getAdapter:QRe,mergeConfig:XRe}=$n,doe="https://your-api-gateway-url.execute-api.us-east-1.amazonaws.com/prod";class hoe{client;authToken=null;constructor(t=doe){this.client=$n.create({baseURL:t,headers:{"Content-Type":"application/json"},timeout:3e4}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>(this.authToken&&t.headers&&(t.headers.Authorization=`Bearer ${this.authToken}`),t),t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>Promise.reject(t))}setAuthToken(t){this.authToken=t}handleError(t){if($n.isAxiosError(t)){const n=t;if(n.response)return{message:n.response.data?.message||n.message||"Request failed",code:n.response.data?.code||`HTTP_${n.response.status}`,details:n.response.data?.details};if(n.request)return{message:"No response received from server",code:"NETWORK_ERROR"}}return{message:t instanceof Error?t.message:"An unexpected error occurred",code:"UNKNOWN_ERROR"}}async get(t){try{return{success:!0,data:(await this.client.get(t)).data}}catch(n){return{success:!1,error:this.handleError(n)}}}async post(t,n){try{return{success:!0,data:(await this.client.post(t,n)).data}}catch(r){return{success:!1,error:this.handleError(r)}}}async put(t,n){try{return{success:!0,data:(await this.client.put(t,n)).data}}catch(r){return{success:!1,error:this.handleError(r)}}}async patch(t,n){try{return{success:!0,data:(await this.client.patch(t,n)).data}}catch(r){return{success:!1,error:this.handleError(r)}}}async delete(t){try{return{success:!0,data:(await this.client.delete(t)).data}}catch(n){return{success:!1,error:this.handleError(n)}}}}const lc=new hoe;class foe{async getAll(t){const n=await lc.get(`/${t}`);if(n.success&&n.data)return n.data.items;throw new Error(n.error?.message||"Failed to fetch items")}async getById(t,n){const r=await lc.get(`/${t}/${n}`);if(r.success&&r.data)return r.data;if(r.error?.code==="NOT_FOUND"||r.error?.code==="HTTP_404")return null;throw new Error(r.error?.message||"Failed to fetch item")}async create(t,n,r){const s=await lc.post(`/${t}`,r);if(s.success&&s.data)return s.data;throw new Error(s.error?.message||"Failed to create item")}async update(t,n,r){const s=await lc.patch(`/${t}/${n}`,r);if(s.success&&s.data)return s.data;if(s.error?.code==="NOT_FOUND"||s.error?.code==="HTTP_404")return null;throw new Error(s.error?.message||"Failed to update item")}async delete(t,n){const r=await lc.delete(`/${t}/${n}`);if(r.success)return!0;if(r.error?.code==="NOT_FOUND"||r.error?.code==="HTTP_404")return!1;throw new Error(r.error?.message||"Failed to delete item")}clear(t){console.warn("Clear operation is not supported on API storage adapter")}seed(t,n){console.warn("Seed operation is not supported on API storage adapter")}async createRelation(t,n,r){const s=await lc.post(`/${t}`,r);if(!s.success)throw new Error(s.error?.message||"Failed to create relation")}async deleteRelation(t,n){return this.delete(t,n)}async getRelations(t,n){const r=new URLSearchParams;Object.entries(n).forEach(([a,i])=>{r.append(a,String(i))});const s=await lc.get(`/${t}?${r.toString()}`);if(s.success&&s.data)return s.data.items;throw new Error(s.error?.message||"Failed to fetch relations")}}const A4="gs_storage_type";class pd{static instance;currentAdapter;currentType;constructor(){const t=localStorage.getItem(A4)||"local";this.currentType=t,this.currentAdapter=this.createAdapter(t)}static getInstance(){return pd.instance||(pd.instance=new pd),pd.instance}createAdapter(t){switch(t){case"local":return new f4;case"api":return new foe;default:return new f4}}getAdapter(){return this.currentAdapter}getCurrentType(){return this.currentType}setStorageType(t){t!==this.currentType&&(this.currentType=t,this.currentAdapter=this.createAdapter(t),localStorage.setItem(A4,t),console.log(`Storage type changed to: ${t}`))}}const pT=pd.getInstance(),ct=()=>pT.getAdapter(),poe="user-1";function I4(e,t){let n=[...e];if(t?.search){const r=t.search.toLowerCase();n=n.filter(s=>s.title.toLowerCase().includes(r)||s.description?.toLowerCase().includes(r))}if(t?.area&&(n=n.filter(r=>r.area===t.area)),t?.subCategory&&(n=n.filter(r=>r.subCategory===t.subCategory)),t?.priority&&(n=n.filter(r=>r.priority===t.priority)),t?.status&&(n=n.filter(r=>r.status===t.status)),t?.sortBy){const r=t.sortBy,s=t.sortOrder==="desc"?-1:1;n.sort((a,i)=>{const o=a[r],u=i[r];return o===null?1:u===null?-1:o<u?-s:o>u?s:0})}return n}const Pr={async getAll(e){await lt();const n=await ct().getAll("tasks"),r=I4(n,e),s=e?.page||1,a=e?.pageSize||50,i=(s-1)*a,o=i+a;return{data:r.slice(i,o),total:r.length,page:s,pageSize:a,totalPages:Math.ceil(r.length/a)}},async getById(e){await lt();const n=await ct().getById("tasks",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Task not found",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),title:e.title,description:e.description||null,extendedDescription:e.extendedDescription||null,area:e.area,subCategory:e.subCategory||null,priority:e.priority||"P3",status:e.status||"NotStarted",size:e.size||null,dueDate:e.dueDate||null,scheduledDate:e.scheduledDate||null,completedDate:null,notes:e.notes||null,isRecurring:e.isRecurring||!1,recurrenceRule:e.recurrenceRule||null,userId:poe,createdAt:n,updatedAt:n};return await t.create("tasks",r.id,r),{data:r,success:!0}},async update(e,t){await lt();const r=await ct().update("tasks",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Task not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("tasks",e))return{data:void 0,error:{message:"Task not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("taskDependencies");for(const i of r.filter(o=>o.taskId===e||o.dependsOnTaskId===e))await t.delete("taskDependencies",i.id);const s=await t.getAll("taskProjects");for(const i of s.filter(o=>o.taskId===e))await t.deleteRelation("taskProjects",`${i.taskId}-${i.projectId}`);const a=await t.getAll("taskGoals");for(const i of a.filter(o=>o.taskId===e))await t.deleteRelation("taskGoals",`${i.taskId}-${i.goalId}`);return{data:void 0,success:!0}},async addDependency(e,t){await lt();const n=ct(),r={id:rt(),taskId:e,dependsOnTaskId:t,createdAt:new Date().toISOString()};return await n.createRelation("taskDependencies",r.id,r),{data:r,success:!0}},async removeDependency(e,t){await lt();const n=ct(),s=(await n.getAll("taskDependencies")).find(a=>a.taskId===e&&a.dependsOnTaskId===t);return s&&await n.delete("taskDependencies",s.id),{data:void 0,success:!0}},async getDependencies(e){return await lt(),{data:await ct().getRelations("taskDependencies",{taskId:e}),success:!0}},async linkToProject(e,t){await lt();const n=ct(),r={taskId:e,projectId:t,createdAt:new Date().toISOString()};return await n.createRelation("taskProjects",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkFromProject(e,t){return await lt(),await ct().deleteRelation("taskProjects",`${e}-${t}`),{data:void 0,success:!0}},async getByProject(e){await lt();const t=ct(),r=(await t.getRelations("taskProjects",{projectId:e})).map(i=>i.taskId),a=(await t.getAll("tasks")).filter(i=>r.includes(i.id));return{data:a,total:a.length,success:!0}},async linkToGoal(e,t){await lt();const n=ct(),r={taskId:e,goalId:t,createdAt:new Date().toISOString()};return await n.createRelation("taskGoals",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkFromGoal(e,t){return await lt(),await ct().deleteRelation("taskGoals",`${e}-${t}`),{data:void 0,success:!0}},async getByGoal(e){await lt();const t=ct(),r=(await t.getRelations("taskGoals",{goalId:e})).map(i=>i.taskId),a=(await t.getAll("tasks")).filter(i=>r.includes(i.id));return{data:a,total:a.length,success:!0}},async getDependencyGraph(e){await lt();const t=ct(),n=await t.getAll("tasks"),r=I4(n,e),s=await t.getAll("taskDependencies"),a=new Set(r.map(u=>u.id)),i=s.filter(u=>a.has(u.taskId)&&a.has(u.dependsOnTaskId));return{data:{nodes:r.map(u=>({id:u.id,title:u.title,status:u.status,priority:u.priority,area:u.area,size:u.size})),edges:i.map(u=>({source:u.dependsOnTaskId,target:u.taskId}))},success:!0}}},O4="user-1",Ya={async getAll(){await lt();const t=await ct().getAll("habits");return{data:t,total:t.length,success:!0}},async getById(e){await lt();const n=await ct().getById("habits",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Habit not found",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),name:e.name,description:e.description||null,area:e.area,subCategory:e.subCategory||null,habitType:e.habitType,frequency:e.frequency,dailyTarget:e.dailyTarget||null,weeklyTarget:e.weeklyTarget||null,intent:e.intent||null,trigger:e.trigger||null,action:e.action||null,reward:e.reward||null,frictionUp:e.frictionUp||null,frictionDown:e.frictionDown||null,notes:e.notes||null,userId:O4,createdAt:n,updatedAt:n};return await t.create("habits",r.id,r),{data:r,success:!0}},async update(e,t){await lt();const r=await ct().update("habits",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Habit not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("habits",e))return{data:void 0,error:{message:"Habit not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("habitLogs");for(const s of r.filter(a=>a.habitId===e))await t.delete("habitLogs",s.id);return{data:void 0,success:!0}},async logCompletion(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),habitId:e.habitId,completedAt:e.completedAt||n,amount:e.amount||null,notes:e.notes||null,userId:O4,createdAt:n};return await t.create("habitLogs",r.id,r),{data:r,success:!0}},async getLogsByHabit(e){await lt();const r=(await ct().getAll("habitLogs")).filter(s=>s.habitId===e).sort((s,a)=>new Date(a.completedAt).getTime()-new Date(s.completedAt).getTime());return{data:r,total:r.length,success:!0}}},R4="user-1",Ei={async getAll(){await lt();const t=await ct().getAll("metrics");return{data:t,total:t.length,success:!0}},async getById(e){await lt();const n=await ct().getById("metrics",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Metric not found",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),name:e.name,description:e.description||null,area:e.area,subCategory:e.subCategory||null,unit:e.unit,customUnit:e.customUnit||null,direction:e.direction,targetValue:e.targetValue||null,thresholdLow:e.thresholdLow||null,thresholdHigh:e.thresholdHigh||null,source:e.source||"Manual",status:"Active",userId:R4,createdAt:n,updatedAt:n};return await t.create("metrics",r.id,r),{data:r,success:!0}},async update(e,t){await lt();const r=await ct().update("metrics",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Metric not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("metrics",e))return{data:void 0,error:{message:"Metric not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("metricLogs");for(const s of r.filter(a=>a.metricId===e))await t.delete("metricLogs",s.id);return{data:void 0,success:!0}},async getHistory(e){await lt();const r=(await ct().getAll("metricLogs")).filter(s=>s.metricId===e).sort((s,a)=>new Date(a.loggedAt).getTime()-new Date(s.loggedAt).getTime());return{data:r,total:r.length,success:!0}},async logValue(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),metricId:e.metricId,value:e.value,notes:e.notes||null,loggedAt:e.loggedAt||n,userId:R4,createdAt:n};return await t.create("metricLogs",r.id,r),{data:r,success:!0}}},moe="user-1",ji={async getAll(){await lt();const t=await ct().getAll("goals");return{data:t,total:t.length,success:!0}},async getById(e){await lt();const n=await ct().getById("goals",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Goal not found",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),title:e.title,description:e.description||null,area:e.area,subCategory:e.subCategory||null,timeHorizon:e.timeHorizon||"ShortTerm",priority:e.priority||"P3",status:e.status||"Planning",targetDate:e.targetDate||null,completedDate:null,successCriteria:e.successCriteria||[],notes:e.notes||null,userId:moe,createdAt:n,updatedAt:n};return await t.create("goals",r.id,r),{data:r,success:!0}},async update(e,t){await lt();const r=await ct().update("goals",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Goal not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("goals",e))return{data:void 0,error:{message:"Goal not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("goalMetrics");for(const a of r.filter(i=>i.goalId===e))await t.deleteRelation("goalMetrics",`${a.goalId}-${a.metricId}`);const s=await t.getAll("goalProjects");for(const a of s.filter(i=>i.goalId===e))await t.deleteRelation("goalProjects",`${a.goalId}-${a.projectId}`);return{data:void 0,success:!0}},async linkMetric(e,t){await lt();const n=ct(),r={goalId:e,metricId:t,createdAt:new Date().toISOString()};return await n.createRelation("goalMetrics",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkMetric(e,t){return await lt(),await ct().deleteRelation("goalMetrics",`${e}-${t}`),{data:void 0,success:!0}},async linkProject(e,t){await lt();const n=ct(),r={goalId:e,projectId:t,createdAt:new Date().toISOString()};return await n.createRelation("goalProjects",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkProject(e,t){return await lt(),await ct().deleteRelation("goalProjects",`${e}-${t}`),{data:void 0,success:!0}}},goe="user-1",Ni={async getAll(){await lt();const t=await ct().getAll("projects");return{data:t,total:t.length,success:!0}},async getById(e){await lt();const n=await ct().getById("projects",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Project not found",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString(),r={id:rt(),name:e.name,description:e.description||null,area:e.area,subCategory:e.subCategory||null,status:e.status||"Planning",priority:e.priority||"P3",impact:e.impact||0,startDate:e.startDate||null,endDate:e.endDate||null,completedDate:null,notes:e.notes||null,userId:goe,createdAt:n,updatedAt:n};return await t.create("projects",r.id,r),{data:r,success:!0}},async update(e,t){await lt();const r=await ct().update("projects",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Project not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("projects",e))return{data:void 0,error:{message:"Project not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("taskProjects");for(const s of r.filter(a=>a.projectId===e))await t.deleteRelation("taskProjects",`${s.taskId}-${s.projectId}`);return{data:void 0,success:!0}},async calculateProgress(e){await lt();const t=ct(),r=(await t.getRelations("taskProjects",{projectId:e})).map(u=>u.taskId);if(r.length===0)return{data:0,success:!0};const a=(await t.getAll("tasks")).filter(u=>r.includes(u.id));if(a.length===0)return{data:0,success:!0};const i=a.filter(u=>u.status==="Done");return{data:Math.round(i.length/a.length*100),success:!0}}},yoe="user-1",xl={async getAll(){await lt();const n=(await ct().getAll("logbookEntries")).sort((r,s)=>new Date(s.date).getTime()-new Date(r.date).getTime());return{data:n,total:n.length,success:!0}},async getById(e){await lt();const n=await ct().getById("logbookEntries",e);return n?{data:n,success:!0}:{data:void 0,error:{message:"Logbook entry not found",code:"NOT_FOUND"},success:!1}},async getByDate(e){await lt();const r=(await ct().getAll("logbookEntries")).find(s=>s.date===e);return r?{data:r,success:!0}:{data:void 0,error:{message:"No logbook entry found for this date",code:"NOT_FOUND"},success:!1}},async create(e){await lt();const t=ct(),n=new Date().toISOString();if((await t.getAll("logbookEntries")).find(i=>i.date===e.date))return{data:void 0,error:{message:"Logbook entry already exists for this date",code:"CONFLICT"},success:!1};const a={id:rt(),date:e.date,title:e.title||null,notes:e.notes||null,mood:e.mood||null,energy:e.energy||null,userId:yoe,createdAt:n,updatedAt:n};return await t.create("logbookEntries",a.id,a),{data:a,success:!0}},async update(e,t){await lt();const r=await ct().update("logbookEntries",e,{...t,updatedAt:new Date().toISOString()});return r?{data:r,success:!0}:{data:void 0,error:{message:"Logbook entry not found",code:"NOT_FOUND"},success:!1}},async delete(e){await lt();const t=ct();if(!await t.delete("logbookEntries",e))return{data:void 0,error:{message:"Logbook entry not found",code:"NOT_FOUND"},success:!1};const r=await t.getAll("logbookTasks");for(const a of r.filter(i=>i.logbookEntryId===e))await t.deleteRelation("logbookTasks",`${a.logbookEntryId}-${a.taskId}`);const s=await t.getAll("logbookHabits");for(const a of s.filter(i=>i.logbookEntryId===e))await t.deleteRelation("logbookHabits",`${a.logbookEntryId}-${a.habitId}`);return{data:void 0,success:!0}},async linkTask(e,t){await lt();const n=ct(),r={logbookEntryId:e,taskId:t,createdAt:new Date().toISOString()};return await n.createRelation("logbookTasks",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkTask(e,t){return await lt(),await ct().deleteRelation("logbookTasks",`${e}-${t}`),{data:void 0,success:!0}},async linkHabit(e,t){await lt();const n=ct(),r={logbookEntryId:e,habitId:t,createdAt:new Date().toISOString()};return await n.createRelation("logbookHabits",`${e}-${t}`,r),{data:void 0,success:!0}},async unlinkHabit(e,t){return await lt(),await ct().deleteRelation("logbookHabits",`${e}-${t}`),{data:void 0,success:!0}}},Cm=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["tasks"],queryFn:()=>Pr.getAll(),enabled:!0}),s=hr({mutationFn:o=>Pr.create(o),onSuccess:()=>{e.invalidateQueries({queryKey:["tasks"]})}}),a=hr({mutationFn:({id:o,input:u})=>Pr.update(o,u),onSuccess:()=>{e.invalidateQueries({queryKey:["tasks"]})}}),i=hr({mutationFn:o=>Pr.delete(o),onSuccess:()=>{e.invalidateQueries({queryKey:["tasks"]})}});return{tasks:t?.data||[],isLoading:n,error:r,createTask:s.mutateAsync,updateTask:a.mutateAsync,deleteTask:i.mutateAsync}},Em=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["habits"],queryFn:()=>Ya.getAll(),enabled:!0}),s=hr({mutationFn:u=>Ya.create(u),onSuccess:()=>{e.invalidateQueries({queryKey:["habits"]})}}),a=hr({mutationFn:({id:u,input:h})=>Ya.update(u,h),onSuccess:()=>{e.invalidateQueries({queryKey:["habits"]})}}),i=hr({mutationFn:u=>Ya.delete(u),onSuccess:()=>{e.invalidateQueries({queryKey:["habits"]})}}),o=hr({mutationFn:Ya.logCompletion,onSuccess:()=>{e.invalidateQueries({queryKey:["habits"]})}});return{habits:t?.data||[],isLoading:n,error:r||t?.error,createHabit:s.mutateAsync,updateHabit:a.mutateAsync,deleteHabit:i.mutateAsync,logCompletion:o.mutateAsync}},jm=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["metrics"],queryFn:()=>Ei.getAll(),enabled:!0}),s=hr({mutationFn:o=>Ei.create(o),onSuccess:()=>{e.invalidateQueries({queryKey:["metrics"]})}}),a=hr({mutationFn:({id:o,input:u})=>Ei.update(o,u),onSuccess:()=>{e.invalidateQueries({queryKey:["metrics"]})}}),i=hr({mutationFn:o=>Ei.delete(o),onSuccess:()=>{e.invalidateQueries({queryKey:["metrics"]})}});return{metrics:t?.data||[],isLoading:n,error:r||t?.error,createMetric:s.mutateAsync,updateMetric:a.mutateAsync,deleteMetric:i.mutateAsync}},Ex=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["goals"],queryFn:()=>ji.getAll(),enabled:!0}),s=hr({mutationFn:o=>ji.create(o),onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]})}}),a=hr({mutationFn:({id:o,input:u})=>ji.update(o,u),onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]})}}),i=hr({mutationFn:o=>ji.delete(o),onSuccess:()=>{e.invalidateQueries({queryKey:["goals"]})}});return{goals:t?.data||[],isLoading:n,error:r||t?.error,createGoal:s.mutateAsync,updateGoal:a.mutateAsync,deleteGoal:i.mutateAsync}},WE=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["projects"],queryFn:()=>Ni.getAll(),enabled:!0}),s=hr({mutationFn:o=>Ni.create(o),onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]})}}),a=hr({mutationFn:({id:o,input:u})=>Ni.update(o,u),onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]})}}),i=hr({mutationFn:o=>Ni.delete(o),onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]})}});return{projects:t?.data||[],isLoading:n,error:r||t?.error,createProject:s.mutateAsync,updateProject:a.mutateAsync,deleteProject:i.mutateAsync}},JE=()=>{const e=Ml(),{data:t,isLoading:n,error:r}=Wd({queryKey:["logbook"],queryFn:()=>xl.getAll(),enabled:!0}),s=hr({mutationFn:o=>xl.create(o),onSuccess:()=>{e.invalidateQueries({queryKey:["logbook"]})}}),a=hr({mutationFn:({id:o,input:u})=>xl.update(o,u),onSuccess:()=>{e.invalidateQueries({queryKey:["logbook"]})}}),i=hr({mutationFn:o=>xl.delete(o),onSuccess:()=>{e.invalidateQueries({queryKey:["logbook"]})}});return{entries:t?.data||[],isLoading:n,error:r||t?.error,createEntry:s.mutateAsync,updateEntry:a.mutateAsync,deleteEntry:i.mutateAsync}};function boe({isOpen:e,onClose:t}){const[n,r]=A.useState(""),[s,a]=A.useState(0),i=A.useRef(null),o=mm(),{tasks:u}=Cm(),{goals:h}=Ex(),{projects:f}=WE(),{metrics:m}=jm(),{habits:g}=Em(),{entries:b}=JE(),w=A.useMemo(()=>{const C=[{id:"nav-dashboard",title:"Dashboard",subtitle:"View overview and insights",icon:c.jsx(zS,{size:18}),type:"navigation",action:()=>o("/admin/dashboard"),keywords:["dashboard","home","overview"]},{id:"nav-tasks",title:"Tasks",subtitle:"Manage your tasks",icon:c.jsx(Di,{size:18}),type:"navigation",action:()=>o("/admin/tasks"),keywords:["tasks","todos","work"]},{id:"nav-goals",title:"Goals",subtitle:"Track your goals",icon:c.jsx(_r,{size:18}),type:"navigation",action:()=>o("/admin/goals"),keywords:["goals","objectives","targets"]},{id:"nav-projects",title:"Projects",subtitle:"Manage projects",icon:c.jsx(Nd,{size:18}),type:"navigation",action:()=>o("/admin/projects"),keywords:["projects","work"]},{id:"nav-metrics",title:"Metrics",subtitle:"Track metrics",icon:c.jsx(kr,{size:18}),type:"navigation",action:()=>o("/admin/metrics"),keywords:["metrics","tracking","kpi","data"]},{id:"nav-habits",title:"Habits",subtitle:"Build habits",icon:c.jsx(Ad,{size:18}),type:"navigation",action:()=>o("/admin/habits"),keywords:["habits","routine","streak"]},{id:"nav-logbook",title:"Logbook",subtitle:"Daily journal",icon:c.jsx(Bc,{size:18}),type:"navigation",action:()=>o("/admin/logbook"),keywords:["logbook","journal","diary","reflect"]},{id:"nav-weekly-review",title:"Weekly Review",subtitle:"Review and plan",icon:c.jsx(Dn,{size:18}),type:"navigation",action:()=>o("/admin/weekly-review"),keywords:["weekly","review","planning","reflection"]},{id:"nav-settings",title:"Settings",subtitle:"Configure AI and preferences",icon:c.jsx(I6,{size:18}),type:"navigation",action:()=>o("/admin/settings"),keywords:["settings","config","ai","preferences"]},{id:"nav-assistant",title:"AI Assistant",subtitle:"Chat with AI",icon:c.jsx(Jt,{size:18}),type:"navigation",action:()=>o("/admin/assistant"),keywords:["ai","assistant","chat","help"]}];return u.forEach(T=>{C.push({id:`task-${T.id}`,title:T.title,subtitle:`Task  ${T.status}  ${T.priority}`,icon:c.jsx(Di,{size:18}),type:"entity",action:()=>{o("/admin/tasks"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectTask",{detail:T.id}))},100)},keywords:[T.title.toLowerCase(),T.area.toLowerCase(),T.status.toLowerCase()]})}),h.forEach(T=>{C.push({id:`goal-${T.id}`,title:T.title,subtitle:`Goal  ${T.timeHorizon}  ${T.status}`,icon:c.jsx(_r,{size:18}),type:"entity",action:()=>{o("/admin/goals"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectGoal",{detail:T.id}))},100)},keywords:[T.title.toLowerCase(),T.area.toLowerCase(),T.timeHorizon.toLowerCase()]})}),f.forEach(T=>{C.push({id:`project-${T.id}`,title:T.name,subtitle:`Project  ${T.status}`,icon:c.jsx(Nd,{size:18}),type:"entity",action:()=>{o("/admin/projects"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectProject",{detail:T.id}))},100)},keywords:[T.name.toLowerCase(),T.area.toLowerCase(),T.status.toLowerCase()]})}),m.forEach(T=>{C.push({id:`metric-${T.id}`,title:T.name,subtitle:`Metric  ${T.unit}`,icon:c.jsx(kr,{size:18}),type:"entity",action:()=>{o("/admin/metrics"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectMetric",{detail:T.id}))},100)},keywords:[T.name.toLowerCase(),T.area.toLowerCase()]})}),g.forEach(T=>{C.push({id:`habit-${T.id}`,title:T.name,subtitle:`Habit  ${T.habitType}  ${T.frequency}`,icon:c.jsx(Ad,{size:18}),type:"entity",action:()=>{o("/admin/habits"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectHabit",{detail:T.id}))},100)},keywords:[T.name.toLowerCase(),T.habitType.toLowerCase()]})}),b.forEach(T=>{C.push({id:`entry-${T.id}`,title:T.title||"Untitled Entry",subtitle:`Logbook  ${new Date(T.date).toLocaleDateString()}`,icon:c.jsx(Bc,{size:18}),type:"entity",action:()=>{o("/admin/logbook"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectEntry",{detail:T.id}))},100)},keywords:[(T.title||"").toLowerCase(),T.date]})}),C},[u,h,f,m,g,b,o]),x=A.useMemo(()=>{if(!n.trim())return w.filter(T=>T.type==="navigation");const C=n.toLowerCase().split(" ").filter(T=>T.length>0);return w.filter(T=>{const P=`${T.title} ${T.subtitle} ${T.keywords.join(" ")}`.toLowerCase();return C.every(D=>P.includes(D))})},[n,w]);A.useEffect(()=>{a(0)},[n]),A.useEffect(()=>{e&&i.current&&i.current.focus()},[e]);const S=C=>{C.key==="ArrowDown"?(C.preventDefault(),a(T=>Math.min(T+1,x.length-1))):C.key==="ArrowUp"?(C.preventDefault(),a(T=>Math.max(T-1,0))):C.key==="Enter"?(C.preventDefault(),x[s]&&(x[s].action(),k())):C.key==="Escape"&&k()},k=()=>{r(""),a(0),t()};return e?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[20vh] px-4",children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:k}),c.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[c.jsx(ri,{className:"w-5 h-5 text-gray-400"}),c.jsx("input",{ref:i,type:"text",value:n,onChange:C=>r(C.target.value),onKeyDown:S,placeholder:"Search for tasks, goals, projects, or navigate...",className:"flex-1 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 outline-none"}),c.jsx("button",{onClick:k,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:c.jsx(cn,{className:"w-4 h-4 text-gray-400"})})]}),c.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:x.length>0?c.jsx("div",{className:"py-2",children:x.map((C,T)=>c.jsxs("button",{onClick:()=>{C.action(),k()},className:`w-full flex items-center gap-3 px-4 py-3 text-left transition ${T===s?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[c.jsx("div",{className:`flex-shrink-0 ${T===s?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`,children:C.icon}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:C.title}),C.subtitle&&c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:C.subtitle})]}),T===s&&c.jsx("div",{className:"flex-shrink-0 text-xs text-gray-400",children:""})]},C.id))}):c.jsxs("div",{className:"py-12 text-center text-gray-500 dark:text-gray-400",children:[c.jsx(ri,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No results found"})]})}),c.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:c.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded",children:""}),"Navigate"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded",children:""}),"Select"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded",children:"Esc"}),"Close"]})]})})]})]}):null}const xoe=[{name:"Dashboard",href:"/admin/dashboard",icon:see},{name:"Growth System",href:"/admin/growth-system",icon:yX,children:[{name:"Tasks",href:"/admin/tasks",icon:Di},{name:"Habits",href:"/admin/habits",icon:Dn},{name:"Metrics",href:"/admin/metrics",icon:kr},{name:"Goals",href:"/admin/goals",icon:_r},{name:"Projects",href:"/admin/projects",icon:Nd},{name:"Logbook",href:"/admin/logbook",icon:Bc}]},{name:"Weekly Review",href:"/admin/weekly-review",icon:Dn},{name:"Assistant",href:"/admin/assistant",icon:N6},{name:"Settings",href:"/admin/settings",icon:I6}];function voe(){const e=Na(),{user:t,signOut:n}=tE(),[r,s]=A.useState(!1),[a,i]=A.useState(["Growth System"]),[o,u]=A.useState(!1),h=async()=>{await n()},f=g=>{i(b=>b.includes(g)?b.filter(w=>w!==g):[...b,g])},m=g=>e.pathname===g.href?!0:g.children?g.children.some(b=>e.pathname===b.href):!1;return A.useEffect(()=>{const g=b=>{(b.metaKey||b.ctrlKey)&&b.key==="k"&&(b.preventDefault(),u(!0))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsx(boe,{isOpen:o,onClose:()=>u(!1)}),c.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between",children:[c.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal OS"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",title:"Search (Cmd+K)",children:c.jsx(zS,{size:20})}),c.jsx("button",{onClick:()=>s(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:r?c.jsx(cn,{size:24}):c.jsx(j6,{size:24})})]})]}),c.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-200 ease-in-out lg:translate-x-0 ${r?"translate-x-0":"-translate-x-full"}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Personal OS"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t?.email}),c.jsxs("button",{onClick:()=>u(!0),className:"w-full mt-3 flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition",children:[c.jsx(zS,{size:16}),c.jsx("span",{className:"flex-1 text-left",children:"Quick Search"}),c.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded",children:"K"})]})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:xoe.map(g=>{const b=g.icon,w=m(g),x=a.includes(g.name),S=g.children&&g.children.length>0;return c.jsx("div",{children:S?c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>f(g.name),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition ${w?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[c.jsx(b,{size:20}),c.jsx("span",{className:"flex-1 text-left",children:g.name}),x?c.jsx(Fi,{size:16}):c.jsx(ym,{size:16})]}),x&&g.children&&c.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[c.jsxs(Ur,{to:g.href,onClick:()=>s(!1),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition text-sm ${e.pathname===g.href?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[c.jsx(T6,{size:18}),c.jsx("span",{children:"Overview"})]}),g.children.map(k=>{const C=k.icon;return c.jsxs(Ur,{to:k.href,onClick:()=>s(!1),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition text-sm ${e.pathname===k.href?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[c.jsx(C,{size:18}),c.jsx("span",{children:k.name})]},k.name)})]})]}):c.jsxs(Ur,{to:g.href,onClick:()=>s(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${w?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[c.jsx(b,{size:20}),c.jsx("span",{children:g.name})]})},g.name)})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("button",{onClick:h,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition w-full",children:[c.jsx(gee,{size:20}),c.jsx("span",{children:"Sign Out"})]})})]})}),r&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>s(!1)}),c.jsx("div",{className:"lg:ml-64 min-h-screen",children:c.jsx("div",{className:"pt-20 lg:pt-8 px-6 lg:px-12 pb-12",children:c.jsx(m6,{})})})]})}function M9(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=M9(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function D9(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=M9(e))&&(r&&(r+=" "),r+=t);return r}const P4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,M4=D9,woe=(e,t)=>n=>{var r;if(t?.variants==null)return M4(e,n?.class,n?.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(h=>{const f=n?.[h],m=a?.[h];if(f===null)return null;const g=P4(f)||P4(m);return s[h][g]}),o=n&&Object.entries(n).reduce((h,f)=>{let[m,g]=f;return g===void 0||(h[m]=g),h},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:g,...b}=f;return Object.entries(b).every(w=>{let[x,S]=w;return Array.isArray(S)?S.includes({...a,...o}[x]):{...a,...o}[x]===S})?[...h,m,g]:h},[]);return M4(e,i,u,n?.class,n?.className)},_oe=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},koe=(e,t)=>({classGroupId:e,validator:t}),$9=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),mb="-",D4=[],Soe="arbitrary..",Toe=e=>{const t=Eoe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return Coe(i);const o=i.split(mb),u=o[0]===""&&o.length>1?1:0;return L9(o,u,t)},getConflictingClassGroupIds:(i,o)=>{if(o){const u=r[i],h=n[i];return u?h?_oe(h,u):u:h||D4}return n[i]||D4}}},L9=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],a=n.nextPart.get(s);if(a){const h=L9(e,t+1,a);if(h)return h}const i=n.validators;if(i===null)return;const o=t===0?e.join(mb):e.slice(t).join(mb),u=i.length;for(let h=0;h<u;h++){const f=i[h];if(f.validator(o))return f.classGroupId}},Coe=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Soe+r:void 0})(),Eoe=e=>{const{theme:t,classGroups:n}=e;return joe(n,t)},joe=(e,t)=>{const n=$9();for(const r in e){const s=e[r];YE(s,n,r,t)}return n},YE=(e,t,n,r)=>{const s=e.length;for(let a=0;a<s;a++){const i=e[a];Noe(i,t,n,r)}},Noe=(e,t,n,r)=>{if(typeof e=="string"){Aoe(e,t,n);return}if(typeof e=="function"){Ioe(e,t,n,r);return}Ooe(e,t,n,r)},Aoe=(e,t,n)=>{const r=e===""?t:z9(t,e);r.classGroupId=n},Ioe=(e,t,n,r)=>{if(Roe(e)){YE(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(koe(n,e))},Ooe=(e,t,n,r)=>{const s=Object.entries(e),a=s.length;for(let i=0;i<a;i++){const[o,u]=s[i];YE(u,z9(t,o),n,r)}},z9=(e,t)=>{let n=e;const r=t.split(mb),s=r.length;for(let a=0;a<s;a++){const i=r[a];let o=n.nextPart.get(i);o||(o=$9(),n.nextPart.set(i,o)),n=o}return n},Roe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Poe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(a,i)=>{n[a]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(a){let i=n[a];if(i!==void 0)return i;if((i=r[a])!==void 0)return s(a,i),i},set(a,i){a in n?n[a]=i:s(a,i)}}},mT="!",$4=":",Moe=[],L4=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),Doe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const a=[];let i=0,o=0,u=0,h;const f=s.length;for(let x=0;x<f;x++){const S=s[x];if(i===0&&o===0){if(S===$4){a.push(s.slice(u,x)),u=x+1;continue}if(S==="/"){h=x;continue}}S==="["?i++:S==="]"?i--:S==="("?o++:S===")"&&o--}const m=a.length===0?s:s.slice(u);let g=m,b=!1;m.endsWith(mT)?(g=m.slice(0,-1),b=!0):m.startsWith(mT)&&(g=m.slice(1),b=!0);const w=h&&h>u?h-u:void 0;return L4(a,b,g,w)};if(t){const s=t+$4,a=r;r=i=>i.startsWith(s)?a(i.slice(s.length)):L4(Moe,!1,i,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},$oe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const i=n[a],o=i[0]==="[",u=t.has(i);o||u?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(i)):s.push(i)}return s.length>0&&(s.sort(),r.push(...s)),r}},Loe=e=>({cache:Poe(e.cacheSize),parseClassName:Doe(e),sortModifiers:$oe(e),...Toe(e)}),zoe=/\s+/,Uoe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,i=[],o=e.trim().split(zoe);let u="";for(let h=o.length-1;h>=0;h-=1){const f=o[h],{isExternal:m,modifiers:g,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:x}=n(f);if(m){u=f+(u.length>0?" "+u:u);continue}let S=!!x,k=r(S?w.substring(0,x):w);if(!k){if(!S){u=f+(u.length>0?" "+u:u);continue}if(k=r(w),!k){u=f+(u.length>0?" "+u:u);continue}S=!1}const C=g.length===0?"":g.length===1?g[0]:a(g).join(":"),T=b?C+mT:C,P=T+k;if(i.indexOf(P)>-1)continue;i.push(P);const D=s(k,S);for(let R=0;R<D.length;++R){const U=D[R];i.push(T+U)}u=f+(u.length>0?" "+u:u)}return u},Foe=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=U9(n))&&(s&&(s+=" "),s+=r);return s},U9=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=U9(e[r]))&&(n&&(n+=" "),n+=t);return n},Boe=(e,...t)=>{let n,r,s,a;const i=u=>{const h=t.reduce((f,m)=>m(f),e());return n=Loe(h),r=n.cache.get,s=n.cache.set,a=o,o(u)},o=u=>{const h=r(u);if(h)return h;const f=Uoe(u,n);return s(u,f),f};return a=i,(...u)=>a(Foe(...u))},Hoe=[],rr=e=>{const t=n=>n[e]||Hoe;return t.isThemeGetter=!0,t},F9=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,B9=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qoe=/^\d+\/\d+$/,Voe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Goe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Koe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Zoe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Woe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fu=e=>qoe.test(e),jt=e=>!!e&&!Number.isNaN(Number(e)),il=e=>!!e&&Number.isInteger(Number(e)),yk=e=>e.endsWith("%")&&jt(e.slice(0,-1)),lo=e=>Voe.test(e),Joe=()=>!0,Yoe=e=>Goe.test(e)&&!Koe.test(e),H9=()=>!1,Qoe=e=>Zoe.test(e),Xoe=e=>Woe.test(e),ele=e=>!Ze(e)&&!We(e),tle=e=>ih(e,G9,H9),Ze=e=>F9.test(e),cc=e=>ih(e,K9,Yoe),bk=e=>ih(e,ile,jt),z4=e=>ih(e,q9,H9),nle=e=>ih(e,V9,Xoe),Sy=e=>ih(e,Z9,Qoe),We=e=>B9.test(e),wf=e=>oh(e,K9),rle=e=>oh(e,ole),U4=e=>oh(e,q9),sle=e=>oh(e,G9),ale=e=>oh(e,V9),Ty=e=>oh(e,Z9,!0),ih=(e,t,n)=>{const r=F9.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},oh=(e,t,n=!1)=>{const r=B9.exec(e);return r?r[1]?t(r[1]):n:!1},q9=e=>e==="position"||e==="percentage",V9=e=>e==="image"||e==="url",G9=e=>e==="length"||e==="size"||e==="bg-size",K9=e=>e==="length",ile=e=>e==="number",ole=e=>e==="family-name",Z9=e=>e==="shadow",lle=()=>{const e=rr("color"),t=rr("font"),n=rr("text"),r=rr("font-weight"),s=rr("tracking"),a=rr("leading"),i=rr("breakpoint"),o=rr("container"),u=rr("spacing"),h=rr("radius"),f=rr("shadow"),m=rr("inset-shadow"),g=rr("text-shadow"),b=rr("drop-shadow"),w=rr("blur"),x=rr("perspective"),S=rr("aspect"),k=rr("ease"),C=rr("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...P(),We,Ze],R=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],j=()=>[We,Ze,u],se=()=>[Fu,"full","auto",...j()],B=()=>[il,"none","subgrid",We,Ze],ee=()=>["auto",{span:["full",il,We,Ze]},il,We,Ze],ie=()=>[il,"auto",We,Ze],_e=()=>["auto","min","max","fr",We,Ze],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...j()],Z=()=>[Fu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],W=()=>[e,We,Ze],de=()=>[...P(),U4,z4,{position:[We,Ze]}],$=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",sle,tle,{size:[We,Ze]}],Q=()=>[yk,wf,cc],O=()=>["","none","full",h,We,Ze],V=()=>["",jt,wf,cc],he=()=>["solid","dashed","dotted","double"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>[jt,yk,U4,z4],ne=()=>["","none",w,We,Ze],K=()=>["none",jt,We,Ze],re=()=>["none",jt,We,Ze],be=()=>[jt,We,Ze],z=()=>[Fu,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[lo],breakpoint:[lo],color:[Joe],container:[lo],"drop-shadow":[lo],ease:["in","out","in-out"],font:[ele],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[lo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[lo],shadow:[lo],spacing:["px",jt],text:[lo],"text-shadow":[lo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fu,Ze,We,S]}],container:["container"],columns:[{columns:[jt,Ze,We,o]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:se()}],"inset-x":[{"inset-x":se()}],"inset-y":[{"inset-y":se()}],start:[{start:se()}],end:[{end:se()}],top:[{top:se()}],right:[{right:se()}],bottom:[{bottom:se()}],left:[{left:se()}],visibility:["visible","invisible","collapse"],z:[{z:[il,"auto",We,Ze]}],basis:[{basis:[Fu,"full","auto",o,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jt,Fu,"auto","initial","none",Ze]}],grow:[{grow:["",jt,We,Ze]}],shrink:[{shrink:["",jt,We,Ze]}],order:[{order:[il,"first","last","none",We,Ze]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:ee()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:ee()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_e()}],"auto-rows":[{"auto-rows":_e()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[o,"screen",...Z()]}],"min-w":[{"min-w":[o,"screen","none",...Z()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",n,wf,cc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,We,bk]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yk,Ze]}],"font-family":[{font:[rle,Ze,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,We,Ze]}],"line-clamp":[{"line-clamp":[jt,"none",We,bk]}],leading:[{leading:[a,...j()]}],"list-image":[{"list-image":["none",We,Ze]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",We,Ze]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[jt,"from-font","auto",We,cc]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[jt,"auto",We,Ze]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",We,Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",We,Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:$()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},il,We,Ze],radial:["",We,Ze],conic:[il,We,Ze]},ale,nle]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jt,We,Ze]}],"outline-w":[{outline:["",jt,wf,cc]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",f,Ty,Sy]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",m,Ty,Sy]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[jt,cc]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",g,Ty,Sy]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[jt,We,Ze]}],"mix-blend":[{"mix-blend":[...I(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":I()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[jt]}],"mask-image-linear-from-pos":[{"mask-linear-from":N()}],"mask-image-linear-to-pos":[{"mask-linear-to":N()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":N()}],"mask-image-t-to-pos":[{"mask-t-to":N()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":N()}],"mask-image-r-to-pos":[{"mask-r-to":N()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":N()}],"mask-image-b-to-pos":[{"mask-b-to":N()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":N()}],"mask-image-l-to-pos":[{"mask-l-to":N()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":N()}],"mask-image-x-to-pos":[{"mask-x-to":N()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":N()}],"mask-image-y-to-pos":[{"mask-y-to":N()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[We,Ze]}],"mask-image-radial-from-pos":[{"mask-radial-from":N()}],"mask-image-radial-to-pos":[{"mask-radial-to":N()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[jt]}],"mask-image-conic-from-pos":[{"mask-conic-from":N()}],"mask-image-conic-to-pos":[{"mask-conic-to":N()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:$()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",We,Ze]}],filter:[{filter:["","none",We,Ze]}],blur:[{blur:ne()}],brightness:[{brightness:[jt,We,Ze]}],contrast:[{contrast:[jt,We,Ze]}],"drop-shadow":[{"drop-shadow":["","none",b,Ty,Sy]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",jt,We,Ze]}],"hue-rotate":[{"hue-rotate":[jt,We,Ze]}],invert:[{invert:["",jt,We,Ze]}],saturate:[{saturate:[jt,We,Ze]}],sepia:[{sepia:["",jt,We,Ze]}],"backdrop-filter":[{"backdrop-filter":["","none",We,Ze]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[jt,We,Ze]}],"backdrop-contrast":[{"backdrop-contrast":[jt,We,Ze]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jt,We,Ze]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jt,We,Ze]}],"backdrop-invert":[{"backdrop-invert":["",jt,We,Ze]}],"backdrop-opacity":[{"backdrop-opacity":[jt,We,Ze]}],"backdrop-saturate":[{"backdrop-saturate":[jt,We,Ze]}],"backdrop-sepia":[{"backdrop-sepia":["",jt,We,Ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",We,Ze]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jt,"initial",We,Ze]}],ease:[{ease:["linear","initial",k,We,Ze]}],delay:[{delay:[jt,We,Ze]}],animate:[{animate:["none",C,We,Ze]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,We,Ze]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:K()}],"rotate-x":[{"rotate-x":K()}],"rotate-y":[{"rotate-y":K()}],"rotate-z":[{"rotate-z":K()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[We,Ze,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",We,Ze]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",We,Ze]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[jt,wf,cc,bk]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cle=Boe(lle);function Sc(...e){return cle(D9(e))}const ule=woe("inline-flex items-center justify-center rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-primary text-white hover:bg-primary-dark",secondary:"bg-white text-primary border-2 border-primary hover:bg-primary hover:text-white",success:"bg-green-600 text-white hover:bg-green-700",ghost:"hover:bg-gray-100"},size:{default:"px-6 py-3",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg"}},defaultVariants:{variant:"primary",size:"default"}}),Ee=A.forwardRef(({className:e,variant:t,size:n,...r},s)=>c.jsx("button",{className:Sc(ule({variant:t,size:n,className:e})),ref:s,...r}));Ee.displayName="Button";function dle(){const e=t=>{const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth"})};return c.jsxs("section",{id:"home",className:"relative min-h-screen flex items-center justify-center bg-cover bg-center",style:{backgroundImage:"url(../images/cover.jpg)"},children:[c.jsx("div",{className:"absolute inset-0 bg-black/40"}),c.jsxs("div",{className:"relative z-10 container mx-auto px-4 text-center",children:[c.jsx(dn.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6",children:"Full Stack Web and Mobile App Developer"}),c.jsx(dn.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"text-lg md:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:'"Go to bed smarter than when you woke up." - Charlie Munger'}),c.jsxs(dn.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"flex flex-wrap gap-4 justify-center",children:[c.jsx(Ee,{variant:"primary",size:"lg",onClick:()=>e("portfolio"),children:"View Portfolio"}),c.jsx(Ee,{variant:"secondary",size:"lg",onClick:()=>e("contact"),children:"Contact Me"})]})]}),c.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.5},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 cursor-pointer",onClick:()=>e("skills"),children:c.jsx("div",{className:"w-6 h-10 border-2 border-white rounded-full flex items-start justify-center p-2",children:c.jsx(dn.div,{animate:{y:[0,12,0]},transition:{duration:1.5,repeat:1/0},className:"w-1 h-2 bg-white rounded-full"})})})]})}function hle({skill:e,onClick:t,index:n}){return c.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.05},onClick:t,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center",children:[c.jsx("img",{src:e.icon,alt:e.title,className:"w-20 h-20 object-contain mb-4"}),c.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e.category}),c.jsx("p",{className:"text-sm text-gray-500",children:e.experience})]})}function Un({isOpen:e,onClose:t,title:n,children:r,className:s}){return A.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),c.jsx(ME,{children:e&&c.jsxs(c.Fragment,{children:[c.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/50 z-40"}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50 pointer-events-none overflow-y-auto",children:c.jsxs(dn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},className:Sc("bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full pointer-events-auto relative my-8 max-h-[calc(100vh-4rem)] flex flex-col",s),children:[c.jsxs("div",{className:"flex-shrink-0 px-6 pt-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:c.jsx(cn,{size:24})}),n&&c.jsx("h3",{className:"text-2xl font-bold pr-8 text-gray-900 dark:text-white",children:n})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 text-gray-700 dark:text-gray-300",children:r})]})})]})})}function fle({skill:e,isOpen:t,onClose:n}){return e?c.jsxs(Un,{isOpen:t,onClose:n,children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("img",{src:e.icon,alt:e.title,className:"w-16 h-16 object-contain"}),c.jsx("h5",{className:"text-2xl font-bold",children:e.title})]}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description})]}):null}const ple=[{id:"html",title:"HTML5",category:"Frontend Skill",experience:"7 years of experience",icon:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/HTML5_logo_and_wordmark.svg/1200px-HTML5_logo_and_wordmark.svg.png",description:"HTML is the backbone of any website in my opinion and so I've spent over 6 years playing around and mastering how HTML5 works to create websites that operate great and are SEO-friendly."},{id:"css",title:"CSS3",category:"Frontend Skill",experience:"7 years of experience",icon:"https://cdn.clipart.email/9924122f6a73b517e96ffaced1f2ac9b_download-icon-css-3-svg-eps-png-psd-ai-logo-vector-color-free-el-_1141-1600.png",description:"While learning HTML5, I realized that if I wanted to create sites that looked great, I would have to learn about CSS3. As mobile took over the market, things like media queries became my focus."},{id:"javascript",title:"Javascript",category:"Frontend Skill",experience:"5 years of experience",icon:"https://seeklogo.com/images/J/javascript-logo-E967E87D74-seeklogo.com.png",description:"Once I was used to making great looking websites, the next obvious step for me was to learn JavaScript to make my websites more interactive in order to give a better user experience to visitors."},{id:"php",title:"PHP7",category:"Backend Skill",experience:"5 years of experience",icon:"https://pngimg.com/uploads/php/php_PNG49.png",description:"While creating iOS applications in high school, I quickly realized that if I wanted to connect my apps with any public API, I would have to create a backend server to interface with these APIs."},{id:"python",title:"Python",category:"Backend Skill",experience:"3 years of experience",icon:"https://cdn3.iconfinder.com/data/icons/logos-and-brands-adobe/512/267_Python-512.png",description:"At first, I used Python for data structures class. However, after realizing how sleek the language was and the community support, I quickly learned Python and frameworks such as Django."},{id:"swift",title:"Swift",category:"Backend Skill",experience:"2 years of experience",icon:"https://cdn4.iconfinder.com/data/icons/logos-3/1300/swift-seeklogo-512.png",description:"After Swift was released in 2014, I started to move away from Obj-C and into Swift. It did take me time to transition, however, I was able to learn Swift and managed to create a few hobby iOS apps."},{id:"sql",title:"SQL",category:"Data Analysis Skill",experience:"6 years of experience",icon:"https://findicons.com/files/icons/2420/coded/512/sql.png",description:"SQL was extremely easy for me to pick up as the query language seemed very intuitive to me. Since first learning, I've taken a deeper dive into concepts such as JOINs, sub-queries and more."},{id:"laravel",title:"Laravel",category:"Frameworks",experience:"3 years of experience",icon:"https://cdn.iconscout.com/icon/free/png-512/laravel-226015.png",description:"The first web development framework that I got my hands dirty with was Laravel. I used Laravel for many of my hobby projects and managed to use it for one of my larger freelance projects."},{id:"django",title:"Django",category:"Frameworks",experience:"1 year of experience",icon:"https://cdn2.hubspot.net/hubfs/3885898/django.png",description:"After I realized that I would like to move away from PHP and Laravel and towards Python for artificial intelligence, I quickly picked up Django to replace Laravel."},{id:"react",title:"React",category:"Frameworks",experience:"2 years of experience",icon:"https://cdn2.iconfinder.com/data/icons/designer-skills/128/react-512.png",description:"While learning Laravel, I was reading a lot about single-page applications and how client-side rendering was the new hot thing. So I learned React to supplement my Laravel knowledge."},{id:"react-native",title:"React Native",category:"Frameworks",experience:"1.5 years of experience",icon:"https://cdn2.iconfinder.com/data/icons/designer-skills/128/react-512.png",description:"After learning React, I realized that learning React Native wouldn't be too much harder. The additional benefit of only having to write your code once and deploy to both iOS and Android was attractive."},{id:"scrum",title:"Scrum",category:"DevOps",experience:"1.5 years of experience",icon:"https://static.thenounproject.com/png/44251-200.png",description:"I've used Scrum while working at Quicket Solutions and also for managing projects for school in the event I was the project leader. Familiar with the process and read Scrum by Jeff Sutherland."},{id:"github",title:"GitHub",category:"DevOps",experience:"2.5 years of experience",icon:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",description:"Prior to working at a real developer job, I would store code on my local machine, however, since joining Quicket, I've learned Git and how it's used for version control and deploying production code."},{id:"jira",title:"Jira",category:"DevOps",experience:"6 months of experience",icon:"https://cdn.iconscout.com/icon/free/png-512/jira-1-458321.png",description:"While working at Quicket Solutions, I was exposed to Jira and how it was used in a real-world setting. At first, it was hard to pick-up but by the end, I found it to be a very useful tool."},{id:"docker",title:"Docker",category:"DevOps",experience:"3 months of experience",icon:"https://www.docker.com/sites/default/files/d8/2019-07/Moby-logo.png",description:`I am just now starting to learn about Docker and Kubernetes. I've created some "Hello World" docker images, however, have yet to use them in a hobby project or in a real world job.`},{id:"aws",title:"Amazon AWS",category:"Cloud",experience:"2 years of experience",icon:"https://cdn2.iconfinder.com/data/icons/amazon-aws-stencils/100/Non-Service_Specific_copy__AWS_Cloud-512.png",description:"Have experience with deploying and setting up EC2 instances. Also have experience setting up RDS instances to connect with the EC2 instance in the case that I am using MySQL for development."}];function mle(){const[e,t]=A.useState(null),[n,r]=A.useState(!1),s=a=>{t(a),r(!0)};return c.jsxs("section",{id:"skills",className:"py-20 border-b border-gray-200",children:[c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"My Skills"}),c.jsx("p",{className:"text-gray-600 text-lg",children:"Click on any box to learn more about that skill"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ple.map((a,i)=>c.jsx(hle,{skill:a,onClick:()=>s(a),index:i},a.id))})]}),c.jsx(fle,{skill:e,isOpen:n,onClose:()=>r(!1)})]})}function gle({project:e,index:t}){return c.jsxs(dn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},className:"flex flex-col md:flex-row gap-6 items-center mb-12",children:[c.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:c.jsx("img",{src:e.image,alt:e.title,className:"w-4/5 md:w-full rounded-3xl shadow-lg"})}),c.jsxs("div",{className:"w-full md:w-2/3 text-center md:text-left",children:[c.jsx("h3",{className:"text-3xl font-bold text-primary mb-2",children:e.title}),c.jsx("h6",{className:"text-lg text-gray-600 mb-4",children:e.subtitle}),e.description.map((n,r)=>c.jsx("p",{className:"text-gray-700 mb-3",children:n},r)),e.link&&c.jsx(Ee,{variant:"success",size:"sm",onClick:()=>window.open(e.link,"_blank"),className:"mt-4",children:e.linkText||"View Project"})]})]})}const yle=[{id:"canvascraft",title:"CanvasCraft",subtitle:"Built with AWS (Serverless) and React Native",description:["Quicket Solutions is a company that I worked at for 6 months. I was the lead developer on the project and was responsible for creating the entire platform from scratch.","The platform is a ticketing system that allows users to create tickets and assign them to other users. The platform also has a chat system that allows users to communicate with each other.","The platform also has a reporting system that allows users to create reports and export them to Excel."],image:"../images/QuicketSolutions.gif",technologies:"AWS (Serverless) and React Native",link:"https://quicketsolutions.com",linkText:"View Website"},{id:"pathlearn",title:"PathLearn",subtitle:"Built with React Native, Laravel and SQL",description:["PathLearn is a mobile application that allows users to create roadmaps for others to learn from. The problem I saw was that there's already a lot of free content on the internet, however, no one has really organized it for learning.","So if someone wanted to learn about Python, they can find a roadmap on Python on the platform to learn from. Other users can create these roadmaps for the community.","The goal was to create an app that helps self-learners know what to learn."],image:"../images/PathLearn.gif",technologies:"React Native, Laravel and SQL",link:"https://github.com/SunnyChopper/pathlearn-app",linkText:"View Github"},{id:"manyvote",title:"ManyVote",subtitle:"Built with React Native, Laravel and SQL",description:["ManyVote is a platform that helps connect local constituents to their local government. It allows citizens to keep track of the bills that are currently being passed through and to help keep their government accountable.","Politicians are able to sign up on the website and be able to intereact with everyday citizens. Politicians can put out polls and ask questions about issues.","Since this is a government based app, I cannot share the Github link with you."],image:"../images/ManyVote.gif",technologies:"React Native, Laravel and SQL",link:"http://manyvoteapp.com",linkText:"View Website"},{id:"mind-of-habit",title:"Mind of Habit",subtitle:"Built with React Native, Laravel and SQL",description:["This app allows users to create habits that they want to create or destroy. Each habit is broken down into levels. If you complete a task for the day, you get points that you can use to purchase rewards.","The rewards are defined by you. If you believe that something is a small reward, you can set the number of points required to purchase it rather low.","This app is flexible and helps you build the habits that you want."],image:"../images/Mind-of-Habit.gif",technologies:"React Native, Laravel and SQL",link:"https://github.com/SunnyChopper/moh-app",linkText:"View Github"}];function ble(){return c.jsx("section",{id:"portfolio",className:"py-20",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsx(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:c.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Portfolio"})}),c.jsx("div",{className:"max-w-6xl mx-auto",children:yle.map((e,t)=>c.jsx(gle,{project:e,index:t},e.id))})]})})}function xle({post:e,index:t}){return c.jsxs(dn.a,{href:e.url,target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.05},className:"block bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[c.jsx("div",{className:"aspect-video w-full overflow-hidden",children:c.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-6",children:[c.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2",children:e.title}),c.jsx("p",{className:"text-gray-700 mb-4 line-clamp-3",children:e.summary}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Written ",e.date," on Medium"]})]})]})}const vle=[{id:"1",title:"What is Testing in Software?  The Three Main Types of Testing Explained in Simple English",summary:"Take your developer skills to the next level by knowing what testing is in software engineering. This post explains it with simple English.",date:"April 30th, 2020",image:"https://miro.medium.com/max/2000/1*7-lmYP4mFq4vpxbg1CtGUQ.png",url:"https://medium.com/@SunnyChopper/what-is-testing-in-software-the-three-main-types-of-testing-explained-in-simple-english-da0fec7ae5d6"},{id:"2",title:"What is Webpack? How Webpack Speeds Up Your Website and Generates Revenue",summary:"For every second a user waits for your site to load, you're losing more business. Webpack solves this problem and this post explains how.",date:"April 26th, 2020",image:"https://miro.medium.com/max/2000/1*EvUuiTaF5fKWLmySyILmWg.png",url:"https://medium.com/@SunnyChopper/what-is-webpack-how-webpack-quickly-speeds-up-your-website-and-generate-revenue-for-your-business-e2b197b830a3"},{id:"3",title:"What is Redux in React? A Quick Explanation Using Simple English",summary:"Redux is a powerful state management tool. But, what exactly is it? This post aims to give you a better understanding of Redux for React.",date:"April 25th, 2020",image:"https://miro.medium.com/max/2000/1*l9GqESHUyb9CHMfBHnnh8g.png",url:"https://medium.com/@SunnyChopper/what-is-redux-in-react-a-quick-explanation-using-simple-english-b298579e5898"},{id:"4",title:"Using the Redux Thunk Middleware to Quickly Send API Requests in React Native",summary:"Use Redux Thunk in React Native to connect to an API when connecting to an API when using Redux. This post helps you implement Redux Thunk.",date:"April 22nd, 2020",image:"https://miro.medium.com/max/2000/1*KPiBTo4ehXzUWfzoh-cowA.png",url:"https://medium.com/@SunnyChopper/using-the-redux-thunk-middleware-to-quickly-send-api-requests-in-react-native-88302b44e963"},{id:"5",title:"How to Quickly Create a Beautiful Custom Button Using Touchables in React Native",summary:"Having a flexible custom button to use in your React Native project can help save you a lot of time. This post helps you build one.",date:"April 21st, 2020",image:"https://miro.medium.com/max/2000/1*-ZXa_PKwN5IicHQeeL3lfw.png",url:"https://medium.com/@SunnyChopper/how-to-quickly-create-a-beautiful-custom-button-using-touchables-in-react-native-5ae6ee9c326"},{id:"6",title:"How to Quickly Create an Onboarding Swiper Sequence in Your React Native App",summary:"Creating an onboarding sequence for your React Native application can increase user retention. In this post, I help you implement one.",date:"April 20th, 2020",image:"https://miro.medium.com/max/2000/1*7nB-6kopBs4eQhVBmmEOUg.png",url:"https://medium.com/@SunnyChopper/how-to-quickly-create-an-onboarding-swiper-sequence-in-your-react-native-app-6e3046448917"},{id:"7",title:"Understanding the Lifecycle of React Navigation to Add Custom Events to Your React Native App",summary:"Ever wanted to run a function when a user is navigating around your React Native app? React Navigation can help you do that.",date:"April 19th, 2020",image:"https://miro.medium.com/max/2000/1*dSEtY_KsNnmudHixV3VRag.png",url:"https://medium.com/@SunnyChopper/understanding-the-lifecycle-of-react-navigation-to-add-custom-events-to-your-react-native-app-11e1d9547f47"},{id:"8",title:"How to Use Axios to Quickly Connect to an API in Your React Native Application",summary:"Using the Javascript library Axios, you can quickly connect to a 3rd party API or even your own. In this post, I go over how to use Axios.",date:"April 18th, 2020",image:"https://miro.medium.com/max/2000/1*pj6oDkFSQL7DhSP-9CFAMg.png",url:"https://medium.com/@SunnyChopper/how-to-use-axios-to-quickly-connect-to-an-api-in-your-react-native-application-a69c1c048f8e"}];function wle(){return c.jsx("section",{id:"blog",className:"py-20",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Educating Others about Tech"}),c.jsx("p",{className:"text-gray-600 text-lg",children:"Giving back to the community that taught me so much."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:vle.map((e,t)=>c.jsx(xle,{post:e,index:t},e.id))})]})})}function _le(){return c.jsx("section",{id:"contact",className:"py-20 bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs(dn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Ready to Work?"}),c.jsx("p",{className:"text-gray-600 text-lg",children:"Like what you see? Let's work together."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[c.jsxs(dn.a,{href:"tel:2174194494",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"bg-white rounded-lg p-8 shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center group",children:[c.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:c.jsx(Iee,{className:"text-primary",size:32})}),c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Call"})]}),c.jsxs(dn.a,{href:"mailto:ishy.singh@gmail.com",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"bg-white rounded-lg p-8 shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center group",children:[c.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:c.jsx(bee,{className:"text-primary",size:32})}),c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Email"})]})]})]})})}function kle(){const e=Na();return A.useEffect(()=>{const t=e.hash;t&&setTimeout(()=>{const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth"})},100)},[e]),A.useEffect(()=>{const t=()=>{const n=window.location.hash;if(n){const r=document.querySelector(n);r&&r.scrollIntoView({behavior:"smooth"})}};return window.addEventListener("hashchange",t),()=>window.removeEventListener("hashchange",t)},[]),c.jsxs(c.Fragment,{children:[c.jsx(dle,{}),c.jsx(mle,{}),c.jsx(ble,{}),c.jsx(wle,{}),c.jsx(_le,{})]})}function Sle(){return c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"relative h-[40vh] flex items-center justify-center bg-cover bg-center",style:{backgroundImage:"url(../images/cover.jpg)"},children:[c.jsx("div",{className:"absolute inset-0 bg-black/40"}),c.jsx("div",{className:"relative z-10 container mx-auto px-4 text-center",children:c.jsx(dn.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold text-white",children:"Published Products"})})]}),c.jsx("section",{className:"py-20",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.jsxs(dn.a,{href:"/products/canvascraft",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 p-6 border border-gray-200",children:[c.jsx("img",{src:"../images/canvas-craft-square-logo-transparent.png",alt:"CanvasCraft",className:"w-full mb-6"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"CanvasCraft"}),c.jsx("h5",{className:"text-gray-500 mb-4",children:"Published April 2024"}),c.jsx("p",{className:"text-gray-700 mb-4",children:"CanvasCraft is a tool for entrepreneurs to swiftly turn ideas into strategic plans. Its intuitive interface and GPT API integration streamline the Lean Canvas process and generate business plans efficiently."}),c.jsx("p",{className:"text-gray-700",children:"The backend API uses AWS serverless resources (API Gateway, Lambdas, and DynamoDB), and the frontend uses React Native and Expo."})]})})})})]})}function Tle(){return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center px-4",children:c.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[c.jsx(dn.h1,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"text-9xl font-bold text-blue-600 dark:text-blue-400 mb-4",children:"404"}),c.jsx(dn.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Page Not Found"}),c.jsx(dn.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"text-lg text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved. Let's get you back on track."}),c.jsxs(dn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[c.jsxs(Ur,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition font-medium shadow-lg hover:shadow-xl",children:[c.jsx(S6,{size:20}),"Back to Homepage"]}),c.jsxs(Ur,{to:"/#portfolio",className:"inline-flex items-center gap-2 px-6 py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 transition font-medium",children:[c.jsx(GX,{size:20}),"View My Work"]})]}),c.jsx(dn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},className:"mt-12",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Need help? Feel free to reach out on"," ",c.jsx("a",{href:"https://www.linkedin.com/in/sunny-singh-tech/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"LinkedIn"})]})})]})})}function Cle(){const[e,t]=A.useState("test@example.com"),[n,r]=A.useState("test1234"),[s,a]=A.useState(!1),[i,o]=A.useState(null),[u,h]=A.useState(!1),{signIn:f,signUp:m}=tE(),g=mm(),b=async w=>{w.preventDefault(),o(null),h(!0);try{s?await m(e,n):await f(e,n),g("/admin/dashboard")}catch(x){o(x instanceof Error?x.message:"An error occurred")}finally{h(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center px-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:s?"Create Account":"Welcome Back"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s?"Sign up to start your Growth System journey":"Sign in to access your Growth System"})]}),c.jsxs("form",{onSubmit:b,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",value:e,onChange:w=>t(w.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"you@example.com",required:!0,disabled:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:n,onChange:w=>r(w.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"",required:!0,minLength:6,disabled:u})]}),i&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg text-sm",children:i}),c.jsx(Ee,{type:"submit",className:"w-full",disabled:u,children:u?s?"Creating Account...":"Signing In...":s?"Sign Up":"Sign In"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{type:"button",onClick:()=>{a(!s),o(null)},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition",children:s?"Already have an account? Sign in":"Need an account? Sign up"})}),!s&&c.jsx("div",{className:"mt-4 text-center text-xs text-gray-500 dark:text-gray-400",children:c.jsx("p",{children:"Test credentials pre-filled for development"})})]})})}const F4={parseTask:"Task Parsing",breakdownTask:"Task Breakdown",priorityAdvisor:"Priority Advisor",effortEstimation:"Effort Estimation",taskCategorization:"Task Categorization",dependencyDetection:"Dependency Detection",projectHealth:"Project Health Analysis",projectTaskGen:"Project Task Generation",projectRisk:"Project Risk Assessment",goalRefinement:"Goal Refinement",successCriteriaGen:"Success Criteria Generation",metricSuggestions:"Metric Suggestions",goalCascade:"Goal Cascade Planning",achievementForecast:"Achievement Forecasting",goalConflict:"Goal Conflict Detection",goalProgress:"Goal Progress Analysis",metricPatterns:"Metric Pattern Recognition",metricAnomalies:"Anomaly Detection",metricCorrelations:"Correlation Discovery",metricTargets:"Target Recommendations",metricHealth:"Metric Health Analysis",habitDesign:"Habit Design Assistant",habitStack:"Habit Stack Suggestions",streakRecovery:"Streak Recovery Coach",habitPatterns:"Habit Pattern Analysis",triggerOptimization:"Trigger Optimization",habitGoalAlignment:"Habit-Goal Alignment",reflectionPrompts:"Reflection Prompts",dailyDigest:"Daily Digest Generation",logbookPatterns:"Journal Pattern Insights",sentimentAnalysis:"Sentiment Analysis",weeklyReview:"Weekly Review Generator",connectionSuggestions:"Connection Suggestions"},B4={parseTask:{provider:"anthropic",model:"claude-3-5-haiku-20241022"},breakdownTask:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},priorityAdvisor:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},effortEstimation:{provider:"anthropic",model:"claude-3-5-haiku-20241022"},taskCategorization:{provider:"anthropic",model:"claude-3-5-haiku-20241022"},dependencyDetection:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},projectHealth:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},projectTaskGen:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},projectRisk:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},goalRefinement:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},successCriteriaGen:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},metricSuggestions:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},goalCascade:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},achievementForecast:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},goalConflict:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},goalProgress:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},metricPatterns:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},metricAnomalies:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},metricCorrelations:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},metricTargets:{provider:"anthropic",model:"claude-3-5-haiku-20241022"},metricHealth:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},habitDesign:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},habitStack:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},streakRecovery:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},habitPatterns:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},triggerOptimization:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},habitGoalAlignment:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},reflectionPrompts:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},dailyDigest:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},logbookPatterns:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},sentimentAnalysis:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},weeklyReview:{provider:"anthropic",model:"claude-3-5-sonnet-20241022"},connectionSuggestions:{provider:"anthropic",model:"claude-3-5-haiku-20241022"}},W9={anthropic:[{name:"claude-sonnet-4-20250514",displayName:"Claude Sonnet 4",contextLength:2e5,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"claude-3-5-sonnet-20241022",displayName:"Claude 3.5 Sonnet",contextLength:2e5,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"claude-3-5-haiku-20241022",displayName:"Claude 3.5 Haiku",contextLength:2e5,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"claude-opus-4-20250514",displayName:"Claude Opus 4",contextLength:2e5,supportsStreaming:!0,supportsStructuredOutput:!0}],openai:[{name:"gpt-4o",displayName:"GPT-4o",contextLength:128e3,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"gpt-4o-mini",displayName:"GPT-4o Mini",contextLength:128e3,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"gpt-4-turbo",displayName:"GPT-4 Turbo",contextLength:128e3,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"o1",displayName:"o1",contextLength:2e5,supportsStreaming:!1,supportsStructuredOutput:!0},{name:"o1-mini",displayName:"o1 Mini",contextLength:128e3,supportsStreaming:!1,supportsStructuredOutput:!0}],gemini:[{name:"gemini-2.0-flash-exp",displayName:"Gemini 2.0 Flash",contextLength:1e6,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"gemini-1.5-pro",displayName:"Gemini 1.5 Pro",contextLength:2e6,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"gemini-1.5-flash",displayName:"Gemini 1.5 Flash",contextLength:1e6,supportsStreaming:!0,supportsStructuredOutput:!0}],groq:[{name:"llama-3.3-70b-versatile",displayName:"Llama 3.3 70B",contextLength:32768,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"mixtral-8x7b-32768",displayName:"Mixtral 8x7B",contextLength:32768,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"gemma2-9b-it",displayName:"Gemma 2 9B",contextLength:8192,supportsStreaming:!0,supportsStructuredOutput:!0}],grok:[{name:"grok-2-1212",displayName:"Grok 2",contextLength:131072,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"grok-2-vision-1212",displayName:"Grok 2 Vision",contextLength:32768,supportsStreaming:!0,supportsStructuredOutput:!0}],deepseek:[{name:"deepseek-chat",displayName:"DeepSeek Chat",contextLength:64e3,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"deepseek-reasoner",displayName:"DeepSeek Reasoner",contextLength:64e3,supportsStreaming:!0,supportsStructuredOutput:!0}],cerebras:[{name:"llama3.1-8b",displayName:"Llama 3.1 8B",contextLength:8192,supportsStreaming:!0,supportsStructuredOutput:!0},{name:"llama3.1-70b",displayName:"Llama 3.1 70B",contextLength:8192,supportsStreaming:!0,supportsStructuredOutput:!0}]};function xk(e){return W9[e]||[]}function Ele(e){const t=W9[e];return t.length>0?t[0].name:""}const J9="gs_feature_provider_",Y9="gs_feature_model_";function gT(e){try{const t=`${J9}${e}`,n=`${Y9}${e}`,r=localStorage.getItem(t),s=localStorage.getItem(n);return r&&s?{provider:r,model:s}:B4[e]}catch(t){return console.error(`Failed to get feature config for ${e}:`,t),B4[e]}}function $t(e,t,n){try{const r=`${J9}${e}`,s=`${Y9}${e}`;localStorage.setItem(r,t),localStorage.setItem(s,n)}catch(r){throw console.error(`Failed to set feature config for ${e}:`,r),new Error(`Failed to save configuration for ${e}`)}}function jle(e){const t=["parseTask","breakdownTask","priorityAdvisor","effortEstimation","taskCategorization","dependencyDetection","projectHealth","projectTaskGen","projectRisk","goalRefinement","successCriteriaGen","metricSuggestions","goalCascade","achievementForecast","goalConflict","goalProgress","metricPatterns","metricAnomalies","metricCorrelations","metricTargets","metricHealth","habitDesign","habitStack","streakRecovery","habitPatterns","triggerOptimization","habitGoalAlignment","reflectionPrompts","dailyDigest","logbookPatterns","sentimentAnalysis","weeklyReview","connectionSuggestions"],n=Ele(e);t.forEach(r=>{$t(r,e,n)})}function Nle(){$t("parseTask","anthropic","claude-3-5-haiku-20241022"),$t("breakdownTask","anthropic","claude-3-5-sonnet-20241022"),$t("priorityAdvisor","anthropic","claude-3-5-haiku-20241022"),$t("effortEstimation","anthropic","claude-3-5-haiku-20241022"),$t("taskCategorization","anthropic","claude-3-5-haiku-20241022"),$t("dependencyDetection","anthropic","claude-3-5-sonnet-20241022"),$t("projectHealth","anthropic","claude-3-5-sonnet-20241022"),$t("projectTaskGen","anthropic","claude-3-5-sonnet-20241022"),$t("projectRisk","anthropic","claude-3-5-sonnet-20241022"),$t("goalRefinement","anthropic","claude-3-5-sonnet-20241022"),$t("successCriteriaGen","anthropic","claude-3-5-sonnet-20241022"),$t("metricSuggestions","anthropic","claude-3-5-sonnet-20241022"),$t("goalCascade","anthropic","claude-3-5-sonnet-20241022"),$t("achievementForecast","anthropic","claude-3-5-sonnet-20241022"),$t("goalConflict","anthropic","claude-3-5-sonnet-20241022"),$t("goalProgress","anthropic","claude-3-5-sonnet-20241022"),$t("metricPatterns","anthropic","claude-3-5-sonnet-20241022"),$t("metricAnomalies","anthropic","claude-3-5-sonnet-20241022"),$t("metricCorrelations","anthropic","claude-3-5-sonnet-20241022"),$t("metricTargets","anthropic","claude-3-5-haiku-20241022"),$t("metricHealth","anthropic","claude-3-5-sonnet-20241022"),$t("habitDesign","anthropic","claude-3-5-sonnet-20241022"),$t("habitStack","anthropic","claude-3-5-sonnet-20241022"),$t("streakRecovery","anthropic","claude-3-5-sonnet-20241022"),$t("habitPatterns","anthropic","claude-3-5-sonnet-20241022"),$t("triggerOptimization","anthropic","claude-3-5-sonnet-20241022"),$t("habitGoalAlignment","anthropic","claude-3-5-sonnet-20241022"),$t("reflectionPrompts","anthropic","claude-3-5-sonnet-20241022"),$t("dailyDigest","anthropic","claude-3-5-sonnet-20241022"),$t("logbookPatterns","anthropic","claude-3-5-sonnet-20241022"),$t("sentimentAnalysis","anthropic","claude-3-5-sonnet-20241022"),$t("weeklyReview","anthropic","claude-3-5-sonnet-20241022"),$t("connectionSuggestions","anthropic","claude-3-5-haiku-20241022")}const gb="gs_api_key_";function QE(e){try{return localStorage.getItem(`${gb}${e}`)}catch(t){return console.error(`Failed to get API key for ${e}:`,t),null}}function Ale(e,t){try{t.trim()===""?localStorage.removeItem(`${gb}${e}`):localStorage.setItem(`${gb}${e}`,t)}catch(n){throw console.error(`Failed to set API key for ${e}:`,n),new Error(`Failed to save API key for ${e}`)}}function Ile(e){try{localStorage.removeItem(`${gb}${e}`)}catch(t){console.error(`Failed to remove API key for ${e}:`,t)}}function M0(e){const t=QE(e);return t!==null&&t.trim()!==""}function Q9(){return["anthropic","openai","gemini","groq","grok","deepseek","cerebras"].filter(t=>M0(t))}var Ole=Object.defineProperty,Ut=(e,t)=>{for(var n in t)Ole(e,n,{get:t[n],enumerable:!0})};function yT(e,t=jx){e=e.trim();const n=e.indexOf("```");if(n===-1)return t(e);let r=e.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const s=r.indexOf("```");let a=r;return s!==-1&&(a=r.substring(0,s)),t(a.trim())}function Rle(e){try{return JSON.parse(e)}catch{}const t=e.trim();if(t.length===0)throw new Error("Unexpected end of JSON input");let n=0;function r(){for(;n<t.length&&/\s/.test(t[n]);)n+=1}function s(){if(t[n]!=='"')throw new Error(`Expected '"' at position ${n}, got '${t[n]}'`);n+=1;let f="",m=!1;for(;n<t.length;){const g=t[n];if(m){if(g==="n")f+=`
`;else if(g==="t")f+="	";else if(g==="r")f+="\r";else if(g==="\\")f+="\\";else if(g==='"')f+='"';else if(g==="b")f+="\b";else if(g==="f")f+="\f";else if(g==="/")f+="/";else if(g==="u"){const b=t.substring(n+1,n+5);if(/^[0-9A-Fa-f]{0,4}$/.test(b))b.length===4?f+=String.fromCharCode(Number.parseInt(b,16)):f+=`u${b}`,n+=b.length;else throw new Error(`Invalid unicode escape sequence '\\u${b}' at position ${n}`)}else throw new Error(`Invalid escape sequence '\\${g}' at position ${n}`);m=!1}else if(g==="\\")m=!0;else{if(g==='"')return n+=1,f;f+=g}n+=1}return m&&(f+="\\"),f}function a(){const f=n;let m="";if(t[n]==="-"&&(m+="-",n+=1),n<t.length&&t[n]==="0"&&(m+="0",n+=1,t[n]>="0"&&t[n]<="9"))throw new Error(`Invalid number at position ${f}`);if(n<t.length&&t[n]>="1"&&t[n]<="9")for(;n<t.length&&t[n]>="0"&&t[n]<="9";)m+=t[n],n+=1;if(n<t.length&&t[n]===".")for(m+=".",n+=1;n<t.length&&t[n]>="0"&&t[n]<="9";)m+=t[n],n+=1;if(n<t.length&&(t[n]==="e"||t[n]==="E"))for(m+=t[n],n+=1,n<t.length&&(t[n]==="+"||t[n]==="-")&&(m+=t[n],n+=1);n<t.length&&t[n]>="0"&&t[n]<="9";)m+=t[n],n+=1;if(m==="-")return-0;const g=Number.parseFloat(m);if(Number.isNaN(g))throw n=f,new Error(`Invalid number '${m}' at position ${f}`);return g}function i(){if(r(),n>=t.length)throw new Error(`Unexpected end of input at position ${n}`);const f=t[n];if(f==="{")return u();if(f==="[")return o();if(f==='"')return s();if("null".startsWith(t.substring(n,n+4)))return n+=Math.min(4,t.length-n),null;if("true".startsWith(t.substring(n,n+4)))return n+=Math.min(4,t.length-n),!0;if("false".startsWith(t.substring(n,n+5)))return n+=Math.min(5,t.length-n),!1;if(f==="-"||f>="0"&&f<="9")return a();throw new Error(`Unexpected character '${f}' at position ${n}`)}function o(){if(t[n]!=="[")throw new Error(`Expected '[' at position ${n}, got '${t[n]}'`);const f=[];if(n+=1,r(),n>=t.length)return f;if(t[n]==="]")return n+=1,f;for(;n<t.length;){if(r(),n>=t.length||(f.push(i()),r(),n>=t.length))return f;if(t[n]==="]")return n+=1,f;if(t[n]===","){n+=1;continue}throw new Error(`Expected ',' or ']' at position ${n}, got '${t[n]}'`)}return f}function u(){if(t[n]!=="{")throw new Error(`Expected '{' at position ${n}, got '${t[n]}'`);const f={};if(n+=1,r(),n>=t.length)return f;if(t[n]==="}")return n+=1,f;for(;n<t.length;){if(r(),n>=t.length)return f;const m=s();if(r(),n>=t.length)return f;if(t[n]!==":")throw new Error(`Expected ':' at position ${n}, got '${t[n]}'`);if(n+=1,r(),n>=t.length||(f[m]=i(),r(),n>=t.length))return f;if(t[n]==="}")return n+=1,f;if(t[n]===","){n+=1;continue}throw new Error(`Expected ',' or '}' at position ${n}, got '${t[n]}'`)}return f}const h=i();if(r(),n<t.length)throw new Error(`Unexpected character '${t[n]}' at position ${n}`);return h}function jx(e){try{return typeof e>"u"?null:Rle(e)}catch{return null}}function X9(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}var vk,H4;function Ple(){return H4||(H4=1,vk=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}),vk}var Mle=Ple();const Dle=Kd(Mle);var Cy={exports:{}},q4;function $le(){if(q4)return Cy.exports;q4=1;const e=/[\p{Lu}]/u,t=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,a=new RegExp("^"+s.source),i=new RegExp(s.source+r.source,"gu"),o=new RegExp("\\d+"+r.source,"gu"),u=(g,b,w)=>{let x=!1,S=!1,k=!1;for(let C=0;C<g.length;C++){const T=g[C];x&&e.test(T)?(g=g.slice(0,C)+"-"+g.slice(C),x=!1,k=S,S=!0,C++):S&&k&&t.test(T)?(g=g.slice(0,C-1)+"-"+g.slice(C-1),k=S,S=!1,x=!0):(x=b(T)===T&&w(T)!==T,k=S,S=w(T)===T&&b(T)!==T)}return g},h=(g,b)=>(n.lastIndex=0,g.replace(n,w=>b(w))),f=(g,b)=>(i.lastIndex=0,o.lastIndex=0,g.replace(i,(w,x)=>b(x)).replace(o,w=>b(w))),m=(g,b)=>{if(!(typeof g=="string"||Array.isArray(g)))throw new TypeError("Expected the input to be `string | string[]`");if(b={pascalCase:!1,preserveConsecutiveUppercase:!1,...b},Array.isArray(g)?g=g.map(k=>k.trim()).filter(k=>k.length).join("-"):g=g.trim(),g.length===0)return"";const w=b.locale===!1?k=>k.toLowerCase():k=>k.toLocaleLowerCase(b.locale),x=b.locale===!1?k=>k.toUpperCase():k=>k.toLocaleUpperCase(b.locale);return g.length===1?b.pascalCase?x(g):w(g):(g!==w(g)&&(g=u(g,w,x)),g=g.replace(a,""),b.preserveConsecutiveUppercase?g=h(g,w):g=w(g),b.pascalCase&&(g=x(g.charAt(0))+g.slice(1)),f(g,x))};return Cy.exports=m,Cy.exports.default=m,Cy.exports}$le();function Lle(e,t){return t?.[e]||Dle(e)}function zle(e,t,n){const r={};for(const s in e)Object.hasOwn(e,s)&&(r[t(s,n)]=e[s]);return r}const eU="__lc_escaped__";function Ule(e){return"lc"in e||Object.keys(e).length===1&&eU in e}function Fle(e){return{[eU]:e}}function Ble(e){return e!==null&&typeof e=="object"&&"lc_serializable"in e&&typeof e.toJSON=="function"}function bT(e){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){if(Ble(e))return e;const t=e;if(Ule(t))return Fle(t);const n={};for(const[r,s]of Object.entries(t))n[r]=bT(s);return n}return Array.isArray(e)?e.map(t=>bT(t)):e}var Hle={};Ut(Hle,{Serializable:()=>Pd,get_lc_unique_name:()=>XE});function V4(e){return Array.isArray(e)?[...e]:{...e}}function qle(e,t){const n=V4(e);for(const[r,s]of Object.entries(t)){const[a,...i]=r.split(".").reverse();let o=n;for(const u of i.reverse()){if(o[u]===void 0)break;o[u]=V4(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[s]})}return n}function XE(e){const t=Object.getPrototypeOf(e);return typeof e.lc_name=="function"&&(typeof t.lc_name!="function"||e.lc_name()!==t.lc_name())?e.lc_name():e.name}var Pd=class tU{lc_serializable=!1;lc_kwargs;static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,XE(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(t,...n){this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([r])=>this.lc_serializable_keys?.includes(r))):this.lc_kwargs=t??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof tU||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const t={},n={},r=Object.keys(this.lc_kwargs).reduce((o,u)=>(o[u]=u in this?this[u]:this.lc_kwargs[u],o),{});for(let o=Object.getPrototypeOf(this);o;o=Object.getPrototypeOf(o))Object.assign(t,Reflect.get(o,"lc_aliases",this)),Object.assign(n,Reflect.get(o,"lc_secrets",this)),Object.assign(r,Reflect.get(o,"lc_attributes",this));Object.keys(n).forEach(o=>{let u=this,h=r;const[f,...m]=o.split(".").reverse();for(const g of m.reverse()){if(!(g in u)||u[g]===void 0)return;(!(g in h)||h[g]===void 0)&&(typeof u[g]=="object"&&u[g]!=null?h[g]={}:Array.isArray(u[g])&&(h[g]=[])),u=u[g],h=h[g]}f in u&&u[f]!==void 0&&(h[f]=h[f]||u[f])});const s={};for(const[o,u]of Object.entries(r))s[o]=bT(u);const a=Object.keys(n).length?qle(s,n):s,i=zle(a,Lle,t);return{lc:1,type:"constructor",id:this.lc_id,kwargs:i}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function _p(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="tool_call")}function Vle(e){return!!(e&&typeof e=="object"&&"toolCall"in e&&e.toolCall!=null&&typeof e.toolCall=="object"&&"id"in e.toolCall&&typeof e.toolCall.id=="string")}var yb=class extends Error{output;constructor(e,t){super(e),this.output=t}};const nU=Symbol.for("ls:tracing_async_local_storage"),kp=Symbol.for("lc:context_variables"),Gle=e=>{globalThis[nU]=e},Vp=()=>globalThis[nU];function Ea(e){return typeof e=="object"&&e!==null&&"type"in e&&typeof e.type=="string"&&"source_type"in e&&(e.source_type==="url"||e.source_type==="base64"||e.source_type==="text"||e.source_type==="id")}function ej(e){return Ea(e)&&e.source_type==="url"&&"url"in e&&typeof e.url=="string"}function tj(e){return Ea(e)&&e.source_type==="base64"&&"data"in e&&typeof e.data=="string"}function Kle(e){return Ea(e)&&e.source_type==="text"&&"text"in e&&typeof e.text=="string"}function rU(e){return Ea(e)&&e.source_type==="id"&&"id"in e&&typeof e.id=="string"}function sU(e){if(Ea(e)){if(e.source_type==="url")return{type:"image_url",image_url:{url:e.url}};if(e.source_type==="base64"){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function xT(e){const t=e.split(";")[0].split("/");if(t.length!==2)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);const n=t[0].trim(),r=t[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);const s={};for(const a of e.split(";").slice(1)){const i=a.split("=");if(i.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);const o=i[0].trim(),u=i[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${e}".`);s[o]=u}return{type:n,subtype:r,parameters:s}}function Oi({dataUrl:e,asTypedArray:t=!1}){const n=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const s=t?Uint8Array.from(atob(n[2]),a=>a.charCodeAt(0)):n[2];return{mime_type:r,data:s}}}function Nm(e,t){if(e.type==="text"){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if(e.type==="image"){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if(e.type==="audio"){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if(e.type==="file"){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}function ot(e,t){return xt(e)&&e.type===t}function xt(e){return typeof e=="object"&&e!==null}function Ri(e){return Array.isArray(e)}function He(e){return typeof e=="string"}function Wa(e){return typeof e=="number"}function nj(e){return e instanceof Uint8Array}function G4(e){try{return JSON.parse(e)}catch{return}}const Gp=e=>e();function Zle(e){if(e.type==="char_location"&&He(e.document_title)&&Wa(e.start_char_index)&&Wa(e.end_char_index)&&He(e.cited_text)){const{document_title:t,start_char_index:n,end_char_index:r,cited_text:s,...a}=e;return{...a,type:"citation",source:"char",title:t??void 0,startIndex:n,endIndex:r,citedText:s}}if(e.type==="page_location"&&He(e.document_title)&&Wa(e.start_page_number)&&Wa(e.end_page_number)&&He(e.cited_text)){const{document_title:t,start_page_number:n,end_page_number:r,cited_text:s,...a}=e;return{...a,type:"citation",source:"page",title:t??void 0,startIndex:n,endIndex:r,citedText:s}}if(e.type==="content_block_location"&&He(e.document_title)&&Wa(e.start_block_index)&&Wa(e.end_block_index)&&He(e.cited_text)){const{document_title:t,start_block_index:n,end_block_index:r,cited_text:s,...a}=e;return{...a,type:"citation",source:"block",title:t??void 0,startIndex:n,endIndex:r,citedText:s}}if(e.type==="web_search_result_location"&&He(e.url)&&He(e.title)&&He(e.encrypted_index)&&He(e.cited_text)){const{url:t,title:n,encrypted_index:r,cited_text:s,...a}=e;return{...a,type:"citation",source:"url",url:t,title:n,startIndex:Number(r),endIndex:Number(r),citedText:s}}if(e.type==="search_result_location"&&He(e.source)&&He(e.title)&&Wa(e.start_block_index)&&Wa(e.end_block_index)&&He(e.cited_text)){const{source:t,title:n,start_block_index:r,end_block_index:s,cited_text:a,...i}=e;return{...i,type:"citation",source:"search",url:t,title:n??void 0,startIndex:r,endIndex:s,citedText:a}}}function aU(e){if(ot(e,"document")&&xt(e.source)&&"type"in e.source){if(e.source.type==="base64"&&He(e.source.media_type)&&He(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&He(e.source.url))return{type:"file",url:e.source.url};if(e.source.type==="file"&&He(e.source.file_id))return{type:"file",fileId:e.source.file_id};if(e.source.type==="text"&&He(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if(ot(e,"image")&&xt(e.source)&&"type"in e.source){if(e.source.type==="base64"&&He(e.source.media_type)&&He(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&He(e.source.url))return{type:"image",url:e.source.url};if(e.source.type==="file"&&He(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function Wle(e){function*t(){for(const n of e){const r=aU(n);r?yield r:yield n}}return Array.from(t())}function K4(e){function*t(){const n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const r of n){if(ot(r,"text")&&He(r.text)){const{text:s,citations:a,...i}=r;if(Ri(a)&&a.length){const o=a.reduce((u,h)=>{const f=Zle(h);return f?[...u,f]:u},[]);yield{...i,type:"text",text:s,annotations:o};continue}else{yield{...i,type:"text",text:s};continue}}else if(ot(r,"thinking")&&He(r.thinking)){const{thinking:s,signature:a,...i}=r;yield{...i,type:"reasoning",reasoning:s,signature:a};continue}else if(ot(r,"redacted_thinking")){yield{type:"non_standard",value:r};continue}else if(ot(r,"tool_use")&&He(r.name)&&He(r.id)){yield{type:"tool_call",id:r.id,name:r.name,args:r.input};continue}else if(ot(r,"input_json_delta")){if(Yle(e)&&e.tool_call_chunks?.length){const s=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:s.id,name:s.name,args:s.args,index:s.index};continue}}else if(ot(r,"server_tool_use")&&He(r.name)&&He(r.id)){const{name:s,id:a}=r;if(s==="web_search"){const i=Gp(()=>{if(typeof r.input=="string")return r.input;if(xt(r.input)&&He(r.input.query))return r.input.query;if(He(r.partial_json)){const o=G4(r.partial_json);if(o?.query)return o.query}return""});yield{id:a,type:"server_tool_call",name:"web_search",args:{query:i}};continue}else if(r.name==="code_execution"){const i=Gp(()=>{if(typeof r.input=="string")return r.input;if(xt(r.input)&&He(r.input.code))return r.input.code;if(He(r.partial_json)){const o=G4(r.partial_json);if(o?.code)return o.code}return""});yield{id:a,type:"server_tool_call",name:"code_execution",args:{code:i}};continue}}else if(ot(r,"web_search_tool_result")&&He(r.tool_use_id)&&Ri(r.content)){const{content:s,tool_use_id:a}=r,i=s.reduce((o,u)=>ot(u,"web_search_result")?[...o,u.url]:o,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:a,status:"success",output:{urls:i}};continue}else if(ot(r,"code_execution_tool_result")&&He(r.tool_use_id)&&xt(r.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:r.tool_use_id,status:"success",output:r.content};continue}else if(ot(r,"mcp_tool_use")){yield{id:r.id,type:"server_tool_call",name:"mcp_tool_use",args:r.input};continue}else if(ot(r,"mcp_tool_result")&&He(r.tool_use_id)&&xt(r.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:r.tool_use_id,status:"success",output:r.content};continue}else if(ot(r,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:r.input};continue}else if(ot(r,"search_result")){yield{id:r.id,type:"non_standard",value:r};continue}else if(ot(r,"tool_result")){yield{id:r.id,type:"non_standard",value:r};continue}else{const s=aU(r);if(s){yield s;continue}}yield{type:"non_standard",value:r}}}return Array.from(t())}const Jle={translateContent:K4,translateContentChunk:K4};function Yle(e){return typeof e?._getType=="function"&&typeof e.concat=="function"&&e._getType()==="ai"}function Qle(e){return ej(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:tj(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:rU(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function Xle(e){return e.map(Qle)}function ece(e){return!!(ot(e,"image_url")&&xt(e.image_url)||ot(e,"input_audio")&&xt(e.input_audio)||ot(e,"file")&&xt(e.file))}function tce(e){if(ot(e,"image_url")&&xt(e.image_url)&&He(e.image_url.url)){const t=Oi({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}else{if(ot(e,"input_audio")&&xt(e.input_audio)&&He(e.input_audio.data)&&He(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if(ot(e,"file")&&xt(e.file)&&He(e.file.data)){const t=Oi({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if(He(e.file.file_id))return{type:"file",fileId:e.file.file_id}}}return e}function nce(e){const t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...rj(e.content));for(const n of e.tool_calls??[])t.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return t}function rce(e){const t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...rj(e.content));for(const n of e.tool_calls??[])t.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return t}function rj(e){const t=[];for(const n of e)ece(n)?t.push(tce(n)):t.push(n);return t}function sce(e){if(e.type==="url_citation"){const{url:t,title:n,start_index:r,end_index:s}=e;return{type:"citation",url:t,title:n,startIndex:r,endIndex:s}}if(e.type==="file_citation"){const{file_id:t,filename:n,index:r}=e;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:t}}return e}function iU(e){function*t(){xt(e.additional_kwargs?.reasoning)&&Ri(e.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:e.additional_kwargs.reasoning.summary.reduce((s,a)=>xt(a)&&He(a.text)?`${s}${a.text}`:s,"")});const n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const r of n)if(ot(r,"text")){const{text:s,annotations:a,...i}=r;Array.isArray(a)?yield{...i,type:"text",text:String(s),annotations:a.map(sce)}:yield{...i,type:"text",text:String(s)}}for(const r of e.tool_calls??[])yield{type:"tool_call",id:r.id,name:r.name,args:r.args};if(xt(e.additional_kwargs)&&Ri(e.additional_kwargs.tool_outputs))for(const r of e.additional_kwargs.tool_outputs){if(ot(r,"web_search_call")){yield{id:r.id,type:"server_tool_call",name:"web_search",args:{query:r.query}};continue}else if(ot(r,"file_search_call")){yield{id:r.id,type:"server_tool_call",name:"file_search",args:{query:r.query}};continue}else if(ot(r,"computer_call")){yield{type:"non_standard",value:r};continue}else if(ot(r,"code_interpreter_call")){if(He(r.code)&&(yield{id:r.id,type:"server_tool_call",name:"code_interpreter",args:{code:r.code}}),Ri(r.outputs)){const s=Gp(()=>{if(r.status!=="in_progress"){if(r.status==="completed")return 0;if(r.status==="incomplete")return 127;if(r.status!=="interpreting"&&r.status==="failed")return 1}});for(const a of r.outputs)if(ot(a,"logs")){yield{type:"server_tool_call_result",toolCallId:r.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:s??0,stderr:[0,void 0].includes(s)?void 0:String(a.logs),stdout:[0,void 0].includes(s)?String(a.logs):void 0}};continue}}continue}else if(ot(r,"mcp_call")){yield{id:r.id,type:"server_tool_call",name:"mcp_call",args:r.input};continue}else if(ot(r,"mcp_list_tools")){yield{id:r.id,type:"server_tool_call",name:"mcp_list_tools",args:r.input};continue}else if(ot(r,"mcp_approval_request")){yield{type:"non_standard",value:r};continue}else if(ot(r,"image_generation_call")){yield{type:"non_standard",value:r};continue}xt(r)&&(yield{type:"non_standard",value:r})}}return Array.from(t())}function ace(e){function*t(){yield*iU(e);for(const n of e.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(t())}const ice={translateContent:e=>typeof e.content=="string"?nce(e):iU(e),translateContentChunk:e=>typeof e.content=="string"?rce(e):ace(e)};function oU(e){return typeof e=="object"&&e!==null&&"type"in e&&"content"in e&&(typeof e.content=="string"||Array.isArray(e.content))}function oce(e,t="pretty"){return t==="pretty"?lce(e):JSON.stringify(e)}function lce(e){const t=[],n=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),s="=".repeat(r),a=n.length%2===0?s:`${s}=`;if(t.push(`${s}${n}${a}`),e.type==="ai"){const i=e;if(i.tool_calls&&i.tool_calls.length>0){t.push("Tool Calls:");for(const o of i.tool_calls){t.push(`  ${o.name} (${o.id})`),t.push(` Call ID: ${o.id}`),t.push("  Args:");for(const[u,h]of Object.entries(o.args))t.push(`    ${u}: ${typeof h=="object"?JSON.stringify(h):h}`)}}}if(e.type==="tool"){const i=e;i.name&&t.push(`Name: ${i.name}`)}return typeof e.content=="string"&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content)),t.join(`
`)}const wk=Symbol.for("langchain.message");function To(e,t){return typeof e=="string"?e===""?t:typeof t=="string"?e+t:Array.isArray(t)&&t.length===0?e:Array.isArray(t)&&t.some(n=>Ea(n))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?Am(e,t)??[...e,...t]:t===""?e:Array.isArray(e)&&e.some(n=>Ea(n))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function lU(e,t){return e==="error"||t==="error"?"error":"success"}function cce(e,t){function n(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=t)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(i=>n(i,s+1));const a={};for(const i of Object.keys(r))a[i]=n(r[i],s+1);return a}return JSON.stringify(n(e,0),null,2)}var Oo=class extends Pd{lc_namespace=["langchain_core","messages"];lc_serializable=!0;get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}[wk]=!0;id;name;content;additional_kwargs;response_metadata;_getType(){return this.type}getType(){return this._getType()}constructor(e){const t=typeof e=="string"||Array.isArray(e)?{content:e}:e;t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),this.name=t.name,t.content===void 0&&t.contentBlocks!==void 0?(this.content=t.contentBlocks,this.response_metadata={output_version:"v1",...t.response_metadata}):t.content!==void 0?(this.content=t.content??[],this.response_metadata=t.response_metadata):(this.content=[],this.response_metadata=t.response_metadata),this.additional_kwargs=t.additional_kwargs,this.id=t.id}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[Xle,rj,Wle].reduce((r,s)=>s(r),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&wk in e&&e[wk]===!0&&oU(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=cce(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}toFormattedString(e="pretty"){return oce(this,e)}};function uce(e){return Array.isArray(e)&&e.every(t=>typeof t.index=="number")}function Gr(e={},t={}){const n={...e};for(const[r,s]of Object.entries(t))if(n[r]==null)n[r]=s;else{if(s==null)continue;if(typeof n[r]!=typeof s||Array.isArray(n[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?s&&(n[r]=s):n[r]+=s}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=Gr(n[r],s);else if(Array.isArray(n[r]))n[r]=Am(n[r],s);else{if(n[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Am(e,t){if(!(e===void 0&&t===void 0)){if(e===void 0||t===void 0)return e||t;{const n=[...e];for(const r of t)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){const s=n.findIndex(a=>{const i=typeof a=="object",o="index"in a&&a.index===r.index,u="id"in a&&"id"in r&&a?.id===r?.id,h=!("id"in a)||!a?.id||!("id"in r)||!r?.id;return i&&o&&(u||h)});s!==-1&&typeof n[s]=="object"&&n[s]!==null?n[s]=Gr(n[s],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function cU(e,t){if(!(e===void 0&&t===void 0)){if(e===void 0||t===void 0)return e??t;if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.
Left ${typeof e}
Right ${typeof t}`);if(typeof e=="string"&&typeof t=="string")return e+t;if(Array.isArray(e)&&Array.isArray(t))return Am(e,t);if(typeof e=="object"&&typeof t=="object")return Gr(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.
Left ${e}
Right ${t}`)}}var Ll=class uU extends Oo{static isInstance(t){if(!super.isInstance(t))return!1;let n=Object.getPrototypeOf(t);for(;n!==null;){if(n===uU.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function dU(e){return typeof e.role=="string"}function xo(e){return typeof e?._getType=="function"}function sj(e){return Ll.isInstance(e)}var dce={};Ut(dce,{ToolMessage:()=>$i,ToolMessageChunk:()=>lh,defaultToolCallParser:()=>ij,isDirectToolOutput:()=>aj,isToolMessage:()=>oj,isToolMessageChunk:()=>hU});function aj(e){return e!=null&&typeof e=="object"&&"lc_direct_tool_output"in e&&e.lc_direct_tool_output===!0}var $i=class extends Oo{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}lc_direct_tool_output=!0;type="tool";status;tool_call_id;metadata;artifact;constructor(e,t,n){const r=typeof e=="string"||Array.isArray(e)?{content:e,name:n,tool_call_id:t}:e;super(r),this.tool_call_id=r.tool_call_id,this.artifact=r.artifact,this.status=r.status,this.metadata=r.metadata}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},lh=class extends Ll{type="tool";tool_call_id;status;artifact;constructor(e){super(e),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const t=this.constructor;return new t({content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:Gr(this.response_metadata,e.response_metadata),artifact:cU(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:lU(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function ij(e){const t=[],n=[];for(const r of e)if(r.function){const s=r.function.name;try{const a=JSON.parse(r.function.arguments);t.push({name:s||"",args:a||{},id:r.id})}catch{n.push({name:s,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[t,n]}function oj(e){return typeof e=="object"&&e!==null&&"getType"in e&&typeof e.getType=="function"&&e.getType()==="tool"}function hU(e){return e._getType()==="tool"}var Bi=class fU extends Oo{static lc_name(){return"ChatMessage"}type="generic";role;static _chatMessageClass(){return fU}constructor(t,n){(typeof t=="string"||Array.isArray(t))&&(t={content:t,role:n}),super(t),this.role=t.role}static isInstance(t){return super.isInstance(t)&&t.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},ch=class extends Ll{static lc_name(){return"ChatMessageChunk"}type="generic";role;constructor(e,t){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:t}),super(e),this.role=e.role}concat(e){const t=this.constructor;return new t({content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:Gr(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function hce(e){return e._getType()==="generic"}function fce(e){return e._getType()==="generic"}var Nx=class extends Oo{static lc_name(){return"FunctionMessage"}type="function";name;constructor(e){super(e),this.name=e.name}},uh=class extends Ll{static lc_name(){return"FunctionMessageChunk"}type="function";concat(e){const t=this.constructor;return new t({content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:Gr(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function pce(e){return e._getType()==="function"}function mce(e){return e._getType()==="function"}var si=class extends Oo{static lc_name(){return"HumanMessage"}type="human";constructor(e){super(e)}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},dh=class extends Ll{static lc_name(){return"HumanMessageChunk"}type="human";constructor(e){super(e)}concat(e){const t=this.constructor;return new t({content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:Gr(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function gce(e){return e.getType()==="human"}function yce(e){return e.getType()==="human"}var bb=class extends Oo{type="remove";id;constructor(e){super({...e,content:[]}),this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}},jl=class D0 extends Oo{static lc_name(){return"SystemMessage"}type="system";constructor(t){super(t)}concat(t){if(typeof t=="string")return new D0({...this,content:To(this.content,t)});if(D0.isInstance(t))return new D0({...this,additional_kwargs:{...this.additional_kwargs,...t.additional_kwargs},response_metadata:{...this.response_metadata,...t.response_metadata},content:To(this.content,t.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(t){return super.isInstance(t)&&t.type==="system"}},Li=class extends Ll{static lc_name(){return"SystemMessageChunk"}type="system";constructor(e){super(e)}concat(e){const t=this.constructor;return new t({content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:Gr(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function bce(e){return e._getType()==="system"}function xce(e){return e._getType()==="system"}function lj(e){switch(e){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function vce(e){if(xt(e.document)&&xt(e.document.source)){const t=xt(e.document)&&He(e.document.format)?e.document.format:"",n=lj(t);if(xt(e.document.source)){if(xt(e.document.source.s3Location)&&He(e.document.source.s3Location.uri))return{type:"file",mimeType:n,fileId:e.document.source.s3Location.uri};if(nj(e.document.source.bytes))return{type:"file",mimeType:n,data:e.document.source.bytes};if(He(e.document.source.text))return{type:"file",mimeType:n,data:Buffer.from(e.document.source.text).toString("base64")};if(Ri(e.document.source.content)){const r=e.document.source.content.reduce((s,a)=>xt(a)&&He(a.text)?s+a.text:s,"");return{type:"file",mimeType:n,data:r}}}}return{type:"non_standard",value:e}}function wce(e){if(ot(e,"image")&&xt(e.image)){const t=xt(e.image)&&He(e.image.format)?e.image.format:"",n=lj(t);if(xt(e.image.source)){if(xt(e.image.source.s3Location)&&He(e.image.source.s3Location.uri))return{type:"image",mimeType:n,fileId:e.image.source.s3Location.uri};if(nj(e.image.source.bytes))return{type:"image",mimeType:n,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function _ce(e){if(ot(e,"video")&&xt(e.video)){const t=xt(e.video)&&He(e.video.format)?e.video.format:"",n=lj(t);if(xt(e.video.source)){if(xt(e.video.source.s3Location)&&He(e.video.source.s3Location.uri))return{type:"video",mimeType:n,fileId:e.video.source.s3Location.uri};if(nj(e.video.source.bytes))return{type:"video",mimeType:n,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function Z4(e){function*t(){const n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const r of n){if(ot(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(ot(r,"citations_content")&&xt(r.citationsContent)){const s=Ri(r.citationsContent.content)?r.citationsContent.content.reduce((i,o)=>xt(o)&&He(o.text)?i+o.text:i,""):"",a=Ri(r.citationsContent.citations)?r.citationsContent.citations.reduce((i,o)=>{if(xt(o)){const u=Ri(o.sourceContent)?o.sourceContent.reduce((f,m)=>xt(m)&&He(m.text)?f+m.text:f,""):"",h=Gp(()=>{if(xt(o.location)){const f=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(xt(f))return{source:Wa(f.documentIndex)?f.documentIndex.toString():void 0,startIndex:Wa(f.start)?f.start:void 0,endIndex:Wa(f.end)?f.end:void 0}}return{}});i.push({type:"citation",citedText:u,...h})}return i},[]):[];yield{type:"text",text:s,annotations:a};continue}else if(ot(r,"document")&&xt(r.document)){yield vce(r);continue}else if(ot(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(ot(r,"image")&&xt(r.image)){yield wce(r);continue}else if(ot(r,"reasoning_content")&&He(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(ot(r,"text")&&He(r.text)){yield{type:"text",text:r.text};continue}else if(ot(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(ot(r,"tool_call"))continue;if(ot(r,"video")&&xt(r.video)){yield _ce(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(t())}const kce={translateContent:Z4,translateContentChunk:Z4};function W4(e){function*t(){const n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const r of n){if(ot(r,"text")&&He(r.text)){yield{type:"text",text:r.text};continue}else if(ot(r,"inlineData")&&xt(r.inlineData)&&He(r.inlineData.mimeType)&&He(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(ot(r,"functionCall")&&xt(r.functionCall)&&He(r.functionCall.name)&&xt(r.functionCall.args)){yield{type:"tool_call",id:e.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(ot(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(ot(r,"fileData")&&xt(r.fileData)&&He(r.fileData.mimeType)&&He(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(ot(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(ot(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(t())}const Sce={translateContent:W4,translateContentChunk:W4};function J4(e){function*t(){const n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const r of n){if(ot(r,"reasoning")&&He(r.reasoning)){const s=Gp(()=>{const a=n.indexOf(r);if(Ri(e.additional_kwargs?.signatures)&&a>=0)return e.additional_kwargs.signatures.at(a)});He(s)?yield{type:"reasoning",reasoning:r.reasoning,signature:s}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(ot(r,"text")&&He(r.text)){yield{type:"text",text:r.text};continue}else if(ot(r,"image_url")){if(He(r.image_url))if(r.image_url.startsWith("data:")){const s=/^data:([^;]+);base64,(.+)$/,a=r.image_url.match(s);a?yield{type:"image",data:a[2],mimeType:a[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(ot(r,"media")&&He(r.mimeType)&&He(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(t())}const Tce={translateContent:J4,translateContentChunk:J4};globalThis.lc_block_translators_registry??=new Map([["anthropic",Jle],["bedrock-converse",kce],["google-genai",Sce],["google-vertexai",Tce],["openai",ice]]);function pU(e){return globalThis.lc_block_translators_registry.get(e)}function mU(e,t){return Gr(e??{},t??{})}function gU(e,t){const n={};return(e?.audio!==void 0||t?.audio!==void 0)&&(n.audio=(e?.audio??0)+(t?.audio??0)),(e?.image!==void 0||t?.image!==void 0)&&(n.image=(e?.image??0)+(t?.image??0)),(e?.video!==void 0||t?.video!==void 0)&&(n.video=(e?.video??0)+(t?.video??0)),(e?.document!==void 0||t?.document!==void 0)&&(n.document=(e?.document??0)+(t?.document??0)),(e?.text!==void 0||t?.text!==void 0)&&(n.text=(e?.text??0)+(t?.text??0)),n}function Cce(e,t){const n={...gU(e,t)};return(e?.cache_read!==void 0||t?.cache_read!==void 0)&&(n.cache_read=(e?.cache_read??0)+(t?.cache_read??0)),(e?.cache_creation!==void 0||t?.cache_creation!==void 0)&&(n.cache_creation=(e?.cache_creation??0)+(t?.cache_creation??0)),n}function Ece(e,t){const n={...gU(e,t)};return(e?.reasoning!==void 0||t?.reasoning!==void 0)&&(n.reasoning=(e?.reasoning??0)+(t?.reasoning??0)),n}function cj(e,t){return{input_tokens:(e?.input_tokens??0)+(t?.input_tokens??0),output_tokens:(e?.output_tokens??0)+(t?.output_tokens??0),total_tokens:(e?.total_tokens??0)+(t?.total_tokens??0),input_token_details:Cce(e?.input_token_details,t?.input_token_details),output_token_details:Ece(e?.output_token_details,t?.output_token_details)}}var pr=class extends Oo{type="ai";tool_calls=[];invalid_tool_calls=[];usage_metadata;get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e){let t;if(typeof e=="string"||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{t=e;const n=t.additional_kwargs?.tool_calls,r=t.tool_calls;n!=null&&n.length>0&&(r===void 0||r.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(n!=null&&r===void 0){const[s,a]=ij(n);t.tool_calls=s??[],t.invalid_tool_calls=a??[]}else t.tool_calls=t.tool_calls??[],t.invalid_tool_calls=t.invalid_tool_calls??[]}catch{t.tool_calls=[],t.invalid_tool_calls=[]}if(t.response_metadata!==void 0&&"output_version"in t.response_metadata&&t.response_metadata.output_version==="v1"&&(t.contentBlocks=t.content,t.content=void 0),t.contentBlocks!==void 0){t.contentBlocks.push(...t.tool_calls.map(a=>({type:"tool_call",id:a.id,name:a.name,args:a.args})));const s=t.contentBlocks.filter(a=>a.type==="tool_call").filter(a=>!t.tool_calls?.some(i=>i.id===a.id&&i.name===a.name));s.length>0&&(t.tool_calls=s.map(a=>({type:"tool_call",id:a.id,name:a.name,args:a.args})))}}super(t),typeof t!="string"&&(this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=t.usage_metadata}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const t=pU(this.response_metadata.model_provider);if(t)return t.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const t=this.tool_calls.filter(n=>!e.some(r=>r.id===n.id&&r.name===n.name));e.push(...t.map(n=>({...n,type:"tool_call",id:n.id,name:n.name,args:n.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function Co(e){return e._getType()==="ai"}function vT(e){return e._getType()==="ai"}var kn=class extends Ll{type="ai";tool_calls=[];invalid_tool_calls=[];tool_call_chunks=[];usage_metadata;constructor(e){let t;typeof e=="string"||Array.isArray(e)?t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]}:e.tool_call_chunks===void 0||e.tool_call_chunks.length===0?t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}:t={...e,...bU(e.tool_call_chunks??[]),usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0},super(t),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const t=pU(this.response_metadata.model_provider);if(t)return t.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const t=this.content.filter(n=>n.type==="tool_call").map(n=>n.id);for(const n of this.tool_calls)n.id&&!t.includes(n.id)&&e.push({...n,type:"tool_call",id:n.id,name:n.name,args:n.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:To(this.content,e.content),additional_kwargs:Gr(this.additional_kwargs,e.additional_kwargs),response_metadata:mU(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const r=Am(this.tool_call_chunks,e.tool_call_chunks);r!==void 0&&r.length>0&&(t.tool_call_chunks=r)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(t.usage_metadata=cj(this.usage_metadata,e.usage_metadata));const n=this.constructor;return new n(t)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};const yU=e=>e();function jce(e){return _p(e)?e:typeof e.id=="string"&&e.type==="function"&&typeof e.function=="object"&&e.function!==null&&"arguments"in e.function&&typeof e.function.arguments=="string"&&"name"in e.function&&typeof e.function.name=="string"?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function Nce(e){return typeof e=="object"&&e!=null&&e.lc===1&&Array.isArray(e.id)&&e.kwargs!=null&&typeof e.kwargs=="object"}function _k(e){let t,n;if(Nce(e)){const r=e.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?t="user":r==="AIMessage"||r==="AIMessageChunk"?t="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?t="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?t="function":r==="ToolMessage"||r==="ToolMessageChunk"?t="tool":t="unknown",n=e.kwargs}else{const{type:r,...s}=e;t=r,n=s}if(t==="human"||t==="user")return new si(n);if(t==="ai"||t==="assistant"){const{tool_calls:r,...s}=n;if(!Array.isArray(r))return new pr(n);const a=r.map(jce);return new pr({...s,tool_calls:a})}else{if(t==="system")return new jl(n);if(t==="developer")return new jl({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(t==="tool"&&"tool_call_id"in n)return new $i({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(t==="remove"&&"id"in n&&typeof n.id=="string")return new bb({...n,id:n.id});throw X9(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Sp(e){if(typeof e=="string")return new si(e);if(xo(e))return e;if(Array.isArray(e)){const[t,n]=e;return _k({type:t,content:n})}else if(dU(e)){const{role:t,...n}=e;return _k({...n,type:t})}else return _k(e)}function uj(e,t="Human",n="AI"){const r=[];for(const s of e){let a;if(s._getType()==="human")a=t;else if(s._getType()==="ai")a=n;else if(s._getType()==="system")a="System";else if(s._getType()==="tool")a="Tool";else if(s._getType()==="generic")a=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const i=s.name?`${s.name}, `:"",o=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);r.push(`${a}: ${i}${o}`)}return r.join(`
`)}function Ace(e){if(e.data!==void 0)return e;{const t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}function dj(e){const t=Ace(e);switch(t.type){case"human":return new si(t.data);case"ai":return new pr(t.data);case"system":return new jl(t.data);case"function":if(t.data.name===void 0)throw new Error("Name must be defined for function messages");return new Nx(t.data);case"tool":if(t.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new $i(t.data);case"generic":if(t.data.role===void 0)throw new Error("Role must be defined for chat messages");return new Bi(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}function Ice(e){return e.map(dj)}function Oce(e){return e.map(t=>t.toDict())}function xb(e){const t=e._getType();if(t==="human")return new dh({...e});if(t==="ai"){let n={...e};return"tool_calls"in n&&(n={...n,tool_call_chunks:n.tool_calls?.map(r=>({...r,type:"tool_call_chunk",index:void 0,args:JSON.stringify(r.args)}))}),new kn({...n})}else{if(t==="system")return new Li({...e});if(t==="function")return new uh({...e});if(Bi.isInstance(e))return new ch({...e});throw new Error("Unknown message type.")}}function bU(e){const t=e.reduce((s,a)=>{const i=s.findIndex(([o])=>"id"in a&&a.id&&"index"in a&&a.index!==void 0?a.id===o.id&&a.index===o.index:"id"in a&&a.id?a.id===o.id:"index"in a&&a.index!==void 0?a.index===o.index:!1);return i!==-1?s[i].push(a):s.push([a]),s},[]),n=[],r=[];for(const s of t){let a=null;const i=s[0]?.name??"",o=s.map(f=>f.args||"").join("").trim(),u=o.length?o:"{}",h=s[0]?.id;try{if(a=jx(u),!h||a===null||typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");n.push({name:i,args:a,id:h,type:"tool_call"})}catch{r.push({name:i,args:u,id:h,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:e,tool_calls:n,invalid_tool_calls:r}}var Rce={},Pce={};Ut(Pce,{getEnv:()=>hj,getEnvironmentVariable:()=>Ws,getRuntimeEnvironment:()=>kU,isBrowser:()=>xU,isDeno:()=>Ax,isJsDom:()=>wU,isNode:()=>_U,isWebWorker:()=>vU});const xU=()=>typeof window<"u"&&typeof window.document<"u",vU=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",wU=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),Ax=()=>typeof Deno<"u",_U=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Ax(),hj=()=>{let e;return xU()?e="browser":_U()?e="node":vU()?e="webworker":wU()?e="jsdom":Ax()?e="deno":e="other",e};let kk;function kU(){return kk===void 0&&(kk={library:"langchain-js",runtime:hj()}),kk}function Ws(e){try{return typeof process<"u"?Rce?.[e]:Ax()?Deno?.env.get(e):void 0}catch{return}}const Mce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function $0(e){return typeof e=="string"&&Mce.test(e)}var Ir=[];for(var Sk=0;Sk<256;++Sk)Ir.push((Sk+256).toString(16).slice(1));function SU(e,t=0){return(Ir[e[t+0]]+Ir[e[t+1]]+Ir[e[t+2]]+Ir[e[t+3]]+"-"+Ir[e[t+4]]+Ir[e[t+5]]+"-"+Ir[e[t+6]]+Ir[e[t+7]]+"-"+Ir[e[t+8]]+Ir[e[t+9]]+"-"+Ir[e[t+10]]+Ir[e[t+11]]+Ir[e[t+12]]+Ir[e[t+13]]+Ir[e[t+14]]+Ir[e[t+15]]).toLowerCase()}var Ey,Dce=new Uint8Array(16);function TU(){if(!Ey&&(Ey=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ey))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ey(Dce)}var $ce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Y4={randomUUID:$ce};function CU(e,t,n){if(Y4.randomUUID&&!e)return Y4.randomUUID();e=e||{};var r=e.random||(e.rng||TU)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,SU(r)}var Q4=null,X4=null,$a=0;function yc(e,t,n){e=e||{};var r=0,s=new Uint8Array(16),a=e.random||(e.rng||TU)(),i=e.msecs!==void 0?e.msecs:Date.now(),o=e.seq!==void 0?e.seq:null,u=X4,h=Q4;return i>$a&&e.msecs===void 0&&($a=i,o!==null&&(u=null,h=null)),o!==null&&(o>2147483647&&(o=2147483647),u=o>>>19&4095,h=o&524287),(u===null||h===null)&&(u=a[6]&127,u=u<<8|a[7],h=a[8]&63,h=h<<8|a[9],h=h<<5|a[10]>>>3),i+1e4>$a&&o===null?++h>524287&&(h=0,++u>4095&&(u=0,$a++)):$a=i,X4=u,Q4=h,s[r++]=$a/1099511627776&255,s[r++]=$a/4294967296&255,s[r++]=$a/16777216&255,s[r++]=$a/65536&255,s[r++]=$a/256&255,s[r++]=$a&255,s[r++]=u>>>4&15|112,s[r++]=u&255,s[r++]=h>>>13&63|128,s[r++]=h>>>5&255,s[r++]=h<<3&255|a[10]&7,s[r++]=a[11],s[r++]=a[12],s[r++]=a[13],s[r++]=a[14],s[r++]=a[15],t||SU(s)}var Lce={};Ut(Lce,{BaseCallbackHandler:()=>Im,callbackHandlerPrefersStreaming:()=>fj,isBaseCallbackHandler:()=>EU});var zce=class{};function fj(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var Im=class extends zce{lc_serializable=!1;get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,XE(this.constructor)]}lc_kwargs;ignoreLLM=!1;ignoreChain=!1;ignoreAgent=!1;ignoreRetriever=!1;ignoreCustomEvent=!1;raiseError=!1;awaitHandlers=Ws("LANGCHAIN_CALLBACKS_BACKGROUND")==="false";constructor(e){super(),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Pd.prototype.toJSON.call(this)}toJSONNotImplemented(){return Pd.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Im{name=yc();constructor(){super(),Object.assign(this,e)}}return new t}};const EU=e=>{const t=e;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"},Uce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Fce(e){return typeof e=="string"&&Uce.test(e)}function Bce(e){if(!Fce(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var Or=[];for(var Tk=0;Tk<256;++Tk)Or.push((Tk+256).toString(16).slice(1));function pj(e,t=0){return(Or[e[t+0]]+Or[e[t+1]]+Or[e[t+2]]+Or[e[t+3]]+"-"+Or[e[t+4]]+Or[e[t+5]]+"-"+Or[e[t+6]]+Or[e[t+7]]+"-"+Or[e[t+8]]+Or[e[t+9]]+"-"+Or[e[t+10]]+Or[e[t+11]]+Or[e[t+12]]+Or[e[t+13]]+Or[e[t+14]]+Or[e[t+15]]).toLowerCase()}var jy,Hce=new Uint8Array(16);function jU(){if(!jy&&(jy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jy(Hce)}function qce(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var Vce="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Gce="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Kce(e,t,n){function r(s,a,i,o){var u;if(typeof s=="string"&&(s=qce(s)),typeof a=="string"&&(a=Bce(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(a),h.set(s,a.length),h=n(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,i){o=o||0;for(var f=0;f<16;++f)i[o+f]=h[f];return i}return pj(h)}try{r.name=e}catch{}return r.DNS=Vce,r.URL=Gce,r}var Zce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const eM={randomUUID:Zce};function _f(e,t,n){if(eM.randomUUID&&!e)return eM.randomUUID();e=e||{};var r=e.random||(e.rng||jU)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pj(r)}function Wce(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function Ck(e,t){return e<<t|e>>>32-t}function Jce(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var s=0;s<r.length;++s)e.push(r.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),o=new Array(i),u=0;u<i;++u){for(var h=new Uint32Array(16),f=0;f<16;++f)h[f]=e[u*64+f*4]<<24|e[u*64+f*4+1]<<16|e[u*64+f*4+2]<<8|e[u*64+f*4+3];o[u]=h}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(var m=0;m<i;++m){for(var g=new Uint32Array(80),b=0;b<16;++b)g[b]=o[m][b];for(var w=16;w<80;++w)g[w]=Ck(g[w-3]^g[w-8]^g[w-14]^g[w-16],1);for(var x=n[0],S=n[1],k=n[2],C=n[3],T=n[4],P=0;P<80;++P){var D=Math.floor(P/20),R=Ck(x,5)+Wce(D,S,k,C)+T+t[D]+g[P]>>>0;T=C,C=k,k=Ck(S,30)>>>0,S=x,x=R}n[0]=n[0]+x>>>0,n[1]=n[1]+S>>>0,n[2]=n[2]+k>>>0,n[3]=n[3]+C>>>0,n[4]=n[4]+T>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Jf=Kce("v5",80,Jce),tM=null,nM=null,La=0;function Yce(e,t,n){e=e||{};var r=0,s=new Uint8Array(16),a=e.random||(e.rng||jU)(),i=e.msecs!==void 0?e.msecs:Date.now(),o=e.seq!==void 0?e.seq:null,u=nM,h=tM;return i>La&&e.msecs===void 0&&(La=i,o!==null&&(u=null,h=null)),o!==null&&(o>2147483647&&(o=2147483647),u=o>>>19&4095,h=o&524287),(u===null||h===null)&&(u=a[6]&127,u=u<<8|a[7],h=a[8]&63,h=h<<8|a[9],h=h<<5|a[10]>>>3),i+1e4>La&&o===null?++h>524287&&(h=0,++u>4095&&(u=0,La++)):La=i,nM=u,tM=h,s[r++]=La/1099511627776&255,s[r++]=La/4294967296&255,s[r++]=La/16777216&255,s[r++]=La/65536&255,s[r++]=La/256&255,s[r++]=La&255,s[r++]=u>>>4&15|112,s[r++]=u&255,s[r++]=h>>>13&63|128,s[r++]=h>>>5&255,s[r++]=h<<3&255|a[10]&7,s[r++]=a[11],s[r++]=a[12],s[r++]=a[13],s[r++]=a[14],s[r++]=a[15],t||pj(s)}const Qce="gen_ai.operation.name",Xce="gen_ai.system",rM="gen_ai.request.model",eue="gen_ai.response.model",sM="gen_ai.usage.input_tokens",aM="gen_ai.usage.output_tokens",iM="gen_ai.usage.total_tokens",tue="gen_ai.request.max_tokens",nue="gen_ai.request.temperature",rue="gen_ai.request.top_p",sue="gen_ai.request.frequency_penalty",aue="gen_ai.request.presence_penalty",iue="gen_ai.response.finish_reasons",oue="gen_ai.prompt",lue="gen_ai.completion",cue="gen_ai.request.extra_query",uue="gen_ai.request.extra_body",due="gen_ai.serialized.name",hue="gen_ai.serialized.signature",fue="gen_ai.serialized.doc",pue="gen_ai.response.id",mue="gen_ai.response.service_tier",gue="gen_ai.response.system_fingerprint",yue="gen_ai.usage.input_token_details",bue="gen_ai.usage.output_token_details",xue="langsmith.trace.session_id",vue="langsmith.trace.session_name",wue="langsmith.span.kind",_ue="langsmith.trace.name",kue="langsmith.metadata",oM="langsmith.span.tags",Sue="langsmith.request.streaming",Tue="langsmith.request.headers",Cue=(...e)=>fetch(...e),NU=Symbol.for("ls:fetch_implementation"),Eue=()=>{const e=globalThis[NU];return e?typeof e=="function"&&"Headers"in e&&"Request"in e&&"Response"in e:!1},jue=e=>async(...t)=>{if(e||_s("DEBUG")==="true"){const[r,s]=t;console.log(` ${s?.method||"GET"} ${r}`)}const n=await(globalThis[NU]??Cue)(...t);return(e||_s("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},AU=()=>_s("PROJECT")??zi("LANGCHAIN_SESSION")??"default",lM={};function IU(e){lM[e]||(console.warn(e),lM[e]=!0)}const Nue=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function bt(e,t){if(!Nue.test(e)){const n=t!==void 0?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`;throw new Error(n)}return e}function Aue(e){const t=typeof e=="string"?Date.parse(e):e;return Yce({msecs:t,seq:0})}const OU="0.4.4";var wT={};let _i;const Iue=()=>typeof window<"u"&&typeof window.document<"u",Oue=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Rue=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),RU=()=>typeof Deno<"u",Pue=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!RU(),PU=()=>_i||(typeof Bun<"u"?_i="bun":Iue()?_i="browser":Pue()?_i="node":Oue()?_i="webworker":Rue()?_i="jsdom":RU()?_i="deno":_i="other",_i);let Ek;function MU(){if(Ek===void 0){const e=PU(),t=Due();Ek={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:OU,...t}}return Ek}function DU(){const e=Mue(),t={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,s]of Object.entries(e))typeof s=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?t.revision_id=s:t[r]=s);return t}function Mue(){const e={};try{if(typeof process<"u"&&wT)for(const[t,n]of Object.entries(wT))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&n!=null&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&typeof n=="string"?e[t]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):e[t]=n)}catch{}return e}function zi(e){try{return typeof process<"u"?wT?.[e]:void 0}catch{return}}function _s(e){return zi(`LANGSMITH_${e}`)||zi(`LANGCHAIN_${e}`)}let jk;function Due(){if(jk!==void 0)return jk;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const n of e){const r=zi(n);r!==void 0&&(t[n]=r)}return jk=t,t}function $U(){return zi("OTEL_ENABLED")==="true"||_s("OTEL_ENABLED")==="true"}class $ue{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(t,...n){!this.hasWarned&&$U()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class Lue{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new $ue})}getTracer(t,n){return this.mockTracer}getActiveSpan(){}setSpan(t,n){return t}getSpan(t){}setSpanContext(t,n){return t}getTracerProvider(){}setGlobalTracerProvider(t){return!1}}class zue{active(){return{}}with(t,n){return n()}}const Nk=Symbol.for("ls:otel_trace"),Ak=Symbol.for("ls:otel_context"),cM=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),Uue=new Lue,Fue=new zue;class Bue{getTraceInstance(){return globalThis[Nk]??Uue}getContextInstance(){return globalThis[Ak]??Fue}initializeGlobalInstances(t){globalThis[Nk]===void 0&&(globalThis[Nk]=t.trace),globalThis[Ak]===void 0&&(globalThis[Ak]=t.context)}setDefaultOTLPTracerComponents(t){globalThis[cM]=t}getDefaultOTLPTracerComponents(){return globalThis[cM]??void 0}}const mj=new Bue;function LU(){return mj.getTraceInstance()}function Hue(){return mj.getContextInstance()}function que(){return mj.getDefaultOTLPTracerComponents()}const Vue={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function Gue(e){return Vue[e]||e}class Kue{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(t,n){for(const r of t)try{if(!r.run)continue;if(r.operation==="post"){const s=this.createSpanForRun(r,r.run,n.get(r.id));s&&!r.run.end_time&&this.spans.set(r.id,s)}else this.updateSpanForRun(r,r.run)}catch(s){console.error(`Error processing operation ${r.id}:`,s)}}createSpanForRun(t,n,r){const s=r&&LU().getSpan(r);if(s)try{return this.finishSpanSetup(s,n,t)}catch(a){console.error(`Failed to create span for run ${t.id}:`,a);return}}finishSpanSetup(t,n,r){return this.setSpanAttributes(t,n,r),n.error?(t.setStatus({code:2}),t.recordException(new Error(n.error))):t.setStatus({code:1}),n.end_time&&t.end(new Date(n.end_time)),t}updateSpanForRun(t,n){try{const r=this.spans.get(t.id);if(!r){console.debug(`No span found for run ${t.id} during update`);return}this.setSpanAttributes(r,n,t),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const s=n.end_time;s&&(r.end(new Date(s)),this.spans.delete(t.id))}catch(r){console.error(`Failed to update span for run ${t.id}:`,r)}}extractModelName(t){if(t.extra?.metadata){const n=t.extra.metadata;if(n.ls_model_name)return n.ls_model_name;if(n.invocation_params){const r=n.invocation_params;if(r.model)return r.model;if(r.model_name)return r.model_name}}}setSpanAttributes(t,n,r){if("run_type"in n&&n.run_type){t.setAttribute(wue,n.run_type);const o=Gue(n.run_type||"chain");t.setAttribute(Qce,o)}"name"in n&&n.name&&t.setAttribute(_ue,n.name),"session_id"in n&&n.session_id&&t.setAttribute(xue,n.session_id),"session_name"in n&&n.session_name&&t.setAttribute(vue,n.session_name),this.setGenAiSystem(t,n);const s=this.extractModelName(n);s&&t.setAttribute(rM,s),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&t.setAttribute(sM,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&t.setAttribute(aM,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&t.setAttribute(iM,n.total_tokens),this.setInvocationParameters(t,n);const a=n.extra?.metadata||{};for(const[o,u]of Object.entries(a))u!=null&&t.setAttribute(`${kue}.${o}`,String(u));const i=n.tags;if(i&&Array.isArray(i)?t.setAttribute(oM,i.join(", ")):i&&t.setAttribute(oM,String(i)),"serialized"in n&&typeof n.serialized=="object"){const o=n.serialized;o.name&&t.setAttribute(due,String(o.name)),o.signature&&t.setAttribute(hue,String(o.signature)),o.doc&&t.setAttribute(fue,String(o.doc))}this.setIOAttributes(t,r)}setGenAiSystem(t,n){let r="langchain";const s=this.extractModelName(n);if(s){const a=s.toLowerCase();a.includes("anthropic")||a.startsWith("claude")?r="anthropic":a.includes("bedrock")?r="aws.bedrock":a.includes("azure")&&a.includes("openai")?r="az.ai.openai":a.includes("azure")&&a.includes("inference")?r="az.ai.inference":a.includes("cohere")?r="cohere":a.includes("deepseek")?r="deepseek":a.includes("gemini")?r="gemini":a.includes("groq")?r="groq":a.includes("watson")||a.includes("ibm")?r="ibm.watsonx.ai":a.includes("mistral")?r="mistral_ai":a.includes("gpt")||a.includes("openai")?r="openai":a.includes("perplexity")||a.includes("sonar")?r="perplexity":a.includes("vertex")?r="vertex_ai":(a.includes("xai")||a.includes("grok"))&&(r="xai")}t.setAttribute(Xce,r)}setInvocationParameters(t,n){if(!n.extra?.metadata?.invocation_params)return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&t.setAttribute(tue,r.max_tokens),r.temperature!==void 0&&t.setAttribute(nue,r.temperature),r.top_p!==void 0&&t.setAttribute(rue,r.top_p),r.frequency_penalty!==void 0&&t.setAttribute(sue,r.frequency_penalty),r.presence_penalty!==void 0&&t.setAttribute(aue,r.presence_penalty)}setIOAttributes(t,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&t.setAttribute(rM,r.model),r.stream!==void 0&&t.setAttribute(Sue,r.stream),r.extra_headers&&t.setAttribute(Tue,JSON.stringify(r.extra_headers)),r.extra_query&&t.setAttribute(cue,JSON.stringify(r.extra_query)),r.extra_body&&t.setAttribute(uue,JSON.stringify(r.extra_body))),t.setAttribute(oue,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,s=this.getUnifiedRunTokens(r);if(s&&(t.setAttribute(sM,s[0]),t.setAttribute(aM,s[1]),t.setAttribute(iM,s[0]+s[1])),r&&typeof r=="object"){if(r.model&&t.setAttribute(eue,String(r.model)),r.id&&t.setAttribute(pue,r.id),r.choices&&Array.isArray(r.choices)){const a=r.choices.map(i=>i.finish_reason).filter(i=>i).map(String);a.length>0&&t.setAttribute(iue,a.join(", "))}if(r.service_tier&&t.setAttribute(mue,r.service_tier),r.system_fingerprint&&t.setAttribute(gue,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const a=r.usage_metadata;a.input_token_details&&t.setAttribute(yue,JSON.stringify(a.input_token_details)),a.output_token_details&&t.setAttribute(bue,JSON.stringify(a.output_token_details))}}t.setAttribute(lue,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(t){if(!t)return null;let n=this.extractUnifiedRunTokens(t.usage_metadata);if(n)return n;const r=Object.keys(t);for(const i of r){const o=t[i];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const s=t.generations||[];if(!Array.isArray(s))return null;const a=Array.isArray(s[0])?s.flat():s;for(const i of a)if(typeof i=="object"&&i.message&&typeof i.message=="object"&&i.message.kwargs&&typeof i.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(i.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(t){return!t||typeof t!="object"||typeof t.input_tokens!="number"||typeof t.output_tokens!="number"?null:[t.input_tokens,t.output_tokens]}}const Zue=Object.prototype.toString,Wue=e=>Zue.call(e)==="[object Error]",Jue=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function Yue(e){if(!(e&&Wue(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:n,stack:r}=e;return n==="Load failed"?r===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:Jue.has(n)}function Que(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Ny(e,t,{min:n=0,allowInfinity:r=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be  ${n}.`)}}let Xue=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function ede(e,t){const n=Math.max(1,e+1),r=t.randomize?Math.random()+1:1;let s=Math.round(r*t.minTimeout*t.factor**(n-1));return s=Math.min(s,t.maxTimeout),s}function uM(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function tde({error:e,attemptNumber:t,retriesConsumed:n,startTime:r,options:s}){const a=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof Xue)throw a.originalError;const i=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,u=Object.freeze({error:a,attemptNumber:t,retriesLeft:i,retriesConsumed:n});if(await s.onFailedAttempt(u),uM(r,o)<=0)throw a;const h=await s.shouldConsumeRetry(u),f=uM(r,o);if(f<=0||i<=0)throw a;if(a instanceof TypeError&&!Yue(a)){if(h)throw a;return s.signal?.throwIfAborted(),!1}if(!await s.shouldRetry(u))throw a;if(!h)return s.signal?.throwIfAborted(),!1;const m=ede(n,s),g=Math.min(m,f);return g>0&&await new Promise((b,w)=>{const x=()=>{clearTimeout(S),s.signal?.removeEventListener("abort",x),w(s.signal.reason)},S=setTimeout(()=>{s.signal?.removeEventListener("abort",x),b()},g);s.unref&&S.unref?.(),s.signal?.addEventListener("abort",x,{once:!0})}),s.signal?.throwIfAborted(),!0}async function nde(e,t={}){if(t={...t},Que(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,Ny("factor",t.factor,{min:0,allowInfinity:!1}),Ny("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),Ny("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),Ny("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(t.retries)||r<=t.retries;){n++;try{t.signal?.throwIfAborted();const a=await e(n);return t.signal?.throwIfAborted(),a}catch(a){await tde({error:a,attemptNumber:n,retriesConsumed:r,startTime:s,options:t})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Ay={},Ik={exports:{}},dM;function rde(){return dM||(dM=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function a(u,h,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var b=new s(f,m||u,g),w=n?n+h:h;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],b]:u._events[w].push(b):(u._events[w]=b,u._eventsCount++),u}function i(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)t.call(f,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},o.prototype.listeners=function(h){var f=n?n+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,b=m.length,w=new Array(b);g<b;g++)w[g]=m[g].fn;return w},o.prototype.listenerCount=function(h){var f=n?n+h:h,m=this._events[f];return m?m.fn?1:m.length:0},o.prototype.emit=function(h,f,m,g,b,w){var x=n?n+h:h;if(!this._events[x])return!1;var S=this._events[x],k=arguments.length,C,T;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),k){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,m),!0;case 4:return S.fn.call(S.context,f,m,g),!0;case 5:return S.fn.call(S.context,f,m,g,b),!0;case 6:return S.fn.call(S.context,f,m,g,b,w),!0}for(T=1,C=new Array(k-1);T<k;T++)C[T-1]=arguments[T];S.fn.apply(S.context,C)}else{var P=S.length,D;for(T=0;T<P;T++)switch(S[T].once&&this.removeListener(h,S[T].fn,void 0,!0),k){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,f);break;case 3:S[T].fn.call(S[T].context,f,m);break;case 4:S[T].fn.call(S[T].context,f,m,g);break;default:if(!C)for(D=1,C=new Array(k-1);D<k;D++)C[D-1]=arguments[D];S[T].fn.apply(S[T].context,C)}}return!0},o.prototype.on=function(h,f,m){return a(this,h,f,m,!1)},o.prototype.once=function(h,f,m){return a(this,h,f,m,!0)},o.prototype.removeListener=function(h,f,m,g){var b=n?n+h:h;if(!this._events[b])return this;if(!f)return i(this,b),this;var w=this._events[b];if(w.fn)w.fn===f&&(!g||w.once)&&(!m||w.context===m)&&i(this,b);else{for(var x=0,S=[],k=w.length;x<k;x++)(w[x].fn!==f||g&&!w[x].once||m&&w[x].context!==m)&&S.push(w[x]);S.length?this._events[b]=S.length===1?S[0]:S:i(this,b)}return this},o.prototype.removeAllListeners=function(h){var f;return h?(f=n?n+h:h,this._events[f]&&i(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(Ik)),Ik.exports}var kf={exports:{}},Ok,hM;function sde(){return hM||(hM=1,Ok=(e,t)=>(t=t||(()=>{}),e.then(n=>new Promise(r=>{r(t())}).then(()=>n),n=>new Promise(r=>{r(t())}).then(()=>{throw n})))),Ok}var fM;function ade(){if(fM)return kf.exports;fM=1;const e=sde();class t extends Error{constructor(s){super(s),this.name="TimeoutError"}}const n=(r,s,a)=>new Promise((i,o)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){i(r);return}const u=setTimeout(()=>{if(typeof a=="function"){try{i(a())}catch(m){o(m)}return}const h=typeof a=="string"?a:`Promise timed out after ${s} milliseconds`,f=a instanceof Error?a:new t(h);typeof r.cancel=="function"&&r.cancel(),o(f)},s);e(r.then(i,o),()=>{clearTimeout(u)})});return kf.exports=n,kf.exports.default=n,kf.exports.TimeoutError=t,kf.exports}var Iy={},Oy={},pM;function ide(){if(pM)return Oy;pM=1,Object.defineProperty(Oy,"__esModule",{value:!0});function e(t,n,r){let s=0,a=t.length;for(;a>0;){const i=a/2|0;let o=s+i;r(t[o],n)<=0?(s=++o,a-=i+1):a=i}return s}return Oy.default=e,Oy}var mM;function ode(){if(mM)return Iy;mM=1,Object.defineProperty(Iy,"__esModule",{value:!0});const e=ide();class t{constructor(){this._queue=[]}enqueue(r,s){s=Object.assign({priority:0},s);const a={priority:s.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(a);return}const i=e.default(this._queue,a,(o,u)=>u.priority-o.priority);this._queue.splice(i,0,a)}dequeue(){const r=this._queue.shift();return r?.run}filter(r){return this._queue.filter(s=>s.priority===r.priority).map(s=>s.run)}get size(){return this._queue.length}}return Iy.default=t,Iy}var gM;function lde(){if(gM)return Ay;gM=1,Object.defineProperty(Ay,"__esModule",{value:!0});const e=rde(),t=ade(),n=ode(),r=()=>{},s=new t.TimeoutError;class a extends e{constructor(o){var u,h,f,m;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,o=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},o),!(typeof o.intervalCap=="number"&&o.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(u=o.intervalCap)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""}\` (${typeof o.intervalCap})`);if(o.interval===void 0||!(Number.isFinite(o.interval)&&o.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(m=(f=o.interval)===null||f===void 0?void 0:f.toString())!==null&&m!==void 0?m:""}\` (${typeof o.interval})`);this._carryoverConcurrencyCount=o.carryoverConcurrencyCount,this._isIntervalIgnored=o.intervalCap===1/0||o.interval===0,this._intervalCap=o.intervalCap,this._interval=o.interval,this._queue=new o.queueClass,this._queueClass=o.queueClass,this.concurrency=o.concurrency,this._timeout=o.timeout,this._throwOnTimeout=o.throwOnTimeout===!0,this._isPaused=o.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const o=Date.now();if(this._intervalId===void 0){const u=this._intervalEnd-o;if(u<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},u)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const o=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const u=this._queue.dequeue();return u?(this.emit("active"),u(),o&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(o){if(!(typeof o=="number"&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);this._concurrency=o,this._processQueue()}async add(o,u={}){return new Promise((h,f)=>{const m=async()=>{this._pendingCount++,this._intervalCount++;try{const g=this._timeout===void 0&&u.timeout===void 0?o():t.default(Promise.resolve(o()),u.timeout===void 0?this._timeout:u.timeout,()=>{(u.throwOnTimeout===void 0?this._throwOnTimeout:u.throwOnTimeout)&&f(s)});h(await g)}catch(g){f(g)}this._next()};this._queue.enqueue(m,u),this._tryToStartAnother(),this.emit("add")})}async addAll(o,u){return Promise.all(o.map(async h=>this.add(h,u)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(o=>{const u=this._resolveEmpty;this._resolveEmpty=()=>{u(),o()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(o=>{const u=this._resolveIdle;this._resolveIdle=()=>{u(),o()}})}get size(){return this._queue.size}sizeBy(o){return this._queue.filter(o).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(o){this._timeout=o}}return Ay.default=a,Ay}var cde=lde();const wo=Kd(cde),ude=[408,425,429,500,502,503,504];let yM=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.maxQueueSizeBytes=t.maxQueueSizeBytes,"default"in wo?this.queue=new wo.default({concurrency:this.maxConcurrency}):this.queue=new wo({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t?.onFailedResponseHook}call(t,...n){return this.callWithOptions({},t,...n)}callWithOptions(t,n,...r){const s=t.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&s>0&&this.queueSizeBytes+s>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${s} bytes.`));s>0&&(this.queueSizeBytes+=s);const a=this.onFailedResponseHook;let i=this.queue.add(()=>nde(()=>n(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(o.message.startsWith("Cancel")||o.message.startsWith("TimeoutError")||o.name==="TimeoutError"||o.message.startsWith("AbortError")||o?.code==="ECONNABORTED")throw o;const u=o?.response;if(a&&await a(u))return;const h=u?.status??o?.status;if(h&&!ude.includes(+h))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return s>0&&(i=i.finally(()=>{this.queueSizeBytes-=s})),t.signal?Promise.race([i,new Promise((o,u)=>{t.signal?.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):i}};function bM(e){return typeof e?._getType=="function"}function xM(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}var Ry={exports:{}},Rk,vM;function Ix(){if(vM)return Rk;vM=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return Rk={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Rk}var Pk,wM;function Ox(){if(wM)return Pk;wM=1;var e={};return Pk=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Pk}var _M;function Om(){return _M||(_M=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Ix(),a=Ox();t=e.exports={};const i=t.re=[],o=t.safeRe=[],u=t.src=[],h=t.safeSrc=[],f=t.t={};let m=0;const g="[a-zA-Z0-9-]",b=[["\\s",1],["\\d",s],[g,r]],w=S=>{for(const[k,C]of b)S=S.split(`${k}*`).join(`${k}{0,${C}}`).split(`${k}+`).join(`${k}{1,${C}}`);return S},x=(S,k,C)=>{const T=w(k),P=m++;a(S,P,k),f[S]=P,u[P]=k,h[P]=T,i[P]=new RegExp(k,C?"g":void 0),o[P]=new RegExp(T,C?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*"),x("NUMERICIDENTIFIERLOOSE","\\d+"),x("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${g}*`),x("MAINVERSION",`(${u[f.NUMERICIDENTIFIER]})\\.(${u[f.NUMERICIDENTIFIER]})\\.(${u[f.NUMERICIDENTIFIER]})`),x("MAINVERSIONLOOSE",`(${u[f.NUMERICIDENTIFIERLOOSE]})\\.(${u[f.NUMERICIDENTIFIERLOOSE]})\\.(${u[f.NUMERICIDENTIFIERLOOSE]})`),x("PRERELEASEIDENTIFIER",`(?:${u[f.NONNUMERICIDENTIFIER]}|${u[f.NUMERICIDENTIFIER]})`),x("PRERELEASEIDENTIFIERLOOSE",`(?:${u[f.NONNUMERICIDENTIFIER]}|${u[f.NUMERICIDENTIFIERLOOSE]})`),x("PRERELEASE",`(?:-(${u[f.PRERELEASEIDENTIFIER]}(?:\\.${u[f.PRERELEASEIDENTIFIER]})*))`),x("PRERELEASELOOSE",`(?:-?(${u[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[f.PRERELEASEIDENTIFIERLOOSE]})*))`),x("BUILDIDENTIFIER",`${g}+`),x("BUILD",`(?:\\+(${u[f.BUILDIDENTIFIER]}(?:\\.${u[f.BUILDIDENTIFIER]})*))`),x("FULLPLAIN",`v?${u[f.MAINVERSION]}${u[f.PRERELEASE]}?${u[f.BUILD]}?`),x("FULL",`^${u[f.FULLPLAIN]}$`),x("LOOSEPLAIN",`[v=\\s]*${u[f.MAINVERSIONLOOSE]}${u[f.PRERELEASELOOSE]}?${u[f.BUILD]}?`),x("LOOSE",`^${u[f.LOOSEPLAIN]}$`),x("GTLT","((?:<|>)?=?)"),x("XRANGEIDENTIFIERLOOSE",`${u[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),x("XRANGEIDENTIFIER",`${u[f.NUMERICIDENTIFIER]}|x|X|\\*`),x("XRANGEPLAIN",`[v=\\s]*(${u[f.XRANGEIDENTIFIER]})(?:\\.(${u[f.XRANGEIDENTIFIER]})(?:\\.(${u[f.XRANGEIDENTIFIER]})(?:${u[f.PRERELEASE]})?${u[f.BUILD]}?)?)?`),x("XRANGEPLAINLOOSE",`[v=\\s]*(${u[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[f.XRANGEIDENTIFIERLOOSE]})(?:${u[f.PRERELEASELOOSE]})?${u[f.BUILD]}?)?)?`),x("XRANGE",`^${u[f.GTLT]}\\s*${u[f.XRANGEPLAIN]}$`),x("XRANGELOOSE",`^${u[f.GTLT]}\\s*${u[f.XRANGEPLAINLOOSE]}$`),x("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),x("COERCE",`${u[f.COERCEPLAIN]}(?:$|[^\\d])`),x("COERCEFULL",u[f.COERCEPLAIN]+`(?:${u[f.PRERELEASE]})?(?:${u[f.BUILD]})?(?:$|[^\\d])`),x("COERCERTL",u[f.COERCE],!0),x("COERCERTLFULL",u[f.COERCEFULL],!0),x("LONETILDE","(?:~>?)"),x("TILDETRIM",`(\\s*)${u[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",x("TILDE",`^${u[f.LONETILDE]}${u[f.XRANGEPLAIN]}$`),x("TILDELOOSE",`^${u[f.LONETILDE]}${u[f.XRANGEPLAINLOOSE]}$`),x("LONECARET","(?:\\^)"),x("CARETTRIM",`(\\s*)${u[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",x("CARET",`^${u[f.LONECARET]}${u[f.XRANGEPLAIN]}$`),x("CARETLOOSE",`^${u[f.LONECARET]}${u[f.XRANGEPLAINLOOSE]}$`),x("COMPARATORLOOSE",`^${u[f.GTLT]}\\s*(${u[f.LOOSEPLAIN]})$|^$`),x("COMPARATOR",`^${u[f.GTLT]}\\s*(${u[f.FULLPLAIN]})$|^$`),x("COMPARATORTRIM",`(\\s*)${u[f.GTLT]}\\s*(${u[f.LOOSEPLAIN]}|${u[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",x("HYPHENRANGE",`^\\s*(${u[f.XRANGEPLAIN]})\\s+-\\s+(${u[f.XRANGEPLAIN]})\\s*$`),x("HYPHENRANGELOOSE",`^\\s*(${u[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[f.XRANGEPLAINLOOSE]})\\s*$`),x("STAR","(<|>)?=?\\s*\\*"),x("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),x("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ry,Ry.exports)),Ry.exports}var Mk,kM;function gj(){if(kM)return Mk;kM=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Mk=r=>r?typeof r!="object"?e:r:t,Mk}var Dk,SM;function zU(){if(SM)return Dk;SM=1;const e=/^[0-9]+$/,t=(r,s)=>{if(typeof r=="number"&&typeof s=="number")return r===s?0:r<s?-1:1;const a=e.test(r),i=e.test(s);return a&&i&&(r=+r,s=+s),r===s?0:a&&!i?-1:i&&!a?1:r<s?-1:1};return Dk={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},Dk}var $k,TM;function os(){if(TM)return $k;TM=1;const e=Ox(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Ix(),{safeRe:r,t:s}=Om(),a=gj(),{compareIdentifiers:i}=zU();class o{constructor(h,f){if(f=a(f),h instanceof o){if(h.loose===!!f.loose&&h.includePrerelease===!!f.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",h,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const m=h.trim().match(f.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(g=>{if(/^[0-9]+$/.test(g)){const b=+g;if(b>=0&&b<n)return b}return g}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(e("SemVer.compare",this.version,this.options,h),!(h instanceof o)){if(typeof h=="string"&&h===this.version)return 0;h=new o(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof o||(h=new o(h,this.options)),this.major<h.major?-1:this.major>h.major?1:this.minor<h.minor?-1:this.minor>h.minor?1:this.patch<h.patch?-1:this.patch>h.patch?1:0}comparePre(h){if(h instanceof o||(h=new o(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let f=0;do{const m=this.prerelease[f],g=h.prerelease[f];if(e("prerelease compare",f,m,g),m===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(m===void 0)return-1;if(m===g)continue;return i(m,g)}while(++f)}compareBuild(h){h instanceof o||(h=new o(h,this.options));let f=0;do{const m=this.build[f],g=h.build[f];if(e("build compare",f,m,g),m===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(m===void 0)return-1;if(m===g)continue;return i(m,g)}while(++f)}inc(h,f,m){if(h.startsWith("pre")){if(!f&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const g=`-${f}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!g||g[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,m),this.inc("pre",f,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,m),this.inc("pre",f,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const g=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[g];else{let b=this.prerelease.length;for(;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);if(b===-1){if(f===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(g)}}if(f){let b=[f,g];m===!1&&(b=[f]),i(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=b):this.prerelease=b}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return $k=o,$k}var Lk,CM;function hh(){if(CM)return Lk;CM=1;const e=os();return Lk=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},Lk}var zk,EM;function dde(){if(EM)return zk;EM=1;const e=hh();return zk=(n,r)=>{const s=e(n,r);return s?s.version:null},zk}var Uk,jM;function hde(){if(jM)return Uk;jM=1;const e=hh();return Uk=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},Uk}var Fk,NM;function fde(){if(NM)return Fk;NM=1;const e=os();return Fk=(n,r,s,a,i)=>{typeof s=="string"&&(i=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,i).version}catch{return null}},Fk}var Bk,AM;function pde(){if(AM)return Bk;AM=1;const e=hh();return Bk=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),i=s.compare(a);if(i===0)return null;const o=i>0,u=o?s:a,h=o?a:s,f=!!u.prerelease.length;if(!!h.prerelease.length&&!f){if(!h.patch&&!h.minor)return"major";if(h.compareMain(u)===0)return h.minor&&!h.patch?"minor":"patch"}const g=f?"pre":"";return s.major!==a.major?g+"major":s.minor!==a.minor?g+"minor":s.patch!==a.patch?g+"patch":"prerelease"},Bk}var Hk,IM;function mde(){if(IM)return Hk;IM=1;const e=os();return Hk=(n,r)=>new e(n,r).major,Hk}var qk,OM;function gde(){if(OM)return qk;OM=1;const e=os();return qk=(n,r)=>new e(n,r).minor,qk}var Vk,RM;function yde(){if(RM)return Vk;RM=1;const e=os();return Vk=(n,r)=>new e(n,r).patch,Vk}var Gk,PM;function bde(){if(PM)return Gk;PM=1;const e=hh();return Gk=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},Gk}var Kk,MM;function di(){if(MM)return Kk;MM=1;const e=os();return Kk=(n,r,s)=>new e(n,s).compare(new e(r,s)),Kk}var Zk,DM;function xde(){if(DM)return Zk;DM=1;const e=di();return Zk=(n,r,s)=>e(r,n,s),Zk}var Wk,$M;function vde(){if($M)return Wk;$M=1;const e=di();return Wk=(n,r)=>e(n,r,!0),Wk}var Jk,LM;function yj(){if(LM)return Jk;LM=1;const e=os();return Jk=(n,r,s)=>{const a=new e(n,s),i=new e(r,s);return a.compare(i)||a.compareBuild(i)},Jk}var Yk,zM;function wde(){if(zM)return Yk;zM=1;const e=yj();return Yk=(n,r)=>n.sort((s,a)=>e(s,a,r)),Yk}var Qk,UM;function _de(){if(UM)return Qk;UM=1;const e=yj();return Qk=(n,r)=>n.sort((s,a)=>e(a,s,r)),Qk}var Xk,FM;function Rx(){if(FM)return Xk;FM=1;const e=di();return Xk=(n,r,s)=>e(n,r,s)>0,Xk}var e1,BM;function bj(){if(BM)return e1;BM=1;const e=di();return e1=(n,r,s)=>e(n,r,s)<0,e1}var t1,HM;function UU(){if(HM)return t1;HM=1;const e=di();return t1=(n,r,s)=>e(n,r,s)===0,t1}var n1,qM;function FU(){if(qM)return n1;qM=1;const e=di();return n1=(n,r,s)=>e(n,r,s)!==0,n1}var r1,VM;function xj(){if(VM)return r1;VM=1;const e=di();return r1=(n,r,s)=>e(n,r,s)>=0,r1}var s1,GM;function vj(){if(GM)return s1;GM=1;const e=di();return s1=(n,r,s)=>e(n,r,s)<=0,s1}var a1,KM;function BU(){if(KM)return a1;KM=1;const e=UU(),t=FU(),n=Rx(),r=xj(),s=bj(),a=vj();return a1=(o,u,h,f)=>{switch(u){case"===":return typeof o=="object"&&(o=o.version),typeof h=="object"&&(h=h.version),o===h;case"!==":return typeof o=="object"&&(o=o.version),typeof h=="object"&&(h=h.version),o!==h;case"":case"=":case"==":return e(o,h,f);case"!=":return t(o,h,f);case">":return n(o,h,f);case">=":return r(o,h,f);case"<":return s(o,h,f);case"<=":return a(o,h,f);default:throw new TypeError(`Invalid operator: ${u}`)}},a1}var i1,ZM;function kde(){if(ZM)return i1;ZM=1;const e=os(),t=hh(),{safeRe:n,t:r}=Om();return i1=(a,i)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;i=i||{};let o=null;if(!i.rtl)o=a.match(i.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const b=i.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let w;for(;(w=b.exec(a))&&(!o||o.index+o[0].length!==a.length);)(!o||w.index+w[0].length!==o.index+o[0].length)&&(o=w),b.lastIndex=w.index+w[1].length+w[2].length;b.lastIndex=-1}if(o===null)return null;const u=o[2],h=o[3]||"0",f=o[4]||"0",m=i.includePrerelease&&o[5]?`-${o[5]}`:"",g=i.includePrerelease&&o[6]?`+${o[6]}`:"";return t(`${u}.${h}.${f}${m}${g}`,i)},i1}var o1,WM;function Sde(){if(WM)return o1;WM=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return o1=e,o1}var l1,JM;function hi(){if(JM)return l1;JM=1;const e=/\s+/g;class t{constructor(H,L){if(L=s(L),H instanceof t)return H.loose===!!L.loose&&H.includePrerelease===!!L.includePrerelease?H:new t(H.raw,L);if(H instanceof a)return this.raw=H.value,this.set=[[H]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=H.trim().replace(e," "),this.set=this.raw.split("||").map(Z=>this.parseRange(Z.trim())).filter(Z=>Z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Z=this.set[0];if(this.set=this.set.filter(W=>!x(W[0])),this.set.length===0)this.set=[Z];else if(this.set.length>1){for(const W of this.set)if(W.length===1&&S(W[0])){this.set=[W];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let H=0;H<this.set.length;H++){H>0&&(this.formatted+="||");const L=this.set[H];for(let Z=0;Z<L.length;Z++)Z>0&&(this.formatted+=" "),this.formatted+=L[Z].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(H){const Z=((this.options.includePrerelease&&b)|(this.options.loose&&w))+":"+H,W=r.get(Z);if(W)return W;const de=this.options.loose,$=de?u[h.HYPHENRANGELOOSE]:u[h.HYPHENRANGE];H=H.replace($,ie(this.options.includePrerelease)),i("hyphen replace",H),H=H.replace(u[h.COMPARATORTRIM],f),i("comparator trim",H),H=H.replace(u[h.TILDETRIM],m),i("tilde trim",H),H=H.replace(u[h.CARETTRIM],g),i("caret trim",H);let F=H.split(" ").map(he=>C(he,this.options)).join(" ").split(/\s+/).map(he=>ee(he,this.options));de&&(F=F.filter(he=>(i("loose invalid filter",he,this.options),!!he.match(u[h.COMPARATORLOOSE])))),i("range list",F);const Q=new Map,O=F.map(he=>new a(he,this.options));for(const he of O){if(x(he))return[he];Q.set(he.value,he)}Q.size>1&&Q.has("")&&Q.delete("");const V=[...Q.values()];return r.set(Z,V),V}intersects(H,L){if(!(H instanceof t))throw new TypeError("a Range is required");return this.set.some(Z=>k(Z,L)&&H.set.some(W=>k(W,L)&&Z.every(de=>W.every($=>de.intersects($,L)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(_e(this.set[L],H,this.options))return!0;return!1}}l1=t;const n=Sde(),r=new n,s=gj(),a=Px(),i=Ox(),o=os(),{safeRe:u,t:h,comparatorTrimReplace:f,tildeTrimReplace:m,caretTrimReplace:g}=Om(),{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:w}=Ix(),x=G=>G.value==="<0.0.0-0",S=G=>G.value==="",k=(G,H)=>{let L=!0;const Z=G.slice();let W=Z.pop();for(;L&&Z.length;)L=Z.every(de=>W.intersects(de,H)),W=Z.pop();return L},C=(G,H)=>(G=G.replace(u[h.BUILD],""),i("comp",G,H),G=R(G,H),i("caret",G),G=P(G,H),i("tildes",G),G=j(G,H),i("xrange",G),G=B(G,H),i("stars",G),G),T=G=>!G||G.toLowerCase()==="x"||G==="*",P=(G,H)=>G.trim().split(/\s+/).map(L=>D(L,H)).join(" "),D=(G,H)=>{const L=H.loose?u[h.TILDELOOSE]:u[h.TILDE];return G.replace(L,(Z,W,de,$,F)=>{i("tilde",G,Z,W,de,$,F);let Q;return T(W)?Q="":T(de)?Q=`>=${W}.0.0 <${+W+1}.0.0-0`:T($)?Q=`>=${W}.${de}.0 <${W}.${+de+1}.0-0`:F?(i("replaceTilde pr",F),Q=`>=${W}.${de}.${$}-${F} <${W}.${+de+1}.0-0`):Q=`>=${W}.${de}.${$} <${W}.${+de+1}.0-0`,i("tilde return",Q),Q})},R=(G,H)=>G.trim().split(/\s+/).map(L=>U(L,H)).join(" "),U=(G,H)=>{i("caret",G,H);const L=H.loose?u[h.CARETLOOSE]:u[h.CARET],Z=H.includePrerelease?"-0":"";return G.replace(L,(W,de,$,F,Q)=>{i("caret",G,W,de,$,F,Q);let O;return T(de)?O="":T($)?O=`>=${de}.0.0${Z} <${+de+1}.0.0-0`:T(F)?de==="0"?O=`>=${de}.${$}.0${Z} <${de}.${+$+1}.0-0`:O=`>=${de}.${$}.0${Z} <${+de+1}.0.0-0`:Q?(i("replaceCaret pr",Q),de==="0"?$==="0"?O=`>=${de}.${$}.${F}-${Q} <${de}.${$}.${+F+1}-0`:O=`>=${de}.${$}.${F}-${Q} <${de}.${+$+1}.0-0`:O=`>=${de}.${$}.${F}-${Q} <${+de+1}.0.0-0`):(i("no pr"),de==="0"?$==="0"?O=`>=${de}.${$}.${F}${Z} <${de}.${$}.${+F+1}-0`:O=`>=${de}.${$}.${F}${Z} <${de}.${+$+1}.0-0`:O=`>=${de}.${$}.${F} <${+de+1}.0.0-0`),i("caret return",O),O})},j=(G,H)=>(i("replaceXRanges",G,H),G.split(/\s+/).map(L=>se(L,H)).join(" ")),se=(G,H)=>{G=G.trim();const L=H.loose?u[h.XRANGELOOSE]:u[h.XRANGE];return G.replace(L,(Z,W,de,$,F,Q)=>{i("xRange",G,Z,W,de,$,F,Q);const O=T(de),V=O||T($),he=V||T(F),I=he;return W==="="&&I&&(W=""),Q=H.includePrerelease?"-0":"",O?W===">"||W==="<"?Z="<0.0.0-0":Z="*":W&&I?(V&&($=0),F=0,W===">"?(W=">=",V?(de=+de+1,$=0,F=0):($=+$+1,F=0)):W==="<="&&(W="<",V?de=+de+1:$=+$+1),W==="<"&&(Q="-0"),Z=`${W+de}.${$}.${F}${Q}`):V?Z=`>=${de}.0.0${Q} <${+de+1}.0.0-0`:he&&(Z=`>=${de}.${$}.0${Q} <${de}.${+$+1}.0-0`),i("xRange return",Z),Z})},B=(G,H)=>(i("replaceStars",G,H),G.trim().replace(u[h.STAR],"")),ee=(G,H)=>(i("replaceGTE0",G,H),G.trim().replace(u[H.includePrerelease?h.GTE0PRE:h.GTE0],"")),ie=G=>(H,L,Z,W,de,$,F,Q,O,V,he,I)=>(T(Z)?L="":T(W)?L=`>=${Z}.0.0${G?"-0":""}`:T(de)?L=`>=${Z}.${W}.0${G?"-0":""}`:$?L=`>=${L}`:L=`>=${L}${G?"-0":""}`,T(O)?Q="":T(V)?Q=`<${+O+1}.0.0-0`:T(he)?Q=`<${O}.${+V+1}.0-0`:I?Q=`<=${O}.${V}.${he}-${I}`:G?Q=`<${O}.${V}.${+he+1}-0`:Q=`<=${Q}`,`${L} ${Q}`.trim()),_e=(G,H,L)=>{for(let Z=0;Z<G.length;Z++)if(!G[Z].test(H))return!1;if(H.prerelease.length&&!L.includePrerelease){for(let Z=0;Z<G.length;Z++)if(i(G[Z].semver),G[Z].semver!==a.ANY&&G[Z].semver.prerelease.length>0){const W=G[Z].semver;if(W.major===H.major&&W.minor===H.minor&&W.patch===H.patch)return!0}return!1}return!0};return l1}var c1,YM;function Px(){if(YM)return c1;YM=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,m){if(m=n(m),f instanceof t){if(f.loose===!!m.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),i("comparator",f,m),this.options=m,this.loose=!!m.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(f){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],g=f.match(m);if(!g)throw new TypeError(`Invalid comparator: ${f}`);this.operator=g[1]!==void 0?g[1]:"",this.operator==="="&&(this.operator=""),g[2]?this.semver=new o(g[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(i("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new o(f,this.options)}catch{return!1}return a(f,this.operator,this.semver,this.options)}intersects(f,m){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(f.value,m).test(this.value):f.operator===""?f.value===""?!0:new u(this.value,m).test(f.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||a(this.semver,"<",f.semver,m)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||a(this.semver,">",f.semver,m)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}c1=t;const n=gj(),{safeRe:r,t:s}=Om(),a=BU(),i=Ox(),o=os(),u=hi();return c1}var u1,QM;function Mx(){if(QM)return u1;QM=1;const e=hi();return u1=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},u1}var d1,XM;function Tde(){if(XM)return d1;XM=1;const e=hi();return d1=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),d1}var h1,e3;function Cde(){if(e3)return h1;e3=1;const e=os(),t=hi();return h1=(r,s,a)=>{let i=null,o=null,u=null;try{u=new t(s,a)}catch{return null}return r.forEach(h=>{u.test(h)&&(!i||o.compare(h)===-1)&&(i=h,o=new e(i,a))}),i},h1}var f1,t3;function Ede(){if(t3)return f1;t3=1;const e=os(),t=hi();return f1=(r,s,a)=>{let i=null,o=null,u=null;try{u=new t(s,a)}catch{return null}return r.forEach(h=>{u.test(h)&&(!i||o.compare(h)===1)&&(i=h,o=new e(i,a))}),i},f1}var p1,n3;function jde(){if(n3)return p1;n3=1;const e=os(),t=hi(),n=Rx();return p1=(s,a)=>{s=new t(s,a);let i=new e("0.0.0");if(s.test(i)||(i=new e("0.0.0-0"),s.test(i)))return i;i=null;for(let o=0;o<s.set.length;++o){const u=s.set[o];let h=null;u.forEach(f=>{const m=new e(f.semver.version);switch(f.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!h||n(m,h))&&(h=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),h&&(!i||n(i,h))&&(i=h)}return i&&s.test(i)?i:null},p1}var m1,r3;function Nde(){if(r3)return m1;r3=1;const e=hi();return m1=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},m1}var g1,s3;function wj(){if(s3)return g1;s3=1;const e=os(),t=Px(),{ANY:n}=t,r=hi(),s=Mx(),a=Rx(),i=bj(),o=vj(),u=xj();return g1=(f,m,g,b)=>{f=new e(f,b),m=new r(m,b);let w,x,S,k,C;switch(g){case">":w=a,x=o,S=i,k=">",C=">=";break;case"<":w=i,x=u,S=a,k="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(f,m,b))return!1;for(let T=0;T<m.set.length;++T){const P=m.set[T];let D=null,R=null;if(P.forEach(U=>{U.semver===n&&(U=new t(">=0.0.0")),D=D||U,R=R||U,w(U.semver,D.semver,b)?D=U:S(U.semver,R.semver,b)&&(R=U)}),D.operator===k||D.operator===C||(!R.operator||R.operator===k)&&x(f,R.semver))return!1;if(R.operator===C&&S(f,R.semver))return!1}return!0},g1}var y1,a3;function Ade(){if(a3)return y1;a3=1;const e=wj();return y1=(n,r,s)=>e(n,r,">",s),y1}var b1,i3;function Ide(){if(i3)return b1;i3=1;const e=wj();return b1=(n,r,s)=>e(n,r,"<",s),b1}var x1,o3;function Ode(){if(o3)return x1;o3=1;const e=hi();return x1=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),x1}var v1,l3;function Rde(){if(l3)return v1;l3=1;const e=Mx(),t=di();return v1=(n,r,s)=>{const a=[];let i=null,o=null;const u=n.sort((g,b)=>t(g,b,s));for(const g of u)e(g,r,s)?(o=g,i||(i=g)):(o&&a.push([i,o]),o=null,i=null);i&&a.push([i,null]);const h=[];for(const[g,b]of a)g===b?h.push(g):!b&&g===u[0]?h.push("*"):b?g===u[0]?h.push(`<=${b}`):h.push(`${g} - ${b}`):h.push(`>=${g}`);const f=h.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return f.length<m.length?f:r},v1}var w1,c3;function Pde(){if(c3)return w1;c3=1;const e=hi(),t=Px(),{ANY:n}=t,r=Mx(),s=di(),a=(m,g,b={})=>{if(m===g)return!0;m=new e(m,b),g=new e(g,b);let w=!1;e:for(const x of m.set){for(const S of g.set){const k=u(x,S,b);if(w=w||k!==null,k)continue e}if(w)return!1}return!0},i=[new t(">=0.0.0-0")],o=[new t(">=0.0.0")],u=(m,g,b)=>{if(m===g)return!0;if(m.length===1&&m[0].semver===n){if(g.length===1&&g[0].semver===n)return!0;b.includePrerelease?m=i:m=o}if(g.length===1&&g[0].semver===n){if(b.includePrerelease)return!0;g=o}const w=new Set;let x,S;for(const j of m)j.operator===">"||j.operator===">="?x=h(x,j,b):j.operator==="<"||j.operator==="<="?S=f(S,j,b):w.add(j.semver);if(w.size>1)return null;let k;if(x&&S){if(k=s(x.semver,S.semver,b),k>0)return null;if(k===0&&(x.operator!==">="||S.operator!=="<="))return null}for(const j of w){if(x&&!r(j,String(x),b)||S&&!r(j,String(S),b))return null;for(const se of g)if(!r(j,String(se),b))return!1;return!0}let C,T,P,D,R=S&&!b.includePrerelease&&S.semver.prerelease.length?S.semver:!1,U=x&&!b.includePrerelease&&x.semver.prerelease.length?x.semver:!1;R&&R.prerelease.length===1&&S.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const j of g){if(D=D||j.operator===">"||j.operator===">=",P=P||j.operator==="<"||j.operator==="<=",x){if(U&&j.semver.prerelease&&j.semver.prerelease.length&&j.semver.major===U.major&&j.semver.minor===U.minor&&j.semver.patch===U.patch&&(U=!1),j.operator===">"||j.operator===">="){if(C=h(x,j,b),C===j&&C!==x)return!1}else if(x.operator===">="&&!r(x.semver,String(j),b))return!1}if(S){if(R&&j.semver.prerelease&&j.semver.prerelease.length&&j.semver.major===R.major&&j.semver.minor===R.minor&&j.semver.patch===R.patch&&(R=!1),j.operator==="<"||j.operator==="<="){if(T=f(S,j,b),T===j&&T!==S)return!1}else if(S.operator==="<="&&!r(S.semver,String(j),b))return!1}if(!j.operator&&(S||x)&&k!==0)return!1}return!(x&&P&&!S&&k!==0||S&&D&&!x&&k!==0||U||R)},h=(m,g,b)=>{if(!m)return g;const w=s(m.semver,g.semver,b);return w>0?m:w<0||g.operator===">"&&m.operator===">="?g:m},f=(m,g,b)=>{if(!m)return g;const w=s(m.semver,g.semver,b);return w<0?m:w>0||g.operator==="<"&&m.operator==="<="?g:m};return w1=a,w1}var _1,u3;function Mde(){if(u3)return _1;u3=1;const e=Om(),t=Ix(),n=os(),r=zU(),s=hh(),a=dde(),i=hde(),o=fde(),u=pde(),h=mde(),f=gde(),m=yde(),g=bde(),b=di(),w=xde(),x=vde(),S=yj(),k=wde(),C=_de(),T=Rx(),P=bj(),D=UU(),R=FU(),U=xj(),j=vj(),se=BU(),B=kde(),ee=Px(),ie=hi(),_e=Mx(),G=Tde(),H=Cde(),L=Ede(),Z=jde(),W=Nde(),de=wj(),$=Ade(),F=Ide(),Q=Ode(),O=Rde(),V=Pde();return _1={parse:s,valid:a,clean:i,inc:o,diff:u,major:h,minor:f,patch:m,prerelease:g,compare:b,rcompare:w,compareLoose:x,compareBuild:S,sort:k,rsort:C,gt:T,lt:P,eq:D,neq:R,gte:U,lte:j,cmp:se,coerce:B,Comparator:ee,Range:ie,satisfies:_e,toComparators:G,maxSatisfying:H,minSatisfying:L,minVersion:Z,validRange:W,outside:de,gtr:$,ltr:F,intersects:Q,simplifyRange:O,subset:V,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},_1}Mde();function ol(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,n]=e.split(":"),r=n||"latest";if(t.includes("/")){const[s,a]=t.split("/",2);if(!s||!a)throw new Error(`Invalid identifier format: ${e}`);return[s,a,r]}else{if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,r]}}class Dde extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class $de extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function d3(e){return e!=null&&typeof e=="object"&&"name"in e&&e?.name==="LangSmithNotFoundError"}async function nt(e,t,n){let r;if(e.ok){n&&(r=await e.text());return}if(e.status===403)try{(await e.json())?.error==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${e.status} ${e.statusText}`);throw o.status=e?.status,o}if(r===void 0)try{r=await e.text()}catch{r=""}const s=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${r}`;if(e.status===404)throw new $de(s);if(e.status===409)throw new Dde(s);const a=new Error(s);throw a.status=e.status,a}const HU="ERR_CONFLICTING_ENDPOINTS";class Lde extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:HU}),this.name="ConflictingEndpointsError"}}function zde(e){return typeof e=="object"&&e!==null&&e.code===HU}var h3="[...]",Ude={result:"[Circular]"},vb=[],md=[];const Fde=new TextEncoder;function Bde(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Py(e){return Fde.encode(e)}function qU(e){if(e&&typeof e=="object"&&e!==null){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if(typeof e=="bigint")return e.toString();return e}function Hde(e){return function(t,n){return qU(n)}}function zs(e,t,n,r,s){try{const a=JSON.stringify(e,Hde(n),r);return Py(a)}catch(a){if(!a.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),Py("[Unserializable]");_s("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),typeof s>"u"&&(s=Bde()),_T(e,"",0,[],void 0,0,s);let i;try{md.length===0?i=JSON.stringify(e,n,r):i=JSON.stringify(e,qde(n),r)}catch{return Py("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;vb.length!==0;){const o=vb.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return Py(i)}}function k1(e,t,n,r){var s=Object.getOwnPropertyDescriptor(r,n);s.get!==void 0?s.configurable?(Object.defineProperty(r,n,{value:e}),vb.push([r,n,t,s])):md.push([t,n,e]):(r[n]=e,vb.push([r,n,t]))}function _T(e,t,n,r,s,a,i){a+=1;var o;if(typeof e=="object"&&e!==null){for(o=0;o<r.length;o++)if(r[o]===e){k1(Ude,e,t,s);return}if(typeof i.depthLimit<"u"&&a>i.depthLimit){k1(h3,e,t,s);return}if(typeof i.edgesLimit<"u"&&n+1>i.edgesLimit){k1(h3,e,t,s);return}if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)_T(e[o],o,o,r,e,a,i);else{e=qU(e);var u=Object.keys(e);for(o=0;o<u.length;o++){var h=u[o];_T(e[h],h,o,r,e,a,i)}}r.pop()}}function qde(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(md.length>0)for(var r=0;r<md.length;r++){var s=md[r];if(s[1]===t&&s[0]===n){n=s[2],md.splice(r,1);break}}return e.call(this,t,n)}}function f3(e,t,n){if(n)return e;const r=MU(),s=t??DU(),a=e.extra??{},i=a.metadata;return e.extra={...a,runtime:{...r,...a?.runtime},metadata:{...s,...s.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??s.revision_id}:{},...i}},e}const Vde=e=>{const t=e?.toString()??_s("TRACING_SAMPLING_RATE");if(t===void 0)return;const n=parseFloat(t);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},Gde=e=>{const n=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function Kde(e){const t=[];for await(const n of e)t.push(n);return t}function My(e){if(e!==void 0)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const Zde=async e=>{if(e?.status===429){const t=parseInt(e.headers.get("retry-after")??"10",10)*1e3;if(t>0)return await new Promise(n=>setTimeout(n,t)),!0}return!1};function p3(e){return typeof e=="number"?Number(e.toFixed(4)):e}const Wde=24*1024*1024,VU=1024*1024*1024,Jde=1e4,Yde=100,m3="https://api.smith.langchain.com";class Qde{constructor(t){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=t??VU}peek(){return this.items[0]}push(t){let n;const r=new Promise(a=>{n=a}),s=zs(t.item,`Serializing run with id: ${t.item.id}`).length;return this.sizeBytes+s>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${t.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${s} bytes.`),n(),r):(this.items.push({action:t.action,payload:t.item,otelContext:t.otelContext,apiKey:t.apiKey,apiUrl:t.apiUrl,itemPromiseResolve:n,itemPromise:r,size:s}),this.sizeBytes+=s,r)}pop({upToSizeBytes:t,upToSize:n}){if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let s=0;for(;s+(this.peek()?.size??0)<t&&this.items.length>0&&r.length<n;){const a=this.items.shift();a&&(r.push(a),s+=a.size,this.sizeBytes-=a.size)}if(r.length===0&&this.items.length>0){const a=this.items.shift();r.push(a),s+=a.size,this.sizeBytes-=a.size}return[r.map(a=>({action:a.action,item:a.payload,otelContext:a.otelContext,apiKey:a.apiKey,apiUrl:a.apiUrl,size:a.size})),()=>r.forEach(a=>a.itemPromiseResolve())]}}class Kp{get _fetch(){return this.fetchImplementation||jue(this.debug)}constructor(t={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:zi("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:zi("LANGSMITH_DEBUG")==="true"});const n=Kp.getDefaultClientConfig();if(this.tracingSampleRate=Vde(t.tracingSamplingRate),this.apiUrl=My(t.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=My(t.apiKey??n.apiKey),this.webUrl=My(t.webUrl??n.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=My(t.workspaceId??_s("WORKSPACE_ID")),this.timeout_ms=t.timeout_ms??9e4,this.caller=new yM({...t.callerOptions??{},maxRetries:4,debug:t.debug??this.debug}),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=t.debug??this.debug,this.fetchImplementation=t.fetchImplementation;const r=t.maxIngestMemoryBytes??VU;this.batchIngestCaller=new yM({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...t.callerOptions??{},onFailedResponseHook:Zde,debug:t.debug??this.debug}),this.hideInputs=t.hideInputs??t.anonymizer??n.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??n.hideOutputs,this.omitTracedRuntimeInfo=t.omitTracedRuntimeInfo??!1,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new Qde(r),this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.batchSizeLimit=t.batchSizeLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode,$U()&&(this.langSmithToOTELTranslator=new Kue),this.cachedLSEnvVarsForMetadata=DU()}static getDefaultClientConfig(){const t=_s("API_KEY"),n=_s("ENDPOINT")??m3,r=_s("HIDE_INPUTS")==="true",s=_s("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:t,webUrl:void 0,hideInputs:r,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:Gde(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const t={"User-Agent":`langsmith-js/${OU}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(t["x-tenant-id"]=this.workspaceId),t}_getPlatformEndpointPath(t){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${t}`:`/platform/${t}`}async processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}async processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}async prepareRunCreateOrUpdateInputs(t){const n={...t};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(t,n){const r=n?.toString()??"",s=`${this.apiUrl}${t}?${r}`;return await this.caller.call(async()=>{const i=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(i,`fetch ${t}`),i})}async _get(t,n){return(await this._getResponse(t,n)).json()}async*_getPaginated(t,n=new URLSearchParams,r){let s=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(s)),n.set("limit",String(a));const i=`${this.apiUrl}${t}?${n}`,o=await this.caller.call(async()=>{const h=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(h,`fetch ${t}`),h}),u=r?r(await o.json()):await o.json();if(u.length===0||(yield u,u.length<a))break;s+=u.length}}async*_getCursorPaginatedList(t,n=null,r="POST",s="runs"){const a=n?{...n}:{};for(;;){const i=JSON.stringify(a),u=await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}${t}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(f,`fetch ${t}`),f})).json();if(!u||!u[s])break;yield u[s];const h=u.cursors;if(!h||!h.next)break;a.cursor=h.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,n=!1){if(this.tracingSampleRate===void 0)return t;if(n){const r=[];for(const s of t)this.filteredPostUuids.has(s.trace_id)?s.id===s.trace_id&&this.filteredPostUuids.delete(s.trace_id):r.push(s);return r}else{const r=[];for(const s of t){const a=s.trace_id??s.id;this.filteredPostUuids.has(a)||(s.id===a?this._shouldSample()?r.push(s):this.filteredPostUuids.add(a):r.push(s))}return r}}async _getBatchSizeLimitBytes(){const t=await this._ensureServerInfo();return this.batchSizeBytesLimit??t?.batch_ingest_config?.size_limit_bytes??Wde}async _getBatchSizeLimit(){const t=await this._ensureServerInfo();return this.batchSizeLimit??t?.batch_ingest_config?.size_limit??Yde}async _getDatasetExamplesMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[s,a]=this.autoBatchQueue.pop({upToSizeBytes:t,upToSize:n});if(!s.length){a();break}const i=s.reduce((h,f)=>{const m=f.apiUrl??this.apiUrl,g=f.apiKey??this.apiKey,w=f.apiKey===this.apiKey&&f.apiUrl===this.apiUrl?"default":`${m}|${g}`;return h[w]||(h[w]=[]),h[w].push(f),h},{}),o=[];for(const[h,f]of Object.entries(i)){const m=this._processBatch(f,{apiUrl:h==="default"?void 0:h.split("|")[0],apiKey:h==="default"?void 0:h.split("|")[1]});o.push(m)}const u=Promise.all(o).finally(a);r.push(u)}return Promise.all(r)}async _processBatch(t,n){if(!t.length)return;const r=t.reduce((s,a)=>s+(a.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(t);else{const s={runCreates:t.filter(o=>o.action==="create").map(o=>o.item),runUpdates:t.filter(o=>o.action==="update").map(o=>o.item)},a=await this._ensureServerInfo();if(!this._multipartDisabled&&(a?.batch_ingest_config?.use_multipart_endpoint??!0)){const o=a?.instance_flags?.gzip_body_enabled;try{await this.multipartIngestRuns(s,{...n,useGzip:o,sizeBytes:r})}catch(u){if(d3(u))this._multipartDisabled=!0,await this.batchIngestRuns(s,{...n,sizeBytes:r});else throw u}}else await this.batchIngestRuns(s,{...n,sizeBytes:r})}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(t){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const s of t)s.item.id&&s.otelContext&&(n.set(s.item.id,s.otelContext),s.action==="create"?r.push({operation:"post",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}):r.push({operation:"patch",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(t){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.item=f3(t.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const n=this.autoBatchQueue.push(t);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),s=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>s)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(Jde),...this.fetchOptions});return await nt(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(t){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${t.status??"Unspecified status code"} ${t.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const t=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:n})}_cloneCurrentOTELContext(){const t=LU(),n=Hue();if(this.langSmithToOTELTranslator!==void 0){const r=t.getActiveSpan();if(r)return t.setSpan(n.active(),r)}}async createRun(t,n){if(!this._filterForSampling([t]).length)return;const r={...this.headers,"Content-Type":"application/json"},s=t.project_name;delete t.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:s,...t,start_time:t.start_time??Date.now()});if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const u=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:a,otelContext:u,apiKey:n?.apiKey,apiUrl:n?.apiUrl}).catch(console.error);return}const i=f3(a,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);n?.apiKey!==void 0&&(r["x-api-key"]=n.apiKey),n?.workspaceId!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=zs(i,`Creating run with id: ${i.id}`);await this.caller.call(async()=>{const u=await this._fetch(`${n?.apiUrl??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await nt(u,"create run",!0),u})}async batchIngestRuns({runCreates:t,runUpdates:n},r){if(t===void 0&&n===void 0)return;let s=await Promise.all(t?.map(u=>this.prepareRunCreateOrUpdateInputs(u))??[]),a=await Promise.all(n?.map(u=>this.prepareRunCreateOrUpdateInputs(u))??[]);if(s.length>0&&a.length>0){const u=s.reduce((f,m)=>(m.id&&(f[m.id]=m),f),{}),h=[];for(const f of a)f.id!==void 0&&u[f.id]?u[f.id]={...u[f.id],...f}:h.push(f);s=Object.values(u),a=h}const i={post:s,patch:a};if(!i.post.length&&!i.patch.length)return;const o={post:[],patch:[]};for(const u of["post","patch"]){const h=u,f=i[h].reverse();let m=f.pop();for(;m!==void 0;)o[h].push(m),m=f.pop()}if(o.post.length>0||o.patch.length>0){const u=o.post.map(h=>h.id).concat(o.patch.map(h=>h.id)).join(",");await this._postBatchIngestRuns(zs(o,`Ingesting runs with ids: ${u}`),r)}}async _postBatchIngestRuns(t,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};n?.apiKey!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n?.sizeBytes},async()=>{const s=await this._fetch(`${n?.apiUrl??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:t});return await nt(s,"batch create run",!0),s})}async multipartIngestRuns({runCreates:t,runUpdates:n},r){if(t===void 0&&n===void 0)return;const s={};let a=[];for(const m of t??[]){const g=await this.prepareRunCreateOrUpdateInputs(m);g.id!==void 0&&g.attachments!==void 0&&(s[g.id]=g.attachments),delete g.attachments,a.push(g)}let i=[];for(const m of n??[])i.push(await this.prepareRunCreateOrUpdateInputs(m));if(a.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(i.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&i.length>0){const m=a.reduce((b,w)=>(w.id&&(b[w.id]=w),b),{}),g=[];for(const b of i)b.id!==void 0&&m[b.id]?m[b.id]={...m[b.id],...b}:g.push(b);a=Object.values(m),i=g}if(a.length===0&&i.length===0)return;const h=[],f=[];for(const[m,g]of[["post",a],["patch",i]])for(const b of g){const{inputs:w,outputs:x,events:S,extra:k,error:C,serialized:T,attachments:P,...D}=b,R={inputs:w,outputs:x,events:S,extra:k,error:C,serialized:T},U=zs(D,`Serializing for multipart ingestion of run with id: ${D.id}`);f.push({name:`${m}.${D.id}`,payload:new Blob([U],{type:`application/json; length=${U.length}`})});for(const[j,se]of Object.entries(R)){if(se===void 0)continue;const B=zs(se,`Serializing ${j} for multipart ingestion of run with id: ${D.id}`);f.push({name:`${m}.${D.id}.${j}`,payload:new Blob([B],{type:`application/json; length=${B.length}`})})}if(D.id!==void 0){const j=s[D.id];if(j){delete s[D.id];for(const[se,B]of Object.entries(j)){let ee,ie;if(Array.isArray(B)?[ee,ie]=B:(ee=B.mimeType,ie=B.data),se.includes(".")){console.warn(`Skipping attachment '${se}' for run ${D.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}f.push({name:`attachment.${D.id}.${se}`,payload:new Blob([ie],{type:`${ee}; length=${ie.byteLength}`})})}}}h.push(`trace=${D.trace_id},id=${D.id}`)}await this._sendMultipartRequest(f,h.join("; "),r)}async _createNodeFetchBody(t,n){const r=[];for(const i of t)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${i.name}"\r
`,`Content-Type: ${i.payload.type}\r
\r
`])),r.push(i.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(t,n){const r=new TextEncoder;return new ReadableStream({async start(a){const i=async o=>{typeof o=="string"?a.enqueue(r.encode(o)):a.enqueue(o)};for(const o of t){await i(`--${n}\r
`),await i(`Content-Disposition: form-data; name="${o.name}"\r
`),await i(`Content-Type: ${o.payload.type}\r
\r
`);const h=o.payload.stream().getReader();try{let f;for(;!(f=await h.read()).done;)a.enqueue(f.value)}finally{h.releaseLock()}await i(`\r
`)}await i(`--${n}--\r
`),a.close()}})}async _sendMultipartRequest(t,n,r){const s="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=Eue(),i=()=>this._createNodeFetchBody(t,s),o=()=>this._createMultipartStream(t,s),u=async h=>this.batchIngestCaller.callWithOptions({sizeBytes:r?.sizeBytes},async()=>{const f=await h(),m={...this.headers,"Content-Type":`multipart/form-data; boundary=${s}`};r?.apiKey!==void 0&&(m["x-api-key"]=r.apiKey);let g=f;r?.useGzip&&typeof f=="object"&&"pipeThrough"in f&&(g=f.pipeThrough(new CompressionStream("gzip")),m["Content-Encoding"]="gzip");const b=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs/multipart`,{method:"POST",headers:m,body:g,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(b,"Failed to send multipart request",!0),b});try{let h,f=!1;!a&&!this.multipartStreamingDisabled&&PU()!=="bun"?(f=!0,h=await u(o)):h=await u(i),(!this.multipartStreamingDisabled||f)&&h.status===422&&(r?.apiUrl??this.apiUrl)!==m3&&(console.warn(`Streaming multipart upload to ${r?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,h=await u(i))}catch(h){if(d3(h))throw h;console.warn(`${h.message.trim()}

Context: ${n}`)}}async updateRun(t,n,r){bt(t),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const s={...n,id:t};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&s.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error);return}const a={...this.headers,"Content-Type":"application/json"};r?.apiKey!==void 0&&(a["x-api-key"]=r.apiKey),r?.workspaceId!==void 0&&(a["x-tenant-id"]=r.workspaceId);const i=zs(n,`Serializing payload to update run with id: ${t}`);await this.caller.call(async()=>{const o=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs/${t}`,{method:"PATCH",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(o,"update run",!0),o})}async readRun(t,{loadChildRuns:n}={loadChildRuns:!1}){bt(t);let r=await this._get(`/runs/${t}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:t,run:n,projectOpts:r}){if(n!==void 0){let s;n.session_id?s=n.session_id:r?.projectName?s=(await this.readProject({projectName:r?.projectName})).id:r?.projectId?s=r?.projectId:s=(await this.readProject({projectName:_s("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${s}/r/${n.id}?poll=true`}else if(t!==void 0){const s=await this.readRun(t);if(!s.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(t){const n=await Kde(this.listRuns({isRoot:!1,projectId:t.session_id,traceId:t.trace_id})),r={},s={};n.sort((a,i)=>(a?.dotted_order??"").localeCompare(i?.dotted_order??""));for(const a of n){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.dotted_order?.startsWith(t.dotted_order??"")&&a.id!==t.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),s[a.id]=a)}t.child_runs=r[t.id]||[];for(const a in r)a!==t.id&&(s[a].child_runs=r[a]);return t}async*listRuns(t){const{projectId:n,projectName:r,parentRunId:s,traceId:a,referenceExampleId:i,startTime:o,executionOrder:u,isRoot:h,runType:f,error:m,id:g,query:b,filter:w,traceFilter:x,treeFilter:S,limit:k,select:C,order:T}=t;let P=[];if(n&&(P=Array.isArray(n)?n:[n]),r){const j=Array.isArray(r)?r:[r],se=await Promise.all(j.map(B=>this.readProject({projectName:B}).then(ee=>ee.id)));P.push(...se)}const D=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],R={session:P.length?P:null,run_type:f,reference_example:i,query:b,filter:w,trace_filter:x,tree_filter:S,execution_order:u,parent_run:s,start_time:o?o.toISOString():null,error:m,id:g,limit:k,trace:a,select:C||D,is_root:h,order:T};R.select.includes("child_run_ids")&&IU("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let U=0;for await(const j of this._getCursorPaginatedList("/runs/query",R))if(k){if(U>=k)break;if(j.length+U>k){yield*j.slice(0,k-U);break}U+=j.length,yield*j}else yield*j}async*listGroupRuns(t){const{projectId:n,projectName:r,groupBy:s,filter:a,startTime:i,endTime:o,limit:u,offset:h}=t,m={session_id:n||(await this.readProject({projectName:r})).id,group_by:s,filter:a,start_time:i?i.toISOString():null,end_time:o?o.toISOString():null,limit:Number(u)||100};let g=Number(h)||0;const b="/runs/group",w=`${this.apiUrl}${b}`;for(;;){const x={...m,offset:g},S=Object.fromEntries(Object.entries(x).filter(([R,U])=>U!==void 0)),k=JSON.stringify(S),T=await(await this.caller.call(async()=>{const R=await this._fetch(w,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:k});return await nt(R,`Failed to fetch ${b}`),R})).json(),{groups:P,total:D}=T;if(P.length===0)break;for(const R of P)yield R;if(g+=P.length,g>=D)break}}async getRunStats({id:t,trace:n,parentRun:r,runType:s,projectNames:a,projectIds:i,referenceExampleIds:o,startTime:u,endTime:h,error:f,query:m,filter:g,traceFilter:b,treeFilter:w,isRoot:x,dataSourceType:S}){let k=i||[];a&&(k=[...i||[],...await Promise.all(a.map(U=>this.readProject({projectName:U}).then(j=>j.id)))]);const T=Object.fromEntries(Object.entries({id:t,trace:n,parent_run:r,run_type:s,session:k,reference_example:o,start_time:u,end_time:h,error:f,query:m,filter:g,trace_filter:b,tree_filter:w,is_root:x,data_source_type:S}).filter(([U,j])=>j!==void 0)),P=JSON.stringify(T);return await(await this.caller.call(async()=>{const U=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:P});return await nt(U,"get run stats"),U})).json()}async shareRun(t,{shareId:n}={}){const r={run_id:t,share_token:n||_f()};bt(t);const s=JSON.stringify(r),i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await nt(o,"share run"),o})).json();if(i===null||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(t){bt(t),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(n,"unshare run",!0),n})}async readRunSharedLink(t){bt(t);const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,"read run shared link"),s})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(t,{runIds:n}={}){const r=new URLSearchParams({share_token:t});if(n!==void 0)for(const i of n)r.append("id",i);return bt(t),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${t}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(i,"list shared runs"),i})).json()}async readDatasetSharedSchema(t,n){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:n})).id),bt(t);const s=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(a,"read dataset shared schema"),a})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(t,n){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:n})).id);const r={dataset_id:t};bt(t);const s=JSON.stringify(r),i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await nt(o,"share dataset"),o})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(t){bt(t),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(n,"unshare dataset",!0),n})}async readSharedDataset(t){return bt(t),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${t}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,"read shared dataset"),s})).json()}async listSharedExamples(t,n){const r={};n?.exampleIds&&(r.id=n.exampleIds);const s=new URLSearchParams;Object.entries(r).forEach(([o,u])=>{Array.isArray(u)?u.forEach(h=>s.append(o,h)):s.append(o,u)});const a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${t}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(o,"list shared examples"),o}),i=await a.json();if(!a.ok)throw"detail"in i?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(i.detail)?i.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return i.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:t,description:n=null,metadata:r=null,upsert:s=!1,projectExtra:a=null,referenceDatasetId:i=null}){const o=s?"?upsert=true":"",u=`${this.apiUrl}/sessions${o}`,h=a||{};r&&(h.metadata=r);const f={name:t,extra:h,description:n};i!==null&&(f.reference_dataset_id=i);const m=JSON.stringify(f);return await(await this.caller.call(async()=>{const w=await this._fetch(u,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:m});return await nt(w,"create project"),w})).json()}async updateProject(t,{name:n=null,description:r=null,metadata:s=null,projectExtra:a=null,endTime:i=null}){const o=`${this.apiUrl}/sessions/${t}`;let u=a;s&&(u={...u||{},metadata:s});const h=JSON.stringify({name:n,extra:u,description:r,end_time:i?new Date(i).toISOString():null});return await(await this.caller.call(async()=>{const g=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await nt(g,"update project"),g})).json()}async hasProject({projectId:t,projectName:n}){let r="/sessions";const s=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)bt(t),r+=`/${t}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${r}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(i,"has project"),i});try{const i=await a.json();return a.ok?Array.isArray(i)?i.length>0:!0:!1}catch{return!1}}async readProject({projectId:t,projectName:n,includeStats:r}){let s="/sessions";const a=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)bt(t),s+=`/${t}`;else if(n!==void 0)a.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const i=await this._get(s,a);let o;if(Array.isArray(i)){if(i.length===0)throw new Error(`Project[id=${t}, name=${n}] not found`);o=i[0]}else o=i;return o}async getProjectUrl({projectId:t,projectName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:t,projectName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`}async getDatasetUrl({datasetId:t,datasetName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:t,datasetName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const t=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",t))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:t,name:n,nameContains:r,referenceDatasetId:s,referenceDatasetName:a,includeStats:i,datasetVersion:o,referenceFree:u,metadata:h}={}){const f=new URLSearchParams;if(t!==void 0)for(const m of t)f.append("id",m);if(n!==void 0&&f.append("name",n),r!==void 0&&f.append("name_contains",r),s!==void 0)f.append("reference_dataset",s);else if(a!==void 0){const m=await this.readDataset({datasetName:a});f.append("reference_dataset",m.id)}i!==void 0&&f.append("include_stats",i.toString()),o!==void 0&&f.append("dataset_version",o),u!==void 0&&f.append("reference_free",u.toString()),h!==void 0&&f.append("metadata",JSON.stringify(h));for await(const m of this._getPaginated("/sessions",f))yield*m}async deleteProject({projectId:t,projectName:n}){let r;if(t===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?r=(await this.readProject({projectName:n})).id:r=t,bt(r),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,`delete session ${r} (${n})`,!0),s})}async uploadCsv({csvFile:t,fileName:n,inputKeys:r,outputKeys:s,description:a,dataType:i,name:o}){const u=`${this.apiUrl}/datasets/upload`,h=new FormData;return h.append("file",t,n),r.forEach(g=>{h.append("input_keys",g)}),s.forEach(g=>{h.append("output_keys",g)}),a&&h.append("description",a),i&&h.append("data_type",i),o&&h.append("name",o),await(await this.caller.call(async()=>{const g=await this._fetch(u,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await nt(g,"upload CSV"),g})).json()}async createDataset(t,{description:n,dataType:r,inputsSchema:s,outputsSchema:a,metadata:i}={}){const o={name:t,description:n,extra:i?{metadata:i}:void 0};r&&(o.data_type=r),s&&(o.inputs_schema_definition=s),a&&(o.outputs_schema_definition=a);const u=JSON.stringify(o);return await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await nt(m,"create dataset"),m})).json()}async readDataset({datasetId:t,datasetName:n}){let r="/datasets";const s=new URLSearchParams({limit:"1"});if(t&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(t)bt(t),r+=`/${t}`;else if(n)s.append("name",n);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,s);let i;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${t}, name=${n}] not found`);i=a[0]}else i=a;return i}async hasDataset({datasetId:t,datasetName:n}){try{return await this.readDataset({datasetId:t,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:t,datasetName:n,fromVersion:r,toVersion:s}){let a=t;if(a===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:n})).id);const i=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,i)}async readDatasetOpenaiFinetuning({datasetId:t,datasetName:n}){const r="/datasets";if(t===void 0)if(n!==void 0)t=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${t}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:t=100,offset:n=0,datasetIds:r,datasetName:s,datasetNameContains:a,metadata:i}={}){const o="/datasets",u=new URLSearchParams({limit:t.toString(),offset:n.toString()});if(r!==void 0)for(const h of r)u.append("id",h);s!==void 0&&u.append("name",s),a!==void 0&&u.append("name_contains",a),i!==void 0&&u.append("metadata",JSON.stringify(i));for await(const h of this._getPaginated(o,u))yield*h}async updateDataset(t){const{datasetId:n,datasetName:r,...s}=t;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;bt(a);const i=JSON.stringify(s);return await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(u,"update dataset"),u})).json()}async updateDatasetTag(t){const{datasetId:n,datasetName:r,asOf:s,tag:a}=t;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const i=n??(await this.readDataset({datasetName:r})).id;bt(i);const o=JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:a});await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${i}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await nt(u,"update dataset tags",!0),u})}async deleteDataset({datasetId:t,datasetName:n}){let r="/datasets",s=t;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(s=(await this.readDataset({datasetName:n})).id),s!==void 0)bt(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(a,`delete ${r}`,!0),a})}async indexDataset({datasetId:t,datasetName:n,tag:r}){let s=t;if(!s&&!n)throw new Error("Must provide either datasetName or datasetId");if(s&&n)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:n})).id),bt(s);const i=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(u,"index dataset"),u})).json()}async similarExamples(t,n,r,{filter:s}={}){const a={limit:r,inputs:t};s!==void 0&&(a.filter=s),bt(n);const i=JSON.stringify(a);return(await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:i});return await nt(h,"fetch similar examples"),h})).json()).examples}async createExample(t,n,r){if(g3(t)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=n?r?.datasetId:t.dataset_id;const a=n?r?.datasetName:t.dataset_name;if(s===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:a})).id);const i=(n?r?.createdAt:t.created_at)||new Date;let o;g3(t)?o=t:o={inputs:t,outputs:n,created_at:i?.toISOString(),id:r?.exampleId,metadata:r?.metadata,split:r?.split,source_run_id:r?.sourceRunId,use_source_run_io:r?.useSourceRunIO,use_source_run_attachments:r?.useSourceRunAttachments,attachments:r?.attachments};const u=await this._uploadExamplesMultipart(s,[o]);return await this.readExample(u.example_ids?.[0]??_f())}async createExamples(t){if(Array.isArray(t)){if(t.length===0)return[];const C=t;let T=C[0].dataset_id;const P=C[0].dataset_name;if(T===void 0&&P===void 0)throw new Error("Must provide either datasetName or datasetId");if(T!==void 0&&P!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");T===void 0&&(T=(await this.readDataset({datasetName:P})).id);const D=await this._uploadExamplesMultipart(T,C);return await Promise.all(D.example_ids.map(U=>this.readExample(U)))}const{inputs:n,outputs:r,metadata:s,splits:a,sourceRunIds:i,useSourceRunIOs:o,useSourceRunAttachments:u,attachments:h,exampleIds:f,datasetId:m,datasetName:g}=t;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let b=m;const w=g;if(b===void 0&&w===void 0)throw new Error("Must provide either datasetName or datasetId");if(b!==void 0&&w!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");b===void 0&&(b=(await this.readDataset({datasetName:w})).id);const x=n.map((C,T)=>({dataset_id:b,inputs:C,outputs:r?.[T],metadata:s?.[T],split:a?.[T],id:f?.[T],attachments:h?.[T],source_run_id:i?.[T],use_source_run_io:o?.[T],use_source_run_attachments:u?.[T]})),S=await this._uploadExamplesMultipart(b,x);return await Promise.all(S.example_ids.map(C=>this.readExample(C)))}async createLLMExample(t,n,r){return this.createExample({input:t},{output:n},r)}async createChatExample(t,n,r){const s=t.map(i=>bM(i)?xM(i):i),a=bM(n)?xM(n):n;return this.createExample({input:s},{output:a},r)}async readExample(t){bt(t);const n=`/examples/${t}`,r=await this._get(n),{attachment_urls:s,...a}=r,i=a;return s&&(i.attachments=Object.entries(s).reduce((o,[u,h])=>(o[u.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},o),{})),i}async*listExamples({datasetId:t,datasetName:n,exampleIds:r,asOf:s,splits:a,inlineS3Urls:i,metadata:o,limit:u,offset:h,filter:f,includeAttachments:m}={}){let g;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)g=t;else if(n!==void 0)g=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const b=new URLSearchParams({dataset:g}),w=s?typeof s=="string"?s:s?.toISOString():void 0;w&&b.append("as_of",w);const x=i??!0;if(b.append("inline_s3_urls",x.toString()),r!==void 0)for(const k of r)b.append("id",k);if(a!==void 0)for(const k of a)b.append("splits",k);if(o!==void 0){const k=JSON.stringify(o);b.append("metadata",k)}u!==void 0&&b.append("limit",u.toString()),h!==void 0&&b.append("offset",h.toString()),f!==void 0&&b.append("filter",f),m===!0&&["attachment_urls","outputs","metadata"].forEach(k=>b.append("select",k));let S=0;for await(const k of this._getPaginated("/examples",b)){for(const C of k){const{attachment_urls:T,...P}=C,D=P;T&&(D.attachments=Object.entries(T).reduce((R,[U,j])=>(R[U.slice(11)]={presigned_url:j.presigned_url,mime_type:j.mime_type||void 0},R),{})),yield D,S++}if(u!==void 0&&S>=u)break}}async deleteExample(t){bt(t);const n=`/examples/${t}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(r,`delete ${n}`,!0),r})}async deleteExamples(t,n){if(t.forEach(r=>bt(r)),n?.hardDelete){const r=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:t,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,"hard delete examples",!0),s})}else{const r=new URLSearchParams;t.forEach(s=>r.append("example_ids",s)),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/examples?${r.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,"delete examples",!0),s})}}async updateExample(t,n){let r;n?r=t:r=t.id,bt(r);let s;n?s={id:r,...n}:s=t;let a;return s.dataset_id!==void 0?a=s.dataset_id:a=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[s])}async updateExamples(t){let n;return t[0].dataset_id===void 0?n=(await this.readExample(t[0].id)).dataset_id:n=t[0].dataset_id,this._updateExamplesMultipart(n,t)}async readDatasetVersion({datasetId:t,datasetName:n,asOf:r,tag:s}){let a;if(t?a=t:a=(await this.readDataset({datasetName:n})).id,bt(a),r&&s||!r&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const i=new URLSearchParams;return r!==void 0&&i.append("as_of",typeof r=="string"?r:r.toISOString()),s!==void 0&&i.append("tag",s),await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${a}/version?${i.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(u,"read dataset version"),u})).json()}async listDatasetSplits({datasetId:t,datasetName:n,asOf:r}){let s;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?s=(await this.readDataset({datasetName:n})).id:s=t,bt(s);const a=new URLSearchParams,i=r?typeof r=="string"?r:r?.toISOString():void 0;return i&&a.append("as_of",i),await this._get(`/datasets/${s}/splits`,a)}async updateDatasetSplits({datasetId:t,datasetName:n,splitName:r,exampleIds:s,remove:a=!1}){let i;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?i=(await this.readDataset({datasetName:n})).id:i=t,bt(i);const o={split_name:r,examples:s.map(h=>(bt(h),h)),remove:a},u=JSON.stringify(o);await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${i}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await nt(h,"update dataset splits",!0),h})}async createFeedback(t,n,{score:r,value:s,correction:a,comment:i,sourceInfo:o,feedbackSourceType:u="api",sourceRunId:h,feedbackId:f,feedbackConfig:m,projectId:g,comparativeExperimentId:b}){if(!t&&!g)throw new Error("One of runId or projectId must be provided");if(t&&g)throw new Error("Only one of runId or projectId can be provided");const w={type:u??"api",metadata:o??{}};h!==void 0&&w?.metadata!==void 0&&!w.metadata.__run&&(w.metadata.__run={run_id:h}),w?.metadata!==void 0&&w.metadata.__run?.run_id!==void 0&&bt(w.metadata.__run.run_id);const x={id:f??_f(),run_id:t,key:n,score:p3(r),value:s,correction:a,comment:i,feedback_source:w,comparative_experiment_id:b,feedbackConfig:m,session_id:g},S=JSON.stringify(x),k=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const C=await this._fetch(k,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:S});return await nt(C,"create feedback",!0),C}),x}async updateFeedback(t,{score:n,value:r,correction:s,comment:a}){const i={};n!=null&&(i.score=p3(n)),r!=null&&(i.value=r),s!=null&&(i.correction=s),a!=null&&(i.comment=a),bt(t);const o=JSON.stringify(i);await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/feedback/${t}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await nt(u,"update feedback",!0),u})}async readFeedback(t){bt(t);const n=`/feedback/${t}`;return await this._get(n)}async deleteFeedback(t){bt(t);const n=`/feedback/${t}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:t,feedbackKeys:n,feedbackSourceTypes:r}={}){const s=new URLSearchParams;if(t)for(const a of t)bt(a),s.append("run",a);if(n)for(const a of n)s.append("key",a);if(r)for(const a of r)s.append("source",a);for await(const a of this._getPaginated("/feedback",s))yield*a}async createPresignedFeedbackToken(t,n,{expiration:r,feedbackConfig:s}={}){const a={run_id:t,feedback_key:n,feedback_config:s};r?typeof r=="string"?a.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(a.expires_in=r):a.expires_in={hours:3};const i=JSON.stringify(a);return await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(u,"create presigned feedback token"),u})).json()}async createComparativeExperiment({name:t,experimentIds:n,referenceDatasetId:r,createdAt:s,description:a,metadata:i,id:o}){if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const u={id:o,name:t,experiment_ids:n,reference_dataset_id:r,description:a,created_at:(s??new Date)?.toISOString(),extra:{}};i&&(u.extra.metadata=i);const h=JSON.stringify(u);return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await nt(m,"create comparative experiment"),m})).json()}async*listPresignedFeedbackTokens(t){bt(t);const n=new URLSearchParams({run_id:t});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(t){let n;return"results"in t?n=t.results:Array.isArray(t)?n=t:n=[t],n}async _logEvaluationFeedback(t,n,r){const s=this._selectEvalResults(t),a=[];for(const i of s){let o=r||{};i.evaluatorInfo&&(o={...i.evaluatorInfo,...o});let u=null;i.targetRunId?u=i.targetRunId:n&&(u=n.id),a.push(await this.createFeedback(u,i.key,{score:i.score,value:i.value,comment:i.comment,correction:i.correction,sourceInfo:o,sourceRunId:i.sourceRunId,feedbackConfig:i.feedbackConfig,feedbackSourceType:"model"}))}return[s,a]}async logEvaluationFeedback(t,n,r){const[s]=await this._logEvaluationFeedback(t,n,r);return s}async*listAnnotationQueues(t={}){const{queueIds:n,name:r,nameContains:s,limit:a}=t,i=new URLSearchParams;n&&n.forEach((u,h)=>{bt(u,`queueIds[${h}]`),i.append("ids",u)}),r&&i.append("name",r),s&&i.append("name_contains",s),i.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const u of this._getPaginated("/annotation-queues",i))if(yield*u,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(t){const{name:n,description:r,queueId:s,rubricInstructions:a}=t,i={name:n,description:r,id:s||_f(),rubric_instructions:a},o=JSON.stringify(Object.fromEntries(Object.entries(i).filter(([h,f])=>f!==void 0)));return(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await nt(h,"create annotation queue"),h})).json()}async readAnnotationQueue(t){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(t,n){const{name:r,description:s,rubricInstructions:a}=n,i=JSON.stringify({name:r,description:s,rubric_instructions:a});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(o,"update annotation queue",!0),o})}async deleteAnnotationQueue(t){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(t,n){const r=JSON.stringify(n.map((s,a)=>bt(s,`runIds[${a}]`).toString()));await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await nt(s,"add runs to annotation queue",!0),s})}async getRunFromAnnotationQueue(t,n){const r=`/annotation-queues/${bt(t,"queueId")}/run`;return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(a,"get run from annotation queue"),a})).json()}async deleteRunFromAnnotationQueue(t,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}/runs/${bt(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(t){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${bt(t,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(t){const n=await this._getSettings();return t=="-"||n.tenant_handle===t}async _ownerConflictError(t,n){const r=await this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(t){const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(s,"get latest commit hash"),s})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(t,n){const[r,s,a]=ol(t),i=JSON.stringify({like:n});return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/likes/${r}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(u,`${n?"like":"unlike"} prompt`),u})).json()}async _getPromptUrl(t){const[n,r,s]=ol(t);if(await this._currentTenantIsOwner(n)){const a=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${r}/${s.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(t){return!!await this.getPrompt(t)}async likePrompt(t){return this._likeOrUnlikePrompt(t,!0)}async unlikePrompt(t){return this._likeOrUnlikePrompt(t,!1)}async*listCommits(t){for await(const n of this._getPaginated(`/commits/${t}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(t){const n=new URLSearchParams;n.append("sort_field",t?.sortField??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!t?.isArchived).toString()),t?.isPublic!==void 0&&n.append("is_public",t.isPublic.toString()),t?.query&&n.append("query",t.query);for await(const r of this._getPaginated("/repos",n,s=>s.repos))yield*r}async getPrompt(t){const[n,r,s]=ol(t),i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return o?.status===404?null:(await nt(o,"get prompt"),o)}))?.json();return i?.repo?i.repo:null}async createPrompt(t,n){const r=await this._getSettings();if(n?.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,a,i]=ol(t);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const o={repo_handle:a,...n?.description&&{description:n.description},...n?.readme&&{readme:n.readme},...n?.tags&&{tags:n.tags},is_public:!!n?.isPublic},u=JSON.stringify(o),h=await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await nt(m,"create prompt"),m}),{repo:f}=await h.json();return f}async createCommit(t,n,r){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[s,a,i]=ol(t),o=r?.parentCommitHash==="latest"||!r?.parentCommitHash?await this._getLatestCommitHash(`${s}/${a}`):r?.parentCommitHash,u={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},h=JSON.stringify(u),m=await(await this.caller.call(async()=>{const g=await this._fetch(`${this.apiUrl}/commits/${s}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await nt(g,"create commit"),g})).json();return this._getPromptUrl(`${s}/${a}${m.commit_hash?`:${m.commit_hash}`:""}`)}async updateExamplesMultipart(t,n=[]){return this._updateExamplesMultipart(t,n)}async _updateExamplesMultipart(t,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of n){const o=i.id,u={...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split}},h=zs(u,`Serializing body for example with id: ${o}`),f=new Blob([h],{type:"application/json"});if(r.append(o,f),i.inputs){const m=zs(i.inputs,`Serializing inputs for example with id: ${o}`),g=new Blob([m],{type:"application/json"});r.append(`${o}.inputs`,g)}if(i.outputs){const m=zs(i.outputs,`Serializing outputs whle updating example with id: ${o}`),g=new Blob([m],{type:"application/json"});r.append(`${o}.outputs`,g)}if(i.attachments)for(const[m,g]of Object.entries(i.attachments)){let b,w;Array.isArray(g)?[b,w]=g:(b=g.mimeType,w=g.data);const x=new Blob([w],{type:`${b}; length=${w.byteLength}`});r.append(`${o}.attachment.${m}`,x)}if(i.attachments_operations){const m=zs(i.attachments_operations,`Serializing attachments while updating example with id: ${o}`),g=new Blob([m],{type:"application/json"});r.append(`${o}.attachments_operations`,g)}}const s=t??n[0]?.dataset_id;return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${s}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await nt(i,"update examples"),i})).json()}async uploadExamplesMultipart(t,n=[]){return this._uploadExamplesMultipart(t,n)}async _uploadExamplesMultipart(t,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const a of n){const i=(a.id??_f()).toString(),o={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},u=zs(o,`Serializing body for uploaded example with id: ${i}`),h=new Blob([u],{type:"application/json"});if(r.append(i,h),a.inputs){const f=zs(a.inputs,`Serializing inputs for uploaded example with id: ${i}`),m=new Blob([f],{type:"application/json"});r.append(`${i}.inputs`,m)}if(a.outputs){const f=zs(a.outputs,`Serializing outputs for uploaded example with id: ${i}`),m=new Blob([f],{type:"application/json"});r.append(`${i}.outputs`,m)}if(a.attachments)for(const[f,m]of Object.entries(a.attachments)){let g,b;Array.isArray(m)?[g,b]=m:(g=m.mimeType,b=m.data);const w=new Blob([b],{type:`${g}; length=${b.byteLength}`});r.append(`${i}.attachment.${f}`,w)}}return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${t}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await nt(a,"upload examples"),a})).json()}async updatePrompt(t,n){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[r,s]=ol(t);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if(n?.description!==void 0&&(a.description=n.description),n?.readme!==void 0&&(a.readme=n.readme),n?.tags!==void 0&&(a.tags=n.tags),n?.isPublic!==void 0&&(a.is_public=n.isPublic),n?.isArchived!==void 0&&(a.is_archived=n.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const i=JSON.stringify(a);return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/repos/${r}/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await nt(u,"update prompt"),u})).json()}async deletePrompt(t){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[n,r,s]=ol(t);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(i,"delete prompt"),i})).json()}async pullPromptCommit(t,n){const[r,s,a]=ol(t),o=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/commits/${r}/${s}/${a}${n?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await nt(u,"pull prompt commit"),u})).json();return{owner:r,repo:s,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(t,n){const r=await this.pullPromptCommit(t,{includeModel:n?.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(t,n){return await this.promptExists(t)?n&&Object.keys(n).some(s=>s!=="object")&&await this.updatePrompt(t,{description:n?.description,readme:n?.readme,tags:n?.tags,isPublic:n?.isPublic}):await this.createPrompt(t,{description:n?.description,readme:n?.readme,tags:n?.tags,isPublic:n?.isPublic}),n?.object?await this.createCommit(t,n?.object,{parentCommitHash:n?.parentCommitHash}):await this._getPromptUrl(t)}async clonePublicDataset(t,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:s}=n,[a,i]=this.parseTokenOrUrl(t,r),o=new Kp({apiUrl:a,apiKey:"placeholder"}),u=await o.readSharedDataset(i),h=s||u.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const f=await o.listSharedExamples(i),m=await this.createDataset(h,{description:u.description,dataType:u.data_type||"kv",inputsSchema:u.inputs_schema_definition??void 0,outputsSchema:u.outputs_schema_definition??void 0});try{await this.createExamples({inputs:f.map(g=>g.inputs),outputs:f.flatMap(g=>g.outputs?[g.outputs]:[]),datasetId:m.id})}catch(g){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),g}}parseTokenOrUrl(t,n,r=2,s="dataset"){try{return bt(t),[n,t]}catch{}try{const i=new URL(t).pathname.split("/").filter(o=>o!=="");if(i.length>=r){const o=i[i.length-r];return[n,o]}else throw new Error(`Invalid public ${s} URL: ${t}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${t}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(t=>setTimeout(t,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:t})=>t),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await que()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush()}}function g3(e){return"dataset_id"in e||"dataset_name"in e}const Xde=e=>!!["TRACING_V2","TRACING"].find(n=>_s(n)==="true"),kl=Symbol.for("lc:context_variables"),S1=Symbol.for("langsmith:replica_trace_roots");function y3(e,t){if(kl in e)return e[kl][t]}function ehe(e,t,n){const r=kl in e?e[kl]:{};r[t]=n,e[kl]=r}const Yf="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function b3(e){const n=Object.keys(e).sort().map(r=>`${r}:${e[r]??""}`).join("|");return Jf(n,Yf)}function the(e){return e.replace(/[-:.]/g,"")}function GU(e,t=1){const n=t.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${n}Z`}function KU(e,t,n=1){const r=GU(e,n);return{dottedOrder:the(r)+t,microsecondPrecisionDatestring:r}}class wb{constructor(t,n,r,s){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=n,this.project_name=r,this.replicas=s}static fromHeader(t){const n=t.split(",");let r={},s=[],a,i;for(const o of n){const[u,h]=o.split("="),f=decodeURIComponent(h);u==="langsmith-metadata"?r=JSON.parse(f):u==="langsmith-tags"?s=f.split(","):u==="langsmith-project"?a=f:u==="langsmith-replicas"&&(i=JSON.parse(f))}return new wb(r,s,a,i)}toHeader(){const t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&t.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),t.join(",")}}class xs{constructor(t){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),nhe(t)){Object.assign(this,{...t});return}const n=xs.getDefaultConfig(),{metadata:r,...s}=t,a=s.client??xs.getSharedClient(),i={...r,...s?.extra?.metadata};if(s.extra={...s.extra,metadata:i},"id"in s&&s.id==null&&delete s.id,Object.assign(this,{...n,...s,client:a}),this.execution_order??=1,this.child_execution_order??=1,this.dotted_order||(this._serialized_start_time=GU(this.start_time,this.execution_order)),this.id||(this.id=Aue(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=ihe(this.replicas),!this.dotted_order){const{dottedOrder:o}=KU(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+o:this.dotted_order=o}}set metadata(t){this.extra={...this.extra,metadata:{...this.extra?.metadata,...t}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){const t=Date.now();return{run_type:"chain",project_name:AU(),child_runs:[],api_url:zi("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:zi("LANGCHAIN_API_KEY"),caller_options:{},start_time:t,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return xs.sharedClient||(xs.sharedClient=new Kp),xs.sharedClient}createChild(t){const n=this.child_execution_order+1,r=this.replicas?.map(f=>{const{reroot:m,...g}=f;return g}),s=t.replicas??r,a=new xs({...t,parent_run:this,project_name:this.project_name,replicas:s,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});kl in this&&(a[kl]=this[kl]);const i=Symbol.for("lc:child_config"),o=t.extra?.[i]??this.extra[i];if(she(o)){const f={...o},m=rhe(f.callbacks)?f.callbacks.copy?.():void 0;m&&(Object.assign(m,{_parentRunId:a.id}),m.handlers?.find(ZU)?.updateFromRunTree?.(a),f.callbacks=m),a.extra[i]=f}const u=new Set;let h=this;for(;h!=null&&!u.has(h.id);)u.add(h.id),h.child_execution_order=Math.max(h.child_execution_order,n),h=h.parent_run;return this.child_runs.push(a),a}async end(t,n,r=Date.now(),s){this.outputs=this.outputs??t,this.error=this.error??n,this.end_time=this.end_time??r,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(t,n,r=!0){const s=t.extra??{};if(s?.runtime?.library===void 0&&(s.runtime||(s.runtime={}),n))for(const[o,u]of Object.entries(n))s.runtime[o]||(s.runtime[o]=u);let a,i;return r?(i=t.parent_run?.id??t.parent_run_id,a=[]):(a=t.child_runs.map(o=>this._convertToCreate(o,n,r)),i=void 0),{id:t.id,name:t.name,start_time:t._serialized_start_time??t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:s,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:a,parent_run_id:i,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments,events:t.events}}_sliceParentId(t,n){if(n.dotted_order){const r=n.dotted_order.split(".");let s=null;for(let a=0;a<r.length;a++)if(r[a].slice(-36)===t){s=a;break}if(s!==null){const a=r.slice(s+1);n.dotted_order=a.join("."),a.length>0?n.trace_id=a[0].slice(-36):n.trace_id=n.id}}n.parent_run_id===t&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(t,n){const r=y3(this,S1)??{};r[t]=n,ehe(this,S1,r);for(const s of this.child_runs)s._setReplicaTraceRoot(t,n)}_remapForProject(t){const{projectName:n,runtimeEnv:r,excludeChildRuns:s=!0,reroot:a=!1,distributedParentId:i,apiUrl:o,apiKey:u,workspaceId:h}=t,f=this._convertToCreate(this,r,s);if(n===this.project_name)return{...f,session_name:n};if(a){if(i)this._sliceParentId(i,f);else if(f.parent_run_id=void 0,f.dotted_order){const C=f.dotted_order.split(".");C.length>0&&(f.dotted_order=C[C.length-1],f.trace_id=f.id)}const k=b3({projectName:n,apiUrl:o,apiKey:u,workspaceId:h});this._setReplicaTraceRoot(k,f.id)}let m;if(!a){const k=y3(this,S1)??{},C=b3({projectName:n,apiUrl:o,apiKey:u,workspaceId:h});if(m=k[C],m&&(f.trace_id=m,f.dotted_order)){const T=f.dotted_order.split(".");let P=null;for(let D=0;D<T.length;D++)if(T[D].slice(-36)===m){P=D;break}if(P!==null){const D=T.slice(P);f.dotted_order=D.join(".")}}}const g=f.id,b=Jf(`${g}:${n}`,Yf);let w;f.trace_id?w=Jf(`${f.trace_id}:${n}`,Yf):w=b;let x;f.parent_run_id&&(x=Jf(`${f.parent_run_id}:${n}`,Yf));let S;return f.dotted_order&&(S=f.dotted_order.split(".").map(T=>{const P=T.slice(-36),D=Jf(`${P}:${n}`,Yf);return T.slice(0,-36)+D}).join(".")),{...f,id:b,trace_id:w,parent_run_id:x,dotted_order:S,session_name:n}}async postRun(t=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const n=MU();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:s,apiUrl:a,workspaceId:i,reroot:o}of this.replicas){const u=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:s,workspaceId:i});await this.client.createRun(u,{apiKey:s,apiUrl:a,workspaceId:i})}else{const r=this._convertToCreate(this,n,t);await this.client.createRun(r)}if(!t){IU("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}this.child_runs=[]}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(t){if(this.replicas&&this.replicas.length>0)for(const{projectName:n,apiKey:r,apiUrl:s,workspaceId:a,updates:i,reroot:o}of this.replicas){const u=this._remapForProject({projectName:n??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:s,apiKey:r,workspaceId:a}),h={id:u.id,name:u.name,run_type:u.run_type,start_time:u.start_time,outputs:u.outputs,error:u.error,parent_run_id:u.parent_run_id,session_name:u.session_name,reference_example_id:u.reference_example_id,end_time:u.end_time,dotted_order:u.dotted_order,trace_id:u.trace_id,events:u.events,tags:u.tags,extra:u.extra,attachments:this.attachments,...i};t?.excludeInputs||(h.inputs=u.inputs),await this.client.updateRun(u.id,h,{apiKey:r,apiUrl:s,workspaceId:a})}else try{const n={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};t?.excludeInputs||(n.inputs=this.inputs),await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push({...t,time:t.time??new Date().toISOString()})}static fromRunnableConfig(t,n){const r=t?.callbacks;let s,a,i,o=Xde();if(r){const h=r?.getParentRunId?.()??"",f=r?.handlers?.find(m=>m?.name=="langchain_tracer");s=f?.getRun?.(h),a=f?.projectName,i=f?.client,o=o||!!f}return s?new xs({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:i,tracingEnabled:o,project_name:a,tags:[...new Set((s?.tags??[]).concat(t?.tags??[]))],extra:{metadata:{...s?.extra?.metadata,...t?.metadata}}}).createChild(n):new xs({...n,client:i,tracingEnabled:o,project_name:a})}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,n){const r="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,s=r["langsmith-trace"];if(!s||typeof s!="string")return;const a=s.trim(),i=a.split(".").map(f=>{const[m,g]=f.split("Z");return{strTime:m,time:Date.parse(m+"Z"),uuid:g}}),o=i[0].uuid,u={...n,name:n?.name??"parent",run_type:n?.run_type??"chain",start_time:n?.start_time??Date.now(),id:i.at(-1)?.uuid,trace_id:o,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const f=wb.fromHeader(r.baggage);u.metadata=f.metadata,u.tags=f.tags,u.project_name=f.project_name,u.replicas=f.replicas}const h=new xs(u);return h.distributedParentId=h.id,h}toHeaders(t){const n={"langsmith-trace":this.dotted_order,baggage:new wb(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(t)for(const[r,s]of Object.entries(n))t.set(r,s);return n}}Object.defineProperty(xs,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function nhe(e){return e!=null&&typeof e.createChild=="function"&&typeof e.postRun=="function"}function ZU(e){return typeof e=="object"&&e!=null&&typeof e.name=="string"&&e.name==="langchain_tracer"}function x3(e){return Array.isArray(e)&&e.some(t=>ZU(t))}function rhe(e){return typeof e=="object"&&e!=null&&Array.isArray(e.handlers)}function she(e){const t=e?.callbacks;return e!=null&&typeof t=="object"&&(x3(t?.handlers)||x3(t))}function ahe(){const e=zi("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t)){const n=[];for(const r of t){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof t=="object"&&t!==null){ohe(t);const n=[];for(const[r,s]of Object.entries(t)){const a=r.replace(/\/$/,"");if(typeof s=="string")n.push({apiUrl:a,apiKey:s});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof s}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof t}`),[]}catch(t){if(zde(t))throw t;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function ihe(e){return e?e.map(t=>Array.isArray(t)?{projectName:t[0],updates:t[1]}:t):ahe()}function ohe(e){if(Object.keys(e).length>0&&_s("ENDPOINT"))throw new Lde}var lhe={};Ut(lhe,{BaseTracer:()=>fh,isBaseTracer:()=>ed});const che=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function kT(e,t){if(e)return new xs({...e,start_time:e._serialized_start_time??e.start_time,parent_run:kT(t),child_runs:e.child_runs.map(n=>kT(n)).filter(n=>n!==void 0),extra:{...e.extra,runtime:kU()},tracingEnabled:!1})}function T1(e,t){return e&&!Array.isArray(e)&&typeof e=="object"?e:{[t]:e}}function ed(e){return typeof e._addRunToRunMap=="function"}var fh=class extends Im{runMap=new Map;runTreeMap=new Map;usesRunTreeMap=!1;constructor(e){super(...arguments)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?che(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const{dottedOrder:t,microsecondPrecisionDatestring:n}=KU(new Date(e.start_time).getTime(),e.id,e.execution_order),r={...e},s=this.getRunById(r.parent_run_id);if(r.parent_run_id!==void 0?s?(this._addChildRun(s,r),s.child_execution_order=Math.max(s.child_execution_order,r.child_execution_order),r.trace_id=s.trace_id,s.dotted_order!==void 0&&(r.dotted_order=[s.dotted_order,t].join("."),r._serialized_start_time=n)):r.parent_run_id=void 0:(r.trace_id=r.id,r.dotted_order=t,r._serialized_start_time=n),this.usesRunTreeMap){const a=kT(r,s);a!==void 0&&this.runTreeMap.set(r.id,a)}else this.runMap.set(r.id,r);return r}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await this.onRunUpdate?.(e),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,n,r,s,a,i,o){const u=this._getExecutionOrder(r),h=Date.now(),f=i?{...s,metadata:i}:s,m={id:n,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f??{},tags:a||[]};return this._addRunToRunMap(m)}async handleLLMStart(e,t,n,r,s,a,i,o){const u=this.getRunById(n)??this._createRunForLLMStart(e,t,n,r,s,a,i,o);return await this.onRunCreate?.(u),await this.onLLMStart?.(u),u}_createRunForChatModelStart(e,t,n,r,s,a,i,o){const u=this._getExecutionOrder(r),h=Date.now(),f=i?{...s,metadata:i}:s,m={id:n,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f??{},tags:a||[]};return this._addRunToRunMap(m)}async handleChatModelStart(e,t,n,r,s,a,i,o){const u=this.getRunById(n)??this._createRunForChatModelStart(e,t,n,r,s,a,i,o);return await this.onRunCreate?.(u),await this.onLLMStart?.(u),u}async handleLLMEnd(e,t,n,r,s){const a=this.getRunById(t);if(!a||a?.run_type!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await this.onLLMEnd?.(a),await this._endTrace(a),a}async handleLLMError(e,t,n,r,s){const a=this.getRunById(t);if(!a||a?.run_type!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await this.onLLMError?.(a),await this._endTrace(a),a}_createRunForChainStart(e,t,n,r,s,a,i,o,u){const h=this._getExecutionOrder(r),f=Date.now(),m={id:n,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:t,execution_order:h,child_execution_order:h,run_type:i??"chain",child_runs:[],extra:a?{...u,metadata:a}:{...u},tags:s||[]};return this._addRunToRunMap(m)}async handleChainStart(e,t,n,r,s,a,i,o){const u=this.getRunById(n)??this._createRunForChainStart(e,t,n,r,s,a,i,o);return await this.onRunCreate?.(u),await this.onChainStart?.(u),u}async handleChainEnd(e,t,n,r,s){const a=this.getRunById(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=T1(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),s?.inputs!==void 0&&(a.inputs=T1(s.inputs,"input")),await this.onChainEnd?.(a),await this._endTrace(a),a}async handleChainError(e,t,n,r,s){const a=this.getRunById(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),s?.inputs!==void 0&&(a.inputs=T1(s.inputs,"input")),await this.onChainError?.(a),await this._endTrace(a),a}_createRunForToolStart(e,t,n,r,s,a,i){const o=this._getExecutionOrder(r),u=Date.now(),h={id:n,name:i??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(h)}async handleToolStart(e,t,n,r,s,a,i){const o=this.getRunById(n)??this._createRunForToolStart(e,t,n,r,s,a,i);return await this.onRunCreate?.(o),await this.onToolStart?.(o),o}async handleToolEnd(e,t){const n=this.getRunById(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await this.onToolEnd?.(n),await this._endTrace(n),n}async handleToolError(e,t){const n=this.getRunById(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await this.onToolError?.(n),await this._endTrace(n),n}async handleAgentAction(e,t){const n=this.getRunById(t);if(!n||n?.run_type!=="chain")return;const r=n;r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(n)}async handleAgentEnd(e,t){const n=this.getRunById(t);!n||n?.run_type!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(n))}_createRunForRetrieverStart(e,t,n,r,s,a,i){const o=this._getExecutionOrder(r),u=Date.now(),h={id:n,name:i??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(h)}async handleRetrieverStart(e,t,n,r,s,a,i){const o=this.getRunById(n)??this._createRunForRetrieverStart(e,t,n,r,s,a,i);return await this.onRunCreate?.(o),await this.onRetrieverStart?.(o),o}async handleRetrieverEnd(e,t){const n=this.getRunById(t);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await this.onRetrieverEnd?.(n),await this._endTrace(n),n}async handleRetrieverError(e,t){const n=this.getRunById(t);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await this.onRetrieverError?.(n),await this._endTrace(n),n}async handleText(e,t){const n=this.getRunById(t);!n||n?.run_type!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(n))}async handleLLMNewToken(e,t,n,r,s,a){const i=this.getRunById(n);if(!i||i?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return i.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await this.onLLMNewToken?.(i,e,{chunk:a?.chunk}),i}},L0={exports:{}};L0.exports;var v3;function uhe(){return v3||(v3=1,(function(e){const n=(a=0)=>i=>`\x1B[${38+a};5;${i}m`,r=(a=0)=>(i,o,u)=>`\x1B[${38+a};2;${i};${o};${u}m`;function s(){const a=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.gray=i.color.blackBright,i.bgColor.bgGray=i.bgColor.bgBlackBright,i.color.grey=i.color.blackBright,i.bgColor.bgGrey=i.bgColor.bgBlackBright;for(const[o,u]of Object.entries(i)){for(const[h,f]of Object.entries(u))i[h]={open:`\x1B[${f[0]}m`,close:`\x1B[${f[1]}m`},u[h]=i[h],a.set(f[0],f[1]);Object.defineProperty(i,o,{value:u,enumerable:!1})}return Object.defineProperty(i,"codes",{value:a,enumerable:!1}),i.color.close="\x1B[39m",i.bgColor.close="\x1B[49m",i.color.ansi256=n(),i.color.ansi16m=r(),i.bgColor.ansi256=n(10),i.bgColor.ansi16m=r(10),Object.defineProperties(i,{rgbToAnsi256:{value:(o,u,h)=>o===u&&u===h?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(h/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:h}=u.groups;h.length===3&&(h=h.split("").map(m=>m+m).join(""));const f=Number.parseInt(h,16);return[f>>16&255,f>>8&255,f&255]},enumerable:!1},hexToAnsi256:{value:o=>i.rgbToAnsi256(...i.hexToRgb(o)),enumerable:!1}}),i}Object.defineProperty(e,"exports",{enumerable:!0,get:s})})(L0)),L0.exports}var dhe=uhe();const WU=Kd(dhe);var hhe={};Ut(hhe,{ConsoleCallbackHandler:()=>ST});function Xr(e,t){return`${e.open}${t}${e.close}`}function ga(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function w3(e){return typeof e=="string"?e.trim():e==null?e:ga(e,e.toString())}function ll(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:ms}=WU;var ST=class extends fh{name="console_callback_handler";persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const r=this.runMap.get(n.parent_run_id);if(r)t.push(r),n=r;else break}return t}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((r,s,a)=>{const i=`${r.execution_order}:${r.run_type}:${r.name}`;return s===a.length-1?Xr(WU.bold,i):i}).join(" > ");return Xr(ms.grey,n)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.green,"[chain/start]")} [${t}] Entering Chain run with input: ${ga(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.cyan,"[chain/end]")} [${t}] [${ll(e)}] Exiting Chain run with output: ${ga(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.red,"[chain/error]")} [${t}] [${ll(e)}] Chain run errored with error: ${ga(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(r=>r.trim())}:e.inputs;console.log(`${Xr(ms.green,"[llm/start]")} [${t}] Entering LLM run with input: ${ga(n,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.cyan,"[llm/end]")} [${t}] [${ll(e)}] Exiting LLM run with output: ${ga(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.red,"[llm/error]")} [${t}] [${ll(e)}] LLM run errored with error: ${ga(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.green,"[tool/start]")} [${t}] Entering Tool run with input: "${w3(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.cyan,"[tool/end]")} [${t}] [${ll(e)}] Exiting Tool run with output: "${w3(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.red,"[tool/error]")} [${t}] [${ll(e)}] Tool run errored with error: ${ga(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${ga(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.cyan,"[retriever/end]")} [${t}] [${ll(e)}] Exiting Retriever run with output: ${ga(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${Xr(ms.red,"[retriever/error]")} [${t}] [${ll(e)}] Retriever run errored with error: ${ga(e.error,"[error]")}`)}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log(`${Xr(ms.blue,"[agent/action]")} [${n}] Agent selected action: ${ga(t.actions[t.actions.length-1],"[action]")}`)}};let C1;const JU=()=>{if(C1===void 0){const e=Ws("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};C1=new Kp(e)}return C1};let fhe=class{getStore(){}run(t,n){return n()}};const E1=Symbol.for("ls:tracing_async_local_storage"),phe=new fhe;let mhe=class{getInstance(){return globalThis[E1]??phe}initializeGlobalInstance(t){globalThis[E1]===void 0&&(globalThis[E1]=t)}};const ghe=new mhe;function yhe(e=!1){const t=ghe.getInstance().getStore();if(!e&&t===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return t}function _j(e){return typeof e=="function"&&"langsmith:traceable"in e}var bhe={};Ut(bhe,{LangChainTracer:()=>z0});function xhe(e){let t;for(const n of e)for(const r of n)pr.isInstance(r.message)&&r.message.usage_metadata!==void 0&&(t=cj(t,r.message.usage_metadata));return t}var z0=class YU extends fh{name="langchain_tracer";projectName;exampleId;client;replicas;usesRunTreeMap=!0;constructor(t={}){super(t);const{exampleId:n,projectName:r,client:s,replicas:a}=t;this.projectName=r??AU(),this.replicas=a,this.exampleId=n,this.client=s??JU();const i=YU.getTraceableRunTree();i&&this.updateFromRunTree(i)}async persistRun(t){}async onRunCreate(t){t.extra?.lc_defers_inputs||await this.getRunTreeWithTracingConfig(t.id)?.postRun()}async onRunUpdate(t){const n=this.getRunTreeWithTracingConfig(t.id);t.extra?.lc_defers_inputs?await n?.postRun():await n?.patchRun()}onLLMEnd(t){const n=t.outputs;if(n?.generations){const r=xhe(n.generations);if(r!==void 0){t.extra=t.extra??{};const s=t.extra.metadata??{};s.usage_metadata=r,t.extra.metadata=s}}}getRun(t){return this.runTreeMap.get(t)}updateFromRunTree(t){this.runTreeMap.set(t.id,t);let n=t;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const s=[n];for(;s.length>0;){const a=s.shift();!a||r.has(a.id)||(r.add(a.id),this.runTreeMap.set(a.id,a),a.child_runs&&s.push(...a.child_runs))}this.client=t.client??this.client,this.replicas=t.replicas??this.replicas,this.projectName=t.project_name??this.projectName,this.exampleId=t.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(t){const n=this.runTreeMap.get(t);if(n)return new xs({...n,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return yhe(!0)}catch{return}}};let Dc;function vhe(){const e="default"in wo?wo.default:wo;return new e({autoStart:!0,concurrency:1})}function whe(){return typeof Dc>"u"&&(Dc=vhe()),Dc}async function Qn(e,t){if(t===!0){const n=Vp();n!==void 0?await n.run(void 0,async()=>e()):await e()}else Dc=whe(),Dc.add(async()=>{const n=Vp();n!==void 0?await n.run(void 0,async()=>e()):await e()})}async function _he(){const e=JU();await Promise.allSettled([typeof Dc<"u"?Dc.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])}var khe={};Ut(khe,{awaitAllCallbacks:()=>_he,consumeCallback:()=>Qn});const She=e=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Ws(n)==="true");function QU(e){const t=Vp();return t===void 0?void 0:t.getStore()?.[kp]?.[e]}const The=Symbol("lc:configure_hooks"),Che=()=>QU(The)||[];var Ehe={};Ut(Ehe,{BaseCallbackManager:()=>XU,BaseRunManager:()=>Rm,CallbackManager:()=>Cs,CallbackManagerForChainRun:()=>tF,CallbackManagerForLLMRun:()=>TT,CallbackManagerForRetrieverRun:()=>eF,CallbackManagerForToolRun:()=>nF,ensureHandler:()=>Zp,parseCallbackConfigArg:()=>Dx});function Dx(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}var XU=class{setHandler(e){return this.setHandlers([e])}},Rm=class{constructor(e,t,n,r,s,a,i,o){this.runId=e,this.handlers=t,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=s,this.metadata=a,this.inheritableMetadata=i,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{try{await t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleCustomEvent(e,t,n,r,s){await Promise.all(this.handlers.map(a=>Qn(async()=>{try{await a.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata)}catch(i){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${i}`),a.raiseError)throw i}},a.awaitHandlers)))}},eF=class extends Rm{getChild(e){const t=new Cs(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw n}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${n}`),t.raiseError)throw e}},t.awaitHandlers)))}},TT=class extends Rm{async handleLLMNewToken(e,t,n,r,s,a){await Promise.all(this.handlers.map(i=>Qn(async()=>{if(!i.ignoreLLM)try{await i.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a)}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMNewToken: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleLLMError(e,t,n,r,s){await Promise.all(this.handlers.map(a=>Qn(async()=>{if(!a.ignoreLLM)try{await a.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(i){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${i}`),a.raiseError)throw i}},a.awaitHandlers)))}async handleLLMEnd(e,t,n,r,s){await Promise.all(this.handlers.map(a=>Qn(async()=>{if(!a.ignoreLLM)try{await a.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(i){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${i}`),a.raiseError)throw i}},a.awaitHandlers)))}},tF=class extends Rm{getChild(e){const t=new Cs(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,n,r,s){await Promise.all(this.handlers.map(a=>Qn(async()=>{if(!a.ignoreChain)try{await a.handleChainError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(i){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${i}`),a.raiseError)throw i}},a.awaitHandlers)))}async handleChainEnd(e,t,n,r,s){await Promise.all(this.handlers.map(a=>Qn(async()=>{if(!a.ignoreChain)try{await a.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(i){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${i}`),a.raiseError)throw i}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}},nF=class extends Rm{getChild(e){const t=new Cs(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Qn(async()=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}},Cs=class Qf extends XU{handlers=[];inheritableHandlers=[];tags=[];inheritableTags=[];metadata={};inheritableMetadata={};name="callback_manager";_parentRunId;constructor(t,n){super(),this.handlers=n?.handlers??this.handlers,this.inheritableHandlers=n?.inheritableHandlers??this.inheritableHandlers,this.tags=n?.tags??this.tags,this.inheritableTags=n?.inheritableTags??this.inheritableTags,this.metadata=n?.metadata??this.metadata,this.inheritableMetadata=n?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}async handleLLMStart(t,n,r=void 0,s=void 0,a=void 0,i=void 0,o=void 0,u=void 0){return Promise.all(n.map(async(h,f)=>{const m=f===0&&r?r:yc();return await Promise.all(this.handlers.map(g=>{if(!g.ignoreLLM)return ed(g)&&g._createRunForLLMStart(t,[h],m,this._parentRunId,a,this.tags,this.metadata,u),Qn(async()=>{try{await g.handleLLMStart?.(t,[h],m,this._parentRunId,a,this.tags,this.metadata,u)}catch(b){if((g.raiseError?console.error:console.warn)(`Error in handler ${g.constructor.name}, handleLLMStart: ${b}`),g.raiseError)throw b}},g.awaitHandlers)})),new TT(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(t,n,r=void 0,s=void 0,a=void 0,i=void 0,o=void 0,u=void 0){return Promise.all(n.map(async(h,f)=>{const m=f===0&&r?r:yc();return await Promise.all(this.handlers.map(g=>{if(!g.ignoreLLM)return ed(g)&&g._createRunForChatModelStart(t,[h],m,this._parentRunId,a,this.tags,this.metadata,u),Qn(async()=>{try{if(g.handleChatModelStart)await g.handleChatModelStart?.(t,[h],m,this._parentRunId,a,this.tags,this.metadata,u);else if(g.handleLLMStart){const b=uj(h);await g.handleLLMStart?.(t,[b],m,this._parentRunId,a,this.tags,this.metadata,u)}}catch(b){if((g.raiseError?console.error:console.warn)(`Error in handler ${g.constructor.name}, handleLLMStart: ${b}`),g.raiseError)throw b}},g.awaitHandlers)})),new TT(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(t,n,r=yc(),s=void 0,a=void 0,i=void 0,o=void 0,u=void 0,h=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreChain)return ed(f)&&f._createRunForChainStart(t,n,r,this._parentRunId,this.tags,this.metadata,s,o,h),Qn(async()=>{try{await f.handleChainStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,s,o,h)}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleChainStart: ${m}`),f.raiseError)throw m}},f.awaitHandlers)})),new tF(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(t,n,r=yc(),s=void 0,a=void 0,i=void 0,o=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return ed(u)&&u._createRunForToolStart(t,n,r,this._parentRunId,this.tags,this.metadata,o),Qn(async()=>{try{await u.handleToolStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,o)}catch(h){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${h}`),u.raiseError)throw h}},u.awaitHandlers)})),new nF(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(t,n,r=yc(),s=void 0,a=void 0,i=void 0,o=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return ed(u)&&u._createRunForRetrieverStart(t,n,r,this._parentRunId,this.tags,this.metadata,o),Qn(async()=>{try{await u.handleRetrieverStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,o)}catch(h){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${h}`),u.raiseError)throw h}},u.awaitHandlers)})),new eF(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(t,n,r,s,a){await Promise.all(this.handlers.map(i=>Qn(async()=>{if(!i.ignoreCustomEvent)try{await i.handleCustomEvent?.(t,n,r,this.tags,this.metadata)}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleCustomEvent: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}addHandler(t,n=!0){this.handlers.push(t),n&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(n=>n!==t),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==t)}setHandlers(t,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of t)this.addHandler(r,n)}addTags(t,n=!0){this.removeTags(t),this.tags.push(...t),n&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(n=>!t.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!t.includes(n))}addMetadata(t,n=!0){this.metadata={...this.metadata,...t},n&&(this.inheritableMetadata={...this.inheritableMetadata,...t})}removeMetadata(t){for(const n of Object.keys(t))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(t=[],n=!0){const r=new Qf(this._parentRunId);for(const s of this.handlers){const a=this.inheritableHandlers.includes(s);r.addHandler(s,a)}for(const s of this.tags){const a=this.inheritableTags.includes(s);r.addTags([s],a)}for(const s of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(s);r.addMetadata({[s]:this.metadata[s]},a)}for(const s of t)r.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===s.name)||r.addHandler(s,n);return r}static fromHandlers(t){class n extends Im{name=yc();constructor(){super(),Object.assign(this,t)}}const r=new this;return r.addHandler(new n),r}static configure(t,n,r,s,a,i,o){return this._configureSync(t,n,r,s,a,i,o)}static _configureSync(t,n,r,s,a,i,o){let u;(t||n)&&(Array.isArray(t)||!t?(u=new Qf,u.setHandlers(t?.map(Zp)??[],!0)):u=t,u=u.copy(Array.isArray(n)?n.map(Zp):n?.handlers,!1));const h=Ws("LANGCHAIN_VERBOSE")==="true"||o?.verbose,f=z0.getTraceableRunTree()?.tracingEnabled||She(),m=f||(Ws("LANGCHAIN_TRACING")??!1);if(h||m){if(u||(u=new Qf),h&&!u.handlers.some(g=>g.name===ST.prototype.name)){const g=new ST;u.addHandler(g,!0)}if(m&&!u.handlers.some(g=>g.name==="langchain_tracer")&&f){const g=new z0;u.addHandler(g,!0)}if(f){const g=z0.getTraceableRunTree();g&&u._parentRunId===void 0&&(u._parentRunId=g.id,u.handlers.find(w=>w.name==="langchain_tracer")?.updateFromRunTree(g))}}for(const{contextVar:g,inheritable:b=!0,handlerClass:w,envVar:x}of Che()){const S=x&&Ws(x)==="true"&&w;let k;const C=g!==void 0?QU(g):void 0;C&&EU(C)?k=C:S&&(k=new w({})),k!==void 0&&(u||(u=new Qf),u.handlers.some(T=>T.name===k.name)||u.addHandler(k,b))}return(r||s)&&u&&(u.addTags(r??[]),u.addTags(s??[],!1)),(a||i)&&u&&(u.addMetadata(a??{}),u.addMetadata(i??{},!1)),u}};function Zp(e){return"name"in e?e:Im.fromMethods(e)}var rF=class{getStore(){}run(e,t){return t()}enterWith(e){}};const jhe=new rF,_3=Symbol.for("lc:child_config");var Nhe=class{getInstance(){return Vp()??jhe}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[_3]}runWithConfig(e,t,n){const r=Cs._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),s=this.getInstance(),a=s.getStore(),i=r?.getParentRunId(),o=r?.handlers?.find(h=>h?.name==="langchain_tracer");let u;return o&&i?u=o.getRunTreeWithTracingConfig(i):n||(u=new xs({name:"<runnable_lambda>",tracingEnabled:!1})),u&&(u.extra={...u.extra,[_3]:e}),a!==void 0&&a[kp]!==void 0&&(u===void 0&&(u={}),u[kp]=a[kp]),s.run(u,t)}initializeGlobalInstance(e){Vp()===void 0&&Gle(e)}};const ai=new Nhe;var Ahe={};Ut(Ahe,{AsyncLocalStorageProviderSingleton:()=>ai,MockAsyncLocalStorage:()=>rF,_CONTEXT_VARIABLES_KEY:()=>kp});const j1=25;async function Js(e){return Cs._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function _b(...e){const t={};for(const n of e.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")t[r]={...t[r],...n[r]};else if(r==="tags"){const s=t[r]??[];t[r]=[...new Set(s.concat(n[r]??[]))]}else if(r==="configurable")t[r]={...t[r],...n[r]};else if(r==="timeout")t.timeout===void 0?t.timeout=n.timeout:n.timeout!==void 0&&(t.timeout=Math.min(t.timeout,n.timeout));else if(r==="signal")t.signal===void 0?t.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,n.signal]):t.signal=n.signal);else if(r==="callbacks"){const s=t.callbacks,a=n.callbacks;if(Array.isArray(a))if(!s)t.callbacks=a;else if(Array.isArray(s))t.callbacks=s.concat(a);else{const i=s.copy();for(const o of a)i.addHandler(Zp(o),!0);t.callbacks=i}else if(a)if(!s)t.callbacks=a;else if(Array.isArray(s)){const i=a.copy();for(const o of s)i.addHandler(Zp(o),!0);t.callbacks=i}else t.callbacks=new Cs(a._parentRunId,{handlers:s.handlers.concat(a.handlers),inheritableHandlers:s.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(a.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(a.inheritableTags))),metadata:{...s.metadata,...a.metadata}})}else{const s=r;t[s]=n[s]??t[s]}return t}const Ihe=new Set(["string","number","boolean"]);function Gt(e){const t=ai.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:r,runName:s,...a}=t;n=Object.entries(a).reduce((i,[o,u])=>(u!==void 0&&(i[o]=u),i),n)}if(e&&(n=Object.entries(e).reduce((r,[s,a])=>(a!==void 0&&(r[s]=a),r),n)),n?.configurable)for(const r of Object.keys(n.configurable))Ihe.has(typeof n.configurable[r])&&!n.metadata?.[r]&&(n.metadata||(n.metadata={}),n.metadata[r]=n.configurable[r]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const r=n.timeout,s=AbortSignal.timeout(r);n.metadata||(n.metadata={}),n.metadata.timeoutMs===void 0&&(n.metadata.timeoutMs=r),n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,s])):n.signal=s,delete n.timeout}return n}function xn(e={},{callbacks:t,maxConcurrency:n,recursionLimit:r,runName:s,configurable:a,runId:i}={}){const o=Gt(e);return t!==void 0&&(delete o.runName,o.callbacks=t),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),s!==void 0&&(o.runName=s),a!==void 0&&(o.configurable={...o.configurable,...a}),i!==void 0&&delete o.runId,o}function Eo(e){if(e)return{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal,store:e.store}}async function jo(e,t){if(t===void 0)return e;let n;return Promise.race([e.catch(r=>{if(!t?.aborted)throw r}),new Promise((r,s)=>{n=()=>{s(Wp(t))},t.addEventListener("abort",n),t.aborted&&s(Wp(t))})]).finally(()=>t.removeEventListener("abort",n))}function Wp(e){return e?.reason instanceof Error?e.reason:typeof e?.reason=="string"?new Error(e.reason):new Error("Aborted")}var Ohe={};Ut(Ohe,{AsyncGeneratorWithSetup:()=>Qc,IterableReadableStream:()=>ii,atee:()=>kj,concat:()=>Nl,pipeGeneratorWithSetup:()=>sF});var ii=class CT extends ReadableStream{reader;ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const t=await this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}}async return(){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}return{done:!0,value:void 0}}async throw(t){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw t}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){const n=t.getReader();return new CT({start(r){return s();function s(){return n.read().then(({done:a,value:i})=>{if(a){r.close();return}return r.enqueue(i),s()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(t){return new CT({async pull(n){const{value:r,done:s}=await t.next();s&&n.close(),n.enqueue(r)},async cancel(n){await t.return(n)}})}};function kj(e,t=2){const n=Array.from({length:t},()=>[]);return n.map(async function*(s){for(;;)if(s.length===0){const a=await e.next();for(const i of n)i.push(a)}else{if(s[0].done)return;yield s.shift().value}})}function Nl(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(typeof e=="string"&&typeof t=="string")return e+t;if(typeof e=="number"&&typeof t=="number")return e+t;if("concat"in e&&typeof e.concat=="function")return e.concat(t);if(typeof e=="object"&&typeof t=="object"){const n={...e};for(const[r,s]of Object.entries(t))r in n&&!Array.isArray(n[r])?n[r]=Nl(n[r],s):n[r]=s;return n}else throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}var Qc=class{generator;setup;config;signal;firstResult;firstResultUsed=!1;constructor(e){this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,n)=>{ai.runWithConfig(Eo(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,n):this.firstResult.then(r=>t(void 0),n)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?ai.runWithConfig(Eo(this.config),this.signal?async()=>jo(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function sF(e,t,n,r,...s){const a=new Qc({generator:t,startSetup:n,signal:r}),i=await a.setup;return{output:e(a,i,...s),setup:i}}const Rhe=Object.prototype.hasOwnProperty;function ET(e,t){return Rhe.call(e,t)}function jT(e){if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(e);let t=[];for(let n in e)ET(e,n)&&t.push(n);return t}function Qa(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function NT(e){let t=0;const n=e.length;let r;for(;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Bu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Phe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function AT(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(AT(e[n]))return!0}else if(typeof e=="object"){const n=jT(e),r=n.length;for(var t=0;t<r;t++)if(AT(e[n[t]]))return!0}}return!1}function k3(e,t){const n=[e];for(const r in t){const s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(`${r}: ${s}`)}return n.join(`
`)}var Mhe=class extends Error{constructor(e,t,n,r,s){super(k3(e,{name:t,index:n,operation:r,tree:s})),this.name=t,this.index=n,this.operation=r,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=k3(e,{name:t,index:n,operation:r,tree:s})}},aF={};Ut(aF,{JsonPatchError:()=>Mn,_areEquals:()=>Jp,applyOperation:()=>$c,applyPatch:()=>Md,applyReducer:()=>Lhe,deepClone:()=>Dhe,getValueByPointer:()=>kb,validate:()=>iF,validator:()=>Sb});const Mn=Mhe,Dhe=Qa;function N1(e){return Object.getOwnPropertyNames(Object.prototype).includes(e)}const gd={add:function(e,t,n){if(N1(t))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){if(N1(t))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){if(N1(t))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){let r=kb(n,this.path);r&&(r=Qa(r));const s=$c(n,{op:"remove",path:this.from}).removed;return $c(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){const r=kb(n,this.from);return $c(n,{op:"add",path:this.path,value:Qa(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Jp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}};var $he={add:function(e,t,n){return NT(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:gd.move,copy:gd.copy,test:gd.test,_get:gd._get};function kb(e,t){if(t=="")return e;var n={op:"_get",path:t};return $c(e,n),n.value}function $c(e,t,n=!1,r=!0,s=!0,a=0){if(n&&(typeof n=="function"?n(t,0,e,t.path):Sb(t,0)),t.path===""){let i={newDocument:e};if(t.op==="add")return i.newDocument=t.value,i;if(t.op==="replace")return i.newDocument=t.value,i.removed=e,i;if(t.op==="move"||t.op==="copy")return i.newDocument=kb(e,t.from),t.op==="move"&&(i.removed=e),i;if(t.op==="test"){if(i.test=Jp(e,t.value),i.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i.newDocument=e,i}else{if(t.op==="remove")return i.removed=e,i.newDocument=null,i;if(t.op==="_get")return t.value=e,i;if(n)throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return i}}else{r||(e=Qa(e));const o=(t.path||"").split("/");let u=e,h=1,f=o.length,m,g,b;for(typeof n=="function"?b=n:b=Sb;;){if(g=o[h],g&&g.indexOf("~")!=-1&&(g=Phe(g)),s&&(g=="__proto__"||g=="prototype"&&h>0&&o[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&m===void 0&&(u[g]===void 0?m=o.slice(0,h).join("/"):h==f-1&&(m=t.path),m!==void 0&&b(t,0,e,m)),h++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!NT(g))throw new Mn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);NT(g)&&(g=~~g)}if(h>=f){if(n&&t.op==="add"&&g>u.length)throw new Mn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);const w=$he[t.op].call(t,u,g,e);if(w.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return w}}else if(h>=f){const w=gd[t.op].call(t,u,g,e);if(w.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return w}if(u=u[g],n&&h<f&&(!u||typeof u!="object"))throw new Mn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Md(e,t,n,r=!0,s=!0){if(n&&!Array.isArray(t))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Qa(e));const a=new Array(t.length);for(let i=0,o=t.length;i<o;i++)a[i]=$c(e,t[i],n,!0,s,i),e=a[i].newDocument;return a.newDocument=e,a}function Lhe(e,t,n){const r=$c(e,t);if(r.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Sb(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Mn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(gd[e.op]){if(typeof e.path!="string")throw new Mn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Mn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Mn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&AT(e.value))throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new Mn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Mn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var i={op:"_get",path:e.from,value:void 0},o=iF([i],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Mn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function iF(e,t,n){try{if(!Array.isArray(e))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Md(Qa(t),Qa(e),n||!0);else{n=n||Sb;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof Mn)return s;throw s}}function Jp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,i;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!Jp(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(o[s]))return!1;for(s=a;s--!==0;)if(i=o[s],!Jp(e[i],t[i]))return!1;return!0}return e!==e&&t!==t}function oF(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=jT(t),i=jT(e),o=!1,u=i.length-1;u>=0;u--){var h=i[u],f=e[h];if(ET(t,h)&&!(t[h]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var m=t[h];typeof f=="object"&&f!=null&&typeof m=="object"&&m!=null&&Array.isArray(f)===Array.isArray(m)?oF(f,m,n,r+"/"+Bu(h),s):f!==m&&(s&&n.push({op:"test",path:r+"/"+Bu(h),value:Qa(f)}),n.push({op:"replace",path:r+"/"+Bu(h),value:Qa(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+Bu(h),value:Qa(f)}),n.push({op:"remove",path:r+"/"+Bu(h)}),o=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!o&&a.length==i.length))for(var u=0;u<a.length;u++){var h=a[u];!ET(e,h)&&t[h]!==void 0&&n.push({op:"add",path:r+"/"+Bu(h),value:Qa(t[h])})}}}function Sj(e,t,n=!1){var r=[];return oF(e,t,r,"",n),r}({...aF});var zhe={};Ut(zhe,{LogStreamCallbackHandler:()=>OT,RunLog:()=>Tj,RunLogPatch:()=>mo,isLogStreamHandler:()=>lF});var mo=class{ops;constructor(e){this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),n=Md({},t);return new Tj({ops:t,state:n[n.length-1].newDocument})}},Tj=class IT extends mo{state;constructor(t){super(t),this.state=t.state}concat(t){const n=this.ops.concat(t.ops),r=Md(this.state,t.ops);return new IT({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(t){const n=Md({},t.ops);return new IT({ops:t.ops,state:n[n.length-1].newDocument})}};const lF=e=>e.name==="log_stream_tracer";async function S3(e,t){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=e;if(["retriever","llm","prompt"].includes(e.run_type))return n;if(!(Object.keys(n).length===1&&n?.input===""))return n.input}async function T3(e,t){const{outputs:n}=e;return t==="original"||["retriever","llm","prompt"].includes(e.run_type)?n:n!==void 0&&Object.keys(n).length===1&&n?.output!==void 0?n.output:n}function Uhe(e){return e!==void 0&&e.message!==void 0}var OT=class extends fh{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;_schemaFormat="original";rootId;keyMapByRunId={};counterMapByRunName={};transformStream;writer;receiveStream;name="log_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ii.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||t.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&t.every(r=>!this.excludeTags?.includes(r))),n}async*tapOutputIterable(e,t){for await(const n of t){if(e!==this.rootId){const r=this.keyMapByRunId[e];r&&await this.writer.write(new mo({ops:[{op:"add",path:`/logs/${r}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new mo({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await S3(e,this._schemaFormat)),await this.writer.write(new mo({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${t}/inputs`,value:await S3(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${t}/final_output`,value:await T3(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const r=new mo({ops:n});await this.writer.write(r)}finally{if(e.id===this.rootId){const t=new mo({ops:[{op:"replace",path:"/final_output",value:await T3(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,n){const r=this.keyMapByRunId[e.id];if(r===void 0)return;const s=e.inputs.messages!==void 0;let a;s?Uhe(n?.chunk)?a=n?.chunk:a=new kn({id:`run-${e.id}`,content:t}):a=t;const i=new mo({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${r}/streamed_output/-`,value:a}]});await this.writer.write(i)}},Fhe={};Ut(Fhe,{ChatGenerationChunk:()=>Ui,GenerationChunk:()=>Dd,RUN_KEY:()=>Yp});const Yp="__run";var Dd=class cF{text;generationInfo;constructor(t){this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new cF({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}},Ui=class uF extends Dd{message;constructor(t){super(t),this.message=t.message}concat(t){return new uF({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo},message:this.message.concat(t.message)})}};function Dy({name:e,serialized:t}){return e!==void 0?e:t?.name!==void 0?t.name:t?.id!==void 0&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}const Bhe=e=>e.name==="event_stream_tracer";var Hhe=class extends fh{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;runInfoMap=new Map;tappedPromises=new Map;transformStream;writer;receiveStream;readableStreamClosed=!1;name="event_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ii.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||t.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&t.every(r=>!this.excludeTags?.includes(r))),n}async*tapOutputIterable(e,t){const n=await t.next();if(n.done)return;const r=this.runInfoMap.get(e);if(r===void 0){yield n.value;return}function s(i,o){return i==="llm"&&typeof o=="string"?new Dd({text:o}):o}let a=this.tappedPromises.get(e);if(a===void 0){let i;a=new Promise(o=>{i=o}),this.tappedPromises.set(e,a);try{const o={event:`on_${r.runType}_stream`,run_id:e,name:r.name,tags:r.tags,metadata:r.metadata,data:{}};await this.send({...o,data:{chunk:s(r.runType,n.value)}},r),yield n.value;for await(const u of t)r.runType!=="tool"&&r.runType!=="retriever"&&await this.send({...o,data:{chunk:s(r.runType,u)}},r),yield u}finally{i?.()}}else{yield n.value;for await(const i of t)yield i}}async send(e,t){this.readableStreamClosed||this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){const t=Dy(e),n=e.inputs.messages!==void 0?"chat_model":"llm",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,r);const s=`on_${n}_start`;await this.send({event:s,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onLLMNewToken(e,t,n){const r=this.runInfoMap.get(e.id);let s,a;if(r===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(r.runType==="chat_model")a="on_chat_model_stream",n?.chunk===void 0?s=new kn({content:t,id:`run-${e.id}`}):s=n.chunk.message;else if(r.runType==="llm")a="on_llm_stream",n?.chunk===void 0?s=new Dd({text:t}):s=n.chunk;else throw new Error(`Unexpected run type ${r.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const r=e.outputs?.generations;let s;if(t.runType==="chat_model"){for(const a of r??[]){if(s!==void 0)break;s=a[0]?.message}n="on_chat_model_end"}else if(t.runType==="llm")s={generations:r?.map(a=>a.map(i=>({text:i.text,generationInfo:i.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:n,data:{output:s,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=Dy(e),n=e.run_type??"chain",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},r.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,r.inputs=e.inputs.input):(s.input=e.inputs,r.inputs=e.inputs),this.runInfoMap.set(e.id,r),await this.send({event:`on_${n}_start`,data:s,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const n=`on_${e.run_type}_end`,r=e.inputs??t.inputs??{},a={output:e.outputs?.output??e.outputs,input:r};r.input&&Object.keys(r).length===1&&(a.input=r.input,t.inputs=r.input),await this.sendEndEvent({event:n,data:a,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=Dy(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},n)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const n=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=Dy(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,n){const r=this.runInfoMap.get(n);if(r===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:r.tags,metadata:r.metadata,data:t},r)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const qhe=Object.prototype.toString,Vhe=e=>qhe.call(e)==="[object Error]",Ghe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function Khe(e){if(!(e&&Vhe(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:n,stack:r}=e;return n==="Load failed"?r===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:Ghe.has(n)}function Zhe(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function $y(e,t,{min:n=0,allowInfinity:r=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be  ${n}.`)}}var Whe=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function Jhe(e,t){const n=Math.max(1,e+1),r=t.randomize?Math.random()+1:1;let s=Math.round(r*t.minTimeout*t.factor**(n-1));return s=Math.min(s,t.maxTimeout),s}function C3(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function Yhe({error:e,attemptNumber:t,retriesConsumed:n,startTime:r,options:s}){const a=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof Whe)throw a.originalError;const i=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,u=Object.freeze({error:a,attemptNumber:t,retriesLeft:i,retriesConsumed:n});if(await s.onFailedAttempt(u),C3(r,o)<=0)throw a;const h=await s.shouldConsumeRetry(u),f=C3(r,o);if(f<=0||i<=0)throw a;if(a instanceof TypeError&&!Khe(a)){if(h)throw a;return s.signal?.throwIfAborted(),!1}if(!await s.shouldRetry(u))throw a;if(!h)return s.signal?.throwIfAborted(),!1;const m=Jhe(n,s),g=Math.min(m,f);return g>0&&await new Promise((b,w)=>{const x=()=>{clearTimeout(S),s.signal?.removeEventListener("abort",x),w(s.signal.reason)},S=setTimeout(()=>{s.signal?.removeEventListener("abort",x),b()},g);s.unref&&S.unref?.(),s.signal?.addEventListener("abort",x,{once:!0})}),s.signal?.throwIfAborted(),!0}async function RT(e,t={}){if(t={...t},Zhe(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,$y("factor",t.factor,{min:0,allowInfinity:!1}),$y("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),$y("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),$y("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(t.retries)||r<=t.retries;){n++;try{t.signal?.throwIfAborted();const a=await e(n);return t.signal?.throwIfAborted(),a}catch(a){await Yhe({error:a,attemptNumber:n,retriesConsumed:r,startTime:s,options:t})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Qhe={};Ut(Qhe,{AsyncCaller:()=>Pm});const Xhe=[400,401,402,403,404,405,406,407,409],efe=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e?.code==="ECONNABORTED")throw e;const t=e?.response?.status??e?.status;if(t&&Xhe.includes(+t))throw e;if(e?.error?.code==="insufficient_quota"){const n=new Error(e?.message);throw n.name="InsufficientQuotaError",n}};var Pm=class{maxConcurrency;maxRetries;onFailedAttempt;queue;constructor(e){this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??efe;const t="default"in wo?wo.default:wo;this.queue=new t({concurrency:this.maxConcurrency})}async call(e,...t){return this.queue.add(()=>RT(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>this.onFailedAttempt?.(n),retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){if(e.signal){let r;return Promise.race([this.call(t,...n),new Promise((s,a)=>{r=()=>{a(Wp(e.signal))},e.signal?.addEventListener("abort",r)})]).finally(()=>{e.signal&&r&&e.signal.removeEventListener("abort",r)})}return this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}},dF=class extends fh{name="RootListenersTracer";rootId;config;argOnStart;argOnEnd;argOnError;constructor({config:e,onStart:t,onEnd:n,onError:r}){super({_awaitHandler:!0}),this.config=e,this.argOnStart=t,this.argOnEnd=n,this.argOnError=r}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Cj(e){return e?e.lc_runnable:!1}var tfe=class{includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;constructor(e){this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const r=e.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t)),this.includeTags!==void 0&&(n=n||r.some(s=>this.includeTags?.includes(s))),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(n=n&&r.every(s=>!this.excludeTags?.includes(s))),n}};const nfe=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function ke(e,t,n){function r(o,u){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:u,constr:i,traits:new Set},enumerable:!1}),o._zod.traits.has(e))return;o._zod.traits.add(e),t(o,u);const h=i.prototype,f=Object.keys(h);for(let m=0;m<f.length;m++){const g=f[m];g in o||(o[g]=h[g].bind(o))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:e});function i(o){var u;const h=n?.Parent?new a:this;r(h,o),(u=h._zod).deferred??(u.deferred=[]);for(const f of h._zod.deferred)f();return h}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:o=>n?.Parent&&o instanceof n.Parent?!0:o?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class kd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class hF extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const fF={};function Al(e){return fF}function pF(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function PT(e,t){return typeof t=="bigint"?t.toString():t}function $x(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ej(e){return e==null}function jj(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function rfe(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const u=r.match(/\d?e-(\d?)/);u?.[1]&&(s=Number.parseInt(u[1]))}const a=n>s?n:s,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}const E3=Symbol("evaluating");function Yt(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==E3)return r===void 0&&(r=E3,r=n()),r},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Xc(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function zl(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function j3(e){return JSON.stringify(e)}function sfe(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const mF="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Qp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const afe=$x(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function $d(e){if(Qp(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(Qp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function gF(e){return $d(e)?{...e}:Array.isArray(e)?[...e]:e}const ife=new Set(["string","number","symbol"]);function Ld(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $r(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function tt(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function ofe(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const lfe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function cfe(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=zl(e._zod.def,{get shape(){const i={};for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(i[o]=n.shape[o])}return Xc(this,"shape",i),i},checks:[]});return $r(e,a)}function ufe(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=zl(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete i[o]}return Xc(this,"shape",i),i},checks:[]});return $r(e,a)}function yF(e,t){if(!$d(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const a=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(a,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=zl(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t};return Xc(this,"shape",a),a}});return $r(e,s)}function dfe(e,t){if(!$d(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=zl(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Xc(this,"shape",r),r}});return $r(e,n)}function hfe(e,t){const n=zl(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Xc(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return $r(e,n)}function bF(e,t,n){const s=t._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=zl(t._zod.def,{get shape(){const o=t._zod.def.shape,u={...o};if(n)for(const h in n){if(!(h in o))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(u[h]=e?new e({type:"optional",innerType:o[h]}):o[h])}else for(const h in o)u[h]=e?new e({type:"optional",innerType:o[h]}):o[h];return Xc(this,"shape",u),u},checks:[]});return $r(t,i)}function ffe(e,t,n){const r=zl(t._zod.def,{get shape(){const s=t._zod.def.shape,a={...s};if(n)for(const i in n){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(a[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)a[i]=new e({type:"nonoptional",innerType:s[i]});return Xc(this,"shape",a),a}});return $r(t,r)}function yd(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Ac(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function Ly(e){return typeof e=="string"?e:e?.message}function Il(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const s=Ly(e.inst?._zod.def?.error?.(e))??Ly(t?.error?.(e))??Ly(n.customError?.(e))??Ly(n.localeError?.(e))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Nj(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Xp(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const xF=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,PT,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},vF=ke("$ZodError",xF),Lx=ke("$ZodError",xF,{Parent:Error});function pfe(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function mfe(e,t=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(i=>r({issues:i}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(t(a));else{let i=n,o=0;for(;o<a.path.length;){const u=a.path[o];o===a.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(t(a))):i[u]=i[u]||{_errors:[]},i=i[u],o++}}};return r(e),n}function gfe(e){const t=[],n=e.map(r=>typeof r=="object"?r.key:r);for(const r of n)typeof r=="number"?t.push(`[${r}]`):typeof r=="symbol"?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function yfe(e){const t=[],n=[...e.issues].sort((r,s)=>(r.path??[]).length-(s.path??[]).length);for(const r of n)t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${gfe(r.path)}`);return t.join(`
`)}const zx=e=>(t,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise)throw new kd;if(i.issues.length){const o=new(s?.Err??e)(i.issues.map(u=>Il(u,a,Al())));throw mF(o,s?.callee),o}return i.value},Ux=zx(Lx),Fx=e=>async(t,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const o=new(s?.Err??e)(i.issues.map(u=>Il(u,a,Al())));throw mF(o,s?.callee),o}return i.value},wF=Fx(Lx),Bx=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new kd;return a.issues.length?{success:!1,error:new(e??vF)(a.issues.map(i=>Il(i,s,Al())))}:{success:!0,data:a.value}},bfe=Bx(Lx),Hx=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(i=>Il(i,s,Al())))}:{success:!0,data:a.value}},xfe=Hx(Lx),vfe=e=>(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return zx(e)(t,n,s)},wfe=e=>(t,n,r)=>zx(e)(t,n,r),_fe=e=>async(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Fx(e)(t,n,s)},kfe=e=>async(t,n,r)=>Fx(e)(t,n,r),Sfe=e=>(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Bx(e)(t,n,s)},Tfe=e=>(t,n,r)=>Bx(e)(t,n,r),Cfe=e=>async(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Hx(e)(t,n,s)},Efe=e=>async(t,n,r)=>Hx(e)(t,n,r),jfe=/^[cC][^\s-]{8,}$/,Nfe=/^[0-9a-z]+$/,Afe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ife=/^[0-9a-vA-V]{20}$/,Ofe=/^[A-Za-z0-9]{27}$/,Rfe=/^[a-zA-Z0-9_-]{21}$/,Pfe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Mfe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,N3=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Dfe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,$fe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Lfe(){return new RegExp($fe,"u")}const zfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ufe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ffe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Bfe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hfe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_F=/^[A-Za-z0-9_-]*$/,qfe=/^\+[1-9]\d{6,14}$/,kF="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Vfe=new RegExp(`^${kF}$`);function SF(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Gfe(e){return new RegExp(`^${SF(e)}$`)}function Kfe(e){const t=SF({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${kF}T(?:${r})$`)}const Zfe=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Wfe=/^-?\d+$/,TF=/^-?\d+(?:\.\d+)?$/,Jfe=/^(?:true|false)$/i,Yfe=/^[^A-Z]*$/,Qfe=/^[^a-z]*$/,js=ke("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),CF={number:"number",bigint:"bigint",object:"date"},EF=ke("$ZodCheckLessThan",(e,t)=>{js.init(e,t);const n=CF[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,a=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),jF=ke("$ZodCheckGreaterThan",(e,t)=>{js.init(e,t);const n=CF[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,a=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xfe=ke("$ZodCheckMultipleOf",(e,t)=>{js.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):rfe(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),epe=ke("$ZodCheckNumberFormat",(e,t)=>{js.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[s,a]=lfe[t.format];e._zod.onattach.push(i=>{const o=i._zod.bag;o.format=t.format,o.minimum=s,o.maximum=a,n&&(o.pattern=Wfe)}),e._zod.check=i=>{const o=i.value;if(n){if(!Number.isInteger(o)){i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});return}if(!Number.isSafeInteger(o)){o>0?i.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}):i.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort});return}}o<s&&i.issues.push({origin:"number",input:o,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),o>a&&i.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inclusive:!0,inst:e,continue:!t.abort})}}),tpe=ke("$ZodCheckMaxLength",(e,t)=>{var n;js.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!Ej(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const i=Nj(s);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),npe=ke("$ZodCheckMinLength",(e,t)=>{var n;js.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!Ej(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const i=Nj(s);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),rpe=ke("$ZodCheckLengthEquals",(e,t)=>{var n;js.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!Ej(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,a=s.length;if(a===t.length)return;const i=Nj(s),o=a>t.length;r.issues.push({origin:i,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),qx=ke("$ZodCheckStringFormat",(e,t)=>{var n,r;js.init(e,t),e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),spe=ke("$ZodCheckRegex",(e,t)=>{qx.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ape=ke("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Yfe),qx.init(e,t)}),ipe=ke("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Qfe),qx.init(e,t)}),ope=ke("$ZodCheckIncludes",(e,t)=>{js.init(e,t);const n=Ld(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),lpe=ke("$ZodCheckStartsWith",(e,t)=>{js.init(e,t);const n=new RegExp(`^${Ld(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),cpe=ke("$ZodCheckEndsWith",(e,t)=>{js.init(e,t);const n=new RegExp(`.*${Ld(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),upe=ke("$ZodCheckOverwrite",(e,t)=>{js.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class dpe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),s=Math.min(...r.map(i=>i.length-i.trimStart().length)),a=r.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of a)this.content.push(i)}compile(){const t=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new t(...n,s.join(`
`))}}const hpe={major:4,minor:3,patch:5},vn=ke("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=hpe;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(i,o,u)=>{let h=yd(i),f;for(const m of o){if(m._zod.def.when){if(!m._zod.def.when(i))continue}else if(h)continue;const g=i.issues.length,b=m._zod.check(i);if(b instanceof Promise&&u?.async===!1)throw new kd;if(f||b instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await b,i.issues.length!==g&&(h||(h=yd(i,g)))});else{if(i.issues.length===g)continue;h||(h=yd(i,g))}}return f?f.then(()=>i):i},a=(i,o,u)=>{if(yd(i))return i.aborted=!0,i;const h=s(o,r,u);if(h instanceof Promise){if(u.async===!1)throw new kd;return h.then(f=>e._zod.parse(f,u))}return e._zod.parse(h,u)};e._zod.run=(i,o)=>{if(o.skipChecks)return e._zod.parse(i,o);if(o.direction==="backward"){const h=e._zod.parse({value:i.value,issues:[]},{...o,skipChecks:!0});return h instanceof Promise?h.then(f=>a(f,i,o)):a(h,i,o)}const u=e._zod.parse(i,o);if(u instanceof Promise){if(o.async===!1)throw new kd;return u.then(h=>s(h,r,o))}return s(u,r,o)}}Yt(e,"~standard",()=>({validate:s=>{try{const a=bfe(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return xfe(e,s).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}))}),Aj=ke("$ZodString",(e,t)=>{vn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Zfe(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Cn=ke("$ZodStringFormat",(e,t)=>{qx.init(e,t),Aj.init(e,t)}),fpe=ke("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Mfe),Cn.init(e,t)}),ppe=ke("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=N3(r))}else t.pattern??(t.pattern=N3());Cn.init(e,t)}),mpe=ke("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Dfe),Cn.init(e,t)}),gpe=ke("$ZodURL",(e,t)=>{Cn.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),ype=ke("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Lfe()),Cn.init(e,t)}),bpe=ke("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Rfe),Cn.init(e,t)}),xpe=ke("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=jfe),Cn.init(e,t)}),vpe=ke("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Nfe),Cn.init(e,t)}),wpe=ke("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Afe),Cn.init(e,t)}),_pe=ke("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ife),Cn.init(e,t)}),kpe=ke("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Ofe),Cn.init(e,t)}),Spe=ke("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Kfe(t)),Cn.init(e,t)}),Tpe=ke("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Vfe),Cn.init(e,t)}),Cpe=ke("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Gfe(t)),Cn.init(e,t)}),Epe=ke("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Pfe),Cn.init(e,t)}),jpe=ke("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=zfe),Cn.init(e,t),e._zod.bag.format="ipv4"}),Npe=ke("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ufe),Cn.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Ape=ke("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ffe),Cn.init(e,t)}),Ipe=ke("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Bfe),Cn.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const i=Number(a);if(`${i}`!==a)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function NF(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Ope=ke("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Hfe),Cn.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{NF(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Rpe(e){if(!_F.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return NF(n)}const Ppe=ke("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=_F),Cn.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{Rpe(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Mpe=ke("$ZodE164",(e,t)=>{t.pattern??(t.pattern=qfe),Cn.init(e,t)});function Dpe(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const $pe=ke("$ZodJWT",(e,t)=>{Cn.init(e,t),e._zod.check=n=>{Dpe(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),AF=ke("$ZodNumber",(e,t)=>{vn.init(e,t),e._zod.pattern=e._zod.bag.pattern??TF,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...a?{received:a}:{}}),n}}),Lpe=ke("$ZodNumberFormat",(e,t)=>{epe.init(e,t),AF.init(e,t)}),zpe=ke("$ZodBoolean",(e,t)=>{vn.init(e,t),e._zod.pattern=Jfe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),IF=ke("$ZodUnknown",(e,t)=>{vn.init(e,t),e._zod.parse=n=>n}),OF=ke("$ZodNever",(e,t)=>{vn.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function A3(e,t,n){e.issues.length&&t.issues.push(...Ac(n,e.issues)),t.value[n]=e.value}const Upe=ke("$ZodArray",(e,t)=>{vn.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const a=[];for(let i=0;i<s.length;i++){const o=s[i],u=t.element._zod.run({value:o,issues:[]},r);u instanceof Promise?a.push(u.then(h=>A3(h,n,i))):A3(u,n,i)}return a.length?Promise.all(a).then(()=>n):n}});function Tb(e,t,n,r,s){if(e.issues.length){if(s&&!(n in r))return;t.issues.push(...Ac(n,e.issues))}e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function RF(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=ofe(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function PF(e,t,n,r,s,a){const i=[],o=s.keySet,u=s.catchall._zod,h=u.def.type,f=u.optout==="optional";for(const m in t){if(o.has(m))continue;if(h==="never"){i.push(m);continue}const g=u.run({value:t[m],issues:[]},r);g instanceof Promise?e.push(g.then(b=>Tb(b,n,m,t,f))):Tb(g,n,m,t,f)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:a}),e.length?Promise.all(e).then(()=>n):n}const Fpe=ke("$ZodObject",(e,t)=>{if(vn.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const o=t.shape;Object.defineProperty(t,"shape",{get:()=>{const u={...o};return Object.defineProperty(t,"shape",{value:u}),u}})}const r=$x(()=>RF(t));Yt(e._zod,"propValues",()=>{const o=t.shape,u={};for(const h in o){const f=o[h]._zod;if(f.values){u[h]??(u[h]=new Set);for(const m of f.values)u[h].add(m)}}return u});const s=Qp,a=t.catchall;let i;e._zod.parse=(o,u)=>{i??(i=r.value);const h=o.value;if(!s(h))return o.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),o;o.value={};const f=[],m=i.shape;for(const g of i.keys){const b=m[g],w=b._zod.optout==="optional",x=b._zod.run({value:h[g],issues:[]},u);x instanceof Promise?f.push(x.then(S=>Tb(S,o,g,h,w))):Tb(x,o,g,h,w)}return a?PF(f,h,o,u,r.value,e):f.length?Promise.all(f).then(()=>o):o}}),Bpe=ke("$ZodObjectJIT",(e,t)=>{Fpe.init(e,t);const n=e._zod.parse,r=$x(()=>RF(t)),s=g=>{const b=new dpe(["shape","payload","ctx"]),w=r.value,x=T=>{const P=j3(T);return`shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`};b.write("const input = payload.value;");const S=Object.create(null);let k=0;for(const T of w.keys)S[T]=`key_${k++}`;b.write("const newResult = {};");for(const T of w.keys){const P=S[T],D=j3(T),U=g[T]?._zod?.optout==="optional";b.write(`const ${P} = ${x(T)};`),U?b.write(`
        if (${P}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${P}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${P}.value;
        }
        
      `):b.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${P}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${P}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const C=b.compile();return(T,P)=>C(g,T,P)};let a;const i=Qp,o=!fF.jitless,h=o&&afe.value,f=t.catchall;let m;e._zod.parse=(g,b)=>{m??(m=r.value);const w=g.value;return i(w)?o&&h&&b?.async===!1&&b.jitless!==!0?(a||(a=s(t.shape)),g=a(g,b),f?PF([],w,g,b,m,e):g):n(g,b):(g.issues.push({expected:"object",code:"invalid_type",input:w,inst:e}),g)}});function I3(e,t,n,r){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;const s=e.filter(a=>!yd(a));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(a=>a.issues.map(i=>Il(i,r,Al())))}),t)}const MF=ke("$ZodUnion",(e,t)=>{vn.init(e,t),Yt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Yt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Yt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Yt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>jj(a.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(s,a)=>{if(n)return r(s,a);let i=!1;const o=[];for(const u of t.options){const h=u._zod.run({value:s.value,issues:[]},a);if(h instanceof Promise)o.push(h),i=!0;else{if(h.issues.length===0)return h;o.push(h)}}return i?Promise.all(o).then(u=>I3(u,s,e,a)):I3(o,s,e,a)}}),Hpe=ke("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,MF.init(e,t);const n=e._zod.parse;Yt(e._zod,"propValues",()=>{const s={};for(const a of t.options){const i=a._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(const[o,u]of Object.entries(i)){s[o]||(s[o]=new Set);for(const h of u)s[o].add(h)}}return s});const r=$x(()=>{const s=t.options,a=new Map;for(const i of s){const o=i._zod.propValues?.[t.discriminator];if(!o||o.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const u of o){if(a.has(u))throw new Error(`Duplicate discriminator value "${String(u)}"`);a.set(u,i)}}return a});e._zod.parse=(s,a)=>{const i=s.value;if(!Qp(i))return s.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),s;const o=r.value.get(i?.[t.discriminator]);return o?o._zod.run(s,a):t.unionFallback?n(s,a):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:i,path:[t.discriminator],inst:e}),s)}}),qpe=ke("$ZodIntersection",(e,t)=>{vn.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,a=t.left._zod.run({value:s,issues:[]},r),i=t.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([u,h])=>O3(n,u,h)):O3(n,a,i)}});function MT(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if($d(e)&&$d(t)){const n=Object.keys(t),r=Object.keys(e).filter(a=>n.indexOf(a)!==-1),s={...e,...t};for(const a of r){const i=MT(e[a],t[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};s[a]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],a=t[r],i=MT(s,a);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function O3(e,t,n){const r=new Map;let s;for(const o of t.issues)if(o.code==="unrecognized_keys"){s??(s=o);for(const u of o.keys)r.has(u)||r.set(u,{}),r.get(u).l=!0}else e.issues.push(o);for(const o of n.issues)if(o.code==="unrecognized_keys")for(const u of o.keys)r.has(u)||r.set(u,{}),r.get(u).r=!0;else e.issues.push(o);const a=[...r].filter(([,o])=>o.l&&o.r).map(([o])=>o);if(a.length&&s&&e.issues.push({...s,keys:a}),yd(e))return e;const i=MT(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Vpe=ke("$ZodTuple",(e,t)=>{vn.init(e,t);const n=t.items;e._zod.parse=(r,s)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),r;r.value=[];const i=[],o=[...n].reverse().findIndex(f=>f._zod.optin!=="optional"),u=o===-1?0:n.length-o;if(!t.rest){const f=a.length>n.length,m=a.length<u-1;if(f||m)return r.issues.push({...f?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:a,inst:e,origin:"array"}),r}let h=-1;for(const f of n){if(h++,h>=a.length&&h>=u)continue;const m=f._zod.run({value:a[h],issues:[]},s);m instanceof Promise?i.push(m.then(g=>zy(g,r,h))):zy(m,r,h)}if(t.rest){const f=a.slice(n.length);for(const m of f){h++;const g=t.rest._zod.run({value:m,issues:[]},s);g instanceof Promise?i.push(g.then(b=>zy(b,r,h))):zy(g,r,h)}}return i.length?Promise.all(i).then(()=>r):r}});function zy(e,t,n){e.issues.length&&t.issues.push(...Ac(n,e.issues)),t.value[n]=e.value}const Gpe=ke("$ZodRecord",(e,t)=>{vn.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!$d(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const a=[],i=t.keyType._zod.values;if(i){n.value={};const o=new Set;for(const h of i)if(typeof h=="string"||typeof h=="number"||typeof h=="symbol"){o.add(typeof h=="number"?h.toString():h);const f=t.valueType._zod.run({value:s[h],issues:[]},r);f instanceof Promise?a.push(f.then(m=>{m.issues.length&&n.issues.push(...Ac(h,m.issues)),n.value[h]=m.value})):(f.issues.length&&n.issues.push(...Ac(h,f.issues)),n.value[h]=f.value)}let u;for(const h in s)o.has(h)||(u=u??[],u.push(h));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:u})}else{n.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;let u=t.keyType._zod.run({value:o,issues:[]},r);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof o=="string"&&TF.test(o)&&u.issues.length&&u.issues.some(m=>m.code==="invalid_type"&&m.expected==="number")){const m=t.keyType._zod.run({value:Number(o),issues:[]},r);if(m instanceof Promise)throw new Error("Async schemas not supported in object keys currently");m.issues.length===0&&(u=m)}if(u.issues.length){t.mode==="loose"?n.value[o]=s[o]:n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(m=>Il(m,r,Al())),input:o,path:[o],inst:e});continue}const f=t.valueType._zod.run({value:s[o],issues:[]},r);f instanceof Promise?a.push(f.then(m=>{m.issues.length&&n.issues.push(...Ac(o,m.issues)),n.value[u.value]=m.value})):(f.issues.length&&n.issues.push(...Ac(o,f.issues)),n.value[u.value]=f.value)}}return a.length?Promise.all(a).then(()=>n):n}}),Kpe=ke("$ZodEnum",(e,t)=>{vn.init(e,t);const n=pF(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(s=>ife.has(typeof s)).map(s=>typeof s=="string"?Ld(s):s.toString()).join("|")})$`),e._zod.parse=(s,a)=>{const i=s.value;return r.has(i)||s.issues.push({code:"invalid_value",values:n,input:i,inst:e}),s}}),Zpe=ke("$ZodLiteral",(e,t)=>{if(vn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Ld(r):r?Ld(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,s)=>{const a=r.value;return n.has(a)||r.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),r}}),Wpe=ke("$ZodTransform",(e,t)=>{vn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new hF(e.constructor.name);const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(n.value=i,n));if(s instanceof Promise)throw new kd;return n.value=s,n}});function R3(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Vx=ke("$ZodOptional",(e,t)=>{vn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Yt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Yt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${jj(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>R3(a,n.value)):R3(s,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Jpe=ke("$ZodExactOptional",(e,t)=>{Vx.init(e,t),Yt(e._zod,"values",()=>t.innerType._zod.values),Yt(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,r)=>t.innerType._zod.run(n,r)}),Ype=ke("$ZodNullable",(e,t)=>{vn.init(e,t),Yt(e._zod,"optin",()=>t.innerType._zod.optin),Yt(e._zod,"optout",()=>t.innerType._zod.optout),Yt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${jj(n.source)}|null)$`):void 0}),Yt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Qpe=ke("$ZodDefault",(e,t)=>{vn.init(e,t),e._zod.optin="optional",Yt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>P3(a,t)):P3(s,t)}});function P3(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Xpe=ke("$ZodPrefault",(e,t)=>{vn.init(e,t),e._zod.optin="optional",Yt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),eme=ke("$ZodNonOptional",(e,t)=>{vn.init(e,t),Yt(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>M3(a,e)):M3(s,e)}});function M3(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const tme=ke("$ZodCatch",(e,t)=>{vn.init(e,t),Yt(e._zod,"optin",()=>t.innerType._zod.optin),Yt(e._zod,"optout",()=>t.innerType._zod.optout),Yt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=t.catchValue({...n,error:{issues:a.issues.map(i=>Il(i,r,Al()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(a=>Il(a,r,Al()))},input:n.value}),n.issues=[]),n)}}),nme=ke("$ZodPipe",(e,t)=>{vn.init(e,t),Yt(e._zod,"values",()=>t.in._zod.values),Yt(e._zod,"optin",()=>t.in._zod.optin),Yt(e._zod,"optout",()=>t.out._zod.optout),Yt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=t.out._zod.run(n,r);return a instanceof Promise?a.then(i=>Uy(i,t.in,r)):Uy(a,t.in,r)}const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Uy(a,t.out,r)):Uy(s,t.out,r)}});function Uy(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const rme=ke("$ZodReadonly",(e,t)=>{vn.init(e,t),Yt(e._zod,"propValues",()=>t.innerType._zod.propValues),Yt(e._zod,"values",()=>t.innerType._zod.values),Yt(e._zod,"optin",()=>t.innerType?._zod?.optin),Yt(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(D3):D3(s)}});function D3(e){return e.value=Object.freeze(e.value),e}const sme=ke("$ZodCustom",(e,t)=>{js.init(e,t),vn.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(a=>$3(a,n,r,e));$3(s,n,r,e)}});function $3(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(Xp(s))}}var L3;class ame{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];return this._map.set(t,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function ime(){return new ame}(L3=globalThis).__zod_globalRegistry??(L3.__zod_globalRegistry=ime());const wr=globalThis.__zod_globalRegistry;function ome(e,t){return new e({type:"string",...tt(t)})}function lme(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...tt(t)})}function z3(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tt(t)})}function cme(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...tt(t)})}function ume(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tt(t)})}function dme(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tt(t)})}function hme(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tt(t)})}function fme(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...tt(t)})}function pme(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...tt(t)})}function mme(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...tt(t)})}function gme(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...tt(t)})}function yme(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...tt(t)})}function bme(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...tt(t)})}function xme(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...tt(t)})}function vme(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...tt(t)})}function wme(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...tt(t)})}function _me(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...tt(t)})}function kme(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tt(t)})}function Sme(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tt(t)})}function Tme(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...tt(t)})}function Cme(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...tt(t)})}function Eme(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...tt(t)})}function jme(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...tt(t)})}function Nme(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tt(t)})}function Ame(e,t){return new e({type:"string",format:"date",check:"string_format",...tt(t)})}function Ime(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...tt(t)})}function Ome(e,t){return new e({type:"string",format:"duration",check:"string_format",...tt(t)})}function Rme(e,t){return new e({type:"number",checks:[],...tt(t)})}function Pme(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...tt(t)})}function Mme(e,t){return new e({type:"boolean",...tt(t)})}function DF(e){return new e({type:"unknown"})}function $F(e,t){return new e({type:"never",...tt(t)})}function U3(e,t){return new EF({check:"less_than",...tt(t),value:e,inclusive:!1})}function A1(e,t){return new EF({check:"less_than",...tt(t),value:e,inclusive:!0})}function F3(e,t){return new jF({check:"greater_than",...tt(t),value:e,inclusive:!1})}function I1(e,t){return new jF({check:"greater_than",...tt(t),value:e,inclusive:!0})}function B3(e,t){return new Xfe({check:"multiple_of",...tt(t),value:e})}function LF(e,t){return new tpe({check:"max_length",...tt(t),maximum:e})}function Cb(e,t){return new npe({check:"min_length",...tt(t),minimum:e})}function zF(e,t){return new rpe({check:"length_equals",...tt(t),length:e})}function Dme(e,t){return new spe({check:"string_format",format:"regex",...tt(t),pattern:e})}function $me(e){return new ape({check:"string_format",format:"lowercase",...tt(e)})}function Lme(e){return new ipe({check:"string_format",format:"uppercase",...tt(e)})}function zme(e,t){return new ope({check:"string_format",format:"includes",...tt(t),includes:e})}function Ume(e,t){return new lpe({check:"string_format",format:"starts_with",...tt(t),prefix:e})}function Fme(e,t){return new cpe({check:"string_format",format:"ends_with",...tt(t),suffix:e})}function ph(e){return new upe({check:"overwrite",tx:e})}function Bme(e){return ph(t=>t.normalize(e))}function Hme(){return ph(e=>e.trim())}function qme(){return ph(e=>e.toLowerCase())}function Vme(){return ph(e=>e.toUpperCase())}function Gme(){return ph(e=>sfe(e))}function Kme(e,t,n){return new e({type:"array",element:t,...tt(n)})}function Zme(e,t,n){const r=tt(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function Wme(e,t,n){return new e({type:"custom",check:"custom",fn:t,...tt(n)})}function Jme(e){const t=Yme(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Xp(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Xp(s))}},e(n.value,n)));return t}function Yme(e,t){const n=new js({check:"custom",...tt(t)});return n._zod.check=e,n}function Eb(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??wr,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function mn(e,t,n={path:[],schemaPath:[]}){var r;const s=e._zod.def,a=t.seen.get(e);if(a)return a.count++,n.schemaPath.includes(e)&&(a.cycle=n.path),a.schema;const i={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,i);const o=e._zod.toJSONSchema?.();if(o)i.schema=o;else{const f={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,f);else{const g=i.schema,b=t.processors[s.type];if(!b)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);b(e,t,g,f)}const m=e._zod.parent;m&&(i.ref||(i.ref=m),mn(m,t,f),t.seen.get(m).isParent=!0)}const u=t.metadataRegistry.get(e);return u&&Object.assign(i.schema,u),t.io==="input"&&ts(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function jb(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const i of e.seen.entries()){const o=e.metadataRegistry.get(i[0])?.id;if(o){const u=r.get(o);if(u&&u!==i[0])throw new Error(`Duplicate schema id "${o}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(o,i[0])}}const s=i=>{const o=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const m=e.external.registry.get(i[0])?.id,g=e.external.uri??(w=>w);if(m)return{ref:g(m)};const b=i[1].defId??i[1].schema.id??`schema${e.counter++}`;return i[1].defId=b,{defId:b,ref:`${g("__shared")}#/${o}/${b}`}}if(i[1]===n)return{ref:"#"};const h=`#/${o}/`,f=i[1].schema.id??`__schema${e.counter++}`;return{defId:f,ref:h+f}},a=i=>{if(i[1].schema.$ref)return;const o=i[1],{ref:u,defId:h}=s(i);o.def={...o.schema},h&&(o.defId=h);const f=o.schema;for(const m in f)delete f[m];f.$ref=u};if(e.cycles==="throw")for(const i of e.seen.entries()){const o=i[1];if(o.cycle)throw new Error(`Cycle detected: #/${o.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const i of e.seen.entries()){const o=i[1];if(t===i[0]){a(i);continue}if(e.external){const h=e.external.registry.get(i[0])?.id;if(t!==i[0]&&h){a(i);continue}}if(e.metadataRegistry.get(i[0])?.id){a(i);continue}if(o.cycle){a(i);continue}if(o.count>1&&e.reused==="ref"){a(i);continue}}}function Nb(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=i=>{const o=e.seen.get(i);if(o.ref===null)return;const u=o.def??o.schema,h={...u},f=o.ref;if(o.ref=null,f){r(f);const g=e.seen.get(f),b=g.schema;if(b.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(u.allOf=u.allOf??[],u.allOf.push(b)):Object.assign(u,b),Object.assign(u,h),i._zod.parent===f)for(const x in u)x==="$ref"||x==="allOf"||x in h||delete u[x];if(b.$ref)for(const x in u)x==="$ref"||x==="allOf"||x in g.def&&JSON.stringify(u[x])===JSON.stringify(g.def[x])&&delete u[x]}const m=i._zod.parent;if(m&&m!==f){r(m);const g=e.seen.get(m);if(g?.schema.$ref&&(u.$ref=g.schema.$ref,g.def))for(const b in u)b==="$ref"||b==="allOf"||b in g.def&&JSON.stringify(u[b])===JSON.stringify(g.def[b])&&delete u[b]}e.override({zodSchema:i,jsonSchema:u,path:o.path??[]})};for(const i of[...e.seen.entries()].reverse())r(i[0]);const s={};if(e.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const i=e.external.registry.get(t)?.id;if(!i)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(i)}Object.assign(s,n.def??n.schema);const a=e.external?.defs??{};for(const i of e.seen.entries()){const o=i[1];o.def&&o.defId&&(a[o.defId]=o.def)}e.external||Object.keys(a).length>0&&(e.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const i=JSON.parse(JSON.stringify(s));return Object.defineProperty(i,"~standard",{value:{...t["~standard"],jsonSchema:{input:Ab(t,"input",e.processors),output:Ab(t,"output",e.processors)}},enumerable:!1,writable:!1}),i}catch{throw new Error("Error converting schema to JSON.")}}function ts(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return ts(r.element,n);if(r.type==="set")return ts(r.valueType,n);if(r.type==="lazy")return ts(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return ts(r.innerType,n);if(r.type==="intersection")return ts(r.left,n)||ts(r.right,n);if(r.type==="record"||r.type==="map")return ts(r.keyType,n)||ts(r.valueType,n);if(r.type==="pipe")return ts(r.in,n)||ts(r.out,n);if(r.type==="object"){for(const s in r.shape)if(ts(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(ts(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(ts(s,n))return!0;return!!(r.rest&&ts(r.rest,n))}return!1}const Qme=(e,t={})=>n=>{const r=Eb({...n,processors:t});return mn(e,r),jb(r,e),Nb(r,e)},Ab=(e,t,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},i=Eb({...s??{},target:a,io:t,processors:n});return mn(e,i),jb(i,e),Nb(i,e)},Xme={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},UF=(e,t,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:i,format:o,patterns:u,contentEncoding:h}=e._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof i=="number"&&(s.maxLength=i),o&&(s.format=Xme[o]??o,s.format===""&&delete s.format,o==="time"&&delete s.format),h&&(s.contentEncoding=h),u&&u.size>0){const f=[...u];f.length===1?s.pattern=f[0].source:f.length>1&&(s.allOf=[...f.map(m=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:m.source}))])}},FF=(e,t,n,r)=>{const s=n,{minimum:a,maximum:i,format:o,multipleOf:u,exclusiveMaximum:h,exclusiveMinimum:f}=e._zod.bag;typeof o=="string"&&o.includes("int")?s.type="integer":s.type="number",typeof f=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=f,s.exclusiveMinimum=!0):s.exclusiveMinimum=f),typeof a=="number"&&(s.minimum=a,typeof f=="number"&&t.target!=="draft-04"&&(f>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof i=="number"&&(s.maximum=i,typeof h=="number"&&t.target!=="draft-04"&&(h<=i?delete s.maximum:delete s.exclusiveMaximum)),typeof u=="number"&&(s.multipleOf=u)},BF=(e,t,n,r)=>{n.type="boolean"},ege=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},tge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},nge=(e,t,n,r)=>{t.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},rge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},sge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},HF=(e,t,n,r)=>{n.not={}},age=(e,t,n,r)=>{},qF=(e,t,n,r)=>{},ige=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},VF=(e,t,n,r)=>{const s=e._zod.def,a=pF(s.entries);a.every(i=>typeof i=="number")&&(n.type="number"),a.every(i=>typeof i=="string")&&(n.type="string"),n.enum=a},GF=(e,t,n,r)=>{const s=e._zod.def,a=[];for(const i of s.values)if(i===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof i=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");a.push(Number(i))}else a.push(i);if(a.length!==0)if(a.length===1){const i=a[0];n.type=i===null?"null":typeof i,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[i]:n.const=i}else a.every(i=>typeof i=="number")&&(n.type="number"),a.every(i=>typeof i=="string")&&(n.type="string"),a.every(i=>typeof i=="boolean")&&(n.type="boolean"),a.every(i=>i===null)&&(n.type="null"),n.enum=a},oge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},lge=(e,t,n,r)=>{const s=n,a=e._zod.pattern;if(!a)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=a.source},cge=(e,t,n,r)=>{const s=n,a={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:o,mime:u}=e._zod.bag;i!==void 0&&(a.minLength=i),o!==void 0&&(a.maxLength=o),u?u.length===1?(a.contentMediaType=u[0],Object.assign(s,a)):(Object.assign(s,a),s.anyOf=u.map(h=>({contentMediaType:h}))):Object.assign(s,a)},uge=(e,t,n,r)=>{n.type="boolean"},KF=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},dge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},ZF=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},hge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},fge=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},WF=(e,t,n,r)=>{const s=n,a=e._zod.def,{minimum:i,maximum:o}=e._zod.bag;typeof i=="number"&&(s.minItems=i),typeof o=="number"&&(s.maxItems=o),s.type="array",s.items=mn(a.element,t,{...r,path:[...r.path,"items"]})},JF=(e,t,n,r)=>{const s=n,a=e._zod.def;s.type="object",s.properties={};const i=a.shape;for(const h in i)s.properties[h]=mn(i[h],t,{...r,path:[...r.path,"properties",h]});const o=new Set(Object.keys(i)),u=new Set([...o].filter(h=>{const f=a.shape[h]._zod;return t.io==="input"?f.optin===void 0:f.optout===void 0}));u.size>0&&(s.required=Array.from(u)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=mn(a.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):t.io==="output"&&(s.additionalProperties=!1)},YF=(e,t,n,r)=>{const s=e._zod.def,a=s.inclusive===!1,i=s.options.map((o,u)=>mn(o,t,{...r,path:[...r.path,a?"oneOf":"anyOf",u]}));a?n.oneOf=i:n.anyOf=i},QF=(e,t,n,r)=>{const s=e._zod.def,a=mn(s.left,t,{...r,path:[...r.path,"allOf",0]}),i=mn(s.right,t,{...r,path:[...r.path,"allOf",1]}),o=h=>"allOf"in h&&Object.keys(h).length===1,u=[...o(a)?a.allOf:[a],...o(i)?i.allOf:[i]];n.allOf=u},XF=(e,t,n,r)=>{const s=n,a=e._zod.def;s.type="array";const i=t.target==="draft-2020-12"?"prefixItems":"items",o=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",u=a.items.map((g,b)=>mn(g,t,{...r,path:[...r.path,i,b]})),h=a.rest?mn(a.rest,t,{...r,path:[...r.path,o,...t.target==="openapi-3.0"?[a.items.length]:[]]}):null;t.target==="draft-2020-12"?(s.prefixItems=u,h&&(s.items=h)):t.target==="openapi-3.0"?(s.items={anyOf:u},h&&s.items.anyOf.push(h),s.minItems=u.length,h||(s.maxItems=u.length)):(s.items=u,h&&(s.additionalItems=h));const{minimum:f,maximum:m}=e._zod.bag;typeof f=="number"&&(s.minItems=f),typeof m=="number"&&(s.maxItems=m)},eB=(e,t,n,r)=>{const s=n,a=e._zod.def;s.type="object";const i=a.keyType,u=i._zod.bag?.patterns;if(a.mode==="loose"&&u&&u.size>0){const f=mn(a.valueType,t,{...r,path:[...r.path,"patternProperties","*"]});s.patternProperties={};for(const m of u)s.patternProperties[m.source]=f}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(s.propertyNames=mn(a.keyType,t,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=mn(a.valueType,t,{...r,path:[...r.path,"additionalProperties"]});const h=i._zod.values;if(h){const f=[...h].filter(m=>typeof m=="string"||typeof m=="number");f.length>0&&(s.required=f)}},tB=(e,t,n,r)=>{const s=e._zod.def,a=mn(s.innerType,t,r),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},nB=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType},rB=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},sB=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},aB=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType;let i;try{i=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=i},iB=(e,t,n,r)=>{const s=e._zod.def,a=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;mn(a,t,r);const i=t.seen.get(e);i.ref=a},oB=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType,n.readOnly=!0},pge=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType},Ij=(e,t,n,r)=>{const s=e._zod.def;mn(s.innerType,t,r);const a=t.seen.get(e);a.ref=s.innerType},mge=(e,t,n,r)=>{const s=e._zod.innerType;mn(s,t,r);const a=t.seen.get(e);a.ref=s},H3={string:UF,number:FF,boolean:BF,bigint:ege,symbol:tge,null:nge,undefined:rge,void:sge,never:HF,any:age,unknown:qF,date:ige,enum:VF,literal:GF,nan:oge,template_literal:lge,file:cge,success:uge,custom:KF,function:dge,transform:ZF,map:hge,set:fge,array:WF,object:JF,union:YF,intersection:QF,tuple:XF,record:eB,nullable:tB,nonoptional:nB,default:rB,prefault:sB,catch:aB,pipe:iB,readonly:oB,promise:pge,optional:Ij,lazy:mge};function DT(e,t){if("_idmap"in e){const r=e,s=Eb({...t,processors:H3}),a={};for(const u of r._idmap.entries()){const[h,f]=u;mn(f,s)}const i={},o={registry:r,uri:t?.uri,defs:a};s.external=o;for(const u of r._idmap.entries()){const[h,f]=u;jb(s,f),i[h]=Nb(s,f)}if(Object.keys(a).length>0){const u=s.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[u]:a}}return{schemas:i}}const n=Eb({...t,processors:H3});return mn(e,n),jb(n,e),Nb(n,e)}function En(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_zod"in t))return!1;const n=t._zod;return typeof n=="object"&&n!==null&&"def"in n}function er(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_def"in t)||"_zod"in t)return!1;const n=t._def;return typeof n=="object"&&n!=null&&"typeName"in n}function gge(e){return En(e)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),er(e)}function Lr(e){return!e||typeof e!="object"||Array.isArray(e)?!1:!!(En(e)||er(e))}function lB(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodLiteral"}function cB(e){return En(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="literal":!1}function yge(e){return!!(lB(e)||cB(e))}async function Gx(e,t){if(En(e))try{return{success:!0,data:await wF(e,t)}}catch(n){return{success:!1,error:n}}if(er(e))return await e.safeParseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Kx(e,t){if(En(e))return await wF(e,t);if(er(e))return await e.parseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function bge(e,t){if(En(e))try{return{success:!0,data:Ux(e,t)}}catch(n){return{success:!1,error:n}}if(er(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function xge(e,t){if(En(e))return Ux(e,t);if(er(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Zx(e){if(En(e))return wr.get(e)?.description;if(er(e)||"description"in e&&typeof e.description=="string")return e.description}function vge(e){if(!Lr(e))return!1;if(er(e)){const t=e._def;if(t.typeName==="ZodObject"){const n=e;return!n.shape||Object.keys(n.shape).length===0}if(t.typeName==="ZodRecord")return!0}if(En(e)){const t=e._zod.def;if(t.type==="object"){const n=e;return!n.shape||Object.keys(n.shape).length===0}if(t.type==="record")return!0}return typeof e=="object"&&e!==null&&!("shape"in e)}function Oj(e){return Lr(e)?er(e)?e._def.typeName==="ZodString":En(e)?e._zod.def.type==="string":!1:!1}function Rj(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodObject"}function Pi(e){return En(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="object":!1}function Wx(e){return En(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="array":!1}function uB(e){return En(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="optional":!1}function dB(e){return En(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="nullable":!1}function wge(e){return!!(Rj(e)||Pi(e))}function $T(e){if(er(e))return e.shape;if(En(e))return e._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function _ge(e,t){if(er(e))return e.extend(t);if(En(e))return yF(e,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function kge(e){if(er(e))return e.partial();if(En(e))return bF(Vx,e,void 0);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Ib(e,t=!1){if(er(e))return e.strict();if(Pi(e)){const n=e._zod.def.shape;if(t)for(const[a,i]of Object.entries(e._zod.def.shape)){if(Pi(i)){const u=Ib(i,t);n[a]=u}else if(Wx(i)){let u=i._zod.def.element;Pi(u)&&(u=Ib(u,t)),n[a]=$r(i,{...i._zod.def,element:u})}else n[a]=i;const o=wr.get(i);o&&wr.add(n[a],o)}const r=$r(e,{...e._zod.def,shape:n,catchall:$F(OF)}),s=wr.get(e);return s&&wr.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function LT(e,t=!1){if(Rj(e))return e.passthrough();if(Pi(e)){const n=e._zod.def.shape;if(t)for(const[a,i]of Object.entries(e._zod.def.shape)){if(Pi(i)){const u=LT(i,t);n[a]=u}else if(Wx(i)){let u=i._zod.def.element;Pi(u)&&(u=LT(u,t)),n[a]=$r(i,{...i._zod.def,element:u})}else n[a]=i;const o=wr.get(i);o&&wr.add(n[a],o)}const r=$r(e,{...e._zod.def,shape:n,catchall:DF(IF)}),s=wr.get(e);return s&&wr.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Sge(e){if(er(e))try{const t=e.parse(void 0);return()=>t}catch{return}if(En(e))try{const t=Ux(e,void 0);return()=>t}catch{return}}function Tge(e){return er(e)&&"typeName"in e._def&&e._def.typeName==="ZodEffects"}function Cge(e){return En(e)&&e._zod.def.type==="pipe"}function bc(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(er(e))return Tge(e)?bc(e._def.schema,t,n):e;if(En(e)){let s=e;if(Cge(e)&&(s=bc(e._zod.def.in,t,n)),t){if(Pi(s)){const i={};for(const[o,u]of Object.entries(s._zod.def.shape))i[o]=bc(u,t,n);s=$r(s,{...s._zod.def,shape:i})}else if(Wx(s)){const i=bc(s._zod.def.element,t,n);s=$r(s,{...s._zod.def,element:i})}else if(uB(s)){const i=bc(s._zod.def.innerType,t,n);s=$r(s,{...s._zod.def,innerType:i})}else if(dB(s)){const i=bc(s._zod.def.innerType,t,n);s=$r(s,{...s._zod.def,innerType:i})}}const a=wr.get(e);return a&&wr.add(s,a),n.set(e,s),s}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function hB(e,t=!1){return bc(e,t,new WeakMap)}function Ege(e,t){if(er(e)){const n=$T(e),r={};for(const[s,a]of Object.entries(n))t(s,a)?r[s]=a.optional():r[s]=a;return e.extend(r)}if(En(e)){const n=$T(e),r={...e._zod.def.shape};for(const[i,o]of Object.entries(n))t(i,o)&&(r[i]=new Vx({type:"optional",innerType:o}));const s=$r(e,{...e._zod.def,shape:r}),a=wr.get(e);return a&&wr.add(s,a),s}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function fB(e){return e instanceof Error&&(e.constructor.name==="ZodError"||e.constructor.name==="$ZodError")}function O1(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}const jge=["*","_","`"];function Nge(e){let t="";for(const[n,r]of Object.entries(e))t+=`	classDef ${n} ${r};
`;return t}function Age(e,t,n){const{firstNode:r,lastNode:s,nodeColors:a,withStyles:i=!0,curveStyle:o="linear",wrapLabelNWords:u=9}=n??{};let h=i?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(i){const w="default",x={[w]:"{0}({1})"};r!==void 0&&(x[r]="{0}([{1}]):::first"),s!==void 0&&(x[s]="{0}([{1}]):::last");for(const[S,k]of Object.entries(e)){const C=k.name.split(":").pop()??"";let P=jge.some(R=>C.startsWith(R)&&C.endsWith(R))?`<p>${C}</p>`:C;Object.keys(k.metadata??{}).length&&(P+=`<hr/><small><em>${Object.entries(k.metadata??{}).map(([R,U])=>`${R} = ${U}`).join(`
`)}</em></small>`);const D=(x[S]??x[w]).replace("{0}",O1(S)).replace("{1}",P);h+=`	${D}
`}}const f={};for(const w of t){const x=w.source.split(":"),S=w.target.split(":"),k=x.filter((C,T)=>C===S[T]).join(":");f[k]||(f[k]=[]),f[k].push(w)}const m=new Set;function g(w){return[...w].sort((x,S)=>x.split(":").length-S.split(":").length)}function b(w,x){const S=w.length===1&&w[0].source===w[0].target;if(x&&!S){const C=x.split(":").pop();if(m.has(x))throw new Error(`Found duplicate subgraph '${C}' at '${x} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);m.add(x),h+=`	subgraph ${C}
`}const k=g(Object.keys(f).filter(C=>C.startsWith(`${x}:`)&&C!==x&&C.split(":").length===x.split(":").length+1));for(const C of k)b(f[C],C);for(const C of w){const{source:T,target:P,data:D,conditional:R}=C;let U="";if(D!==void 0){let j=D;const se=j.split(" ");se.length>u&&(j=Array.from({length:Math.ceil(se.length/u)},(B,ee)=>se.slice(ee*u,(ee+1)*u).join(" ")).join("&nbsp;<br>&nbsp;")),U=R?` -. &nbsp;${j}&nbsp; .-> `:` -- &nbsp;${j}&nbsp; --> `}else U=R?" -.-> ":" --> ";h+=`	${O1(T)}${U}${O1(P)};
`}x&&!S&&(h+=`	end
`)}b(f[""]??[],"");for(const w in f)!w.includes(":")&&w!==""&&b(f[w],w);return i&&(h+=Nge(a??{})),h}async function Ige(e,t){let n=t?.backgroundColor??"white";const r=t?.imageType??"png",s=nfe(e);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const a=`https://mermaid.ink/img/${s}?bgColor=${n}&type=${r}`,i=await fetch(a);if(!i.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${i.status}`,`Status text: ${i.statusText}`].join(`
`));return await i.blob()}const Oge=Symbol("Let zodToJsonSchema decide on which parser to use"),Rge={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Pge=e=>({...Rge,...e}),Mge=e=>{const t=Pge(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},pB=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function Xs(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?pB(t,e.currentPath):t.join("/")}}function mB(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function rn(e,t,n,r,s){e[t]=n,mB(e,t,r,s)}var Kt;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},e.getValidEnumValues=s=>{const a=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return e.objectValues(i)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},e.find=(s,a)=>{for(const i of s)if(a(i))return i},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Kt||(Kt={}));var q3;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(q3||(q3={}));const Qe=Kt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gl=e=>{switch(typeof e){case"undefined":return Qe.undefined;case"string":return Qe.string;case"number":return Number.isNaN(e)?Qe.nan:Qe.number;case"boolean":return Qe.boolean;case"function":return Qe.function;case"bigint":return Qe.bigint;case"symbol":return Qe.symbol;case"object":return Array.isArray(e)?Qe.array:e===null?Qe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Qe.promise:typeof Map<"u"&&e instanceof Map?Qe.map:typeof Set<"u"&&e instanceof Set?Qe.set:typeof Date<"u"&&e instanceof Date?Qe.date:Qe.object;default:return Qe.unknown}},Re=Kt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class No extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let o=r,u=0;for(;u<i.path.length;){const h=i.path[u];u===i.path.length-1?(o[h]=o[h]||{_errors:[]},o[h]._errors.push(n(i))):o[h]=o[h]||{_errors:[]},o=o[h],u++}}};return s(this),r}static assert(t){if(!(t instanceof No))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n=Object.create(null),r=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}No.create=e=>new No(e);const zT=(e,t)=>{let n;switch(e.code){case Re.invalid_type:e.received===Qe.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Re.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kt.jsonStringifyReplacer)}`;break;case Re.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kt.joinValues(e.keys,", ")}`;break;case Re.invalid_union:n="Invalid input";break;case Re.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kt.joinValues(e.options)}`;break;case Re.invalid_enum_value:n=`Invalid enum value. Expected ${Kt.joinValues(e.options)}, received '${e.received}'`;break;case Re.invalid_arguments:n="Invalid function arguments";break;case Re.invalid_return_type:n="Invalid function return type";break;case Re.invalid_date:n="Invalid date";break;case Re.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Re.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Re.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Re.custom:n="Invalid input";break;case Re.invalid_intersection_types:n="Intersection results could not be merged";break;case Re.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Re.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kt.assertNever(e)}return{message:n}};let Dge=zT;function $ge(){return Dge}const Lge=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,a=[...n,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const u=r.filter(h=>!!h).slice().reverse();for(const h of u)o=h(i,{data:t,defaultError:o}).message;return{...s,path:a,message:o}};function Le(e,t){const n=$ge(),r=Lge({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zT?void 0:zT].filter(s=>!!s)});e.common.issues.push(r)}class ea{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return vt;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const a=await s.key,i=await s.value;r.push({key:a,value:i})}return ea.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return vt;a.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[a.value]=i.value)}return{status:t.value,value:r}}}const vt=Object.freeze({status:"aborted"}),Xf=e=>({status:"dirty",value:e}),Aa=e=>({status:"valid",value:e}),V3=e=>e.status==="aborted",G3=e=>e.status==="dirty",zd=e=>e.status==="valid",Ob=e=>typeof Promise<"u"&&e instanceof Promise;var et;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(et||(et={}));class Ol{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const K3=(e,t)=>{if(zd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new No(e.common.issues);return this._error=n,this._error}}};function Nt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(i,o)=>{const{message:u}=e;return i.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:u??r??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:u??n??o.defaultError}},description:s}}let Ht=class{get description(){return this._def.description}_getType(t){return gl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ea,ctx:{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Ob(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},s=this._parseSync({data:t,path:r.path,parent:r});return K3(r,s)}"~validate"(t){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)};if(!this["~standard"].async)try{const r=this._parseSync({data:t,path:[],parent:n});return zd(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(r=>zd(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},s=this._parse({data:t,path:r.path,parent:r}),a=await(Ob(s)?s:Promise.resolve(s));return K3(r,a)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const i=t(s),o=()=>a.addIssue({code:Re.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new Fd({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Sl.create(this,this._def)}nullable(){return Bd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ud.create(this)}promise(){return Db.create(this,this._def)}or(t){return Pb.create([this,t],this._def)}and(t){return Mb.create(this,t,this._def)}transform(t){return new Fd({...Nt(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new VT({...Nt(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new oye({typeName:we.ZodBranded,type:this,...Nt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new GT({...Nt(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Mj.create(this,t)}readonly(){return KT.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const zge=/^c[^\s-]{8,}$/i,Uge=/^[0-9a-z]+$/,Fge=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bge=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Hge=/^[a-z0-9_-]{21}$/i,qge=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Vge=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Gge=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Kge="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let R1;const Zge=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wge=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jge=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yge=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qge=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xge=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eye=new RegExp(`^${gB}$`);function yB(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function tye(e){return new RegExp(`^${yB(e)}$`)}function nye(e){let t=`${gB}T${yB(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function rye(e,t){return!!((t==="v4"||!t)&&Zge.test(e)||(t==="v6"||!t)&&Jge.test(e))}function sye(e,t){if(!qge.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function aye(e,t){return!!((t==="v4"||!t)&&Wge.test(e)||(t==="v6"||!t)&&Yge.test(e))}let UT=class ep extends Ht{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Qe.string){const a=this._getOrReturnCtx(t);return Le(a,{code:Re.invalid_type,expected:Qe.string,received:a.parsedType}),vt}const r=new ea;let s;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const i=t.data.length>a.value,o=t.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(t,s),i?Le(s,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&Le(s,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Gge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"email",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")R1||(R1=new RegExp(Kge,"u")),R1.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"emoji",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Bge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"uuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Hge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"nanoid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")zge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"cuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Uge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"cuid2",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Fge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"ulid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Le(s,{validation:"url",code:Re.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"regex",code:Re.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?nye(a).test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?eye.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?tye(a).test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Vge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"duration",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?rye(t.data,a.version)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"ip",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?sye(t.data,a.alg)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"jwt",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?aye(t.data,a.version)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"cidr",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Qge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"base64",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Xge.test(t.data)||(s=this._getOrReturnCtx(t,s),Le(s,{validation:"base64url",code:Re.invalid_string,message:a.message}),r.dirty()):Kt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Re.invalid_string,...et.errToObj(r)})}_addCheck(t){return new ep({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...et.errToObj(t)})}url(t){return this._addCheck({kind:"url",...et.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...et.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...et.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...et.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...et.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...et.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...et.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...et.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...et.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...et.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...et.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...et.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...et.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...et.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...et.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...et.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...et.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...et.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...et.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...et.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...et.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...et.errToObj(n)})}nonempty(t){return this.min(1,et.errToObj(t))}trim(){return new ep({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ep({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ep({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};UT.create=e=>new UT({checks:[],typeName:we.ZodString,coerce:e?.coerce??!1,...Nt(e)});function iye(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return a%i/10**s}let Z3=class FT extends Ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Qe.number){const a=this._getOrReturnCtx(t);return Le(a,{code:Re.invalid_type,expected:Qe.number,received:a.parsedType}),vt}let r;const s=new ea;for(const a of this._def.checks)a.kind==="int"?Kt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?iye(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.not_finite,message:a.message}),s.dirty()):Kt.assertNever(a);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,et.toString(n))}setLimit(t,n,r,s){return new FT({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(t){return new FT({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:et.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:et.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:et.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};Z3.create=e=>new Z3({checks:[],typeName:we.ZodNumber,coerce:e?.coerce||!1,...Nt(e)});class em extends Ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Qe.bigint)return this._getInvalidInput(t);let r;const s=new ea;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Le(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Kt.assertNever(a);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Le(n,{code:Re.invalid_type,expected:Qe.bigint,received:n.parsedType}),vt}gte(t,n){return this.setLimit("min",t,!0,et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,et.toString(n))}setLimit(t,n,r,s){return new em({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(t){return new em({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:et.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}em.create=e=>new em({checks:[],typeName:we.ZodBigInt,coerce:e?.coerce??!1,...Nt(e)});let W3=class extends Ht{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Qe.boolean){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.boolean,received:r.parsedType}),vt}return Aa(t.data)}};W3.create=e=>new W3({typeName:we.ZodBoolean,coerce:e?.coerce||!1,...Nt(e)});class Rb extends Ht{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Qe.date){const a=this._getOrReturnCtx(t);return Le(a,{code:Re.invalid_type,expected:Qe.date,received:a.parsedType}),vt}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Le(a,{code:Re.invalid_date}),vt}const r=new ea;let s;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(s=this._getOrReturnCtx(t,s),Le(s,{code:Re.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Kt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Rb({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:et.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:et.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Rb.create=e=>new Rb({checks:[],coerce:e?.coerce||!1,typeName:we.ZodDate,...Nt(e)});class J3 extends Ht{_parse(t){if(this._getType(t)!==Qe.symbol){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.symbol,received:r.parsedType}),vt}return Aa(t.data)}}J3.create=e=>new J3({typeName:we.ZodSymbol,...Nt(e)});class Y3 extends Ht{_parse(t){if(this._getType(t)!==Qe.undefined){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.undefined,received:r.parsedType}),vt}return Aa(t.data)}}Y3.create=e=>new Y3({typeName:we.ZodUndefined,...Nt(e)});class Q3 extends Ht{_parse(t){if(this._getType(t)!==Qe.null){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.null,received:r.parsedType}),vt}return Aa(t.data)}}Q3.create=e=>new Q3({typeName:we.ZodNull,...Nt(e)});class BT extends Ht{constructor(){super(...arguments),this._any=!0}_parse(t){return Aa(t.data)}}BT.create=e=>new BT({typeName:we.ZodAny,...Nt(e)});let X3=class extends Ht{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Aa(t.data)}};X3.create=e=>new X3({typeName:we.ZodUnknown,...Nt(e)});let Rl=class extends Ht{_parse(t){const n=this._getOrReturnCtx(t);return Le(n,{code:Re.invalid_type,expected:Qe.never,received:n.parsedType}),vt}};Rl.create=e=>new Rl({typeName:we.ZodNever,...Nt(e)});class eD extends Ht{_parse(t){if(this._getType(t)!==Qe.undefined){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.void,received:r.parsedType}),vt}return Aa(t.data)}}eD.create=e=>new eD({typeName:we.ZodVoid,...Nt(e)});let Ud=class U0 extends Ht{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==Qe.array)return Le(n,{code:Re.invalid_type,expected:Qe.array,received:n.parsedType}),vt;if(s.exactLength!==null){const i=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(i||o)&&(Le(n,{code:i?Re.too_big:Re.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Le(n,{code:Re.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Le(n,{code:Re.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,o)=>s.type._parseAsync(new Ol(n,i,n.path,o)))).then(i=>ea.mergeArray(r,i));const a=[...n.data].map((i,o)=>s.type._parseSync(new Ol(n,i,n.path,o)));return ea.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new U0({...this._def,minLength:{value:t,message:et.toString(n)}})}max(t,n){return new U0({...this._def,maxLength:{value:t,message:et.toString(n)}})}length(t,n){return new U0({...this._def,exactLength:{value:t,message:et.toString(n)}})}nonempty(t){return this.min(1,t)}};Ud.create=(e,t)=>new Ud({type:e,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Nt(t)});function td(e){if(e instanceof Ao){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Sl.create(td(r))}return new Ao({...e._def,shape:()=>t})}else return e instanceof Ud?new Ud({...e._def,type:td(e.element)}):e instanceof Sl?Sl.create(td(e.unwrap())):e instanceof Bd?Bd.create(td(e.unwrap())):e instanceof tm?tm.create(e.items.map(t=>td(t))):e}let Ao=class Va extends Ht{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Qe.object){const h=this._getOrReturnCtx(t);return Le(h,{code:Re.invalid_type,expected:Qe.object,received:h.parsedType}),vt}const{status:r,ctx:s}=this._processInputParams(t),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Rl&&this._def.unknownKeys==="strip"))for(const h in s.data)i.includes(h)||o.push(h);const u=[];for(const h of i){const f=a[h],m=s.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new Ol(s,m,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof Rl){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of o)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(h==="strict")o.length>0&&(Le(s,{code:Re.unrecognized_keys,keys:o}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of o){const m=s.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new Ol(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of u){const m=await f.key,g=await f.value;h.push({key:m,value:g,alwaysSet:f.alwaysSet})}return h}).then(h=>ea.mergeObjectSync(r,h)):ea.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return et.errToObj,new Va({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{const s=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:et.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new Va({...this._def,unknownKeys:"strip"})}passthrough(){return new Va({...this._def,unknownKeys:"passthrough"})}extend(t){return new Va({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Va({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:we.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Va({...this._def,catchall:t})}pick(t){const n={};for(const r of Kt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Va({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Kt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Va({...this._def,shape:()=>n})}deepPartial(){return td(this)}partial(t){const n={};for(const r of Kt.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new Va({...this._def,shape:()=>n})}required(t){const n={};for(const r of Kt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Sl;)a=a._def.innerType;n[r]=a}return new Va({...this._def,shape:()=>n})}keyof(){return xB(Kt.objectKeys(this.shape))}};Ao.create=(e,t)=>new Ao({shape:()=>e,unknownKeys:"strip",catchall:Rl.create(),typeName:we.ZodObject,...Nt(t)});Ao.strictCreate=(e,t)=>new Ao({shape:()=>e,unknownKeys:"strict",catchall:Rl.create(),typeName:we.ZodObject,...Nt(t)});Ao.lazycreate=(e,t)=>new Ao({shape:e,unknownKeys:"strip",catchall:Rl.create(),typeName:we.ZodObject,...Nt(t)});let Pb=class extends Ht{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new No(o.ctx.common.issues));return Le(n,{code:Re.invalid_union,unionErrors:i}),vt}if(n.common.async)return Promise.all(r.map(async a=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const u of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:h}),h.common.issues.length&&i.push(h.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(u=>new No(u));return Le(n,{code:Re.invalid_union,unionErrors:o}),vt}}get options(){return this._def.options}};Pb.create=(e,t)=>new Pb({options:e,typeName:we.ZodUnion,...Nt(t)});function HT(e,t){const n=gl(e),r=gl(t);if(e===t)return{valid:!0,data:e};if(n===Qe.object&&r===Qe.object){const s=Kt.objectKeys(t),a=Kt.objectKeys(e).filter(o=>s.indexOf(o)!==-1),i={...e,...t};for(const o of a){const u=HT(e[o],t[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(n===Qe.array&&r===Qe.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<e.length;a++){const i=e[a],o=t[a],u=HT(i,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===Qe.date&&r===Qe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let Mb=class extends Ht{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(a,i)=>{if(V3(a)||V3(i))return vt;const o=HT(a.value,i.value);return o.valid?((G3(a)||G3(i))&&n.dirty(),{status:n.value,value:o.data}):(Le(r,{code:Re.invalid_intersection_types}),vt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Mb.create=(e,t,n)=>new Mb({left:e,right:t,typeName:we.ZodIntersection,...Nt(n)});let tm=class bB extends Ht{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Qe.array)return Le(r,{code:Re.invalid_type,expected:Qe.array,received:r.parsedType}),vt;if(r.data.length<this._def.items.length)return Le(r,{code:Re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vt;!this._def.rest&&r.data.length>this._def.items.length&&(Le(r,{code:Re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((i,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Ol(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>ea.mergeArray(n,i)):ea.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new bB({...this._def,rest:t})}};tm.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tm({items:e,typeName:we.ZodTuple,rest:null,...Nt(t)})};class tD extends Ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Qe.map)return Le(r,{code:Re.invalid_type,expected:Qe.map,received:r.parsedType}),vt;const s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,u],h)=>({key:s._parse(new Ol(r,o,r.path,[h,"key"])),value:a._parse(new Ol(r,u,r.path,[h,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const h=await u.key,f=await u.value;if(h.status==="aborted"||f.status==="aborted")return vt;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(h.value,f.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const u of i){const h=u.key,f=u.value;if(h.status==="aborted"||f.status==="aborted")return vt;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(h.value,f.value)}return{status:n.value,value:o}}}}tD.create=(e,t,n)=>new tD({valueType:t,keyType:e,typeName:we.ZodMap,...Nt(n)});class nm extends Ht{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Qe.set)return Le(r,{code:Re.invalid_type,expected:Qe.set,received:r.parsedType}),vt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Le(r,{code:Re.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Le(r,{code:Re.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function i(u){const h=new Set;for(const f of u){if(f.status==="aborted")return vt;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const o=[...r.data.values()].map((u,h)=>a._parse(new Ol(r,u,r.path,h)));return r.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(t,n){return new nm({...this._def,minSize:{value:t,message:et.toString(n)}})}max(t,n){return new nm({...this._def,maxSize:{value:t,message:et.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}nm.create=(e,t)=>new nm({valueType:e,minSize:null,maxSize:null,typeName:we.ZodSet,...Nt(t)});class nD extends Ht{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nD.create=(e,t)=>new nD({getter:e,typeName:we.ZodLazy,...Nt(t)});let rD=class extends Ht{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Le(n,{received:n.data,code:Re.invalid_literal,expected:this._def.value}),vt}return{status:"valid",value:t.data}}get value(){return this._def.value}};rD.create=(e,t)=>new rD({value:e,typeName:we.ZodLiteral,...Nt(t)});function xB(e,t){return new Pj({values:e,typeName:we.ZodEnum,...Nt(t)})}let Pj=class qT extends Ht{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Le(n,{expected:Kt.joinValues(r),received:n.parsedType,code:Re.invalid_type}),vt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Le(n,{received:n.data,code:Re.invalid_enum_value,options:r}),vt}return Aa(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return qT.create(t,{...this._def,...n})}exclude(t,n=this._def){return qT.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};Pj.create=xB;class sD extends Ht{_parse(t){const n=Kt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Qe.string&&r.parsedType!==Qe.number){const s=Kt.objectValues(n);return Le(r,{expected:Kt.joinValues(s),received:r.parsedType,code:Re.invalid_type}),vt}if(this._cache||(this._cache=new Set(Kt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Kt.objectValues(n);return Le(r,{received:r.data,code:Re.invalid_enum_value,options:s}),vt}return Aa(t.data)}get enum(){return this._def.values}}sD.create=(e,t)=>new sD({values:e,typeName:we.ZodNativeEnum,...Nt(t)});class Db extends Ht{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Qe.promise&&n.common.async===!1)return Le(n,{code:Re.invalid_type,expected:Qe.promise,received:n.parsedType}),vt;const r=n.parsedType===Qe.promise?n.data:Promise.resolve(n.data);return Aa(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Db.create=(e,t)=>new Db({type:e,typeName:we.ZodPromise,...Nt(t)});class Fd extends Ht{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,a={addIssue:i=>{Le(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(n.value==="aborted")return vt;const u=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return u.status==="aborted"?vt:u.status==="dirty"||n.value==="dirty"?Xf(u.value):u});{if(n.value==="aborted")return vt;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?vt:o.status==="dirty"||n.value==="dirty"?Xf(o.value):o}}if(s.type==="refinement"){const i=o=>{const u=s.refinement(o,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?vt:(o.status==="dirty"&&n.dirty(),i(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?vt:(o.status==="dirty"&&n.dirty(),i(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!zd(i))return vt;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>zd(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:n.value,value:o})):vt);Kt.assertNever(s)}}Fd.create=(e,t,n)=>new Fd({schema:e,typeName:we.ZodEffects,effect:t,...Nt(n)});Fd.createWithPreprocess=(e,t,n)=>new Fd({schema:t,effect:{type:"preprocess",transform:e},typeName:we.ZodEffects,...Nt(n)});let Sl=class extends Ht{_parse(t){return this._getType(t)===Qe.undefined?Aa(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Sl.create=(e,t)=>new Sl({innerType:e,typeName:we.ZodOptional,...Nt(t)});let Bd=class extends Ht{_parse(t){return this._getType(t)===Qe.null?Aa(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Bd.create=(e,t)=>new Bd({innerType:e,typeName:we.ZodNullable,...Nt(t)});let VT=class extends Ht{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Qe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};VT.create=(e,t)=>new VT({innerType:e,typeName:we.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Nt(t)});let GT=class extends Ht{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ob(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new No(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new No(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};GT.create=(e,t)=>new GT({innerType:e,typeName:we.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Nt(t)});class aD extends Ht{_parse(t){if(this._getType(t)!==Qe.nan){const r=this._getOrReturnCtx(t);return Le(r,{code:Re.invalid_type,expected:Qe.nan,received:r.parsedType}),vt}return{status:"valid",value:t.data}}}aD.create=e=>new aD({typeName:we.ZodNaN,...Nt(e)});class oye extends Ht{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Mj extends Ht{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vt:a.status==="dirty"?(n.dirty(),Xf(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new Mj({in:t,out:n,typeName:we.ZodPipeline})}}let KT=class extends Ht{_parse(t){const n=this._def.innerType._parse(t),r=s=>(zd(s)&&(s.value=Object.freeze(s.value)),s);return Ob(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};KT.create=(e,t)=>new KT({innerType:e,typeName:we.ZodReadonly,...Nt(t)});var we;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(we||(we={}));const Jx=UT.create,iD=BT.create;Rl.create;Ud.create;const Yx=Ao.create;Pb.create;Mb.create;tm.create;Pj.create;Db.create;Sl.create;Bd.create;function lye(e,t){const n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==we.ZodAny&&(n.items=Qt(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&rn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&rn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(rn(n,"minItems",e.exactLength.value,e.exactLength.message,t),rn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function cye(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?rn(n,"minimum",r.value,r.message,t):rn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),rn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?rn(n,"maximum",r.value,r.message,t):rn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),rn(n,"maximum",r.value,r.message,t));break;case"multipleOf":rn(n,"multipleOf",r.value,r.message,t);break}return n}function uye(){return{type:"boolean"}}function vB(e,t){return Qt(e.type._def,t)}const dye=(e,t)=>Qt(e.innerType._def,t);function wB(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(s=>wB(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return hye(e,t)}}const hye=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":rn(n,"minimum",r.value,r.message,t);break;case"max":rn(n,"maximum",r.value,r.message,t);break}return n};function fye(e,t){return{...Qt(e.innerType._def,t),default:e.defaultValue()}}function pye(e,t){return t.effectStrategy==="input"?Qt(e.schema._def,t):Xs(t)}function mye(e){return{type:"string",enum:Array.from(e.values)}}const gye=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function yye(e,t){const n=[Qt(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Qt(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(a=>{if(gye(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...u}=a;i=u}else r=void 0;s.push(i)}}),s.length?{allOf:s,...r}:void 0}function bye(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let P1;const za={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(P1===void 0&&(P1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),P1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function _B(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":rn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":rn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ua(n,"email",r.message,t);break;case"format:idn-email":Ua(n,"idn-email",r.message,t);break;case"pattern:zod":es(n,za.email,r.message,t);break}break;case"url":Ua(n,"uri",r.message,t);break;case"uuid":Ua(n,"uuid",r.message,t);break;case"regex":es(n,r.regex,r.message,t);break;case"cuid":es(n,za.cuid,r.message,t);break;case"cuid2":es(n,za.cuid2,r.message,t);break;case"startsWith":es(n,RegExp(`^${M1(r.value,t)}`),r.message,t);break;case"endsWith":es(n,RegExp(`${M1(r.value,t)}$`),r.message,t);break;case"datetime":Ua(n,"date-time",r.message,t);break;case"date":Ua(n,"date",r.message,t);break;case"time":Ua(n,"time",r.message,t);break;case"duration":Ua(n,"duration",r.message,t);break;case"length":rn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),rn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":es(n,RegExp(M1(r.value,t)),r.message,t);break;case"ip":r.version!=="v6"&&Ua(n,"ipv4",r.message,t),r.version!=="v4"&&Ua(n,"ipv6",r.message,t);break;case"base64url":es(n,za.base64url,r.message,t);break;case"jwt":es(n,za.jwt,r.message,t);break;case"cidr":r.version!=="v6"&&es(n,za.ipv4Cidr,r.message,t),r.version!=="v4"&&es(n,za.ipv6Cidr,r.message,t);break;case"emoji":es(n,za.emoji(),r.message,t);break;case"ulid":es(n,za.ulid,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Ua(n,"binary",r.message,t);break;case"contentEncoding:base64":rn(n,"contentEncoding","base64",r.message,t);break;case"pattern:zod":es(n,za.base64,r.message,t);break}break;case"nanoid":es(n,za.nanoid,r.message,t);break}return n}function M1(e,t){return t.patternStrategy==="escape"?vye(e):e}const xye=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function vye(e){let t="";for(let n=0;n<e.length;n++)xye.has(e[n])||(t+="\\"),t+=e[n];return t}function Ua(e,t,n,r){e.format||e.anyOf?.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):rn(e,"format",t,n,r)}function es(e,t,n,r){e.pattern||e.allOf?.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:oD(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):rn(e,"pattern",oD(t,r),n,r)}function oD(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let s="",a=!1,i=!1,o=!1;for(let u=0;u<r.length;u++){if(a){s+=r[u],a=!1;continue}if(n.i){if(i){if(r[u].match(/[a-z]/)){o?(s+=r[u],s+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&r[u+2]?.match(/[a-z]/)?(s+=r[u],o=!0):s+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){s+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){s+=i?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}s+=r[u],r[u]==="\\"?a=!0:i&&r[u]==="]"?i=!1:!i&&r[u]==="["&&(i=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function kB(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===we.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,s)=>({...r,[s]:Qt(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",s]})??Xs(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:Qt(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===we.ZodString&&e.keyType._def.checks?.length){const{type:r,...s}=_B(e.keyType._def,t);return{...n,propertyNames:s}}else{if(e.keyType?._def.typeName===we.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===we.ZodBranded&&e.keyType._def.type._def.typeName===we.ZodString&&e.keyType._def.type._def.checks?.length){const{type:r,...s}=vB(e.keyType._def,t);return{...n,propertyNames:s}}}return n}function wye(e,t){if(t.mapStrategy==="record")return kB(e,t);const n=Qt(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Xs(t),r=Qt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Xs(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function _ye(e){const t=e.values,r=Object.keys(e.values).filter(a=>typeof t[t[a]]!="number").map(a=>t[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function kye(e){return e.target==="openAi"?void 0:{not:Xs({...e,currentPath:[...e.currentPath,"not"]})}}function Sye(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const $b={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Tye(e,t){if(t.target==="openApi3")return lD(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in $b&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,a)=>{const i=$b[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":return a._def.value===null?[...s,"null"]:s;default:return s}},[]);if(r.length===n.length){const s=r.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:n.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return lD(e,t)}const lD=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>Qt(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Cye(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:$b[e.innerType._def.typeName],nullable:!0}:{type:[$b[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=Qt(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Qt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Eye(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",mB(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?rn(n,"minimum",r.value,r.message,t):rn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),rn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?rn(n,"maximum",r.value,r.message,t):rn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),rn(n,"maximum",r.value,r.message,t));break;case"multipleOf":rn(n,"multipleOf",r.value,r.message,t);break}return n}function jye(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},s=[],a=e.shape();for(const o in a){let u=a[o];if(u===void 0||u._def===void 0)continue;let h=Aye(u);h&&n&&(u._def.typeName==="ZodOptional"&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),h=!1);const f=Qt(u._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});f!==void 0&&(r.properties[o]=f,h||s.push(o))}s.length&&(r.required=s);const i=Nye(e,t);return i!==void 0&&(r.additionalProperties=i),r}function Nye(e,t){if(e.catchall._def.typeName!=="ZodNever")return Qt(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Aye(e){try{return e.isOptional()}catch{return!0}}const Iye=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Qt(e.innerType._def,t);const n=Qt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Xs(t)},n]}:Xs(t)},Oye=(e,t)=>{if(t.pipeStrategy==="input")return Qt(e.in._def,t);if(t.pipeStrategy==="output")return Qt(e.out._def,t);const n=Qt(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=Qt(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function Rye(e,t){return Qt(e.type._def,t)}function Pye(e,t){const r={type:"array",uniqueItems:!0,items:Qt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&rn(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&rn(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Mye(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>Qt(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Qt(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>Qt(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Dye(e){return{not:Xs(e)}}function $ye(e){return Xs(e)}const Lye=(e,t)=>Qt(e.innerType._def,t),zye=(e,t,n)=>{switch(t){case we.ZodString:return _B(e,n);case we.ZodNumber:return Eye(e,n);case we.ZodObject:return jye(e,n);case we.ZodBigInt:return cye(e,n);case we.ZodBoolean:return uye();case we.ZodDate:return wB(e,n);case we.ZodUndefined:return Dye(n);case we.ZodNull:return Sye(n);case we.ZodArray:return lye(e,n);case we.ZodUnion:case we.ZodDiscriminatedUnion:return Tye(e,n);case we.ZodIntersection:return yye(e,n);case we.ZodTuple:return Mye(e,n);case we.ZodRecord:return kB(e,n);case we.ZodLiteral:return bye(e,n);case we.ZodEnum:return mye(e);case we.ZodNativeEnum:return _ye(e);case we.ZodNullable:return Cye(e,n);case we.ZodOptional:return Iye(e,n);case we.ZodMap:return wye(e,n);case we.ZodSet:return Pye(e,n);case we.ZodLazy:return()=>e.getter()._def;case we.ZodPromise:return Rye(e,n);case we.ZodNaN:case we.ZodNever:return kye(n);case we.ZodEffects:return pye(e,n);case we.ZodAny:return Xs(n);case we.ZodUnknown:return $ye(n);case we.ZodDefault:return fye(e,n);case we.ZodBranded:return vB(e,n);case we.ZodReadonly:return Lye(e,n);case we.ZodCatch:return dye(e,n);case we.ZodPipeline:return Oye(e,n);case we.ZodFunction:case we.ZodVoid:case we.ZodSymbol:return;default:return(r=>{})()}};function Qt(e,t,n=!1){const r=t.seen.get(e);if(t.override){const o=t.override?.(e,t,r,n);if(o!==Oge)return o}if(r&&!n){const o=Uye(r,t);if(o!==void 0)return o}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const a=zye(e,e.typeName,t),i=typeof a=="function"?Qt(a(),t):a;if(i&&Fye(e,t,i),t.postProcess){const o=t.postProcess(i,e,t);return s.jsonSchema=i,o}return s.jsonSchema=i,i}const Uye=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:pB(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Xs(t)):t.$refStrategy==="seen"?Xs(t):void 0}},Fye=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Bye=(e,t)=>{const n=Mge(t);let r;const s=Qt(e._def,n,!1)??Xs(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=r?{...s,[n.definitionPath]:r}:s;return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function Lc(e,t){const n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(!Lc(e[s],t[s]))return!1;return!0}if(n==="object"){if(!e||!t)return e===t;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const i of r)if(!Lc(e[i],t[i]))return!1;return!0}return e===t}function Za(e){return encodeURI(Hye(e))}function Hye(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const qye={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Vye={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},Gye={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let Kye=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function vl(e,t=Object.create(null),n=Kye,r=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const a=e.$id||e.id;if(a){const i=new URL(a,n.href);i.hash.length>1?t[i.href]=e:(i.hash="",r===""?n=i:vl(e,t,n))}}else if(e!==!0&&e!==!1)return t;const s=n.href+(r?"#"+r:"");if(t[s]!==void 0)throw new Error(`Duplicate schema URI "${s}".`);if(t[s]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:s}),e.$ref&&e.__absolute_ref__===void 0){const a=new URL(e.$ref,n.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:a.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const a=new URL(e.$recursiveRef,n.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:a.href})}if(e.$anchor){const a=new URL("#"+e.$anchor,n.href);t[a.href]=e}for(let a in e){if(Gye[a])continue;const i=`${r}/${Za(a)}`,o=e[a];if(Array.isArray(o)){if(qye[a]){const u=o.length;for(let h=0;h<u;h++)vl(o[h],t,n,`${i}/${h}`)}}else if(Vye[a])for(let u in o)vl(o[u],t,n,`${i}/${Za(u)}`);else vl(o,t,n,i)}return t}const Zye=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Wye=[0,31,28,31,30,31,30,31,31,30,31,30,31],Jye=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Yye=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Qye=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Xye=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,e0e=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,t0e=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,n0e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,r0e=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,s0e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,a0e=e=>{if(e[0]==='"')return!1;const[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},i0e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,o0e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,l0e=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function ki(e){return e.test.bind(e)}const cD={date:SB,time:TB.bind(void 0,!1),"date-time":d0e,duration:l0e,uri:p0e,"uri-reference":ki(Qye),"uri-template":ki(Xye),url:ki(e0e),email:a0e,hostname:ki(Yye),ipv4:ki(i0e),ipv6:ki(o0e),regex:g0e,uuid:ki(t0e),"json-pointer":ki(n0e),"json-pointer-uri-fragment":ki(r0e),"relative-json-pointer":ki(s0e)};function c0e(e){return e%4===0&&(e%100!==0||e%400===0)}function SB(e){const t=e.match(Zye);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return r>=1&&r<=12&&s>=1&&s<=(r==2&&c0e(n)?29:Wye[r])}function TB(e,t){const n=t.match(Jye);if(!n)return!1;const r=+n[1],s=+n[2],a=+n[3],i=!!n[5];return(r<=23&&s<=59&&a<=59||r==23&&s==59&&a==60)&&(!e||i)}const u0e=/t|\s/i;function d0e(e){const t=e.split(u0e);return t.length==2&&SB(t[0])&&TB(!0,t[1])}const h0e=/\/|:/,f0e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function p0e(e){return h0e.test(e)&&f0e.test(e)}const m0e=/[^\\]\\Z/;function g0e(e){if(m0e.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function y0e(e){let t=0,n=e.length,r=0,s;for(;r<n;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t}function _n(e,t,n="2019-09",r=vl(t),s=!0,a=null,i="#",o="#",u=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:i,keyword:"false",keywordLocation:i,error:"False boolean schema."}]};const h=typeof e;let f;switch(h){case"boolean":case"number":case"string":f=h;break;case"object":e===null?f="null":Array.isArray(e)?f="array":f="object";break;default:throw new Error(`Instances of "${h}" type are not supported.`)}const{$ref:m,$recursiveRef:g,$recursiveAnchor:b,type:w,const:x,enum:S,required:k,not:C,anyOf:T,allOf:P,oneOf:D,if:R,then:U,else:j,format:se,properties:B,patternProperties:ee,additionalProperties:ie,unevaluatedProperties:_e,minProperties:G,maxProperties:H,propertyNames:L,dependentRequired:Z,dependentSchemas:W,dependencies:de,prefixItems:$,items:F,additionalItems:Q,unevaluatedItems:O,contains:V,minContains:he,maxContains:I,minItems:N,maxItems:ne,uniqueItems:K,minimum:re,maximum:be,exclusiveMinimum:z,exclusiveMaximum:Ne,multipleOf:je,minLength:ft,maxLength:Fe,pattern:Se,__absolute_ref__:Xt,__absolute_recursive_ref__:en}=t,Me=[];if(b===!0&&a===null&&(a=t),g==="#"){const ut=a===null?r[en]:a,Ye=`${o}/$recursiveRef`,Je=_n(e,a===null?t:a,n,r,s,ut,i,Ye,u);Je.valid||Me.push({instanceLocation:i,keyword:"$recursiveRef",keywordLocation:Ye,error:"A subschema had errors."},...Je.errors)}if(m!==void 0){const Ye=r[Xt||m];if(Ye===void 0){let te=`Unresolved $ref "${m}".`;throw Xt&&Xt!==m&&(te+=`  Absolute URI "${Xt}".`),te+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(te)}const Je=`${o}/$ref`,$e=_n(e,Ye,n,r,s,a,i,Je,u);if($e.valid||Me.push({instanceLocation:i,keyword:"$ref",keywordLocation:Je,error:"A subschema had errors."},...$e.errors),n==="4"||n==="7")return{valid:Me.length===0,errors:Me}}if(Array.isArray(w)){let ut=w.length,Ye=!1;for(let Je=0;Je<ut;Je++)if(f===w[Je]||w[Je]==="integer"&&f==="number"&&e%1===0&&e===e){Ye=!0;break}Ye||Me.push({instanceLocation:i,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${f}" is invalid. Expected "${w.join('", "')}".`})}else w==="integer"?(f!=="number"||e%1||e!==e)&&Me.push({instanceLocation:i,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${f}" is invalid. Expected "${w}".`}):w!==void 0&&f!==w&&Me.push({instanceLocation:i,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${f}" is invalid. Expected "${w}".`});if(x!==void 0&&(f==="object"||f==="array"?Lc(e,x)||Me.push({instanceLocation:i,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(x)}.`}):e!==x&&Me.push({instanceLocation:i,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(x)}.`})),S!==void 0&&(f==="object"||f==="array"?S.some(ut=>Lc(e,ut))||Me.push({instanceLocation:i,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(S)}.`}):S.some(ut=>e===ut)||Me.push({instanceLocation:i,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(S)}.`})),C!==void 0){const ut=`${o}/not`;_n(e,C,n,r,s,a,i,ut).valid&&Me.push({instanceLocation:i,keyword:"not",keywordLocation:ut,error:'Instance matched "not" schema.'})}let Jr=[];if(T!==void 0){const ut=`${o}/anyOf`,Ye=Me.length;let Je=!1;for(let $e=0;$e<T.length;$e++){const te=T[$e],Y=Object.create(u),ye=_n(e,te,n,r,s,b===!0?a:null,i,`${ut}/${$e}`,Y);Me.push(...ye.errors),Je=Je||ye.valid,ye.valid&&Jr.push(Y)}Je?Me.length=Ye:Me.splice(Ye,0,{instanceLocation:i,keyword:"anyOf",keywordLocation:ut,error:"Instance does not match any subschemas."})}if(P!==void 0){const ut=`${o}/allOf`,Ye=Me.length;let Je=!0;for(let $e=0;$e<P.length;$e++){const te=P[$e],Y=Object.create(u),ye=_n(e,te,n,r,s,b===!0?a:null,i,`${ut}/${$e}`,Y);Me.push(...ye.errors),Je=Je&&ye.valid,ye.valid&&Jr.push(Y)}Je?Me.length=Ye:Me.splice(Ye,0,{instanceLocation:i,keyword:"allOf",keywordLocation:ut,error:"Instance does not match every subschema."})}if(D!==void 0){const ut=`${o}/oneOf`,Ye=Me.length,Je=D.filter(($e,te)=>{const Y=Object.create(u),ye=_n(e,$e,n,r,s,b===!0?a:null,i,`${ut}/${te}`,Y);return Me.push(...ye.errors),ye.valid&&Jr.push(Y),ye.valid}).length;Je===1?Me.length=Ye:Me.splice(Ye,0,{instanceLocation:i,keyword:"oneOf",keywordLocation:ut,error:`Instance does not match exactly one subschema (${Je} matches).`})}if((f==="object"||f==="array")&&Object.assign(u,...Jr),R!==void 0){const ut=`${o}/if`;if(_n(e,R,n,r,s,a,i,ut,u).valid){if(U!==void 0){const Je=_n(e,U,n,r,s,a,i,`${o}/then`,u);Je.valid||Me.push({instanceLocation:i,keyword:"if",keywordLocation:ut,error:'Instance does not match "then" schema.'},...Je.errors)}}else if(j!==void 0){const Je=_n(e,j,n,r,s,a,i,`${o}/else`,u);Je.valid||Me.push({instanceLocation:i,keyword:"if",keywordLocation:ut,error:'Instance does not match "else" schema.'},...Je.errors)}}if(f==="object"){if(k!==void 0)for(const $e of k)$e in e||Me.push({instanceLocation:i,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${$e}".`});const ut=Object.keys(e);if(G!==void 0&&ut.length<G&&Me.push({instanceLocation:i,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${G} properties.`}),H!==void 0&&ut.length>H&&Me.push({instanceLocation:i,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${H} properties.`}),L!==void 0){const $e=`${o}/propertyNames`;for(const te in e){const Y=`${i}/${Za(te)}`,ye=_n(te,L,n,r,s,a,Y,$e);ye.valid||Me.push({instanceLocation:i,keyword:"propertyNames",keywordLocation:$e,error:`Property name "${te}" does not match schema.`},...ye.errors)}}if(Z!==void 0){const $e=`${o}/dependantRequired`;for(const te in Z)if(te in e){const Y=Z[te];for(const ye of Y)ye in e||Me.push({instanceLocation:i,keyword:"dependentRequired",keywordLocation:$e,error:`Instance has "${te}" but does not have "${ye}".`})}}if(W!==void 0)for(const $e in W){const te=`${o}/dependentSchemas`;if($e in e){const Y=_n(e,W[$e],n,r,s,a,i,`${te}/${Za($e)}`,u);Y.valid||Me.push({instanceLocation:i,keyword:"dependentSchemas",keywordLocation:te,error:`Instance has "${$e}" but does not match dependant schema.`},...Y.errors)}}if(de!==void 0){const $e=`${o}/dependencies`;for(const te in de)if(te in e){const Y=de[te];if(Array.isArray(Y))for(const ye of Y)ye in e||Me.push({instanceLocation:i,keyword:"dependencies",keywordLocation:$e,error:`Instance has "${te}" but does not have "${ye}".`});else{const ye=_n(e,Y,n,r,s,a,i,`${$e}/${Za(te)}`);ye.valid||Me.push({instanceLocation:i,keyword:"dependencies",keywordLocation:$e,error:`Instance has "${te}" but does not match dependant schema.`},...ye.errors)}}}const Ye=Object.create(null);let Je=!1;if(B!==void 0){const $e=`${o}/properties`;for(const te in B){if(!(te in e))continue;const Y=`${i}/${Za(te)}`,ye=_n(e[te],B[te],n,r,s,a,Y,`${$e}/${Za(te)}`);if(ye.valid)u[te]=Ye[te]=!0;else if(Je=s,Me.push({instanceLocation:i,keyword:"properties",keywordLocation:$e,error:`Property "${te}" does not match schema.`},...ye.errors),Je)break}}if(!Je&&ee!==void 0){const $e=`${o}/patternProperties`;for(const te in ee){const Y=new RegExp(te,"u"),ye=ee[te];for(const De in e){if(!Y.test(De))continue;const Rt=`${i}/${Za(De)}`,mr=_n(e[De],ye,n,r,s,a,Rt,`${$e}/${Za(te)}`);mr.valid?u[De]=Ye[De]=!0:(Je=s,Me.push({instanceLocation:i,keyword:"patternProperties",keywordLocation:$e,error:`Property "${De}" matches pattern "${te}" but does not match associated schema.`},...mr.errors))}}}if(!Je&&ie!==void 0){const $e=`${o}/additionalProperties`;for(const te in e){if(Ye[te])continue;const Y=`${i}/${Za(te)}`,ye=_n(e[te],ie,n,r,s,a,Y,$e);ye.valid?u[te]=!0:(Je=s,Me.push({instanceLocation:i,keyword:"additionalProperties",keywordLocation:$e,error:`Property "${te}" does not match additional properties schema.`},...ye.errors))}}else if(!Je&&_e!==void 0){const $e=`${o}/unevaluatedProperties`;for(const te in e)if(!u[te]){const Y=`${i}/${Za(te)}`,ye=_n(e[te],_e,n,r,s,a,Y,$e);ye.valid?u[te]=!0:Me.push({instanceLocation:i,keyword:"unevaluatedProperties",keywordLocation:$e,error:`Property "${te}" does not match unevaluated properties schema.`},...ye.errors)}}}else if(f==="array"){ne!==void 0&&e.length>ne&&Me.push({instanceLocation:i,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${e.length} > ${ne}).`}),N!==void 0&&e.length<N&&Me.push({instanceLocation:i,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${e.length} < ${N}).`});const ut=e.length;let Ye=0,Je=!1;if($!==void 0){const $e=`${o}/prefixItems`,te=Math.min($.length,ut);for(;Ye<te;Ye++){const Y=_n(e[Ye],$[Ye],n,r,s,a,`${i}/${Ye}`,`${$e}/${Ye}`);if(u[Ye]=!0,!Y.valid&&(Je=s,Me.push({instanceLocation:i,keyword:"prefixItems",keywordLocation:$e,error:"Items did not match schema."},...Y.errors),Je))break}}if(F!==void 0){const $e=`${o}/items`;if(Array.isArray(F)){const te=Math.min(F.length,ut);for(;Ye<te;Ye++){const Y=_n(e[Ye],F[Ye],n,r,s,a,`${i}/${Ye}`,`${$e}/${Ye}`);if(u[Ye]=!0,!Y.valid&&(Je=s,Me.push({instanceLocation:i,keyword:"items",keywordLocation:$e,error:"Items did not match schema."},...Y.errors),Je))break}}else for(;Ye<ut;Ye++){const te=_n(e[Ye],F,n,r,s,a,`${i}/${Ye}`,$e);if(u[Ye]=!0,!te.valid&&(Je=s,Me.push({instanceLocation:i,keyword:"items",keywordLocation:$e,error:"Items did not match schema."},...te.errors),Je))break}if(!Je&&Q!==void 0){const te=`${o}/additionalItems`;for(;Ye<ut;Ye++){const Y=_n(e[Ye],Q,n,r,s,a,`${i}/${Ye}`,te);u[Ye]=!0,Y.valid||(Je=s,Me.push({instanceLocation:i,keyword:"additionalItems",keywordLocation:te,error:"Items did not match additional items schema."},...Y.errors))}}}if(V!==void 0)if(ut===0&&he===void 0)Me.push({instanceLocation:i,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(he!==void 0&&ut<he)Me.push({instanceLocation:i,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${ut}) than minContains (${he}).`});else{const $e=`${o}/contains`,te=Me.length;let Y=0;for(let ye=0;ye<ut;ye++){const De=_n(e[ye],V,n,r,s,a,`${i}/${ye}`,$e);De.valid?(u[ye]=!0,Y++):Me.push(...De.errors)}Y>=(he||0)&&(Me.length=te),he===void 0&&I===void 0&&Y===0?Me.splice(te,0,{instanceLocation:i,keyword:"contains",keywordLocation:$e,error:"Array does not contain item matching schema."}):he!==void 0&&Y<he?Me.push({instanceLocation:i,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${he} items matching schema. Only ${Y} items were found.`}):I!==void 0&&Y>I&&Me.push({instanceLocation:i,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${I} items matching schema. ${Y} items were found.`})}if(!Je&&O!==void 0){const $e=`${o}/unevaluatedItems`;for(Ye;Ye<ut;Ye++){if(u[Ye])continue;const te=_n(e[Ye],O,n,r,s,a,`${i}/${Ye}`,$e);u[Ye]=!0,te.valid||Me.push({instanceLocation:i,keyword:"unevaluatedItems",keywordLocation:$e,error:"Items did not match unevaluated items schema."},...te.errors)}}if(K)for(let $e=0;$e<ut;$e++){const te=e[$e],Y=typeof te=="object"&&te!==null;for(let ye=0;ye<ut;ye++){if($e===ye)continue;const De=e[ye];(te===De||Y&&(typeof De=="object"&&De!==null)&&Lc(te,De))&&(Me.push({instanceLocation:i,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${$e} and ${ye}.`}),$e=Number.MAX_SAFE_INTEGER,ye=Number.MAX_SAFE_INTEGER)}}}else if(f==="number"){if(n==="4"?(re!==void 0&&(z===!0&&e<=re||e<re)&&Me.push({instanceLocation:i,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${z?"or equal to ":""} ${re}.`}),be!==void 0&&(Ne===!0&&e>=be||e>be)&&Me.push({instanceLocation:i,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${Ne?"or equal to ":""} ${be}.`})):(re!==void 0&&e<re&&Me.push({instanceLocation:i,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${re}.`}),be!==void 0&&e>be&&Me.push({instanceLocation:i,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${be}.`}),z!==void 0&&e<=z&&Me.push({instanceLocation:i,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${e} is less than ${z}.`}),Ne!==void 0&&e>=Ne&&Me.push({instanceLocation:i,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${e} is greater than or equal to ${Ne}.`})),je!==void 0){const ut=e%je;Math.abs(0-ut)>=11920929e-14&&Math.abs(je-ut)>=11920929e-14&&Me.push({instanceLocation:i,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${e} is not a multiple of ${je}.`})}}else if(f==="string"){const ut=ft===void 0&&Fe===void 0?0:y0e(e);ft!==void 0&&ut<ft&&Me.push({instanceLocation:i,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${ut} < ${ft}).`}),Fe!==void 0&&ut>Fe&&Me.push({instanceLocation:i,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${ut} > ${Fe}).`}),Se!==void 0&&!new RegExp(Se,"u").test(e)&&Me.push({instanceLocation:i,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),se!==void 0&&cD[se]&&!cD[se](e)&&Me.push({instanceLocation:i,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${se}".`})}return{valid:Me.length===0,errors:Me}}class b0e{schema;draft;shortCircuit;lookup;constructor(t,n="2019-09",r=!0){this.schema=t,this.draft=n,this.shortCircuit=r,this.lookup=vl(t)}validate(t){return _n(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,n){n&&(t={...t,$id:n}),vl(t,this.lookup)}}var x0e={};Ut(x0e,{Validator:()=>b0e,deepCompareStrict:()=>Lc,toJsonSchema:()=>dr,validatesOnlyStrings:()=>Tp});function dr(e,t){if(En(e)){const n=hB(e,!0);if(Pi(n)){const r=Ib(n,!0);return DT(r,t)}else return DT(e,t)}return er(e)?Bye(e):e}function Tp(e){if(!e||typeof e!="object"||Object.keys(e).length===0||Array.isArray(e))return!1;if("type"in e)return typeof e.type=="string"?e.type==="string":Array.isArray(e.type)?e.type.every(t=>t==="string"):!1;if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(t=>typeof t=="string");if("const"in e)return typeof e.const=="string";if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(t=>Tp(t));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){const t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(n=>Tp(n))}if("not"in e)return!1;if("$ref"in e&&typeof e.$ref=="string"){const t=e.$ref,n=vl(e);return n[t]?Tp(n[t]):!1}return!1}var v0e={};Ut(v0e,{Graph:()=>Dj});function w0e(e,t){if(e!==void 0&&!$0(e))return e;if(Cj(t))try{let n=t.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return t.getName()}else return t.name??"UnknownSchema"}function _0e(e){return Cj(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...dr(e.data.schema),title:e.data.name}}}var Dj=class CB{nodes={};edges=[];constructor(t){this.nodes=t?.nodes??this.nodes,this.edges=t?.edges??this.edges}toJSON(){const t={};return Object.values(this.nodes).forEach((n,r)=>{t[n.id]=$0(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:t[n.id],..._0e(n)})),edges:this.edges.map(n=>{const r={source:t[n.source],target:t[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(t,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const s=n??CU(),a={id:s,data:t,name:w0e(n,t),metadata:r};return this.nodes[s]=a,a}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(n=>n.source!==t.id&&n.target!==t.id)}addEdge(t,n,r,s){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const a={source:t.id,target:n.id,data:r,conditional:s};return this.edges.push(a),a}firstNode(){return uD(this)}lastNode(){return dD(this)}extend(t,n=""){let r=n;Object.values(t.nodes).map(h=>h.id).every($0)&&(r="");const a=h=>r?`${r}:${h}`:h;Object.entries(t.nodes).forEach(([h,f])=>{this.nodes[a(h)]={...f,id:a(h)}});const i=t.edges.map(h=>({...h,source:a(h.source),target:a(h.target)}));this.edges=[...this.edges,...i];const o=t.firstNode(),u=t.lastNode();return[o?{id:a(o.id),data:o.data}:void 0,u?{id:a(u.id),data:u.data}:void 0]}trimFirstNode(){const t=this.firstNode();t&&uD(this,[t.id])&&this.removeNode(t)}trimLastNode(){const t=this.lastNode();t&&dD(this,[t.id])&&this.removeNode(t)}reid(){const t=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),n=new Map;Object.values(t).forEach(s=>{n.set(s,(n.get(s)||0)+1)});const r=s=>{const a=t[s];return $0(s)&&n.get(a)===1?a:s};return new CB({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,a])=>[r(s),{...a,id:r(s)}])),edges:this.edges.map(s=>({...s,source:r(s.source),target:r(s.target)}))})}drawMermaid(t){const{withStyles:n,curveStyle:r,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=t??{},i=this.reid(),o=i.firstNode(),u=i.lastNode();return Age(i.nodes,i.edges,{firstNode:o?.id,lastNode:u?.id,withStyles:n,curveStyle:r,nodeColors:s,wrapLabelNWords:a})}async drawMermaidPng(t){const n=this.drawMermaid(t);return Ige(n,{backgroundColor:t?.backgroundColor})}};function uD(e,t=[]){const n=new Set(e.edges.filter(s=>!t.includes(s.source)).map(s=>s.target)),r=[];for(const s of Object.values(e.nodes))!t.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function dD(e,t=[]){const n=new Set(e.edges.filter(s=>!t.includes(s.target)).map(s=>s.source)),r=[];for(const s of Object.values(e.nodes))!t.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function k0e(e){const t=new TextEncoder,n=new ReadableStream({async start(r){for await(const s of e)r.enqueue(t.encode(`event: data
data: ${JSON.stringify(s)}

`));r.enqueue(t.encode(`event: end

`)),r.close()}});return ii.fromReadableStream(n)}function hD(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}const S0e=e=>e!=null&&typeof e=="object"&&"next"in e&&typeof e.next=="function";function ZT(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function"}function*fD(e,t){for(;;){const{value:n,done:r}=ai.runWithConfig(Eo(e),t.next.bind(t),!0);if(r)break;yield n}}async function*WT(e,t){const n=t[Symbol.asyncIterator]();for(;;){const{value:r,done:s}=await ai.runWithConfig(Eo(e),n.next.bind(t),!0);if(s)break;yield r}}function ur(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}var Fn=class extends Pd{lc_runnable=!0;name;getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}withRetry(e){return new $j({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new Hd({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new OB({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Gt);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(e).filter(([r])=>r!=="runId"));return Array.from({length:t},(r,s)=>Gt(s===0?e:n))}return Array.from({length:t},()=>Gt(e))}async batch(e,t,n){const r=this._getOptionsList(t??{},e.length),s=r[0]?.maxConcurrency??n?.maxConcurrency,a=new Pm({maxConcurrency:s,onFailedAttempt:o=>{throw o}}),i=e.map((o,u)=>a.call(async()=>{try{return await this.invoke(o,r[u])}catch(h){if(n?.returnExceptions)return h;throw h}}));return Promise.all(i)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const n=Gt(t),r=new Qc({generator:this._streamIterator(e,n),config:n});return await r.setup,ii.fromAsyncGenerator(r)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=Gt(e):t=Gt({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[t,n]}async _callWithConfig(e,t,n){const r=Gt(n),a=await(await Js(r))?.handleChainStart(this.toJSON(),ur(t,"input"),r.runId,r?.runType,void 0,void 0,r?.runName??this.getName());delete r.runId;let i;try{const o=e.call(this,t,r,a);i=await jo(o,n?.signal)}catch(o){throw await a?.handleChainError(o),o}return await a?.handleChainEnd(ur(i,"output")),i}async _batchWithConfig(e,t,n,r){const s=this._getOptionsList(n??{},t.length),a=await Promise.all(s.map(Js)),i=await Promise.all(a.map(async(u,h)=>{const f=await u?.handleChainStart(this.toJSON(),ur(t[h],"input"),s[h].runId,s[h].runType,void 0,void 0,s[h].runName??this.getName());return delete s[h].runId,f}));let o;try{const u=e.call(this,t,s,i,r);o=await jo(u,s?.[0]?.signal)}catch(u){throw await Promise.all(i.map(h=>h?.handleChainError(u))),u}return await Promise.all(i.map(u=>u?.handleChainEnd(ur(o,"output")))),o}_concatOutputChunks(e,t){return Nl(e,t)}async*_transformStreamWithConfig(e,t,n){let r,s=!0,a,i=!0;const o=Gt(n),u=await Js(o),h=this;async function*f(){for await(const g of e){if(s)if(r===void 0)r=g;else try{r=h._concatOutputChunks(r,g)}catch{r=void 0,s=!1}yield g}}let m;try{const g=await sF(t.bind(this),f(),async()=>u?.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName(),void 0,{lc_defers_inputs:!0}),n?.signal,o);delete o.runId,m=g.setup;const b=m?.handlers.find(Bhe);let w=g.output;b!==void 0&&m!==void 0&&(w=b.tapOutputIterable(m.runId,w));const x=m?.handlers.find(lF);x!==void 0&&m!==void 0&&(w=x.tapOutputIterable(m.runId,w));for await(const S of w)if(yield S,i)if(a===void 0)a=S;else try{a=this._concatOutputChunks(a,S)}catch{a=void 0,i=!1}}catch(g){throw await m?.handleChainError(g,void 0,void 0,void 0,{inputs:ur(r,"input")}),g}await m?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:ur(r,"input")})}getGraph(e){const t=new Dj,n=t.addNode({name:`${this.getName()}Input`,schema:iD()}),r=t.addNode(this),s=t.addNode({name:`${this.getName()}Output`,schema:iD()});return t.addEdge(n,r),t.addEdge(r,s),t}pipe(e){return new Ul({first:this,last:Xa(e)})}pick(e){return this.pipe(new RB(e))}assign(e){return this.pipe(new Lj(new mh({steps:e})))}async*transform(e,t){let n;for await(const r of e)n===void 0?n=r:n=this._concatOutputChunks(n,r);yield*this._streamIterator(n,Gt(t))}async*streamLog(e,t,n){const r=new OT({...n,autoClose:!1,_schemaFormat:"original"}),s=Gt(t);yield*this._streamLog(e,r,s)}async*_streamLog(e,t,n){const{callbacks:r}=n;if(r===void 0)n.callbacks=[t];else if(Array.isArray(r))n.callbacks=r.concat([t]);else{const o=r.copy();o.addHandler(t,!0),n.callbacks=o}const s=this.stream(e,n);async function a(){try{const o=await s;for await(const u of o){const h=new mo({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await t.writer.write(h)}}finally{await t.writer.close()}}const i=a();try{for await(const o of t)yield o}finally{await i}}streamEvents(e,t,n){let r;if(t.version==="v1")r=this._streamEventsV1(e,t,n);else if(t.version==="v2")r=this._streamEventsV2(e,t,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?k0e(r):ii.fromAsyncGenerator(r)}async*_streamEventsV2(e,t,n){const r=new Hhe({...n,autoClose:!1}),s=Gt(t),a=s.runId??CU();s.runId=a;const i=s.callbacks;if(i===void 0)s.callbacks=[r];else if(Array.isArray(i))s.callbacks=i.concat(r);else{const b=i.copy();b.addHandler(r,!0),s.callbacks=b}const o=new AbortController,u=this;async function h(){let b,w=null;try{t?.signal?"any"in AbortSignal?b=AbortSignal.any([o.signal,t.signal]):(b=t.signal,w=()=>{o.abort()},t.signal.addEventListener("abort",w,{once:!0})):b=o.signal;const x=await u.stream(e,{...s,signal:b}),S=r.tapOutputIterable(a,x);for await(const k of S)if(o.signal.aborted)break}finally{await r.finish(),b&&w&&b.removeEventListener("abort",w)}}const f=h();let m=!1,g;try{for await(const b of r){if(!m){b.data.input=e,m=!0,g=b.run_id,yield b;continue}b.run_id===g&&b.event.endsWith("_end")&&b.data?.input&&delete b.data.input,yield b}}finally{o.abort(),await f}}async*_streamEventsV1(e,t,n){let r,s=!1;const a=Gt(t),i=a.tags??[],o=a.metadata??{},u=a.runName??this.getName(),h=new OT({...n,autoClose:!1,_schemaFormat:"streaming_events"}),f=new tfe({...n}),m=this._streamLog(e,h,a);for await(const b of m){if(r?r=r.concat(b):r=Tj.fromRunLogPatch(b),r.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;const k={...r.state},C={run_id:k.id,event:`on_${k.type}_start`,name:u,tags:i,metadata:o,data:{input:e}};f.includeEvent(C,k.type)&&(yield C)}const w=b.ops.filter(k=>k.path.startsWith("/logs/")).map(k=>k.path.split("/")[2]),x=[...new Set(w)];for(const k of x){let C,T={};const P=r.state.logs[k];if(P.end_time===void 0?P.streamed_output.length>0?C="stream":C="start":C="end",C==="start")P.inputs!==void 0&&(T.input=P.inputs);else if(C==="end")P.inputs!==void 0&&(T.input=P.inputs),T.output=P.final_output;else if(C==="stream"){const D=P.streamed_output.length;if(D!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${D} instead. Encountered in: "${P.name}"`);T={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${C}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:T}}const{state:S}=r;if(S.streamed_output.length>0){const k=S.streamed_output.length;if(k!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${k} instead. Encountered in: "${S.name}"`);const C={chunk:S.streamed_output[0]};S.streamed_output=[];const T={event:`on_${S.type}_stream`,run_id:S.id,tags:i,metadata:o,name:u,data:C};f.includeEvent(T,S.type)&&(yield T)}}const g=r?.state;if(g!==void 0){const b={event:`on_${g.type}_end`,name:u,run_id:g.id,tags:i,metadata:o,data:{output:g.final_output}};f.includeEvent(b,g.type)&&(yield b)}}static isRunnable(e){return Cj(e)}withListeners({onStart:e,onEnd:t,onError:n}){return new Hd({bound:this,config:{},configFactories:[r=>({callbacks:[new dF({config:r,onStart:e,onEnd:t,onError:n})]})]})}asTool(e){return N0e(this,e)}},Hd=class EB extends Fn{static lc_name(){return"RunnableBinding"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;bound;config;kwargs;configFactories;constructor(t){super(t),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}async _mergeConfig(...t){const n=_b(this.config,...t);return _b(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...t}})}withRetry(t){return new $j({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:t?.stopAfterAttempt,...t})}async invoke(t,n){return this.bound.invoke(t,await this._mergeConfig(n,this.kwargs))}async batch(t,n,r){const s=Array.isArray(n)?await Promise.all(n.map(async a=>this._mergeConfig(Gt(a),this.kwargs))):await this._mergeConfig(Gt(n),this.kwargs);return this.bound.batch(t,s,r)}_concatOutputChunks(t,n){return this.bound._concatOutputChunks(t,n)}async*_streamIterator(t,n){yield*this.bound._streamIterator(t,await this._mergeConfig(Gt(n),this.kwargs))}async stream(t,n){return this.bound.stream(t,await this._mergeConfig(Gt(n),this.kwargs))}async*transform(t,n){yield*this.bound.transform(t,await this._mergeConfig(Gt(n),this.kwargs))}streamEvents(t,n,r){const s=this,a=async function*(){yield*s.bound.streamEvents(t,{...await s._mergeConfig(Gt(n),s.kwargs),version:n.version},r)};return ii.fromAsyncGenerator(a())}static isRunnableBinding(t){return t.bound&&Fn.isRunnable(t.bound)}withListeners({onStart:t,onEnd:n,onError:r}){return new EB({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[s=>({callbacks:[new dF({config:s,onStart:t,onEnd:n,onError:r})]})]})}},T0e=class jB extends Fn{static lc_name(){return"RunnableEach"}lc_serializable=!0;lc_namespace=["langchain_core","runnables"];bound;constructor(t){super(t),this.bound=t.bound}async invoke(t,n){return this._callWithConfig(this._invoke.bind(this),t,n)}async _invoke(t,n,r){return this.bound.batch(t,xn(n,{callbacks:r?.getChild()}))}withListeners({onStart:t,onEnd:n,onError:r}){return new jB({bound:this.bound.withListeners({onStart:t,onEnd:n,onError:r})})}},$j=class extends Hd{static lc_name(){return"RunnableRetry"}lc_namespace=["langchain_core","runnables"];maxAttemptNumber=3;onFailedAttempt=()=>{};constructor(e){super(e),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,n){const r=e>1?`retry:attempt:${e}`:void 0;return xn(t,{callbacks:n?.getChild(r)})}async _invoke(e,t,n){return RT(r=>super.invoke(e,this._patchConfigForRetry(r,t,n)),{onFailedAttempt:({error:r})=>this.onFailedAttempt(r,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,n,r){const s={};try{await RT(async a=>{const i=e.map((m,g)=>g).filter(m=>s[m.toString()]===void 0||s[m.toString()]instanceof Error),o=i.map(m=>e[m]),u=i.map(m=>this._patchConfigForRetry(a,t?.[m],n?.[m])),h=await super.batch(o,u,{...r,returnExceptions:!0});let f;for(let m=0;m<h.length;m+=1){const g=h[m],b=i[m];g instanceof Error&&f===void 0&&(f=g,f.input=o[m]),s[b.toString()]=g}if(f)throw f;return h},{onFailedAttempt:({error:a})=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(r?.returnExceptions!==!0)throw a}return Object.keys(s).sort((a,i)=>parseInt(a,10)-parseInt(i,10)).map(a=>s[parseInt(a,10)])}async batch(e,t,n){return this._batchWithConfig(this._batch.bind(this),e,t,n)}},Ul=class tp extends Fn{static lc_name(){return"RunnableSequence"}first;middle=[];last;omitSequenceTags=!1;lc_serializable=!0;lc_namespace=["langchain_core","runnables"];constructor(t){super(t),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name,this.omitSequenceTags=t.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(t,n){const r=Gt(n),a=await(await Js(r))?.handleChainStart(this.toJSON(),ur(t,"input"),r.runId,void 0,void 0,void 0,r?.runName);delete r.runId;let i=t,o;try{const u=[this.first,...this.middle];for(let h=0;h<u.length;h+=1){const m=u[h].invoke(i,xn(r,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));i=await jo(m,n?.signal)}if(n?.signal?.aborted)throw Wp(n.signal);o=await this.last.invoke(i,xn(r,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await a?.handleChainError(u),u}return await a?.handleChainEnd(ur(o,"output")),o}async batch(t,n,r){const s=this._getOptionsList(n??{},t.length),a=await Promise.all(s.map(Js)),i=await Promise.all(a.map(async(u,h)=>{const f=await u?.handleChainStart(this.toJSON(),ur(t[h],"input"),s[h].runId,void 0,void 0,void 0,s[h].runName);return delete s[h].runId,f}));let o=t;try{for(let u=0;u<this.steps.length;u+=1){const f=this.steps[u].batch(o,i.map((m,g)=>{const b=m?.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return xn(s[g],{callbacks:b})}),r);o=await jo(f,s[0]?.signal)}}catch(u){throw await Promise.all(i.map(h=>h?.handleChainError(u))),u}return await Promise.all(i.map(u=>u?.handleChainEnd(ur(o,"output")))),o}_concatOutputChunks(t,n){return this.last._concatOutputChunks(t,n)}async*_streamIterator(t,n){const r=await Js(n),{runId:s,...a}=n??{},i=await r?.handleChainStart(this.toJSON(),ur(t,"input"),s,void 0,void 0,void 0,a?.runName),o=[this.first,...this.middle,this.last];let u=!0,h;async function*f(){yield t}try{let m=o[0].transform(f(),xn(a,{callbacks:i?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let g=1;g<o.length;g+=1)m=await o[g].transform(m,xn(a,{callbacks:i?.getChild(this.omitSequenceTags?void 0:`seq:step:${g+1}`)}));for await(const g of m)if(n?.signal?.throwIfAborted(),yield g,u)if(h===void 0)h=g;else try{h=this._concatOutputChunks(h,g)}catch{h=void 0,u=!1}}catch(m){throw await i?.handleChainError(m),m}await i?.handleChainEnd(ur(h,"output"))}getGraph(t){const n=new Dj;let r=null;return this.steps.forEach((s,a)=>{const i=s.getGraph(t);a!==0&&i.trimFirstNode(),a!==this.steps.length-1&&i.trimLastNode(),n.extend(i);const o=i.firstNode();if(!o)throw new Error(`Runnable ${s} has no first node`);r&&n.addEdge(r,o),r=i.lastNode()}),n}pipe(t){return tp.isRunnableSequence(t)?new tp({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new tp({first:this.first,middle:[...this.middle,this.last],last:Xa(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&Fn.isRunnable(t)}static from([t,...n],r){let s={};return typeof r=="string"?s.name=r:r!==void 0&&(s=r),new tp({...s,first:Xa(t),middle:n.slice(0,-1).map(Xa),last:Xa(n[n.length-1])})}},mh=class NB extends Fn{static lc_name(){return"RunnableMap"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;steps;getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),this.steps={};for(const[n,r]of Object.entries(t.steps))this.steps[n]=Xa(r)}static from(t){return new NB({steps:t})}async invoke(t,n){const r=Gt(n),a=await(await Js(r))?.handleChainStart(this.toJSON(),{input:t},r.runId,void 0,void 0,void 0,r?.runName);delete r.runId;const i={};try{const o=Object.entries(this.steps).map(async([u,h])=>{i[u]=await h.invoke(t,xn(r,{callbacks:a?.getChild(`map:key:${u}`)}))});await jo(Promise.all(o),n?.signal)}catch(o){throw await a?.handleChainError(o),o}return await a?.handleChainEnd(i),i}async*_transform(t,n,r){const s={...this.steps},a=kj(t,Object.keys(s).length),i=new Map(Object.entries(s).map(([o,u],h)=>{const f=u.transform(a[h],xn(r,{callbacks:n?.getChild(`map:key:${o}`)}));return[o,f.next().then(m=>({key:o,gen:f,result:m}))]}));for(;i.size;){const o=Promise.race(i.values()),{key:u,result:h,gen:f}=await jo(o,r?.signal);i.delete(u),h.done||(yield{[u]:h.value},i.set(u,f.next().then(m=>({key:u,gen:f,result:m}))))}}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*r(){yield t}const s=Gt(n),a=new Qc({generator:this.transform(r(),s),config:s});return await a.setup,ii.fromAsyncGenerator(a)}},C0e=class AB extends Fn{lc_serializable=!1;lc_namespace=["langchain_core","runnables"];func;constructor(t){if(super(t),!_j(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}async invoke(t,n){const[r]=this._getOptionsList(n??{},1),s=await Js(r),a=this.func(xn(r,{callbacks:s}),t);return jo(a,r?.signal)}async*_streamIterator(t,n){const[r]=this._getOptionsList(n??{},1),s=await this.invoke(t,n);if(ZT(s)){for await(const a of s)r?.signal?.throwIfAborted(),yield a;return}if(S0e(s)){for(;;){r?.signal?.throwIfAborted();const a=s.next();if(a.done)break;yield a.value}return}yield s}static from(t){return new AB({func:t})}};function E0e(e){if(_j(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Ro=class IB extends Fn{static lc_name(){return"RunnableLambda"}lc_namespace=["langchain_core","runnables"];func;constructor(t){if(_j(t.func))return C0e.from(t.func);super(t),E0e(t.func),this.func=t.func}static from(t){return new IB({func:t})}async _invoke(t,n,r){return new Promise((s,a)=>{const i=xn(n,{callbacks:r?.getChild(),recursionLimit:(n?.recursionLimit??j1)-1});ai.runWithConfig(Eo(i),async()=>{try{let o=await this.func(t,{...i});if(o&&Fn.isRunnable(o)){if(n?.recursionLimit===0)throw new Error("Recursion limit reached.");o=await o.invoke(t,{...i,recursionLimit:(i.recursionLimit??j1)-1})}else if(ZT(o)){let u;for await(const h of WT(i,o))if(n?.signal?.throwIfAborted(),u===void 0)u=h;else try{u=this._concatOutputChunks(u,h)}catch{u=h}o=u}else if(hD(o)){let u;for(const h of fD(i,o))if(n?.signal?.throwIfAborted(),u===void 0)u=h;else try{u=this._concatOutputChunks(u,h)}catch{u=h}o=u}s(o)}catch(o){a(o)}})})}async invoke(t,n){return this._callWithConfig(this._invoke.bind(this),t,n)}async*_transform(t,n,r){let s;for await(const o of t)if(s===void 0)s=o;else try{s=this._concatOutputChunks(s,o)}catch{s=o}const a=xn(r,{callbacks:n?.getChild(),recursionLimit:(r?.recursionLimit??j1)-1}),i=await new Promise((o,u)=>{ai.runWithConfig(Eo(a),async()=>{try{const h=await this.func(s,{...a,config:a});o(h)}catch(h){u(h)}})});if(i&&Fn.isRunnable(i)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");const o=await i.stream(s,a);for await(const u of o)yield u}else if(ZT(i))for await(const o of WT(a,i))r?.signal?.throwIfAborted(),yield o;else if(hD(i))for(const o of fD(a,i))r?.signal?.throwIfAborted(),yield o;else yield i}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*r(){yield t}const s=Gt(n),a=new Qc({generator:this.transform(r(),s),config:s});return await a.setup,ii.fromAsyncGenerator(a)}},j0e=class extends mh{},OB=class extends Fn{static lc_name(){return"RunnableWithFallbacks"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnable;fallbacks;constructor(e){super(e),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const n=Gt(t),r=await Js(n),{runId:s,...a}=n,i=await r?.handleChainStart(this.toJSON(),ur(e,"input"),s,void 0,void 0,void 0,a?.runName),o=xn(a,{callbacks:i?.getChild()});return await ai.runWithConfig(o,async()=>{let h;for(const f of this.runnables()){n?.signal?.throwIfAborted();try{const m=await f.invoke(e,o);return await i?.handleChainEnd(ur(m,"output")),m}catch(m){h===void 0&&(h=m)}}throw h===void 0?new Error("No error stored at end of fallback."):(await i?.handleChainError(h),h)})}async*_streamIterator(e,t){const n=Gt(t),r=await Js(n),{runId:s,...a}=n,i=await r?.handleChainStart(this.toJSON(),ur(e,"input"),s,void 0,void 0,void 0,a?.runName);let o,u;for(const f of this.runnables()){n?.signal?.throwIfAborted();const m=xn(a,{callbacks:i?.getChild()});try{const g=await f.stream(e,m);u=WT(m,g);break}catch(g){o===void 0&&(o=g)}}if(u===void 0){const f=o??new Error("No error stored at end of fallback.");throw await i?.handleChainError(f),f}let h;try{for await(const f of u){yield f;try{h=h===void 0?h:this._concatOutputChunks(h,f)}catch{h=void 0}}}catch(f){throw await i?.handleChainError(f),f}await i?.handleChainEnd(ur(h,"output"))}async batch(e,t,n){if(n?.returnExceptions)throw new Error("Not implemented.");const r=this._getOptionsList(t??{},e.length),s=await Promise.all(r.map(o=>Js(o))),a=await Promise.all(s.map(async(o,u)=>{const h=await o?.handleChainStart(this.toJSON(),ur(e[u],"input"),r[u].runId,void 0,void 0,void 0,r[u].runName);return delete r[u].runId,h}));let i;for(const o of this.runnables()){r[0].signal?.throwIfAborted();try{const u=await o.batch(e,a.map((h,f)=>xn(r[f],{callbacks:h?.getChild()})),n);return await Promise.all(a.map((h,f)=>h?.handleChainEnd(ur(u[f],"output")))),u}catch(u){i===void 0&&(i=u)}}throw i?(await Promise.all(a.map(o=>o?.handleChainError(i))),i):new Error("No error stored at end of fallbacks.")}};function Xa(e){if(typeof e=="function")return new Ro({func:e});if(Fn.isRunnable(e))return e;if(!Array.isArray(e)&&typeof e=="object"){const t={};for(const[n,r]of Object.entries(e))t[n]=Xa(r);return new mh({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Lj=class extends Fn{static lc_name(){return"RunnableAssign"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;mapper;constructor(e){e instanceof mh&&(e={mapper:e}),super(e),this.mapper=e.mapper}async invoke(e,t){const n=await this.mapper.invoke(e,t);return{...e,...n}}async*_transform(e,t,n){const r=this.mapper.getStepsKeys(),[s,a]=kj(e),i=this.mapper.transform(a,xn(n,{callbacks:t?.getChild()})),o=i.next();for await(const u of s){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);const h=Object.fromEntries(Object.entries(u).filter(([f])=>!r.includes(f)));Object.keys(h).length>0&&(yield h)}yield(await o).value;for await(const u of i)yield u}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const r=Gt(t),s=new Qc({generator:this.transform(n(),r),config:r});return await s.setup,ii.fromAsyncGenerator(s)}},RB=class extends Fn{static lc_name(){return"RunnablePick"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;keys;constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const n=await this._pick(t);n!==void 0&&(yield n)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const r=Gt(t),s=new Qc({generator:this.transform(n(),r),config:r});return await s.setup,ii.fromAsyncGenerator(s)}},JT=class extends Hd{name;description;schema;constructor(e){const t=Ul.from([Ro.from(async n=>{let r;if(_p(n))try{r=await Kx(this.schema,n.args)}catch{throw new yb("Received tool input did not match expected schema",JSON.stringify(n.args))}else r=n;return r}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function N0e(e,t){const n=t.name??e.getName(),r=t.description??Zx(t.schema);return Oj(t.schema)?new JT({name:n,description:r,schema:Yx({input:Jx()}).transform(s=>s.input),bound:e}):new JT({name:n,description:r,schema:t.schema,bound:e})}var ja=class extends Fn{static lc_name(){return"RunnablePassthrough"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;func;constructor(e){super(e),e&&(this.func=e.func)}async invoke(e,t){const n=Gt(t);return this.func&&await this.func(e,n),this._callWithConfig(r=>Promise.resolve(r),e,n)}async*transform(e,t){const n=Gt(t);let r,s=!0;for await(const a of this._transformStreamWithConfig(e,i=>i,n))if(yield a,s)if(r===void 0)r=a;else try{r=Nl(r,a)}catch{r=void 0,s=!1}this.func&&r!==void 0&&await this.func(r,n)}static assign(e){return new Lj(new mh({steps:e}))}},A0e=class extends Fn{static lc_name(){return"RouterRunnable"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnables;constructor(e){super(e),this.runnables=e.runnables}async invoke(e,t){const{key:n,input:r}=e,s=this.runnables[n];if(s===void 0)throw new Error(`No runnable associated with key "${n}".`);return s.invoke(r,Gt(t))}async batch(e,t,n){const r=e.map(m=>m.key),s=e.map(m=>m.input);if(r.find(m=>this.runnables[m]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const i=r.map(m=>this.runnables[m]),o=this._getOptionsList(t??{},e.length),u=o[0]?.maxConcurrency??n?.maxConcurrency,h=u&&u>0?u:e.length,f=[];for(let m=0;m<s.length;m+=h){const g=s.slice(m,m+h).map((w,x)=>i[x].invoke(w,o[x])),b=await Promise.all(g);f.push(b)}return f.flat()}async stream(e,t){const{key:n,input:r}=e,s=this.runnables[n];if(s===void 0)throw new Error(`No runnable associated with key "${n}".`);return s.stream(r,t)}},I0e=class extends Fn{static lc_name(){return"RunnableBranch"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;default;branches;constructor(e){super(e),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");const n=e.slice(0,-1).map(([s,a])=>[Xa(s),Xa(a)]),r=Xa(e[e.length-1]);return new this({branches:n,default:r})}async _invoke(e,t,n){let r;for(let s=0;s<this.branches.length;s+=1){const[a,i]=this.branches[s];if(await a.invoke(e,xn(t,{callbacks:n?.getChild(`condition:${s+1}`)}))){r=await i.invoke(e,xn(t,{callbacks:n?.getChild(`branch:${s+1}`)}));break}}return r||(r=await this.default.invoke(e,xn(t,{callbacks:n?.getChild("branch:default")}))),r}async invoke(e,t={}){return this._callWithConfig(this._invoke,e,t)}async*_streamIterator(e,t){const r=await(await Js(t))?.handleChainStart(this.toJSON(),ur(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName);let s,a=!0,i;try{for(let o=0;o<this.branches.length;o+=1){const[u,h]=this.branches[o];if(await u.invoke(e,xn(t,{callbacks:r?.getChild(`condition:${o+1}`)}))){i=await h.stream(e,xn(t,{callbacks:r?.getChild(`branch:${o+1}`)}));for await(const m of i)if(yield m,a)if(s===void 0)s=m;else try{s=Nl(s,m)}catch{s=void 0,a=!1}break}}if(i===void 0){i=await this.default.stream(e,xn(t,{callbacks:r?.getChild("branch:default")}));for await(const o of i)if(yield o,a)if(s===void 0)s=o;else try{s=Nl(s,o)}catch{s=void 0,a=!1}}}catch(o){throw await r?.handleChainError(o),o}await r?.handleChainEnd(s??{})}};const Lb=(e,t)=>{const n=[...new Set(t?.map(s=>{if(typeof s=="string")return s;const a=new s({});if(!("getType"in a)||typeof a.getType!="function")throw new Error("Invalid type provided.");return a.getType()}))],r=e.getType();return n.some(s=>s===r)};function O0e(e,t){return Array.isArray(e)?pD(e,t):Ro.from(n=>pD(n,e))}function pD(e,t={}){const{includeNames:n,excludeNames:r,includeTypes:s,excludeTypes:a,includeIds:i,excludeIds:o}=t,u=[];for(const h of e)if(!(r&&h.name&&r.includes(h.name))){{if(a&&Lb(h,a))continue;if(o&&h.id&&o.includes(h.id))continue}s||i||n?(n&&h.name&&n.some(f=>f===h.name)||s&&Lb(h,s)||i&&h.id&&i.some(f=>f===h.id))&&u.push(h):u.push(h)}return u}function R0e(e){return Array.isArray(e)?mD(e):Ro.from(mD)}function mD(e){if(!e.length)return[];const t=[];for(const n of e){const r=n,s=t.pop();if(!s)t.push(r);else if(r.getType()==="tool"||r.getType()!==s.getType())t.push(s,r);else{const a=xb(s),i=xb(r),o=a.concat(i);typeof a.content=="string"&&typeof i.content=="string"&&(o.content=`${a.content}
${i.content}`),t.push(D0e(o))}}return t}function P0e(e,t){if(Array.isArray(e)){const n=e;if(!t)throw new Error("Options parameter is required when providing messages.");return gD(n,t)}else{const n=e;return Ro.from(r=>gD(r,n)).withConfig({runName:"trim_messages"})}}async function gD(e,t){const{maxTokens:n,tokenCounter:r,strategy:s="last",allowPartial:a=!1,endOn:i,startOn:o,includeSystem:u=!1,textSplitter:h}=t;if(o&&s==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(u&&s==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let f;"getNumTokens"in r?f=async g=>(await Promise.all(g.map(w=>r.getNumTokens(w.content)))).reduce((w,x)=>w+x,0):f=async g=>r(g);let m=MB;if(h&&("splitText"in h?m=h.splitText:m=async g=>h(g)),s==="first")return PB(e,{maxTokens:n,tokenCounter:f,textSplitter:m,partialStrategy:a?"first":void 0,endOn:i});if(s==="last")return M0e(e,{maxTokens:n,tokenCounter:f,textSplitter:m,allowPartial:a,includeSystem:u,startOn:o,endOn:i});throw new Error(`Unrecognized strategy: '${s}'. Must be one of 'first' or 'last'.`)}async function PB(e,t){const{maxTokens:n,tokenCounter:r,textSplitter:s,partialStrategy:a,endOn:i}=t;let o=[...e],u=0;for(let h=0;h<o.length;h+=1){const f=h>0?o.slice(0,-h):o;if(await r(f)<=n){u=o.length-h;break}}if(u<o.length&&a){let h=!1;if(Array.isArray(o[u].content)){const f=o[u];if(typeof f.content=="string")throw new Error("Expected content to be an array.");const m=f.content.length,g=a==="last"?[...f.content].reverse():f.content;for(let b=1;b<=m;b+=1){const w=a==="first"?g.slice(0,b):g.slice(-b),x=Object.fromEntries(Object.entries(f).filter(([C])=>C!=="type"&&!C.startsWith("lc_"))),S=zj(f.getType(),{...x,content:w}),k=[...o.slice(0,u),S];if(await r(k)<=n)o=k,u+=1,h=!0;else break}h&&a==="last"&&(f.content=[...g].reverse())}if(!h){const f=o[u];let m;if(Array.isArray(f.content)&&f.content.some(g=>typeof g=="string"||g.type==="text")?m=f.content.find(b=>b.type==="text"&&b.text)?.text:typeof f.content=="string"&&(m=f.content),m){const g=await s(m),b=g.length;a==="last"&&g.reverse();for(let w=0;w<b-1;w+=1)if(g.pop(),f.content=g.join(""),await r([...o.slice(0,u),f])<=n){a==="last"&&(f.content=[...g].reverse().join("")),o=[...o.slice(0,u),f],u+=1;break}}}}if(i){const h=Array.isArray(i)?i:[i];for(;u>0&&!Lb(o[u-1],h);)u-=1}return o.slice(0,u)}async function M0e(e,t){const{allowPartial:n=!1,includeSystem:r=!1,endOn:s,startOn:a,...i}=t;let o=e.map(f=>{const m=Object.fromEntries(Object.entries(f).filter(([g])=>g!=="type"&&!g.startsWith("lc_")));return zj(f.getType(),m,sj(f))});if(s){const f=Array.isArray(s)?s:[s];for(;o.length>0&&!Lb(o[o.length-1],f);)o=o.slice(0,-1)}const u=r&&o[0]?.getType()==="system";let h=u?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return h=await PB(h,{...i,partialStrategy:n?"last":void 0,endOn:a}),u?[h[0],...h.slice(1).reverse()]:h.reverse()}const yD={human:{message:si,messageChunk:dh},ai:{message:pr,messageChunk:kn},system:{message:jl,messageChunk:Li},developer:{message:jl,messageChunk:Li},tool:{message:$i,messageChunk:lh},function:{message:Nx,messageChunk:uh},generic:{message:Bi,messageChunk:ch},remove:{message:bb,messageChunk:bb}};function zj(e,t,n){let r,s;switch(e){case"human":n?r=new dh(t):s=new si(t);break;case"ai":if(n){let a={...t};"tool_calls"in a&&(a={...a,tool_call_chunks:a.tool_calls?.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),r=new kn(a)}else s=new pr(t);break;case"system":n?r=new Li(t):s=new jl(t);break;case"developer":n?r=new Li({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}}):s=new jl({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in t)n?r=new lh(t):s=new $i(t);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(n)r=new uh(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");s=new Nx(t)}break;case"generic":if("role"in t)n?r=new ch(t):s=new Bi(t);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${e}`)}if(n&&r)return r;if(s)return s;throw new Error(`Unrecognized message type ${e}`)}function D0e(e){const t=e.getType();let n;const r=Object.fromEntries(Object.entries(e).filter(([s])=>!["type","tool_call_chunks"].includes(s)&&!s.startsWith("lc_")));if(t in yD&&(n=zj(t,r)),!n)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(yD)}`);return n}function MB(e){const t=e.split(`
`);return Promise.resolve([...t.slice(0,-1).map(n=>`${n}
`),t[t.length-1]])}const $0e=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],L0e=["image","video","audio","text-plain","file"],z0e=["text","reasoning",...$0e,...L0e];var U0e={};Ut(U0e,{AIMessage:()=>pr,AIMessageChunk:()=>kn,BaseMessage:()=>Oo,BaseMessageChunk:()=>Ll,ChatMessage:()=>Bi,ChatMessageChunk:()=>ch,FunctionMessage:()=>Nx,FunctionMessageChunk:()=>uh,HumanMessage:()=>si,HumanMessageChunk:()=>dh,KNOWN_BLOCK_TYPES:()=>z0e,RemoveMessage:()=>bb,SystemMessage:()=>jl,SystemMessageChunk:()=>Li,ToolMessage:()=>$i,ToolMessageChunk:()=>lh,_isMessageFieldWithRole:()=>dU,_mergeDicts:()=>Gr,_mergeLists:()=>Am,_mergeObj:()=>cU,_mergeStatus:()=>lU,coerceMessageLikeToMessage:()=>Sp,collapseToolCallChunks:()=>bU,convertToChunk:()=>xb,convertToOpenAIImageBlock:()=>sU,convertToProviderContentBlock:()=>Nm,defaultTextSplitter:()=>MB,defaultToolCallParser:()=>ij,filterMessages:()=>O0e,getBufferString:()=>uj,iife:()=>yU,isAIMessage:()=>Co,isAIMessageChunk:()=>vT,isBase64ContentBlock:()=>tj,isBaseMessage:()=>xo,isBaseMessageChunk:()=>sj,isChatMessage:()=>hce,isChatMessageChunk:()=>fce,isDataContentBlock:()=>Ea,isDirectToolOutput:()=>aj,isFunctionMessage:()=>pce,isFunctionMessageChunk:()=>mce,isHumanMessage:()=>gce,isHumanMessageChunk:()=>yce,isIDContentBlock:()=>rU,isMessage:()=>oU,isOpenAIToolCallArray:()=>uce,isPlainTextContentBlock:()=>Kle,isSystemMessage:()=>bce,isSystemMessageChunk:()=>xce,isToolMessage:()=>oj,isToolMessageChunk:()=>hU,isURLContentBlock:()=>ej,mapChatMessagesToStoredMessages:()=>Oce,mapStoredMessageToChatMessage:()=>dj,mapStoredMessagesToChatMessages:()=>Ice,mergeContent:()=>To,mergeMessageRuns:()=>R0e,mergeResponseMetadata:()=>mU,mergeUsageMetadata:()=>cj,parseBase64DataUrl:()=>Oi,parseMimeType:()=>xT,trimMessages:()=>P0e});var F0e=class extends Hd{runnable;inputMessagesKey;outputMessagesKey;historyMessagesKey;getMessageHistory;constructor(e){let t=Ro.from((a,i)=>this._enterHistory(a,i??{})).withConfig({runName:"loadHistory"});const n=e.historyMessagesKey??e.inputMessagesKey;n&&(t=ja.assign({[n]:t}).withConfig({runName:"insertHistory"}));const r=t.pipe(e.runnable.withListeners({onEnd:(a,i)=>this._exitHistory(a,i??{})})).withConfig({runName:"RunnableWithMessageHistory"}),s=e.config??{};super({...e,config:s,bound:r}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if(typeof e=="object"&&!Array.isArray(e)&&!xo(e)){let n;this.inputMessagesKey?n=this.inputMessagesKey:Object.keys(e).length===1?n=Object.keys(e)[0]:n="input",Array.isArray(e[n])&&Array.isArray(e[n][0])?t=e[n][0]:t=e[n]}else t=e;if(typeof t=="string")return[new si(t)];if(Array.isArray(t))return t;if(xo(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(!Array.isArray(e)&&!xo(e)&&typeof e!="string"){let n;this.outputMessagesKey!==void 0?n=this.outputMessagesKey:Object.keys(e).length===1?n=Object.keys(e)[0]:n="output",e.generations!==void 0?t=e.generations[0][0].message:t=e[n]}else t=e;if(typeof t=="string")return[new pr(t)];if(Array.isArray(t))return t;if(xo(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}async _enterHistory(e,t){const r=await(t?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?r.concat(this._getInputMessages(e)):r}async _exitHistory(e,t){const n=t.configurable?.messageHistory;let r;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?r=e.inputs[0]:r=e.inputs;let s=this._getInputMessages(r);if(this.historyMessagesKey===void 0){const o=await n.getMessages();s=s.slice(o.length)}const a=e.outputs;if(!a)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const i=this._getOutputMessages(a);await n.addMessages([...s,...i])}async _mergeConfig(...e){const t=await super._mergeConfig(...e);if(!t.configurable||!t.configurable.sessionId){const r={[this.inputMessagesKey??"input"]:"foo"},s={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(r)}, ${JSON.stringify(s)})`)}const{sessionId:n}=t.configurable;return t.configurable.messageHistory=await this.getMessageHistory(n),t}},B0e={};Ut(B0e,{RouterRunnable:()=>A0e,Runnable:()=>Fn,RunnableAssign:()=>Lj,RunnableBinding:()=>Hd,RunnableBranch:()=>I0e,RunnableEach:()=>T0e,RunnableLambda:()=>Ro,RunnableMap:()=>mh,RunnableParallel:()=>j0e,RunnablePassthrough:()=>ja,RunnablePick:()=>RB,RunnableRetry:()=>$j,RunnableSequence:()=>Ul,RunnableToolLike:()=>JT,RunnableWithFallbacks:()=>OB,RunnableWithMessageHistory:()=>F0e,_coerceToRunnable:()=>Xa,ensureConfig:()=>Gt,getCallbackManagerForConfig:()=>Js,mergeConfigs:()=>_b,patchConfig:()=>xn,pickRunnableConfigKeys:()=>Eo,raceWithSignal:()=>jo});var Qx=class extends Fn{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(n,r)=>this.parseResult([{text:n}],r?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(n,r)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],r?.callbacks),e,{...t,runType:"parser"})}},Xx=class extends Qx{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}},ka=class extends Error{llmOutput;observation;sendToLLM;constructor(e,t,n,r=!1){if(super(e),this.llmOutput=t,this.observation=n,this.sendToLLM=r,r&&(n===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");X9(this,"OUTPUT_PARSING_FAILURE")}},Mm=class extends Xx{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}},ev=class extends Mm{diff=!1;constructor(e){super(e),this.diff=e?.diff??this.diff}async*_transform(e){let t,n;for await(const r of e){if(typeof r!="string"&&typeof r.content!="string")throw new Error("Cannot handle non-string output.");let s;if(sj(r)){if(typeof r.content!="string")throw new Error("Cannot handle non-string message output.");s=new Ui({message:r,text:r.content})}else if(xo(r)){if(typeof r.content!="string")throw new Error("Cannot handle non-string message output.");s=new Ui({message:xb(r),text:r.content})}else s=new Dd({text:r});n===void 0?n=s:n=n.concat(s);const a=await this.parsePartialResult([n]);a!=null&&!Lc(a,t)&&(this.diff?yield this._diff(t,a):yield a,t=a)}}getFormatInstructions(){return""}},H0e={};Ut(H0e,{applyPatch:()=>Md,compare:()=>Sj});var qd=class extends ev{static lc_name(){return"JsonOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_concatOutputChunks(e,t){return this.diff?super._concatOutputChunks(e,t):t}_diff(e,t){if(t)return e?Sj(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return yT(e[0].text)}async parse(e){return yT(e,JSON.parse)}getFormatInstructions(){return""}},q0e=class extends Mm{static lc_name(){return"BytesOutputParser"}lc_namespace=["langchain_core","output_parsers","bytes"];lc_serializable=!0;textEncoder=new TextEncoder;parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},Dm=class extends Mm{re;async*_transform(e){let t="";for await(const n of e)if(typeof n=="string"?t+=n:t+=n.content,this.re){const r=[...t.matchAll(this.re)];if(r.length>1){let s=0;for(const a of r.slice(0,-1))yield[a[1]],s+=(a.index??0)+a[0].length;t=t.slice(s)}}else{const r=await this.parse(t);if(r.length>1){for(const s of r.slice(0,-1))yield[s];t=r[r.length-1]}}for(const n of await this.parse(t))yield[n]}},V0e=class extends Dm{static lc_name(){return"CommaSeparatedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;async parse(e){try{return e.trim().split(",").map(t=>t.trim())}catch{throw new ka(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},G0e=class extends Dm{lc_namespace=["langchain_core","output_parsers","list"];length;separator;constructor({length:e,separator:t}){super(...arguments),this.length=e,this.separator=t||","}async parse(e){try{const t=e.trim().split(this.separator).map(n=>n.trim());if(this.length!==void 0&&t.length!==this.length)throw new ka(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){throw Object.getPrototypeOf(t)===ka.prototype?t:new ka(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},K0e=class extends Dm{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/\d+\.\s([^\n]+)/g;async parse(e){return[...e.matchAll(this.re)??[]].map(t=>t[1])}},Z0e=class extends Dm{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/^\s*[-*]\s([^\n]+)$/gm;async parse(e){return[...e.matchAll(this.re)??[]].map(t=>t[1])}},W0e=class extends Mm{static lc_name(){return"StrOutputParser"}lc_namespace=["langchain_core","output_parsers","string"];lc_serializable=!0;parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((t,n)=>t+this._messageContentToString(n),"")}},Vd=class extends Xx{static lc_name(){return"StructuredOutputParser"}lc_namespace=["langchain","output_parsers","structured"];toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),this.schema=e}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=Yx(Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Jx().describe(r)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(dr(this.schema))}
\`\`\`
`}async parse(e){try{const t=e.trim(),r=(t.match(/^```(?:json)?\s*([\s\S]*?)```/)?.[1]||t.match(/```json\s*([\s\S]*?)```/)?.[1]||t).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(s,a)=>`"${a.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Kx(this.schema,JSON.parse(r))}catch(t){throw new ka(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}},DB=class extends Vd{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){const t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(dr(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){const n=e;if("type"in n){let r=!1,s;if(Array.isArray(n.type)){const o=n.type.findIndex(u=>u==="null");o!==-1&&(r=!0,n.type.splice(o,1)),s=n.type.join(" | ")}else s=n.type;if(n.type==="object"&&n.properties){const o=n.description?` // ${n.description}`:"";return`{
${Object.entries(n.properties).map(([h,f])=>{const m=n.required?.includes(h)?"":" (optional)";return`${" ".repeat(t)}"${h}": ${this._schemaToInstruction(f,t+2)}${m}`}).join(`
`)}
${" ".repeat(t-2)}}${o}`}if(n.type==="array"&&n.items){const o=n.description?` // ${n.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(n.items,t+2)}
${" ".repeat(t-2)}] ${o}`}const a=r?" (nullable)":"",i=n.description?` // ${n.description}`:"";return`${s}${i}${a}`}if("anyOf"in n)return n.anyOf.map(r=>this._schemaToInstruction(r,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=Yx(Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Jx().describe(r)])));return new this(t)}},J0e=class extends Xx{structuredInputParser;constructor({inputSchema:e}){super(...arguments),this.structuredInputParser=new DB(e)}async parse(e){let t;try{t=await this.structuredInputParser.parse(e)}catch(n){throw new ka(`Failed to parse. Text: "${e}". Error: ${n}`,e)}return this.outputProcessor(t)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};const Y0e=function(){const e={};e.parser=function(I,N){return new n(I,N)},e.SAXParser=n,e.SAXStream=h,e.createStream=u,e.MAX_BUFFER_LENGTH=64*1024;const t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(I,N){if(!(this instanceof n))return new n(I,N);var ne=this;s(ne),ne.q=ne.c="",ne.bufferCheckPosition=e.MAX_BUFFER_LENGTH,ne.opt=N||{},ne.opt.lowercase=ne.opt.lowercase||ne.opt.lowercasetags,ne.looseCase=ne.opt.lowercase?"toLowerCase":"toUpperCase",ne.tags=[],ne.closed=ne.closedRoot=ne.sawRoot=!1,ne.tag=ne.error=null,ne.strict=!!I,ne.noscript=!!(I||ne.opt.noscript),ne.state=j.BEGIN,ne.strictEntities=ne.opt.strictEntities,ne.ENTITIES=ne.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),ne.attribList=[],ne.opt.xmlns&&(ne.ns=Object.create(w)),ne.trackPosition=ne.opt.position!==!1,ne.trackPosition&&(ne.position=ne.line=ne.column=0),B(ne,"onready")}Object.create||(Object.create=function(I){function N(){}N.prototype=I;var ne=new N;return ne}),Object.keys||(Object.keys=function(I){var N=[];for(var ne in I)I.hasOwnProperty(ne)&&N.push(ne);return N});function r(I){for(var N=Math.max(e.MAX_BUFFER_LENGTH,10),ne=0,K=0,re=t.length;K<re;K++){var be=I[t[K]].length;if(be>N)switch(t[K]){case"textNode":ie(I);break;case"cdata":ee(I,"oncdata",I.cdata),I.cdata="";break;case"script":ee(I,"onscript",I.script),I.script="";break;default:G(I,"Max buffer length exceeded: "+t[K])}ne=Math.max(ne,be)}var z=e.MAX_BUFFER_LENGTH-ne;I.bufferCheckPosition=z+I.position}function s(I){for(var N=0,ne=t.length;N<ne;N++)I[t[N]]=""}function a(I){ie(I),I.cdata!==""&&(ee(I,"oncdata",I.cdata),I.cdata=""),I.script!==""&&(ee(I,"onscript",I.script),I.script="")}n.prototype={end:function(){H(this)},write:he,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var i=ReadableStream;i||(i=function(){});var o=e.EVENTS.filter(function(I){return I!=="error"&&I!=="end"});function u(I,N){return new h(I,N)}function h(I,N){if(!(this instanceof h))return new h(I,N);i.apply(this),this._parser=new n(I,N),this.writable=!0,this.readable=!0;var ne=this;this._parser.onend=function(){ne.emit("end")},this._parser.onerror=function(K){ne.emit("error",K),ne._parser.error=null},this._decoder=null,o.forEach(function(K){Object.defineProperty(ne,"on"+K,{get:function(){return ne._parser["on"+K]},set:function(re){if(!re)return ne.removeAllListeners(K),ne._parser["on"+K]=re,re;ne.on(K,re)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(i.prototype,{constructor:{value:h}}),h.prototype.write=function(I){return this._parser.write(I.toString()),this.emit("data",I),!0},h.prototype.end=function(I){return I&&I.length&&this.write(I),this._parser.end(),!0},h.prototype.on=function(I,N){var ne=this;return!ne._parser["on"+I]&&o.indexOf(I)!==-1&&(ne._parser["on"+I]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,I),ne.emit.apply(ne,K)}),i.prototype.on.call(ne,I,N)};var f="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",w={xml:g,xmlns:b},x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(I){return I===" "||I===`
`||I==="\r"||I==="	"}function P(I){return I==='"'||I==="'"}function D(I){return I===">"||T(I)}function R(I,N){return I.test(N)}function U(I,N){return!R(I,N)}var j=0;e.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(I){var N=e.ENTITIES[I],ne=typeof N=="number"?String.fromCharCode(N):N;e.ENTITIES[I]=ne});for(var se in e.STATE)e.STATE[e.STATE[se]]=se;j=e.STATE;function B(I,N,ne){I[N]&&I[N](ne)}function ee(I,N,ne){I.textNode&&ie(I),B(I,N,ne)}function ie(I){I.textNode=_e(I.opt,I.textNode),I.textNode&&B(I,"ontext",I.textNode),I.textNode=""}function _e(I,N){return I.trim&&(N=N.trim()),I.normalize&&(N=N.replace(/\s+/g," ")),N}function G(I,N){return ie(I),I.trackPosition&&(N+=`
Line: `+I.line+`
Column: `+I.column+`
Char: `+I.c),N=new Error(N),I.error=N,B(I,"onerror",N),I}function H(I){return I.sawRoot&&!I.closedRoot&&L(I,"Unclosed root tag"),I.state!==j.BEGIN&&I.state!==j.BEGIN_WHITESPACE&&I.state!==j.TEXT&&G(I,"Unexpected end"),ie(I),I.c="",I.closed=!0,B(I,"onend"),n.call(I,I.strict,I.opt),I}function L(I,N){if(typeof I!="object"||!(I instanceof n))throw new Error("bad call to strictFail");I.strict&&G(I,N)}function Z(I){I.strict||(I.tagName=I.tagName[I.looseCase]());var N=I.tags[I.tags.length-1]||I,ne=I.tag={name:I.tagName,attributes:{}};I.opt.xmlns&&(ne.ns=N.ns),I.attribList.length=0,ee(I,"onopentagstart",ne)}function W(I,N){var ne=I.indexOf(":"),K=ne<0?["",I]:I.split(":"),re=K[0],be=K[1];return N&&I==="xmlns"&&(re="xmlns",be=""),{prefix:re,local:be}}function de(I){if(I.strict||(I.attribName=I.attribName[I.looseCase]()),I.attribList.indexOf(I.attribName)!==-1||I.tag.attributes.hasOwnProperty(I.attribName)){I.attribName=I.attribValue="";return}if(I.opt.xmlns){var N=W(I.attribName,!0),ne=N.prefix,K=N.local;if(ne==="xmlns")if(K==="xml"&&I.attribValue!==g)L(I,"xml: prefix must be bound to "+g+`
Actual: `+I.attribValue);else if(K==="xmlns"&&I.attribValue!==b)L(I,"xmlns: prefix must be bound to "+b+`
Actual: `+I.attribValue);else{var re=I.tag,be=I.tags[I.tags.length-1]||I;re.ns===be.ns&&(re.ns=Object.create(be.ns)),re.ns[K]=I.attribValue}I.attribList.push([I.attribName,I.attribValue])}else I.tag.attributes[I.attribName]=I.attribValue,ee(I,"onattribute",{name:I.attribName,value:I.attribValue});I.attribName=I.attribValue=""}function $(I,N){if(I.opt.xmlns){var ne=I.tag,K=W(I.tagName);ne.prefix=K.prefix,ne.local=K.local,ne.uri=ne.ns[K.prefix]||"",ne.prefix&&!ne.uri&&(L(I,"Unbound namespace prefix: "+JSON.stringify(I.tagName)),ne.uri=K.prefix);var re=I.tags[I.tags.length-1]||I;ne.ns&&re.ns!==ne.ns&&Object.keys(ne.ns).forEach(function(Jr){ee(I,"onopennamespace",{prefix:Jr,uri:ne.ns[Jr]})});for(var be=0,z=I.attribList.length;be<z;be++){var Ne=I.attribList[be],je=Ne[0],ft=Ne[1],Fe=W(je,!0),Se=Fe.prefix,Xt=Fe.local,en=Se===""?"":ne.ns[Se]||"",Me={name:je,value:ft,prefix:Se,local:Xt,uri:en};Se&&Se!=="xmlns"&&!en&&(L(I,"Unbound namespace prefix: "+JSON.stringify(Se)),Me.uri=Se),I.tag.attributes[je]=Me,ee(I,"onattribute",Me)}I.attribList.length=0}I.tag.isSelfClosing=!!N,I.sawRoot=!0,I.tags.push(I.tag),ee(I,"onopentag",I.tag),N||(!I.noscript&&I.tagName.toLowerCase()==="script"?I.state=j.SCRIPT:I.state=j.TEXT,I.tag=null,I.tagName=""),I.attribName=I.attribValue="",I.attribList.length=0}function F(I){if(!I.tagName){L(I,"Weird empty close tag."),I.textNode+="</>",I.state=j.TEXT;return}if(I.script){if(I.tagName!=="script"){I.script+="</"+I.tagName+">",I.tagName="",I.state=j.SCRIPT;return}ee(I,"onscript",I.script),I.script=""}var N=I.tags.length,ne=I.tagName;I.strict||(ne=ne[I.looseCase]());for(var K=ne;N--;){var re=I.tags[N];if(re.name!==K)L(I,"Unexpected close tag");else break}if(N<0){L(I,"Unmatched closing tag: "+I.tagName),I.textNode+="</"+I.tagName+">",I.state=j.TEXT;return}I.tagName=ne;for(var be=I.tags.length;be-- >N;){var z=I.tag=I.tags.pop();I.tagName=I.tag.name,ee(I,"onclosetag",I.tagName);var Ne={};for(var je in z.ns)Ne[je]=z.ns[je];var ft=I.tags[I.tags.length-1]||I;I.opt.xmlns&&z.ns!==ft.ns&&Object.keys(z.ns).forEach(function(Fe){var Se=z.ns[Fe];ee(I,"onclosenamespace",{prefix:Fe,uri:Se})})}N===0&&(I.closedRoot=!0),I.tagName=I.attribValue=I.attribName="",I.attribList.length=0,I.state=j.TEXT}function Q(I){var N=I.entity,ne=N.toLowerCase(),K,re="";return I.ENTITIES[N]?I.ENTITIES[N]:I.ENTITIES[ne]?I.ENTITIES[ne]:(N=ne,N.charAt(0)==="#"&&(N.charAt(1)==="x"?(N=N.slice(2),K=parseInt(N,16),re=K.toString(16)):(N=N.slice(1),K=parseInt(N,10),re=K.toString(10))),N=N.replace(/^0+/,""),isNaN(K)||re.toLowerCase()!==N?(L(I,"Invalid character entity"),"&"+I.entity+";"):String.fromCodePoint(K))}function O(I,N){N==="<"?(I.state=j.OPEN_WAKA,I.startTagPosition=I.position):T(N)||(L(I,"Non-whitespace before first tag."),I.textNode=N,I.state=j.TEXT)}function V(I,N){var ne="";return N<I.length&&(ne=I.charAt(N)),ne}function he(I){var N=this;if(this.error)throw this.error;if(N.closed)return G(N,"Cannot write after close. Assign an onready handler.");if(I===null)return H(N);typeof I=="object"&&(I=I.toString());for(var ne=0,K="";K=V(I,ne++),N.c=K,!!K;)switch(N.trackPosition&&(N.position++,K===`
`?(N.line++,N.column=0):N.column++),N.state){case j.BEGIN:if(N.state=j.BEGIN_WHITESPACE,K==="\uFEFF")continue;O(N,K);continue;case j.BEGIN_WHITESPACE:O(N,K);continue;case j.TEXT:if(N.sawRoot&&!N.closedRoot){for(var re=ne-1;K&&K!=="<"&&K!=="&";)K=V(I,ne++),K&&N.trackPosition&&(N.position++,K===`
`?(N.line++,N.column=0):N.column++);N.textNode+=I.substring(re,ne-1)}K==="<"&&!(N.sawRoot&&N.closedRoot&&!N.strict)?(N.state=j.OPEN_WAKA,N.startTagPosition=N.position):(!T(K)&&(!N.sawRoot||N.closedRoot)&&L(N,"Text data outside of root node."),K==="&"?N.state=j.TEXT_ENTITY:N.textNode+=K);continue;case j.SCRIPT:K==="<"?N.state=j.SCRIPT_ENDING:N.script+=K;continue;case j.SCRIPT_ENDING:K==="/"?N.state=j.CLOSE_TAG:(N.script+="<"+K,N.state=j.SCRIPT);continue;case j.OPEN_WAKA:if(K==="!")N.state=j.SGML_DECL,N.sgmlDecl="";else if(!T(K))if(R(x,K))N.state=j.OPEN_TAG,N.tagName=K;else if(K==="/")N.state=j.CLOSE_TAG,N.tagName="";else if(K==="?")N.state=j.PROC_INST,N.procInstName=N.procInstBody="";else{if(L(N,"Unencoded <"),N.startTagPosition+1<N.position){var be=N.position-N.startTagPosition;K=new Array(be).join(" ")+K}N.textNode+="<"+K,N.state=j.TEXT}continue;case j.SGML_DECL:(N.sgmlDecl+K).toUpperCase()===f?(ee(N,"onopencdata"),N.state=j.CDATA,N.sgmlDecl="",N.cdata=""):N.sgmlDecl+K==="--"?(N.state=j.COMMENT,N.comment="",N.sgmlDecl=""):(N.sgmlDecl+K).toUpperCase()===m?(N.state=j.DOCTYPE,(N.doctype||N.sawRoot)&&L(N,"Inappropriately located doctype declaration"),N.doctype="",N.sgmlDecl=""):K===">"?(ee(N,"onsgmldeclaration",N.sgmlDecl),N.sgmlDecl="",N.state=j.TEXT):(P(K)&&(N.state=j.SGML_DECL_QUOTED),N.sgmlDecl+=K);continue;case j.SGML_DECL_QUOTED:K===N.q&&(N.state=j.SGML_DECL,N.q=""),N.sgmlDecl+=K;continue;case j.DOCTYPE:K===">"?(N.state=j.TEXT,ee(N,"ondoctype",N.doctype),N.doctype=!0):(N.doctype+=K,K==="["?N.state=j.DOCTYPE_DTD:P(K)&&(N.state=j.DOCTYPE_QUOTED,N.q=K));continue;case j.DOCTYPE_QUOTED:N.doctype+=K,K===N.q&&(N.q="",N.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:N.doctype+=K,K==="]"?N.state=j.DOCTYPE:P(K)&&(N.state=j.DOCTYPE_DTD_QUOTED,N.q=K);continue;case j.DOCTYPE_DTD_QUOTED:N.doctype+=K,K===N.q&&(N.state=j.DOCTYPE_DTD,N.q="");continue;case j.COMMENT:K==="-"?N.state=j.COMMENT_ENDING:N.comment+=K;continue;case j.COMMENT_ENDING:K==="-"?(N.state=j.COMMENT_ENDED,N.comment=_e(N.opt,N.comment),N.comment&&ee(N,"oncomment",N.comment),N.comment=""):(N.comment+="-"+K,N.state=j.COMMENT);continue;case j.COMMENT_ENDED:K!==">"?(L(N,"Malformed comment"),N.comment+="--"+K,N.state=j.COMMENT):N.state=j.TEXT;continue;case j.CDATA:K==="]"?N.state=j.CDATA_ENDING:N.cdata+=K;continue;case j.CDATA_ENDING:K==="]"?N.state=j.CDATA_ENDING_2:(N.cdata+="]"+K,N.state=j.CDATA);continue;case j.CDATA_ENDING_2:K===">"?(N.cdata&&ee(N,"oncdata",N.cdata),ee(N,"onclosecdata"),N.cdata="",N.state=j.TEXT):K==="]"?N.cdata+="]":(N.cdata+="]]"+K,N.state=j.CDATA);continue;case j.PROC_INST:K==="?"?N.state=j.PROC_INST_ENDING:T(K)?N.state=j.PROC_INST_BODY:N.procInstName+=K;continue;case j.PROC_INST_BODY:if(!N.procInstBody&&T(K))continue;K==="?"?N.state=j.PROC_INST_ENDING:N.procInstBody+=K;continue;case j.PROC_INST_ENDING:K===">"?(ee(N,"onprocessinginstruction",{name:N.procInstName,body:N.procInstBody}),N.procInstName=N.procInstBody="",N.state=j.TEXT):(N.procInstBody+="?"+K,N.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:R(S,K)?N.tagName+=K:(Z(N),K===">"?$(N):K==="/"?N.state=j.OPEN_TAG_SLASH:(T(K)||L(N,"Invalid character in tag name"),N.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:K===">"?($(N,!0),F(N)):(L(N,"Forward-slash in opening tag not followed by >"),N.state=j.ATTRIB);continue;case j.ATTRIB:if(T(K))continue;K===">"?$(N):K==="/"?N.state=j.OPEN_TAG_SLASH:R(x,K)?(N.attribName=K,N.attribValue="",N.state=j.ATTRIB_NAME):L(N,"Invalid attribute name");continue;case j.ATTRIB_NAME:K==="="?N.state=j.ATTRIB_VALUE:K===">"?(L(N,"Attribute without value"),N.attribValue=N.attribName,de(N),$(N)):T(K)?N.state=j.ATTRIB_NAME_SAW_WHITE:R(S,K)?N.attribName+=K:L(N,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if(K==="=")N.state=j.ATTRIB_VALUE;else{if(T(K))continue;L(N,"Attribute without value"),N.tag.attributes[N.attribName]="",N.attribValue="",ee(N,"onattribute",{name:N.attribName,value:""}),N.attribName="",K===">"?$(N):R(x,K)?(N.attribName=K,N.state=j.ATTRIB_NAME):(L(N,"Invalid attribute name"),N.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(T(K))continue;P(K)?(N.q=K,N.state=j.ATTRIB_VALUE_QUOTED):(L(N,"Unquoted attribute value"),N.state=j.ATTRIB_VALUE_UNQUOTED,N.attribValue=K);continue;case j.ATTRIB_VALUE_QUOTED:if(K!==N.q){K==="&"?N.state=j.ATTRIB_VALUE_ENTITY_Q:N.attribValue+=K;continue}de(N),N.q="",N.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:T(K)?N.state=j.ATTRIB:K===">"?$(N):K==="/"?N.state=j.OPEN_TAG_SLASH:R(x,K)?(L(N,"No whitespace between attributes"),N.attribName=K,N.attribValue="",N.state=j.ATTRIB_NAME):L(N,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!D(K)){K==="&"?N.state=j.ATTRIB_VALUE_ENTITY_U:N.attribValue+=K;continue}de(N),K===">"?$(N):N.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(N.tagName)K===">"?F(N):R(S,K)?N.tagName+=K:N.script?(N.script+="</"+N.tagName,N.tagName="",N.state=j.SCRIPT):(T(K)||L(N,"Invalid tagname in closing tag"),N.state=j.CLOSE_TAG_SAW_WHITE);else{if(T(K))continue;U(x,K)?N.script?(N.script+="</"+K,N.state=j.SCRIPT):L(N,"Invalid tagname in closing tag."):N.tagName=K}continue;case j.CLOSE_TAG_SAW_WHITE:if(T(K))continue;K===">"?F(N):L(N,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var z,Ne;switch(N.state){case j.TEXT_ENTITY:z=j.TEXT,Ne="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:z=j.ATTRIB_VALUE_QUOTED,Ne="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:z=j.ATTRIB_VALUE_UNQUOTED,Ne="attribValue";break}if(K===";")if(N.opt.unparsedEntities){var je=Q(N);N.entity="",N.state=z,N.write(je)}else N[Ne]+=Q(N),N.entity="",N.state=z;else R(N.entity.length?C:k,K)?N.entity+=K:(L(N,"Invalid character in entity name"),N[Ne]+="&"+N.entity+K,N.entity="",N.state=z);continue;default:throw new Error(N,"Unknown state: "+N.state)}return N.position>=N.bufferCheckPosition&&r(N),N}return String.fromCodePoint||(function(){var I=String.fromCharCode,N=Math.floor,ne=function(){var K=16384,re=[],be,z,Ne=-1,je=arguments.length;if(!je)return"";for(var ft="";++Ne<je;){var Fe=Number(arguments[Ne]);if(!isFinite(Fe)||Fe<0||Fe>1114111||N(Fe)!==Fe)throw RangeError("Invalid code point: "+Fe);Fe<=65535?re.push(Fe):(Fe-=65536,be=(Fe>>10)+55296,z=Fe%1024+56320,re.push(be,z)),(Ne+1===je||re.length>K)&&(ft+=I.apply(null,re),re.length=0)}return ft};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ne,configurable:!0,writable:!0}):String.fromCodePoint=ne})(),e},Q0e=Y0e(),YT=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var X0e=class extends ev{tags;constructor(e){super(e),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_diff(e,t){if(t)return e?Sj(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return QT(e[0].text)}async parse(e){return QT(e)}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?YT.replace("{tags}",this.tags?.join(", ")??""):YT}};const ebe=e=>e.split(`
`).map(t=>t.replace(/^\s+/,"")).join(`
`).trim(),$B=e=>{if(Object.keys(e).length===0)return{};const t={};return e.children.length>0?(t[e.name]=e.children.map($B),t):(t[e.name]=e.text??void 0,t)};function QT(e){const t=ebe(e),n=Q0e.parser(!0);let r={};const s=[];n.onopentag=o=>{const u={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};s.length>0?s[s.length-1].children.push(u):r=u,o.isSelfClosing||s.push(u)},n.onclosetag=()=>{if(s.length>0){const o=s.pop();s.length===0&&o&&(r=o)}},n.ontext=o=>{if(s.length>0){const u=s[s.length-1];u.text+=o}},n.onattribute=o=>{if(s.length>0){const u=s[s.length-1];u.attributes[o.name]=o.value}};const a=/```(xml)?(.*)```/s.exec(t),i=a?a[2]:t;return n.write(i).close(),r&&r.name==="?xml"&&(r=r.children[0]),$B(r)}var tbe={};Ut(tbe,{AsymmetricStructuredOutputParser:()=>J0e,BaseCumulativeTransformOutputParser:()=>ev,BaseLLMOutputParser:()=>Qx,BaseOutputParser:()=>Xx,BaseTransformOutputParser:()=>Mm,BytesOutputParser:()=>q0e,CommaSeparatedListOutputParser:()=>V0e,CustomListOutputParser:()=>G0e,JsonMarkdownStructuredOutputParser:()=>DB,JsonOutputParser:()=>qd,ListOutputParser:()=>Dm,MarkdownListOutputParser:()=>Z0e,NumberedListOutputParser:()=>K0e,OutputParserException:()=>ka,StringOutputParser:()=>W0e,StructuredOutputParser:()=>Vd,XMLOutputParser:()=>X0e,XML_FORMAT_INSTRUCTIONS:()=>YT,parseJsonMarkdown:()=>yT,parsePartialJson:()=>jx,parseXMLMarkdown:()=>QT});var nbe={};Ut(nbe,{extendInteropZodObject:()=>_ge,getInteropZodDefaultGetter:()=>Sge,getInteropZodObjectShape:()=>$T,getSchemaDescription:()=>Zx,interopParse:()=>xge,interopParseAsync:()=>Kx,interopSafeParse:()=>bge,interopSafeParseAsync:()=>Gx,interopZodObjectMakeFieldsOptional:()=>Ege,interopZodObjectPartial:()=>kge,interopZodObjectPassthrough:()=>LT,interopZodObjectStrict:()=>Ib,interopZodTransformInputSchema:()=>hB,isInteropZodError:()=>fB,isInteropZodLiteral:()=>yge,isInteropZodObject:()=>wge,isInteropZodSchema:()=>Lr,isShapelessZodSchema:()=>vge,isSimpleStringZodSchema:()=>Oj,isZodArrayV4:()=>Wx,isZodLiteralV3:()=>lB,isZodLiteralV4:()=>cB,isZodNullableV4:()=>dB,isZodObjectV3:()=>Rj,isZodObjectV4:()=>Pi,isZodOptionalV4:()=>uB,isZodSchema:()=>gge,isZodSchemaV3:()=>er,isZodSchemaV4:()=>En});var bD=class extends Qx{static lc_name(){return"AnthropicToolsOutputParser"}lc_namespace=["langchain","anthropic","output_parsers"];returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(e){super(e),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch(r){throw new ka(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.message)}`,e)}else t=e;if(this.zodSchema===void 0)return t;const n=await Gx(this.zodSchema,t);if(n.success)return n.data;throw new ka(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.issues)}`,JSON.stringify(t,null,2))}async parseResult(e){const t=e.flatMap(s=>{const{message:a}=s;return Array.isArray(a.content)?LB(a.content)[0]:[]});if(t[0]===void 0)throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");const[n]=t;return await this._validateResult(n.args)}};function LB(e){const t=[];for(const n of e)n.type==="tool_use"&&t.push({name:n.name,args:n.input,id:n.id,type:"tool_call"});return t}const rbe=ke("ZodISODateTime",(e,t)=>{Spe.init(e,t),An.init(e,t)});function sbe(e){return Nme(rbe,e)}const abe=ke("ZodISODate",(e,t)=>{Tpe.init(e,t),An.init(e,t)});function ibe(e){return Ame(abe,e)}const obe=ke("ZodISOTime",(e,t)=>{Cpe.init(e,t),An.init(e,t)});function lbe(e){return Ime(obe,e)}const cbe=ke("ZodISODuration",(e,t)=>{Epe.init(e,t),An.init(e,t)});function ube(e){return Ome(cbe,e)}const dbe=(e,t)=>{vF.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>mfe(e,n)},flatten:{value:n=>pfe(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,PT,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,PT,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ia=ke("ZodError",dbe,{Parent:Error}),hbe=zx(Ia),fbe=Fx(Ia),pbe=Bx(Ia),mbe=Hx(Ia),gbe=vfe(Ia),ybe=wfe(Ia),bbe=_fe(Ia),xbe=kfe(Ia),vbe=Sfe(Ia),wbe=Tfe(Ia),_be=Cfe(Ia),kbe=Efe(Ia),jn=ke("ZodType",(e,t)=>(vn.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Ab(e,"input"),output:Ab(e,"output")}}),e.toJSONSchema=Qme(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(zl(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),e.with=e.check,e.clone=(n,r)=>$r(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>hbe(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>pbe(e,n,r),e.parseAsync=async(n,r)=>fbe(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>mbe(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>gbe(e,n,r),e.decode=(n,r)=>ybe(e,n,r),e.encodeAsync=async(n,r)=>bbe(e,n,r),e.decodeAsync=async(n,r)=>xbe(e,n,r),e.safeEncode=(n,r)=>vbe(e,n,r),e.safeDecode=(n,r)=>wbe(e,n,r),e.safeEncodeAsync=async(n,r)=>_be(e,n,r),e.safeDecodeAsync=async(n,r)=>kbe(e,n,r),e.refine=(n,r)=>e.check(bxe(n,r)),e.superRefine=n=>e.check(xxe(n)),e.overwrite=n=>e.check(ph(n)),e.optional=()=>wD(e),e.exactOptional=()=>axe(e),e.nullable=()=>_D(e),e.nullish=()=>wD(_D(e)),e.nonoptional=n=>dxe(e,n),e.array=()=>Pe(e),e.or=n=>BB([e,n]),e.and=n=>Ybe(e,n),e.transform=n=>kD(e,rxe(n)),e.default=n=>lxe(e,n),e.prefault=n=>uxe(e,n),e.catch=n=>fxe(e,n),e.pipe=n=>kD(e,n),e.readonly=()=>gxe(e),e.describe=n=>{const r=e.clone();return wr.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return wr.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return wr.get(e);const r=e.clone();return wr.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),zB=ke("_ZodString",(e,t)=>{Aj.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(r,s,a)=>UF(e,r,s);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Dme(...r)),e.includes=(...r)=>e.check(zme(...r)),e.startsWith=(...r)=>e.check(Ume(...r)),e.endsWith=(...r)=>e.check(Fme(...r)),e.min=(...r)=>e.check(Cb(...r)),e.max=(...r)=>e.check(LF(...r)),e.length=(...r)=>e.check(zF(...r)),e.nonempty=(...r)=>e.check(Cb(1,...r)),e.lowercase=r=>e.check($me(r)),e.uppercase=r=>e.check(Lme(r)),e.trim=()=>e.check(Hme()),e.normalize=(...r)=>e.check(Bme(...r)),e.toLowerCase=()=>e.check(qme()),e.toUpperCase=()=>e.check(Vme()),e.slugify=()=>e.check(Gme())}),Sbe=ke("ZodString",(e,t)=>{Aj.init(e,t),zB.init(e,t),e.email=n=>e.check(lme(Tbe,n)),e.url=n=>e.check(fme(Cbe,n)),e.jwt=n=>e.check(jme(Fbe,n)),e.emoji=n=>e.check(pme(Ebe,n)),e.guid=n=>e.check(z3(xD,n)),e.uuid=n=>e.check(cme(Fy,n)),e.uuidv4=n=>e.check(ume(Fy,n)),e.uuidv6=n=>e.check(dme(Fy,n)),e.uuidv7=n=>e.check(hme(Fy,n)),e.nanoid=n=>e.check(mme(jbe,n)),e.guid=n=>e.check(z3(xD,n)),e.cuid=n=>e.check(gme(Nbe,n)),e.cuid2=n=>e.check(yme(Abe,n)),e.ulid=n=>e.check(bme(Ibe,n)),e.base64=n=>e.check(Tme(Lbe,n)),e.base64url=n=>e.check(Cme(zbe,n)),e.xid=n=>e.check(xme(Obe,n)),e.ksuid=n=>e.check(vme(Rbe,n)),e.ipv4=n=>e.check(wme(Pbe,n)),e.ipv6=n=>e.check(_me(Mbe,n)),e.cidrv4=n=>e.check(kme(Dbe,n)),e.cidrv6=n=>e.check(Sme($be,n)),e.e164=n=>e.check(Eme(Ube,n)),e.datetime=n=>e.check(sbe(n)),e.date=n=>e.check(ibe(n)),e.time=n=>e.check(lbe(n)),e.duration=n=>e.check(ube(n))});function J(e){return ome(Sbe,e)}const An=ke("ZodStringFormat",(e,t)=>{Cn.init(e,t),zB.init(e,t)}),Tbe=ke("ZodEmail",(e,t)=>{mpe.init(e,t),An.init(e,t)}),xD=ke("ZodGUID",(e,t)=>{fpe.init(e,t),An.init(e,t)}),Fy=ke("ZodUUID",(e,t)=>{ppe.init(e,t),An.init(e,t)}),Cbe=ke("ZodURL",(e,t)=>{gpe.init(e,t),An.init(e,t)}),Ebe=ke("ZodEmoji",(e,t)=>{ype.init(e,t),An.init(e,t)}),jbe=ke("ZodNanoID",(e,t)=>{bpe.init(e,t),An.init(e,t)}),Nbe=ke("ZodCUID",(e,t)=>{xpe.init(e,t),An.init(e,t)}),Abe=ke("ZodCUID2",(e,t)=>{vpe.init(e,t),An.init(e,t)}),Ibe=ke("ZodULID",(e,t)=>{wpe.init(e,t),An.init(e,t)}),Obe=ke("ZodXID",(e,t)=>{_pe.init(e,t),An.init(e,t)}),Rbe=ke("ZodKSUID",(e,t)=>{kpe.init(e,t),An.init(e,t)}),Pbe=ke("ZodIPv4",(e,t)=>{jpe.init(e,t),An.init(e,t)}),Mbe=ke("ZodIPv6",(e,t)=>{Npe.init(e,t),An.init(e,t)}),Dbe=ke("ZodCIDRv4",(e,t)=>{Ape.init(e,t),An.init(e,t)}),$be=ke("ZodCIDRv6",(e,t)=>{Ipe.init(e,t),An.init(e,t)}),Lbe=ke("ZodBase64",(e,t)=>{Ope.init(e,t),An.init(e,t)}),zbe=ke("ZodBase64URL",(e,t)=>{Ppe.init(e,t),An.init(e,t)}),Ube=ke("ZodE164",(e,t)=>{Mpe.init(e,t),An.init(e,t)}),Fbe=ke("ZodJWT",(e,t)=>{$pe.init(e,t),An.init(e,t)}),UB=ke("ZodNumber",(e,t)=>{AF.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(r,s,a)=>FF(e,r,s),e.gt=(r,s)=>e.check(F3(r,s)),e.gte=(r,s)=>e.check(I1(r,s)),e.min=(r,s)=>e.check(I1(r,s)),e.lt=(r,s)=>e.check(U3(r,s)),e.lte=(r,s)=>e.check(A1(r,s)),e.max=(r,s)=>e.check(A1(r,s)),e.int=r=>e.check(vD(r)),e.safe=r=>e.check(vD(r)),e.positive=r=>e.check(F3(0,r)),e.nonnegative=r=>e.check(I1(0,r)),e.negative=r=>e.check(U3(0,r)),e.nonpositive=r=>e.check(A1(0,r)),e.multipleOf=(r,s)=>e.check(B3(r,s)),e.step=(r,s)=>e.check(B3(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function qe(e){return Rme(UB,e)}const Bbe=ke("ZodNumberFormat",(e,t)=>{Lpe.init(e,t),UB.init(e,t)});function vD(e){return Pme(Bbe,e)}const Hbe=ke("ZodBoolean",(e,t)=>{zpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>BF(e,n,r)});function Gc(e){return Mme(Hbe,e)}const qbe=ke("ZodUnknown",(e,t)=>{IF.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>qF()});function zb(){return DF(qbe)}const Vbe=ke("ZodNever",(e,t)=>{OF.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>HF(e,n,r)});function Gbe(e){return $F(Vbe,e)}const Kbe=ke("ZodArray",(e,t)=>{Upe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>WF(e,n,r,s),e.element=t.element,e.min=(n,r)=>e.check(Cb(n,r)),e.nonempty=n=>e.check(Cb(1,n)),e.max=(n,r)=>e.check(LF(n,r)),e.length=(n,r)=>e.check(zF(n,r)),e.unwrap=()=>e.element});function Pe(e,t){return Kme(Kbe,e,t)}const Zbe=ke("ZodObject",(e,t)=>{Bpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>JF(e,n,r,s),Yt(e,"shape",()=>t.shape),e.keyof=()=>Ue(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:zb()}),e.loose=()=>e.clone({...e._zod.def,catchall:zb()}),e.strict=()=>e.clone({...e._zod.def,catchall:Gbe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>yF(e,n),e.safeExtend=n=>dfe(e,n),e.merge=n=>hfe(e,n),e.pick=n=>cfe(e,n),e.omit=n=>ufe(e,n),e.partial=(...n)=>bF(HB,e,n[0]),e.required=(...n)=>ffe(qB,e,n[0])});function xe(e,t){const n={type:"object",shape:e??{},...tt(t)};return new Zbe(n)}const FB=ke("ZodUnion",(e,t)=>{MF.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>YF(e,n,r,s),e.options=t.options});function BB(e,t){return new FB({type:"union",options:e,...tt(t)})}const Wbe=ke("ZodDiscriminatedUnion",(e,t)=>{FB.init(e,t),Hpe.init(e,t)});function eu(e,t,n){return new Wbe({type:"union",options:t,discriminator:e,...tt(n)})}const Jbe=ke("ZodIntersection",(e,t)=>{qpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>QF(e,n,r,s)});function Ybe(e,t){return new Jbe({type:"intersection",left:e,right:t})}const Qbe=ke("ZodTuple",(e,t)=>{Vpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>XF(e,n,r,s),e.rest=n=>e.clone({...e._zod.def,rest:n})});function Uj(e,t,n){const r=t instanceof vn,s=r?n:t,a=r?t:null;return new Qbe({type:"tuple",items:e,rest:a,...tt(s)})}const Xbe=ke("ZodRecord",(e,t)=>{Gpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>eB(e,n,r,s),e.keyType=t.keyType,e.valueType=t.valueType});function exe(e,t,n){return new Xbe({type:"record",keyType:e,valueType:t,...tt(n)})}const XT=ke("ZodEnum",(e,t)=>{Kpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(r,s,a)=>VF(e,r,s),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const a={};for(const i of r)if(n.has(i))a[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new XT({...t,checks:[],...tt(s),entries:a})},e.exclude=(r,s)=>{const a={...t.entries};for(const i of r)if(n.has(i))delete a[i];else throw new Error(`Key ${i} not found in enum`);return new XT({...t,checks:[],...tt(s),entries:a})}});function Ue(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new XT({type:"enum",entries:n,...tt(t)})}const txe=ke("ZodLiteral",(e,t)=>{Zpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>GF(e,n,r),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Ct(e,t){return new txe({type:"literal",values:Array.isArray(e)?e:[e],...tt(t)})}const nxe=ke("ZodTransform",(e,t)=>{Wpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>ZF(e,n),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new hF(e.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Xp(a,n.value,t));else{const i=a;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(Xp(i))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function rxe(e){return new nxe({type:"transform",transform:e})}const HB=ke("ZodOptional",(e,t)=>{Vx.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>Ij(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function wD(e){return new HB({type:"optional",innerType:e})}const sxe=ke("ZodExactOptional",(e,t)=>{Jpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>Ij(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function axe(e){return new sxe({type:"optional",innerType:e})}const ixe=ke("ZodNullable",(e,t)=>{Ype.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>tB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function _D(e){return new ixe({type:"nullable",innerType:e})}const oxe=ke("ZodDefault",(e,t)=>{Qpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>rB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function lxe(e,t){return new oxe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():gF(t)}})}const cxe=ke("ZodPrefault",(e,t)=>{Xpe.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>sB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function uxe(e,t){return new cxe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():gF(t)}})}const qB=ke("ZodNonOptional",(e,t)=>{eme.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>nB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function dxe(e,t){return new qB({type:"nonoptional",innerType:e,...tt(t)})}const hxe=ke("ZodCatch",(e,t)=>{tme.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>aB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function fxe(e,t){return new hxe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const pxe=ke("ZodPipe",(e,t)=>{nme.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>iB(e,n,r,s),e.in=t.in,e.out=t.out});function kD(e,t){return new pxe({type:"pipe",in:e,out:t})}const mxe=ke("ZodReadonly",(e,t)=>{rme.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>oB(e,n,r,s),e.unwrap=()=>e._zod.def.innerType});function gxe(e){return new mxe({type:"readonly",innerType:e})}const VB=ke("ZodCustom",(e,t)=>{sme.init(e,t),jn.init(e,t),e._zod.processJSONSchema=(n,r,s)=>KF(e,n)});function yxe(e,t){return Zme(VB,(()=>!0),t)}function bxe(e,t={}){return Wme(VB,e,t)}function xxe(e){return Jme(e)}function vxe(e){if(e)return e==="any"?{type:"any"}:e==="auto"?{type:"auto"}:e==="none"?{type:"none"}:typeof e=="string"?{type:"tool",name:e}:e}const wxe=xe({cache_control:yxe().optional().nullable(),defer_loading:Gc().optional(),input_examples:Pe(zb()).optional(),allowed_callers:Pe(zb()).optional()}),SD={tool_search_tool_regex_20251119:"advanced-tool-use-2025-11-20",tool_search_tool_bm25_20251119:"advanced-tool-use-2025-11-20",memory_20250818:"context-management-2025-06-27",web_fetch_20250910:"web-fetch-2025-09-10",code_execution_20250825:"code-execution-2025-08-25",computer_20251124:"computer-use-2025-11-24",computer_20250124:"computer-use-2025-01-24",mcp_toolset:"mcp-client-2025-11-20"};function _xe(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="thinking"}function kxe(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="redacted_thinking"}function Sxe(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="search_result"}function Txe(e){return typeof e!="object"||e==null||!("type"in e)||e.type!=="image"||!("source"in e)||typeof e.source!="object"||e.source==null||!("type"in e.source)?!1:e.source.type==="base64"?!(!("media_type"in e.source)||typeof e.source.media_type!="string"||!("data"in e.source)||typeof e.source.data!="string"):e.source.type==="url"?!(!("url"in e.source)||typeof e.source.url!="string"):!1}const Cxe={providerName:"anthropic",fromStandardTextBlock(e){return{type:"text",text:e.text,..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}},fromStandardImageBlock(e){if(e.source_type==="url"){const t=Oi({dataUrl:e.url,asTypedArray:!1});return t?{type:"image",source:{type:"base64",data:t.data,media_type:t.mime_type},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:e.url},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}}else{if(e.source_type==="base64")return{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${e.source_type}`)}},fromStandardFileBlock(e){const t=(e.mime_type??"").split(";")[0];if(e.source_type==="url"){if(t==="application/pdf"||t==="")return{type:"document",source:{type:"url",url:e.url},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${e.mime_type}`)}else if(e.source_type==="text"){if(t==="text/plain"||t==="")return{type:"document",source:{type:"text",data:e.text,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${e.mime_type}`)}else if(e.source_type==="base64"){if(t==="application/pdf"||t==="")return{type:"document",source:{type:"base64",data:e.data,media_type:"application/pdf"},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(t))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:e.data,media_type:t}}]},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${e.mime_type}`)}else throw new Error(`Unsupported file source type: ${e.source_type}`)}},Exe=e=>e();function jxe(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="citation"}function Nxe(e){function*t(){for(const n of e)jxe(n)&&(n.source==="char"?yield{type:"char_location",file_id:n.url??"",start_char_index:n.startIndex??0,end_char_index:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="page"?yield{type:"page_location",file_id:n.url??"",start_page_number:n.startIndex??0,end_page_number:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="block"?yield{type:"content_block_location",file_id:n.url??"",start_block_index:n.startIndex??0,end_block_index:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="url"?yield{type:"web_search_result_location",url:n.url??"",title:n.title??null,encrypted_index:String(n.startIndex??0),cited_text:n.citedText??""}:n.source==="search"&&(yield{type:"search_result_location",title:n.title??null,start_block_index:n.startIndex??0,end_block_index:n.endIndex??0,search_result_index:0,source:n.source??"",cited_text:n.citedText??""}))}return Array.from(t())}function Sf(e){return typeof e=="string"?e:Axe(e)}function Axe(e){const t=[];for(let n=0,{length:r}=e;n<r;n++)t.push(String.fromCharCode(e[n]));return btoa(t.join(""))}function D1(e){return(e??"").split(";")[0].toLowerCase()}function np(e,t){if(e!=null&&typeof e=="object"&&t in e)return e[t]}function Hu(e,t){const n=np(t,"cache_control");n!==void 0&&(e.cache_control=n);const r=np(t,"citations");r!==void 0&&(e.citations=r);const s=np(t,"context");s!==void 0&&(e.context=s);const a=np(t,"title");return a!==void 0&&(e.title=a),e}function $1(e,t){const n=np(t,"cache_control");return n!==void 0&&(e.cache_control=n),e}function TD(e){return new Set(["image/jpeg","image/png","image/gif","image/webp"]).has(e)}function Ixe(e){const t=[],n=e.response_metadata,r="model_provider"in n&&n?.model_provider==="anthropic";for(const s of e.contentBlocks)if(s.type==="text")s.annotations?t.push({type:"text",text:s.text,citations:Nxe(s.annotations)}):t.push({type:"text",text:s.text});else if(s.type==="tool_call")t.push({type:"tool_use",id:s.id??"",name:s.name,input:s.args});else if(s.type==="tool_call_chunk"){const a=Exe(()=>{if(typeof s.args!="string")return s.args;try{return JSON.parse(s.args)}catch{return{}}});t.push({type:"tool_use",id:s.id??"",name:s.name??"",input:a})}else if(s.type==="reasoning"&&r)t.push({type:"thinking",thinking:s.reasoning,signature:String(s.signature)});else if(s.type==="server_tool_call"&&r)s.name==="web_search"?t.push({type:"server_tool_use",name:s.name,id:s.id??"",input:s.args}):s.name==="code_execution"&&t.push({type:"server_tool_use",name:s.name,id:s.id??"",input:s.args});else if(s.type==="server_tool_call_result"&&r)if(s.name==="web_search"&&Array.isArray(s.output.urls)){const a=s.output.urls.map(i=>({type:"web_search_result",title:"",encrypted_content:"",url:i}));t.push({type:"web_search_tool_result",tool_use_id:s.toolCallId??"",content:a})}else s.name==="code_execution"?t.push({type:"code_execution_tool_result",tool_use_id:s.toolCallId??"",content:s.output}):s.name==="mcp_tool_result"&&t.push({type:"mcp_tool_result",tool_use_id:s.toolCallId??"",content:s.output});else{if(s.type==="audio")throw new Error("Anthropic does not support audio content blocks.");if(s.type==="file"){const a=s.metadata;if(s.fileId){t.push(Hu({type:"document",source:{type:"file",file_id:s.fileId}},a));continue}if(s.url){const i=D1(s.mimeType);if(i==="application/pdf"||i===""){t.push(Hu({type:"document",source:{type:"url",url:s.url}},a));continue}}if(s.data){const i=D1(s.mimeType);if(i===""||i==="application/pdf")t.push(Hu({type:"document",source:{type:"base64",data:Sf(s.data),media_type:"application/pdf"}},a));else if(i==="text/plain")t.push(Hu({type:"document",source:{type:"text",data:Sf(s.data),media_type:"text/plain"}},a));else if(TD(i))t.push(Hu({type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:Sf(s.data),media_type:i}}]}},a));else throw new Error(`Unsupported file mime type for Anthropic base64 source: ${i}`);continue}throw new Error("File content block must include a fileId, url, or data property.")}else if(s.type==="image"){const a=s.metadata;if(s.fileId){t.push($1({type:"image",source:{type:"file",file_id:s.fileId}},a));continue}if(s.url){t.push($1({type:"image",source:{type:"url",url:s.url}},a));continue}if(s.data){const i=D1(s.mimeType)||"image/png";TD(i)&&t.push($1({type:"image",source:{type:"base64",data:Sf(s.data),media_type:i}},a));continue}throw new Error("Image content block must include a fileId, url, or data property.")}else s.type==="video"||(s.type==="text-plain"?s.data&&t.push(Hu({type:"document",source:{type:"text",data:Sf(s.data),media_type:"text/plain"}},s.metadata)):s.type==="non_standard"&&r&&t.push(s.value))}return t}function CD(e){const t=Oi({dataUrl:e});if(t)return{type:"base64",media_type:t.mime_type,data:t.data};let n;try{n=new URL(e)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(e)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}if(n.protocol==="http:"||n.protocol==="https:")return{type:"url",url:e};throw new Error([`Invalid image URL protocol: ${JSON.stringify(n.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}function Oxe(e){const t=[];for(const n of e)if(n._getType()==="tool")if(typeof n.content=="string"){const r=t[t.length-1];r?._getType()==="human"&&Array.isArray(r.content)&&"type"in r.content[0]&&r.content[0].type==="tool_result"?r.content.push({type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}):t.push(new si({content:[{type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}]}))}else t.push(new si({content:[{type:"tool_result",...n.content!=null?{content:eC(n)}:{},tool_use_id:n.tool_call_id}]}));else t.push(n);return t}function ED(e){if(e.id===void 0)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:e.id,name:e.name,input:e.args}}function*Rxe(e){const t=["bash_code_execution_tool_result","input_json_delta","server_tool_use","text_editor_code_execution_tool_result","tool_result","tool_use","web_search_result","web_search_tool_result"],n=["text","text_delta"];for(const r of e){Ea(r)&&(yield Nm(r,Cxe));const s="cache_control"in r?r.cache_control:void 0;if(r.type==="image_url"){let a;typeof r.image_url=="string"?a=CD(r.image_url):typeof r.image_url=="object"&&r.image_url!==null&&"url"in r.image_url&&typeof r.image_url.url=="string"&&(a=CD(r.image_url.url)),a&&(yield{type:"image",source:a,...s?{cache_control:s}:{}})}else{if(Txe(r))return r;if(r.type==="document")yield{...r,...s?{cache_control:s}:{}};else if(_xe(r))yield{type:"thinking",thinking:r.thinking,signature:r.signature,...s?{cache_control:s}:{}};else if(kxe(r))yield{type:"redacted_thinking",data:r.data,...s?{cache_control:s}:{}};else if(Sxe(r))yield{type:"search_result",title:r.title,source:r.source,..."cache_control"in r&&r.cache_control?{cache_control:r.cache_control}:{},..."citations"in r&&r.citations?{citations:r.citations}:{},content:r.content};else if(n.find(a=>a===r.type)&&"text"in r)yield{type:"text",text:r.text,...s?{cache_control:s}:{},..."citations"in r&&r.citations?{citations:r.citations}:{}};else if(t.find(a=>a===r.type)){const a={...r};if("index"in a&&delete a.index,a.type==="input_json_delta"&&(a.type="tool_use"),"input"in a&&typeof a.input=="string")try{a.input=JSON.parse(a.input)}catch{a.input={}}yield{...a,...s?{cache_control:s}:{}}}else r.type==="container_upload"&&(yield{...r,...s?{cache_control:s}:{}})}}}function eC(e){const{content:t}=e;return typeof t=="string"?t:Array.from(Rxe(t))}function jD(e){const t=Oxe(e);let n;t.length>0&&t[0]._getType()==="system"&&(n=e[0].content);const s=(n!==void 0?t.slice(1):t).map(a=>{let i;if(a._getType()==="human")i="user";else if(a._getType()==="ai")i="assistant";else if(a._getType()==="tool")i="user";else throw a._getType()==="system"?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${a.type}" is not supported.`);if(Co(a)&&a.response_metadata?.output_version==="v1")return{role:i,content:Ixe(a)};if(Co(a)&&a.tool_calls?.length){if(typeof a.content=="string")return a.content===""?{role:i,content:a.tool_calls.map(ED)}:{role:i,content:[{type:"text",text:a.content},...a.tool_calls.map(ED)]};{const{content:o}=a;return!a.tool_calls.every(h=>o.find(f=>(f.type==="tool_use"||f.type==="input_json_delta"||f.type==="server_tool_use")&&f.id===h.id))&&console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:i,content:eC(a)}}}else return{role:i,content:eC(a)}});return{messages:Pxe(s),system:n}}function Pxe(e){if(!e||e.length<=1)return e;const t=[];let n=e[0];const r=a=>typeof a=="string"?[{type:"text",text:a}]:a,s=a=>a.role!=="user"||typeof a.content=="string"?!1:Array.isArray(a.content)&&a.content.every(i=>i.type==="tool_result");for(let a=1;a<e.length;a+=1){const i=e[a];s(n)&&s(i)?n={...n,content:[...r(n.content),...r(i.content)]}:(t.push(n),n=i)}return t.push(n),t}function Mxe(e,t){const n={model_provider:"anthropic"};if(e.type==="message_start"){const{content:r,usage:s,...a}=e.message,i={};for(const[g,b]of Object.entries(a))b!=null&&(i[g]=b);const{input_tokens:o,output_tokens:u,...h}=s??{},f=o+h.cache_creation_input_tokens+h.cache_read_input_tokens,m={input_tokens:f,output_tokens:u,total_tokens:f+u,input_token_details:{cache_creation:h.cache_creation_input_tokens,cache_read:h.cache_read_input_tokens}};return{chunk:new kn({content:t.coerceContentToString?"":[],additional_kwargs:i,usage_metadata:t.streamUsage?m:void 0,response_metadata:{...n,usage:{...h}},id:e.message.id})}}else if(e.type==="message_delta"){const r={input_tokens:0,output_tokens:e.usage.output_tokens,total_tokens:e.usage.output_tokens,input_token_details:{cache_creation:e.usage.cache_creation_input_tokens,cache_read:e.usage.cache_read_input_tokens}},s="context_management"in e.delta?{context_management:e.delta.context_management}:void 0;return{chunk:new kn({content:t.coerceContentToString?"":[],response_metadata:s,additional_kwargs:{...e.delta},usage_metadata:t.streamUsage?r:void 0})}}else if(e.type==="content_block_start"&&["tool_use","document","server_tool_use","web_search_tool_result"].includes(e.content_block.type)){const r=e.content_block;let s;return r.type==="tool_use"?s=[{id:r.id,index:e.index,name:r.name,args:""}]:s=[],{chunk:new kn({content:t.coerceContentToString?"":[{index:e.index,...e.content_block,input:r.type==="server_tool_use"||r.type==="tool_use"?"":void 0}],response_metadata:n,additional_kwargs:{},tool_call_chunks:s})}}else if(e.type==="content_block_delta"&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(e.delta.type)){if(t.coerceContentToString&&"text"in e.delta)return{chunk:new kn({content:e.delta.text})};{const r=e.delta;return"citation"in r&&(r.citations=[r.citation],delete r.citation),r.type==="thinking_delta"||r.type==="signature_delta"?{chunk:new kn({content:[{index:e.index,...r,type:"thinking"}],response_metadata:n})}:{chunk:new kn({content:[{index:e.index,...r,type:"text"}],response_metadata:n})}}}else{if(e.type==="content_block_delta"&&e.delta.type==="input_json_delta")return{chunk:new kn({content:t.coerceContentToString?"":[{index:e.index,input:e.delta.partial_json,type:e.delta.type}],response_metadata:n,additional_kwargs:{},tool_call_chunks:[{index:e.index,args:e.delta.partial_json}]})};if(e.type==="content_block_start"&&e.content_block.type==="text"){const r=e.content_block?.text;if(r!==void 0)return{chunk:new kn({content:t.coerceContentToString?r:[{index:e.index,...e.content_block}],response_metadata:n,additional_kwargs:{}})}}else{if(e.type==="content_block_start"&&e.content_block.type==="redacted_thinking")return{chunk:new kn({content:t.coerceContentToString?"":[{index:e.index,...e.content_block}],response_metadata:n})};if(e.type==="content_block_start"&&e.content_block.type==="thinking"){const r=e.content_block.thinking;return{chunk:new kn({content:t.coerceContentToString?r:[{index:e.index,...e.content_block}],response_metadata:n})}}}}return null}function Dxe(e,t){const n={...t,model_provider:"anthropic"},r=t.usage,s=r!=null?{input_tokens:r.input_tokens??0,output_tokens:r.output_tokens??0,total_tokens:(r.input_tokens??0)+(r.output_tokens??0),input_token_details:{cache_creation:r.cache_creation_input_tokens,cache_read:r.cache_read_input_tokens}}:void 0;if(e.length===1&&e[0].type==="text")return[{text:e[0].text,message:new pr({content:e[0].text,additional_kwargs:t,usage_metadata:s,response_metadata:n,id:t.id})}];{const a=LB(e);return[{text:"",message:new pr({content:e,additional_kwargs:t,tool_calls:a,usage_metadata:s,response_metadata:n,id:t.id})}]}}function By(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function ND(e){let t;return e.status===400&&e.message.includes("tool")?t=By(e,"INVALID_TOOL_RESULTS"):e.status===401?t=By(e,"MODEL_AUTHENTICATION"):e.status===404?t=By(e,"MODEL_NOT_FOUND"):e.status===429?t=By(e,"MODEL_RATE_LIMIT"):t=e,t}const $xe={"claude-opus-4-0":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-sonnet-20241022":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-1":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-haiku-4-5":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-sonnet-20240620":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-haiku-latest":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-opus-20240229":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-5":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-5-20250929":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-20250514":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-20250514":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-haiku-20241022":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-haiku-20240307":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-7-sonnet-20250219":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-7-sonnet-latest":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-0":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-1-20250805":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-sonnet-20240229":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-haiku-4-5-20251001":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0}};var Lxe=$xe;function Be(e,t,n,r,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}function pe(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}let GB=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return GB=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function rm(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const tC=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class wt extends Error{}let na=class nC extends wt{constructor(t,n,r,s){super(`${nC.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.requestID=s?.get("request-id"),this.error=n}static makeMessage(t,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new tv({message:r,cause:tC(n)});const a=n;return t===400?new ZB(t,a,r,s):t===401?new WB(t,a,r,s):t===403?new JB(t,a,r,s):t===404?new YB(t,a,r,s):t===409?new QB(t,a,r,s):t===422?new XB(t,a,r,s):t===429?new e7(t,a,r,s):t>=500?new t7(t,a,r,s):new nC(t,a,r,s)}},ei=class extends na{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},tv=class extends na{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},KB=class extends tv{constructor({message:t}={}){super({message:t??"Request timed out."})}},ZB=class extends na{},WB=class extends na{},JB=class extends na{},YB=class extends na{},QB=class extends na{},XB=class extends na{},e7=class extends na{},t7=class extends na{};const zxe=/^[a-z][a-z0-9+.-]*:/i,Uxe=e=>zxe.test(e);let rC=e=>(rC=Array.isArray,rC(e)),AD=rC;function sC(e){return typeof e!="object"?{}:e??{}}function Fxe(e){if(!e)return!0;for(const t in e)return!1;return!0}function Bxe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Hxe=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new wt(`${e} must be an integer`);if(t<0)throw new wt(`${e} must be a positive integer`);return t},n7=e=>{try{return JSON.parse(e)}catch{return}},gs=(e,t)=>{const n=e[t];return delete e[t],n},qxe=e=>new Promise(t=>setTimeout(t,e)),nd="0.71.2",Vxe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Gxe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Kxe=()=>{const e=Gxe();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":OD(Deno.build.os),"X-Stainless-Arch":ID(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":OD(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ID(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=Zxe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Zxe(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,i=r[3]||0;return{browser:t,version:`${s}.${a}.${i}`}}}return null}const ID=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",OD=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let RD;const Wxe=()=>RD??(RD=Kxe());function Jxe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function r7(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function s7(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return r7({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){await t.return?.()}})}function Fj(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Yxe(e){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}const Qxe=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function Xxe(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let PD;function Bj(e){let t;return(PD??(t=new globalThis.TextEncoder,PD=t.encode.bind(t)))(e)}let MD;function DD(e){let t;return(MD??(t=new globalThis.TextDecoder,MD=t.decode.bind(t)))(e)}var Us,Fs;let $m=class{constructor(){Us.set(this,void 0),Fs.set(this,void 0),Be(this,Us,new Uint8Array),Be(this,Fs,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Bj(t):t;Be(this,Us,Xxe([pe(this,Us,"f"),n]));const r=[];let s;for(;(s=eve(pe(this,Us,"f"),pe(this,Fs,"f")))!=null;){if(s.carriage&&pe(this,Fs,"f")==null){Be(this,Fs,s.index);continue}if(pe(this,Fs,"f")!=null&&(s.index!==pe(this,Fs,"f")+1||s.carriage)){r.push(DD(pe(this,Us,"f").subarray(0,pe(this,Fs,"f")-1))),Be(this,Us,pe(this,Us,"f").subarray(pe(this,Fs,"f"))),Be(this,Fs,null);continue}const a=pe(this,Fs,"f")!==null?s.preceding-1:s.preceding,i=DD(pe(this,Us,"f").subarray(0,a));r.push(i),Be(this,Us,pe(this,Us,"f").subarray(s.index)),Be(this,Fs,null)}return r}flush(){return pe(this,Us,"f").length?this.decode(`
`):[]}};Us=new WeakMap,Fs=new WeakMap;$m.NEWLINE_CHARS=new Set([`
`,"\r"]);$m.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eve(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function tve(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const Ub={off:0,error:200,warn:300,info:400,debug:500},$D=(e,t,n)=>{if(e){if(Bxe(Ub,e))return e;rs(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ub))}`)}};function rp(){}function Hy(e,t,n){return!t||Ub[e]>Ub[n]?rp:t[e].bind(t)}const nve={error:rp,warn:rp,info:rp,debug:rp};let LD=new WeakMap;function rs(e){const t=e.logger,n=e.logLevel??"off";if(!t)return nve;const r=LD.get(t);if(r&&r[0]===n)return r[1];const s={error:Hy("error",t,n),warn:Hy("warn",t,n),info:Hy("info",t,n),debug:Hy("debug",t,n)};return LD.set(t,[n,s]),s}const xc=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Tf;let sm=class sp{constructor(t,n,r){this.iterator=t,Tf.set(this,void 0),this.controller=n,Be(this,Tf,r)}static fromSSEResponse(t,n,r){let s=!1;const a=r?rs(r):console;async function*i(){if(s)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const u of rve(t,n)){if(u.event==="completion")try{yield JSON.parse(u.data)}catch(h){throw a.error("Could not parse message into JSON:",u.data),a.error("From chunk:",u.raw),h}if(u.event==="message_start"||u.event==="message_delta"||u.event==="message_stop"||u.event==="content_block_start"||u.event==="content_block_delta"||u.event==="content_block_stop")try{yield JSON.parse(u.data)}catch(h){throw a.error("Could not parse message into JSON:",u.data),a.error("From chunk:",u.raw),h}if(u.event!=="ping"&&u.event==="error")throw new na(void 0,n7(u.data)??u.data,void 0,t.headers)}o=!0}catch(u){if(rm(u))return;throw u}finally{o||n.abort()}}return new sp(i,n,r)}static fromReadableStream(t,n,r){let s=!1;async function*a(){const o=new $m,u=Fj(t);for await(const h of u)for(const f of o.decode(h))yield f;for(const h of o.flush())yield h}async function*i(){if(s)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const u of a())o||u&&(yield JSON.parse(u));o=!0}catch(u){if(rm(u))return;throw u}finally{o||n.abort()}}return new sp(i,n,r)}[(Tf=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const i=r.next();t.push(i),n.push(i)}return a.shift()}});return[new sp(()=>s(t),this.controller,pe(this,Tf,"f")),new sp(()=>s(n),this.controller,pe(this,Tf,"f"))]}toReadableStream(){const t=this;let n;return r7({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const i=Bj(JSON.stringify(s)+`
`);r.enqueue(i)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}};async function*rve(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");const n=new ave,r=new $m,s=Fj(e.body);for await(const a of sve(s))for(const i of r.decode(a)){const o=n.decode(i);o&&(yield o)}for(const a of r.flush()){const i=n.decode(a);i&&(yield i)}}async function*sve(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Bj(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=tve(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}let ave=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=ive(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}};function ive(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function a7(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=t,i=await(async()=>{if(t.options.stream)return rs(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):sm.fromSSEResponse(n,t.controller);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const u=n.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){const m=await n.json();return i7(m,n)}return await n.text()})();return rs(e).debug(`[${r}] response parsed`,xc({retryOfRequestLogID:s,url:n.url,status:n.status,body:i,durationMs:Date.now()-a})),i}function i7(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}var ap;let o7=class l7 extends Promise{constructor(t,n,r=a7){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,ap.set(this,void 0),Be(this,ap,t)}_thenUnwrap(t){return new l7(pe(this,ap,"f"),this.responsePromise,async(n,r)=>i7(t(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(pe(this,ap,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};ap=new WeakMap;var qy;let c7=class{constructor(t,n,r,s){qy.set(this,void 0),Be(this,qy,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new wt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await pe(this,qy,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(qy=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}},ove=class extends o7{constructor(t,n,r){super(t,n,async(s,a)=>new r(s,a.response,await a7(s,a),a.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}},Lm=class extends c7{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const n=this.first_id;return n?{...this.options,query:{...sC(this.options.query),before_id:n}}:null}const t=this.last_id;return t?{...this.options,query:{...sC(this.options.query),after_id:t}}:null}};class u7 extends c7{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.next_page=r.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.next_page;return t?{...this.options,query:{...sC(this.options.query),page:t}}:null}}const d7=()=>{if(typeof File>"u"){const{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sd(e,t,n){return d7(),new File(e,t??"unknown_file",n)}function F0(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const h7=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Hj=async(e,t)=>({...e,body:await cve(e.body,t)}),zD=new WeakMap;function lve(e){const t=typeof e=="function"?e:e.fetch,n=zD.get(t);if(n)return n;const r=(async()=>{try{const s="Response"in t?t.Response:(await t("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return zD.set(t,r),r}const cve=async(e,t)=>{if(!await lve(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([r,s])=>aC(n,r,s))),n},uve=e=>e instanceof Blob&&"name"in e,aC=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response){let r={};const s=n.headers.get("Content-Type");s&&(r={type:s}),e.append(t,Sd([await n.blob()],F0(n),r))}else if(h7(n))e.append(t,Sd([await new Response(s7(n)).blob()],F0(n)));else if(uve(n))e.append(t,Sd([n],F0(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(r=>aC(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>aC(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},f7=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",dve=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&f7(e),hve=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function fve(e,t,n){if(d7(),e=await e,t||(t=F0(e)),dve(e))return e instanceof File&&t==null&&n==null?e:Sd([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...n});if(hve(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Sd(await iC(s),t,n)}const r=await iC(e);if(!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Sd(r,t,n)}async function iC(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(f7(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(h7(e))for await(const n of e)t.push(...await iC(n));else{const n=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${pve(e)}`)}return t}function pve(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}let fi=class{constructor(t){this._client=t}};const p7=Symbol.for("brand.privateNullableHeaders");function*mve(e){if(!e)return;if(p7 in e){const{values:r,nulls:s}=e;yield*r.entries();for(const a of s)yield[a,null];return}let t=!1,n;e instanceof Headers?n=e.entries():AD(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=AD(r[1])?r[1]:[r[1]];let i=!1;for(const o of a)o!==void 0&&(t&&!i&&(i=!0,yield[s,null]),yield[s,o])}}const Lt=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[a,i]of mve(r)){const o=a.toLowerCase();s.has(o)||(t.delete(a),s.add(o)),i===null?(t.delete(a),n.add(o)):(t.append(a,i),n.delete(o))}}return{[p7]:!0,values:t,nulls:n}};function m7(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const UD=Object.freeze(Object.create(null)),gve=(e=m7)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],i=n.reduce((f,m,g)=>{/[?#]/.test(m)&&(s=!0);const b=r[g];let w=(s?encodeURIComponent:e)(""+b);return g!==r.length&&(b==null||typeof b=="object"&&b.toString===Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??UD)??UD)?.toString)&&(w=b+"",a.push({start:f.length+m.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),f+m+(g===r.length?"":w)},""),o=i.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=u.exec(o))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((f,m)=>f.start-m.start),a.length>0){let f=0;const m=a.reduce((g,b)=>{const w=" ".repeat(b.start-f),x="^".repeat(b.length);return f=b.start+b.length,g+w+x},"");throw new wt(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${i}
${m}`)}return i},zr=gve(m7);let g7=class extends fi{list(t={},n){const{betas:r,...s}=t??{};return this._client.getAPIList("/v1/files",Lm,{query:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}delete(t,n={},r){const{betas:s}=n??{};return this._client.delete(zr`/v1/files/${t}`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/files/${t}/content`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/files/${t}`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(t,n){const{betas:r,...s}=t;return this._client.post("/v1/files",Hj({body:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])},this._client))}},y7=class extends fi{retrieve(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/models/${t}?beta=true`,{...r,headers:Lt([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(t={},n){const{betas:r,...s}=t??{};return this._client.getAPIList("/v1/models?beta=true",Lm,{query:s,...n,headers:Lt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};const b7={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function FD(e,t,n){return!t||!("parse"in(t.output_format??{}))?{...e,content:e.content.map(r=>{if(r.type==="text"){const s=Object.defineProperty({...r},"parsed_output",{value:null,enumerable:!1});return Object.defineProperty(s,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),null},enumerable:!1})}return r}),parsed_output:null}:x7(e,t,n)}function x7(e,t,n){let r=null;const s=e.content.map(a=>{if(a.type==="text"){const i=yve(t,a.text);r===null&&(r=i);const o=Object.defineProperty({...a},"parsed_output",{value:i,enumerable:!1});return Object.defineProperty(o,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),i},enumerable:!1})}return a});return{...e,content:s,parsed_output:r}}function yve(e,t){if(e.output_format?.type!=="json_schema")return null;try{return"parse"in e.output_format?e.output_format.parse(t):JSON.parse(t)}catch(n){throw new wt(`Failed to parse structured output: ${n}`)}}const bve=e=>{let t=0,n=[];for(;t<e.length;){let r=e[t];if(r==="\\"){t++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),t++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),t++;continue}if(r==="["){n.push({type:"paren",value:"["}),t++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),t++;continue}if(r===":"){n.push({type:"separator",value:":"}),t++;continue}if(r===","){n.push({type:"delimiter",value:","}),t++;continue}if(r==='"'){let o="",u=!1;for(r=e[++t];r!=='"';){if(t===e.length){u=!0;break}if(r==="\\"){if(t++,t===e.length){u=!0;break}o+=r+e[t],r=e[++t]}else o+=r,r=e[++t]}r=e[++t],u||n.push({type:"string",value:o});continue}if(r&&/\s/.test(r)){t++;continue}let a=/[0-9]/;if(r&&a.test(r)||r==="-"||r==="."){let o="";for(r==="-"&&(o+=r,r=e[++t]);r&&a.test(r)||r===".";)o+=r,r=e[++t];n.push({type:"number",value:o});continue}let i=/[a-z]/i;if(r&&i.test(r)){let o="";for(;r&&i.test(r)&&t!==e.length;)o+=r,r=e[++t];if(o=="true"||o=="false"||o==="null")n.push({type:"name",value:o});else{t++;continue}continue}t++}return n},rd=e=>{if(e.length===0)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),rd(e);case"number":let n=t.value[t.value.length-1];if(n==="."||n==="-")return e=e.slice(0,e.length-1),rd(e);case"string":let r=e[e.length-2];if(r?.type==="delimiter")return e=e.slice(0,e.length-1),rd(e);if(r?.type==="brace"&&r.value==="{")return e=e.slice(0,e.length-1),rd(e);break;case"delimiter":return e=e.slice(0,e.length-1),rd(e)}return e},xve=e=>{let t=[];return e.map(n=>{n.type==="brace"&&(n.value==="{"?t.push("}"):t.splice(t.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(n=>{n==="}"?e.push({type:"brace",value:"}"}):n==="]"&&e.push({type:"paren",value:"]"})}),e},vve=e=>{let t="";return e.map(n=>{n.type==="string"?t+='"'+n.value+'"':t+=n.value}),t},v7=e=>JSON.parse(vve(xve(rd(bve(e)))));var fa,cl,qu,Cf,Vy,Ef,jf,Gy,Nf,co,Af,Ky,Zy,uc,Wy,Jy,If,L1,BD,Yy,z1,U1,F1,HD;const qD="__json_buf";function VD(e){return e.type==="tool_use"||e.type==="server_tool_use"||e.type==="mcp_tool_use"}class Fb{constructor(t,n){fa.add(this),this.messages=[],this.receivedMessages=[],cl.set(this,void 0),qu.set(this,null),this.controller=new AbortController,Cf.set(this,void 0),Vy.set(this,()=>{}),Ef.set(this,()=>{}),jf.set(this,void 0),Gy.set(this,()=>{}),Nf.set(this,()=>{}),co.set(this,{}),Af.set(this,!1),Ky.set(this,!1),Zy.set(this,!1),uc.set(this,!1),Wy.set(this,void 0),Jy.set(this,void 0),If.set(this,void 0),Yy.set(this,r=>{if(Be(this,Ky,!0),rm(r)&&(r=new ei),r instanceof ei)return Be(this,Zy,!0),this._emit("abort",r);if(r instanceof wt)return this._emit("error",r);if(r instanceof Error){const s=new wt(r.message);return s.cause=r,this._emit("error",s)}return this._emit("error",new wt(String(r)))}),Be(this,Cf,new Promise((r,s)=>{Be(this,Vy,r,"f"),Be(this,Ef,s,"f")})),Be(this,jf,new Promise((r,s)=>{Be(this,Gy,r,"f"),Be(this,Nf,s,"f")})),pe(this,Cf,"f").catch(()=>{}),pe(this,jf,"f").catch(()=>{}),Be(this,qu,t),Be(this,If,n?.logger??console)}get response(){return pe(this,Wy,"f")}get request_id(){return pe(this,Jy,"f")}async withResponse(){Be(this,uc,!0);const t=await pe(this,Cf,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const n=new Fb(null);return n._run(()=>n._fromReadableStream(t)),n}static createMessage(t,n,r,{logger:s}={}){const a=new Fb(n,{logger:s});for(const i of n.messages)a._addMessageParam(i);return Be(a,qu,{...n,stream:!0}),a._run(()=>a._createMessage(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}_run(t){t().then(()=>{this._emitFinal(),this._emit("end")},pe(this,Yy,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,n=!0){this.receivedMessages.push(t),n&&this._emit("message",t)}async _createMessage(t,n,r){const s=r?.signal;let a;s&&(s.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),s.addEventListener("abort",a));try{pe(this,fa,"m",z1).call(this);const{response:i,data:o}=await t.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(i);for await(const u of o)pe(this,fa,"m",U1).call(this,u);if(o.controller.signal?.aborted)throw new ei;pe(this,fa,"m",F1).call(this)}finally{s&&a&&s.removeEventListener("abort",a)}}_connected(t){this.ended||(Be(this,Wy,t),Be(this,Jy,t?.headers.get("request-id")),pe(this,Vy,"f").call(this,t),this._emit("connect"))}get ended(){return pe(this,Af,"f")}get errored(){return pe(this,Ky,"f")}get aborted(){return pe(this,Zy,"f")}abort(){this.controller.abort()}on(t,n){return(pe(this,co,"f")[t]||(pe(this,co,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=pe(this,co,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(pe(this,co,"f")[t]||(pe(this,co,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Be(this,uc,!0),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Be(this,uc,!0),await pe(this,jf,"f")}get currentMessage(){return pe(this,cl,"f")}async finalMessage(){return await this.done(),pe(this,fa,"m",L1).call(this)}async finalText(){return await this.done(),pe(this,fa,"m",BD).call(this)}_emit(t,...n){if(pe(this,Af,"f"))return;t==="end"&&(Be(this,Af,!0),pe(this,Gy,"f").call(this));const r=pe(this,co,"f")[t];if(r&&(pe(this,co,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!pe(this,uc,"f")&&!r?.length&&Promise.reject(s),pe(this,Ef,"f").call(this,s),pe(this,Nf,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!pe(this,uc,"f")&&!r?.length&&Promise.reject(s),pe(this,Ef,"f").call(this,s),pe(this,Nf,"f").call(this,s),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",pe(this,fa,"m",L1).call(this))}async _fromReadableStream(t,n){const r=n?.signal;let s;r&&(r.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),r.addEventListener("abort",s));try{pe(this,fa,"m",z1).call(this),this._connected(null);const a=sm.fromReadableStream(t,this.controller);for await(const i of a)pe(this,fa,"m",U1).call(this,i);if(a.controller.signal?.aborted)throw new ei;pe(this,fa,"m",F1).call(this)}finally{r&&s&&r.removeEventListener("abort",s)}}[(cl=new WeakMap,qu=new WeakMap,Cf=new WeakMap,Vy=new WeakMap,Ef=new WeakMap,jf=new WeakMap,Gy=new WeakMap,Nf=new WeakMap,co=new WeakMap,Af=new WeakMap,Ky=new WeakMap,Zy=new WeakMap,uc=new WeakMap,Wy=new WeakMap,Jy=new WeakMap,If=new WeakMap,Yy=new WeakMap,fa=new WeakSet,L1=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},BD=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new wt("stream ended without producing a content block with type=text");return n.join(" ")},z1=function(){this.ended||Be(this,cl,void 0)},U1=function(n){if(this.ended)return;const r=pe(this,fa,"m",HD).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const s=r.content.at(-1);switch(n.delta.type){case"text_delta":{s.type==="text"&&this._emit("text",n.delta.text,s.text||"");break}case"citations_delta":{s.type==="text"&&this._emit("citation",n.delta.citation,s.citations??[]);break}case"input_json_delta":{VD(s)&&s.input&&this._emit("inputJson",n.delta.partial_json,s.input);break}case"thinking_delta":{s.type==="thinking"&&this._emit("thinking",n.delta.thinking,s.thinking);break}case"signature_delta":{s.type==="thinking"&&this._emit("signature",s.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(FD(r,pe(this,qu,"f"),{logger:pe(this,If,"f")}),!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Be(this,cl,r);break}}},F1=function(){if(this.ended)throw new wt("stream has ended, this shouldn't happen");const n=pe(this,cl,"f");if(!n)throw new wt("request ended without sending any chunks");return Be(this,cl,void 0),FD(n,pe(this,qu,"f"),{logger:pe(this,If,"f")})},HD=function(n){let r=pe(this,cl,"f");if(n.type==="message_start"){if(r)throw new wt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new wt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,r.context_management=n.context_management,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const s=r.content.at(n.index);switch(n.delta.type){case"text_delta":{s?.type==="text"&&(r.content[n.index]={...s,text:(s.text||"")+n.delta.text});break}case"citations_delta":{s?.type==="text"&&(r.content[n.index]={...s,citations:[...s.citations??[],n.delta.citation]});break}case"input_json_delta":{if(s&&VD(s)){let a=s[qD]||"";a+=n.delta.partial_json;const i={...s};if(Object.defineProperty(i,qD,{value:a,enumerable:!1,writable:!0}),a)try{i.input=v7(a)}catch(o){const u=new wt(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${o}. JSON: ${a}`);pe(this,Yy,"f").call(this,u)}r.content[n.index]=i}break}case"thinking_delta":{s?.type==="thinking"&&(r.content[n.index]={...s,thinking:s.thinking+n.delta.thinking});break}case"signature_delta":{s?.type==="thinking"&&(r.content[n.index]={...s,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("streamEvent",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,i)=>n.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new sm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const wve=1e5,_ve=`You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:
1. Task Overview
The user's core request and success criteria
Any clarifications or constraints they specified
2. Current State
What has been completed so far
Files created, modified, or analyzed (with paths if relevant)
Key outputs or artifacts produced
3. Important Discoveries
Technical constraints or requirements uncovered
Decisions made and their rationale
Errors encountered and how they were resolved
What approaches were tried that didn't work (and why)
4. Next Steps
Specific actions needed to complete the task
Any blockers or open questions to resolve
Priority order if multiple steps remain
5. Context to Preserve
User preferences or style requirements
Domain-specific details that aren't obvious
Any promises made to the user
Be concise but completeerr on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.
Wrap your summary in <summary></summary> tags.`;var Of,Vu,dc,ar,Rf,Ls,bo,ul,Pf,GD,oC;function KD(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}class w7{constructor(t,n,r){Of.add(this),this.client=t,Vu.set(this,!1),dc.set(this,!1),ar.set(this,void 0),Rf.set(this,void 0),Ls.set(this,void 0),bo.set(this,void 0),ul.set(this,void 0),Pf.set(this,0),Be(this,ar,{params:{...n,messages:structuredClone(n.messages)}}),Be(this,Rf,{...r,headers:Lt([{"x-stainless-helper":"BetaToolRunner"},r?.headers])}),Be(this,ul,KD())}async*[(Vu=new WeakMap,dc=new WeakMap,ar=new WeakMap,Rf=new WeakMap,Ls=new WeakMap,bo=new WeakMap,ul=new WeakMap,Pf=new WeakMap,Of=new WeakSet,GD=async function(){const n=pe(this,ar,"f").params.compactionControl;if(!n||!n.enabled)return!1;let r=0;if(pe(this,Ls,"f")!==void 0)try{const h=await pe(this,Ls,"f");r=h.usage.input_tokens+(h.usage.cache_creation_input_tokens??0)+(h.usage.cache_read_input_tokens??0)+h.usage.output_tokens}catch{return!1}const s=n.contextTokenThreshold??wve;if(r<s)return!1;const a=n.model??pe(this,ar,"f").params.model,i=n.summaryPrompt??_ve,o=pe(this,ar,"f").params.messages;if(o[o.length-1].role==="assistant"){const h=o[o.length-1];if(Array.isArray(h.content)){const f=h.content.filter(m=>m.type!=="tool_use");f.length===0?o.pop():h.content=f}}const u=await this.client.beta.messages.create({model:a,messages:[...o,{role:"user",content:[{type:"text",text:i}]}],max_tokens:pe(this,ar,"f").params.max_tokens},{headers:{"x-stainless-helper":"compaction"}});if(u.content[0]?.type!=="text")throw new wt("Expected text response for compaction");return pe(this,ar,"f").params.messages=[{role:"user",content:u.content}],!0},Symbol.asyncIterator)](){var t;if(pe(this,Vu,"f"))throw new wt("Cannot iterate over a consumed stream");Be(this,Vu,!0),Be(this,dc,!0),Be(this,bo,void 0);try{for(;;){let n;try{if(pe(this,ar,"f").params.max_iterations&&pe(this,Pf,"f")>=pe(this,ar,"f").params.max_iterations)break;Be(this,dc,!1,"f"),Be(this,bo,void 0,"f"),Be(this,Pf,(t=pe(this,Pf,"f"),t++,t),"f"),Be(this,Ls,void 0,"f");const{max_iterations:r,compactionControl:s,...a}=pe(this,ar,"f").params;if(a.stream?(n=this.client.beta.messages.stream({...a},pe(this,Rf,"f")),Be(this,Ls,n.finalMessage(),"f"),pe(this,Ls,"f").catch(()=>{}),yield n):(Be(this,Ls,this.client.beta.messages.create({...a,stream:!1},pe(this,Rf,"f")),"f"),yield pe(this,Ls,"f")),!await pe(this,Of,"m",GD).call(this)){if(!pe(this,dc,"f")){const{role:u,content:h}=await pe(this,Ls,"f");pe(this,ar,"f").params.messages.push({role:u,content:h})}const o=await pe(this,Of,"m",oC).call(this,pe(this,ar,"f").params.messages.at(-1));if(o)pe(this,ar,"f").params.messages.push(o);else if(!pe(this,dc,"f"))break}}finally{n&&n.abort()}}if(!pe(this,Ls,"f"))throw new wt("ToolRunner concluded without a message from the server");pe(this,ul,"f").resolve(await pe(this,Ls,"f"))}catch(n){throw Be(this,Vu,!1),pe(this,ul,"f").promise.catch(()=>{}),pe(this,ul,"f").reject(n),Be(this,ul,KD()),n}}setMessagesParams(t){typeof t=="function"?pe(this,ar,"f").params=t(pe(this,ar,"f").params):pe(this,ar,"f").params=t,Be(this,dc,!0),Be(this,bo,void 0)}async generateToolResponse(){const t=await pe(this,Ls,"f")??this.params.messages.at(-1);return t?pe(this,Of,"m",oC).call(this,t):null}done(){return pe(this,ul,"f").promise}async runUntilDone(){if(!pe(this,Vu,"f"))for await(const t of this);return this.done()}get params(){return pe(this,ar,"f").params}pushMessages(...t){this.setMessagesParams(n=>({...n,messages:[...n.messages,...t]}))}then(t,n){return this.runUntilDone().then(t,n)}}oC=async function(t){return pe(this,bo,"f")!==void 0?pe(this,bo,"f"):(Be(this,bo,kve(pe(this,ar,"f").params,t)),pe(this,bo,"f"))};async function kve(e,t=e.messages.at(-1)){if(!t||t.role!=="assistant"||!t.content||typeof t.content=="string")return null;const n=t.content.filter(s=>s.type==="tool_use");return n.length===0?null:{role:"user",content:await Promise.all(n.map(async s=>{const a=e.tools.find(i=>("name"in i?i.name:i.mcp_server_name)===s.name);if(!a||!("run"in a))return{type:"tool_result",tool_use_id:s.id,content:`Error: Tool '${s.name}' not found`,is_error:!0};try{let i=s.input;"parse"in a&&a.parse&&(i=a.parse(i));const o=await a.run(i);return{type:"tool_result",tool_use_id:s.id,content:o}}catch(i){return{type:"tool_result",tool_use_id:s.id,content:`Error: ${i instanceof Error?i.message:String(i)}`,is_error:!0}}}))}}class nv{constructor(t,n){this.iterator=t,this.controller=n}async*decoder(){const t=new $m;for await(const n of this.iterator)for(const r of t.decode(n))yield JSON.parse(r);for(const n of t.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(t,n){if(!t.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");return new nv(Fj(t.body),n)}}let _7=class extends fi{create(t,n){const{betas:r,...s}=t;return this._client.post("/v1/messages/batches?beta=true",{body:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}retrieve(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/messages/batches/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(t={},n){const{betas:r,...s}=t??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Lm,{query:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}delete(t,n={},r){const{betas:s}=n??{};return this._client.delete(zr`/v1/messages/batches/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(t,n={},r){const{betas:s}=n??{};return this._client.post(zr`/v1/messages/batches/${t}/cancel?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(t,n={},r){const s=await this.retrieve(t);if(!s.results_url)throw new wt(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);const{betas:a}=n??{};return this._client.get(s.results_url,{...r,headers:Lt([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,o)=>nv.fromResponse(o.response,o.controller))}};const ZD={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};let rv=class extends fi{constructor(){super(...arguments),this.batches=new _7(this._client)}create(t,n){const{betas:r,...s}=t;s.model in ZD&&console.warn(`The model '${s.model}' is deprecated and will reach end-of-life on ${ZD[s.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!s.stream&&a==null){const i=b7[s.model]??void 0;a=this._client.calculateNonstreamingTimeout(s.max_tokens,i)}return this._client.post("/v1/messages?beta=true",{body:s,timeout:a??6e5,...n,headers:Lt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:t.stream??!1})}parse(t,n){return n={...n,headers:Lt([{"anthropic-beta":[...t.betas??[],"structured-outputs-2025-11-13"].toString()},n?.headers])},this.create(t,n).then(r=>x7(r,t,{logger:this._client.logger??console}))}stream(t,n){return Fb.createMessage(this,t,n)}countTokens(t,n){const{betas:r,...s}=t;return this._client.post("/v1/messages/count_tokens?beta=true",{body:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},n?.headers])})}toolRunner(t,n){return new w7(this._client,t,n)}};rv.Batches=_7;rv.BetaToolRunner=w7;class k7 extends fi{create(t,n={},r){const{betas:s,...a}=n??{};return this._client.post(zr`/v1/skills/${t}/versions?beta=true`,Hj({body:a,...r,headers:Lt([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])},this._client))}retrieve(t,n,r){const{skill_id:s,betas:a}=n;return this._client.get(zr`/v1/skills/${s}/versions/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r?.headers])})}list(t,n={},r){const{betas:s,...a}=n??{};return this._client.getAPIList(zr`/v1/skills/${t}/versions?beta=true`,u7,{query:a,...r,headers:Lt([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}delete(t,n,r){const{skill_id:s,betas:a}=n;return this._client.delete(zr`/v1/skills/${s}/versions/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r?.headers])})}}class qj extends fi{constructor(){super(...arguments),this.versions=new k7(this._client)}create(t={},n){const{betas:r,...s}=t??{};return this._client.post("/v1/skills?beta=true",Hj({body:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])},this._client))}retrieve(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/skills/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}list(t={},n){const{betas:r,...s}=t??{};return this._client.getAPIList("/v1/skills?beta=true",u7,{query:s,...n,headers:Lt([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])})}delete(t,n={},r){const{betas:s}=n??{};return this._client.delete(zr`/v1/skills/${t}?beta=true`,{...r,headers:Lt([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}}qj.Versions=k7;let gh=class extends fi{constructor(){super(...arguments),this.models=new y7(this._client),this.messages=new rv(this._client),this.files=new g7(this._client),this.skills=new qj(this._client)}};gh.Models=y7;gh.Messages=rv;gh.Files=g7;gh.Skills=qj;let S7=class extends fi{create(t,n){const{betas:r,...s}=t;return this._client.post("/v1/complete",{body:s,timeout:this._client._options.timeout??6e5,...n,headers:Lt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:t.stream??!1})}};var pa,dl,Mf,Qy,Df,$f,Xy,Lf,uo,zf,e0,t0,hc,n0,r0,B1,WD,H1,q1,V1,G1,JD;const YD="__json_buf";function QD(e){return e.type==="tool_use"||e.type==="server_tool_use"}class Bb{constructor(){pa.add(this),this.messages=[],this.receivedMessages=[],dl.set(this,void 0),this.controller=new AbortController,Mf.set(this,void 0),Qy.set(this,()=>{}),Df.set(this,()=>{}),$f.set(this,void 0),Xy.set(this,()=>{}),Lf.set(this,()=>{}),uo.set(this,{}),zf.set(this,!1),e0.set(this,!1),t0.set(this,!1),hc.set(this,!1),n0.set(this,void 0),r0.set(this,void 0),H1.set(this,t=>{if(Be(this,e0,!0),rm(t)&&(t=new ei),t instanceof ei)return Be(this,t0,!0),this._emit("abort",t);if(t instanceof wt)return this._emit("error",t);if(t instanceof Error){const n=new wt(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new wt(String(t)))}),Be(this,Mf,new Promise((t,n)=>{Be(this,Qy,t,"f"),Be(this,Df,n,"f")})),Be(this,$f,new Promise((t,n)=>{Be(this,Xy,t,"f"),Be(this,Lf,n,"f")})),pe(this,Mf,"f").catch(()=>{}),pe(this,$f,"f").catch(()=>{})}get response(){return pe(this,n0,"f")}get request_id(){return pe(this,r0,"f")}async withResponse(){Be(this,hc,!0);const t=await pe(this,Mf,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const n=new Bb;return n._run(()=>n._fromReadableStream(t)),n}static createMessage(t,n,r){const s=new Bb;for(const a of n.messages)s._addMessageParam(a);return s._run(()=>s._createMessage(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}_run(t){t().then(()=>{this._emitFinal(),this._emit("end")},pe(this,H1,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,n=!0){this.receivedMessages.push(t),n&&this._emit("message",t)}async _createMessage(t,n,r){const s=r?.signal;let a;s&&(s.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),s.addEventListener("abort",a));try{pe(this,pa,"m",q1).call(this);const{response:i,data:o}=await t.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(i);for await(const u of o)pe(this,pa,"m",V1).call(this,u);if(o.controller.signal?.aborted)throw new ei;pe(this,pa,"m",G1).call(this)}finally{s&&a&&s.removeEventListener("abort",a)}}_connected(t){this.ended||(Be(this,n0,t),Be(this,r0,t?.headers.get("request-id")),pe(this,Qy,"f").call(this,t),this._emit("connect"))}get ended(){return pe(this,zf,"f")}get errored(){return pe(this,e0,"f")}get aborted(){return pe(this,t0,"f")}abort(){this.controller.abort()}on(t,n){return(pe(this,uo,"f")[t]||(pe(this,uo,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=pe(this,uo,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(pe(this,uo,"f")[t]||(pe(this,uo,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Be(this,hc,!0),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Be(this,hc,!0),await pe(this,$f,"f")}get currentMessage(){return pe(this,dl,"f")}async finalMessage(){return await this.done(),pe(this,pa,"m",B1).call(this)}async finalText(){return await this.done(),pe(this,pa,"m",WD).call(this)}_emit(t,...n){if(pe(this,zf,"f"))return;t==="end"&&(Be(this,zf,!0),pe(this,Xy,"f").call(this));const r=pe(this,uo,"f")[t];if(r&&(pe(this,uo,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!pe(this,hc,"f")&&!r?.length&&Promise.reject(s),pe(this,Df,"f").call(this,s),pe(this,Lf,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!pe(this,hc,"f")&&!r?.length&&Promise.reject(s),pe(this,Df,"f").call(this,s),pe(this,Lf,"f").call(this,s),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",pe(this,pa,"m",B1).call(this))}async _fromReadableStream(t,n){const r=n?.signal;let s;r&&(r.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),r.addEventListener("abort",s));try{pe(this,pa,"m",q1).call(this),this._connected(null);const a=sm.fromReadableStream(t,this.controller);for await(const i of a)pe(this,pa,"m",V1).call(this,i);if(a.controller.signal?.aborted)throw new ei;pe(this,pa,"m",G1).call(this)}finally{r&&s&&r.removeEventListener("abort",s)}}[(dl=new WeakMap,Mf=new WeakMap,Qy=new WeakMap,Df=new WeakMap,$f=new WeakMap,Xy=new WeakMap,Lf=new WeakMap,uo=new WeakMap,zf=new WeakMap,e0=new WeakMap,t0=new WeakMap,hc=new WeakMap,n0=new WeakMap,r0=new WeakMap,H1=new WeakMap,pa=new WeakSet,B1=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},WD=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new wt("stream ended without producing a content block with type=text");return n.join(" ")},q1=function(){this.ended||Be(this,dl,void 0)},V1=function(n){if(this.ended)return;const r=pe(this,pa,"m",JD).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const s=r.content.at(-1);switch(n.delta.type){case"text_delta":{s.type==="text"&&this._emit("text",n.delta.text,s.text||"");break}case"citations_delta":{s.type==="text"&&this._emit("citation",n.delta.citation,s.citations??[]);break}case"input_json_delta":{QD(s)&&s.input&&this._emit("inputJson",n.delta.partial_json,s.input);break}case"thinking_delta":{s.type==="thinking"&&this._emit("thinking",n.delta.thinking,s.thinking);break}case"signature_delta":{s.type==="thinking"&&this._emit("signature",s.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Be(this,dl,r);break}}},G1=function(){if(this.ended)throw new wt("stream has ended, this shouldn't happen");const n=pe(this,dl,"f");if(!n)throw new wt("request ended without sending any chunks");return Be(this,dl,void 0),n},JD=function(n){let r=pe(this,dl,"f");if(n.type==="message_start"){if(r)throw new wt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new wt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const s=r.content.at(n.index);switch(n.delta.type){case"text_delta":{s?.type==="text"&&(r.content[n.index]={...s,text:(s.text||"")+n.delta.text});break}case"citations_delta":{s?.type==="text"&&(r.content[n.index]={...s,citations:[...s.citations??[],n.delta.citation]});break}case"input_json_delta":{if(s&&QD(s)){let a=s[YD]||"";a+=n.delta.partial_json;const i={...s};Object.defineProperty(i,YD,{value:a,enumerable:!1,writable:!0}),a&&(i.input=v7(a)),r.content[n.index]=i}break}case"thinking_delta":{s?.type==="thinking"&&(r.content[n.index]={...s,thinking:s.thinking+n.delta.thinking});break}case"signature_delta":{s?.type==="thinking"&&(r.content[n.index]={...s,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("streamEvent",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,i)=>n.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new sm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let T7=class extends fi{create(t,n){return this._client.post("/v1/messages/batches",{body:t,...n})}retrieve(t,n){return this._client.get(zr`/v1/messages/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/v1/messages/batches",Lm,{query:t,...n})}delete(t,n){return this._client.delete(zr`/v1/messages/batches/${t}`,n)}cancel(t,n){return this._client.post(zr`/v1/messages/batches/${t}/cancel`,n)}async results(t,n){const r=await this.retrieve(t);if(!r.results_url)throw new wt(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Lt([{Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((s,a)=>nv.fromResponse(a.response,a.controller))}},Vj=class extends fi{constructor(){super(...arguments),this.batches=new T7(this._client)}create(t,n){t.model in XD&&console.warn(`The model '${t.model}' is deprecated and will reach end-of-life on ${XD[t.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!t.stream&&r==null){const s=b7[t.model]??void 0;r=this._client.calculateNonstreamingTimeout(t.max_tokens,s)}return this._client.post("/v1/messages",{body:t,timeout:r??6e5,...n,stream:t.stream??!1})}stream(t,n){return Bb.createMessage(this,t,n)}countTokens(t,n){return this._client.post("/v1/messages/count_tokens",{body:t,...n})}};const XD={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};Vj.Batches=T7;let C7=class extends fi{retrieve(t,n={},r){const{betas:s}=n??{};return this._client.get(zr`/v1/models/${t}`,{...r,headers:Lt([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(t={},n){const{betas:r,...s}=t??{};return this._client.getAPIList("/v1/models",Lm,{query:s,...n,headers:Lt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};var Sve={};const s0=e=>{if(typeof globalThis.process<"u")return Sve?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var lC,Gj,B0,E7;const Tve="\\n\\nHuman:",Cve="\\n\\nAssistant:";class tr{constructor({baseURL:t=s0("ANTHROPIC_BASE_URL"),apiKey:n=s0("ANTHROPIC_API_KEY")??null,authToken:r=s0("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){lC.add(this),B0.set(this,void 0);const a={apiKey:n,authToken:r,...s,baseURL:t||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&Vxe())throw new wt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=a.baseURL,this.timeout=a.timeout??Gj.DEFAULT_TIMEOUT,this.logger=a.logger??console;const i="warn";this.logLevel=i,this.logLevel=$D(a.logLevel,"ClientOptions.logLevel",this)??$D(s0("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??i,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Jxe(),Be(this,B0,Qxe),this._options=a,this.apiKey=typeof n=="string"?n:null,this.authToken=r}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.get("x-api-key")||t.get("authorization"))&&!(this.apiKey&&t.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&t.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(t){return Lt([await this.apiKeyAuth(t),await this.bearerAuth(t)])}async apiKeyAuth(t){if(this.apiKey!=null)return Lt([{"X-Api-Key":this.apiKey}])}async bearerAuth(t){if(this.authToken!=null)return Lt([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new wt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${nd}`}defaultIdempotencyKey(){return`stainless-node-retry-${GB()}`}makeStatusError(t,n,r,s){return na.generate(t,n,r,s)}buildURL(t,n,r){const s=!pe(this,lC,"m",E7).call(this)&&r||this.baseURL,a=Uxe(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return Fxe(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}_calculateNonstreamingTimeout(t){if(3600*t/128e3>600)throw new wt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>({method:t,path:n,...s})))}request(t,n=null){return new o7(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){const s=await t,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:i,url:o,timeout:u}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(i,{url:o,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,m=Date.now();if(rs(this).debug(`[${h}] sending request`,xc({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:i.headers})),s.signal?.aborted)throw new ei;const g=new AbortController,b=await this.fetchWithTimeout(o,i,u,g).catch(tC),w=Date.now();if(b instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new ei;const C=rm(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return rs(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${k}`),rs(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${k})`,xc({retryOfRequestLogID:r,url:o,durationMs:w-m,message:b.message})),this.retryRequest(s,n,r??h);throw rs(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),rs(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,xc({retryOfRequestLogID:r,url:o,durationMs:w-m,message:b.message})),C?new KB:new tv({cause:b})}const x=[...b.headers.entries()].filter(([k])=>k==="request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${h}${f}${x}] ${i.method} ${o} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-m}ms`;if(!b.ok){const k=await this.shouldRetry(b);if(n&&k){const U=`retrying, ${n} attempts remaining`;return await Yxe(b.body),rs(this).info(`${S} - ${U}`),rs(this).debug(`[${h}] response error (${U})`,xc({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-m})),this.retryRequest(s,n,r??h,b.headers)}const C=k?"error; no more retries left":"error; not retryable";rs(this).info(`${S} - ${C}`);const T=await b.text().catch(U=>tC(U).message),P=n7(T),D=P?void 0:T;throw rs(this).debug(`[${h}] response error (${C})`,xc({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:D,durationMs:Date.now()-m})),this.makeStatusError(b.status,P,D,b.headers)}return rs(this).info(S),rs(this).debug(`[${h}] response start`,xc({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-m})),{response:b,options:s,controller:g,requestLogID:h,retryOfRequestLogID:r,startTime:m}}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}requestAPIList(t,n){const r=this.makeRequest(n,null,void 0);return new ove(this,r,t)}async fetchWithTimeout(t,n,r,s){const{signal:a,method:i,...o}=n||{};a&&a.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:s.signal,...h?{duplex:"half"}:{},method:"GET",...o};i&&(f.method=i.toUpperCase());try{return await this.fetch.call(void 0,t,f)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){let a;const i=s?.get("retry-after-ms");if(i){const u=parseFloat(i);Number.isNaN(u)||(a=u)}const o=s?.get("retry-after");if(o&&!a){const u=parseFloat(o);Number.isNaN(u)?a=Date.parse(o)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=t.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,u)}return await qxe(a),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}calculateNonstreamingTimeout(t,n){if(36e5*t/128e3>6e5||n!=null&&t>n)throw new wt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(t,{retryCount:n=0}={}){const r={...t},{method:s,path:a,query:i,defaultBaseURL:o}=r,u=this.buildURL(a,i,o);"timeout"in r&&Hxe("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),m=await this.buildHeaders({options:t,method:s,bodyHeaders:h,retryCount:n});return{req:{method:s,headers:m,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:u,timeout:r.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const i=Lt([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...Wxe(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=Lt([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:s7(t)}:pe(this,B0,"f").call(this,{body:t,headers:r})}}Gj=tr,B0=new WeakMap,lC=new WeakSet,E7=function(){return this.baseURL!=="https://api.anthropic.com"};tr.Anthropic=Gj;tr.HUMAN_PROMPT=Tve;tr.AI_PROMPT=Cve;tr.DEFAULT_TIMEOUT=6e5;tr.AnthropicError=wt;tr.APIError=na;tr.APIConnectionError=tv;tr.APIConnectionTimeoutError=KB;tr.APIUserAbortError=ei;tr.NotFoundError=YB;tr.ConflictError=QB;tr.RateLimitError=e7;tr.BadRequestError=ZB;tr.AuthenticationError=WB;tr.InternalServerError=t7;tr.PermissionDeniedError=JB;tr.UnprocessableEntityError=XB;tr.toFile=fve;class zm extends tr{constructor(){super(...arguments),this.completions=new S7(this),this.messages=new Vj(this),this.models=new C7(this),this.beta=new gh(this)}}zm.Completions=S7;zm.Messages=Vj;zm.Models=C7;zm.Beta=gh;const Eve=new Set(["date-time","time","date","duration","email","hostname","uri","ipv4","ipv6","uuid"]);function jve(e){return JSON.parse(JSON.stringify(e))}function Nve(e){const t=jve(e);return vc(t)}function vc(e){const t={},n=gs(e,"$ref");if(n!==void 0)return t.$ref=n,t;const r=gs(e,"$defs");if(r!==void 0){const f={};t.$defs=f;for(const[m,g]of Object.entries(r))f[m]=vc(g)}const s=gs(e,"type"),a=gs(e,"anyOf"),i=gs(e,"oneOf"),o=gs(e,"allOf");if(Array.isArray(a))t.anyOf=a.map(f=>vc(f));else if(Array.isArray(i))t.anyOf=i.map(f=>vc(f));else if(Array.isArray(o))t.allOf=o.map(f=>vc(f));else{if(s===void 0)throw new Error("JSON schema must have a type defined if anyOf/oneOf/allOf are not used");t.type=s}const u=gs(e,"description");u!==void 0&&(t.description=u);const h=gs(e,"title");if(h!==void 0&&(t.title=h),s==="object"){const f=gs(e,"properties")||{};t.properties=Object.fromEntries(Object.entries(f).map(([g,b])=>[g,vc(b)])),gs(e,"additionalProperties"),t.additionalProperties=!1;const m=gs(e,"required");m!==void 0&&(t.required=m)}else if(s==="string"){const f=gs(e,"format");f!==void 0&&Eve.has(f)?t.format=f:f!==void 0&&(e.format=f)}else if(s==="array"){const f=gs(e,"items");f!==void 0&&(t.items=vc(f));const m=gs(e,"minItems");m!==void 0&&(m===0||m===1)?t.minItems=m:m!==void 0&&(e.minItems=m)}if(Object.keys(e).length>0){const f=t.description;t.description=(f?f+`

`:"")+"{"+Object.entries(e).map(([m,g])=>`${m}: ${JSON.stringify(g)}`).join(", ")+"}"}return t}var Ave={};Ut(Ave,{BasePromptValue:()=>sv,ChatPromptValue:()=>N7,ImagePromptValue:()=>Ive,StringPromptValue:()=>j7});var sv=class extends Pd{},j7=class extends sv{static lc_name(){return"StringPromptValue"}lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;value;constructor(e){super({value:e}),this.value=e}toString(){return this.value}toChatMessages(){return[new si(this.value)]}},N7=class extends sv{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ChatPromptValue"}messages;constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),this.messages=e.messages}toString(){return uj(this.messages)}toChatMessages(){return this.messages}},Ive=class extends sv{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ImagePromptValue"}imageUrl;value;constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new si({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},Ke="0123456789abcdef".split(""),Ove=[-2147483648,8388608,32768,128],Fa=[24,16,8,0],a0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],xr=[];function oi(e,t){t?(xr[0]=xr[16]=xr[1]=xr[2]=xr[3]=xr[4]=xr[5]=xr[6]=xr[7]=xr[8]=xr[9]=xr[10]=xr[11]=xr[12]=xr[13]=xr[14]=xr[15]=0,this.blocks=xr):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}oi.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var r,s=0,a,i=e.length,o=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(a=this.start;s<i&&a<64;++s)o[a>>>2]|=e[s]<<Fa[a++&3];else for(a=this.start;s<i&&a<64;++s)r=e.charCodeAt(s),r<128?o[a>>>2]|=r<<Fa[a++&3]:r<2048?(o[a>>>2]|=(192|r>>>6)<<Fa[a++&3],o[a>>>2]|=(128|r&63)<<Fa[a++&3]):r<55296||r>=57344?(o[a>>>2]|=(224|r>>>12)<<Fa[a++&3],o[a>>>2]|=(128|r>>>6&63)<<Fa[a++&3],o[a>>>2]|=(128|r&63)<<Fa[a++&3]):(r=65536+((r&1023)<<10|e.charCodeAt(++s)&1023),o[a>>>2]|=(240|r>>>18)<<Fa[a++&3],o[a>>>2]|=(128|r>>>12&63)<<Fa[a++&3],o[a>>>2]|=(128|r>>>6&63)<<Fa[a++&3],o[a>>>2]|=(128|r&63)<<Fa[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};oi.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=Ove[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}};oi.prototype.hash=function(){var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4,a=this.h5,i=this.h6,o=this.h7,u=this.blocks,h,f,m,g,b,w,x,S,k,C,T;for(h=16;h<64;++h)b=u[h-15],f=(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3,b=u[h-2],m=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,u[h]=u[h-16]+f+u[h-7]+m<<0;for(T=t&n,h=0;h<64;h+=4)this.first?(this.is224?(S=300032,b=u[0]-1413257819,o=b-150054599<<0,r=b+24177077<<0):(S=704751109,b=u[0]-210244248,o=b-1521486534<<0,r=b+143694565<<0),this.first=!1):(f=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),m=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),S=e&t,g=S^e&n^T,x=s&a^~s&i,b=o+m+x+a0[h]+u[h],w=f+g,o=r+b<<0,r=b+w<<0),f=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),m=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),k=r&e,g=k^r&t^S,x=i&o^~i&s,b=a+m+x+a0[h+1]+u[h+1],w=f+g,i=n+b<<0,n=b+w<<0,f=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),m=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),C=n&r,g=C^n&e^k,x=a&i^~a&o,b=s+m+x+a0[h+2]+u[h+2],w=f+g,a=t+b<<0,t=b+w<<0,f=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),m=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),T=t&n,g=T^t&r^C,x=a&i^~a&o,b=s+m+x+a0[h+3]+u[h+3],w=f+g,s=e+b<<0,e=b+w<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0,this.h5=this.h5+a<<0,this.h6=this.h6+i<<0,this.h7=this.h7+o<<0};oi.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4,a=this.h5,i=this.h6,o=this.h7,u=Ke[e>>>28&15]+Ke[e>>>24&15]+Ke[e>>>20&15]+Ke[e>>>16&15]+Ke[e>>>12&15]+Ke[e>>>8&15]+Ke[e>>>4&15]+Ke[e&15]+Ke[t>>>28&15]+Ke[t>>>24&15]+Ke[t>>>20&15]+Ke[t>>>16&15]+Ke[t>>>12&15]+Ke[t>>>8&15]+Ke[t>>>4&15]+Ke[t&15]+Ke[n>>>28&15]+Ke[n>>>24&15]+Ke[n>>>20&15]+Ke[n>>>16&15]+Ke[n>>>12&15]+Ke[n>>>8&15]+Ke[n>>>4&15]+Ke[n&15]+Ke[r>>>28&15]+Ke[r>>>24&15]+Ke[r>>>20&15]+Ke[r>>>16&15]+Ke[r>>>12&15]+Ke[r>>>8&15]+Ke[r>>>4&15]+Ke[r&15]+Ke[s>>>28&15]+Ke[s>>>24&15]+Ke[s>>>20&15]+Ke[s>>>16&15]+Ke[s>>>12&15]+Ke[s>>>8&15]+Ke[s>>>4&15]+Ke[s&15]+Ke[a>>>28&15]+Ke[a>>>24&15]+Ke[a>>>20&15]+Ke[a>>>16&15]+Ke[a>>>12&15]+Ke[a>>>8&15]+Ke[a>>>4&15]+Ke[a&15]+Ke[i>>>28&15]+Ke[i>>>24&15]+Ke[i>>>20&15]+Ke[i>>>16&15]+Ke[i>>>12&15]+Ke[i>>>8&15]+Ke[i>>>4&15]+Ke[i&15];return this.is224||(u+=Ke[o>>>28&15]+Ke[o>>>24&15]+Ke[o>>>20&15]+Ke[o>>>16&15]+Ke[o>>>12&15]+Ke[o>>>8&15]+Ke[o>>>4&15]+Ke[o&15]),u};oi.prototype.toString=oi.prototype.hex;oi.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4,a=this.h5,i=this.h6,o=this.h7,u=[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255];return this.is224||u.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),u};oi.prototype.array=oi.prototype.digest;oi.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};const A7=(...e)=>new oi(!1,!0).update(e.join("")).hex();var Rve={};Ut(Rve,{sha256:()=>A7});var Pve={};Ut(Pve,{BaseCache:()=>O7,InMemoryCache:()=>R7,defaultHashKeyEncoder:()=>I7,deserializeStoredGeneration:()=>Mve,serializeGeneration:()=>Dve});const I7=(...e)=>A7(e.join("_"));function Mve(e){return e.message!==void 0?{text:e.text,message:dj(e.message)}:{text:e.text}}function Dve(e){const t={text:e.text};return e.message!==void 0&&(t.message=e.message.toDict()),t}var O7=class{keyEncoder=I7;makeDefaultKeyEncoder(e){this.keyEncoder=e}};const $ve=new Map;var R7=class P7 extends O7{cache;constructor(t){super(),this.cache=t??new Map}lookup(t,n){return Promise.resolve(this.cache.get(this.keyEncoder(t,n))??null)}async update(t,n,r){this.cache.set(this.keyEncoder(t,n),r)}static global(){return new P7($ve)}},Uf={},e$;function Lve(){if(e$)return Uf;e$=1,Uf.byteLength=o,Uf.toByteArray=h,Uf.fromByteArray=g;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function i(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=b.indexOf("=");x===-1&&(x=w);var S=x===w?0:4-x%4;return[x,S]}function o(b){var w=i(b),x=w[0],S=w[1];return(x+S)*3/4-S}function u(b,w,x){return(w+x)*3/4-x}function h(b){var w,x=i(b),S=x[0],k=x[1],C=new n(u(b,S,k)),T=0,P=k>0?S-4:S,D;for(D=0;D<P;D+=4)w=t[b.charCodeAt(D)]<<18|t[b.charCodeAt(D+1)]<<12|t[b.charCodeAt(D+2)]<<6|t[b.charCodeAt(D+3)],C[T++]=w>>16&255,C[T++]=w>>8&255,C[T++]=w&255;return k===2&&(w=t[b.charCodeAt(D)]<<2|t[b.charCodeAt(D+1)]>>4,C[T++]=w&255),k===1&&(w=t[b.charCodeAt(D)]<<10|t[b.charCodeAt(D+1)]<<4|t[b.charCodeAt(D+2)]>>2,C[T++]=w>>8&255,C[T++]=w&255),C}function f(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function m(b,w,x){for(var S,k=[],C=w;C<x;C+=3)S=(b[C]<<16&16711680)+(b[C+1]<<8&65280)+(b[C+2]&255),k.push(f(S));return k.join("")}function g(b){for(var w,x=b.length,S=x%3,k=[],C=16383,T=0,P=x-S;T<P;T+=C)k.push(m(b,T,T+C>P?P:T+C));return S===1?(w=b[x-1],k.push(e[w>>2]+e[w<<4&63]+"==")):S===2&&(w=(b[x-2]<<8)+b[x-1],k.push(e[w>>10]+e[w>>4&63]+e[w<<2&63]+"=")),k.join("")}return Uf}var zve=Lve();const Uve=Kd(zve);var Fve=Object.defineProperty,Bve=(e,t,n)=>t in e?Fve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hve=(e,t,n)=>(Bve(e,t+"",n),n);function qve(e,t){let n=Array.from({length:e.length},(r,s)=>({start:s,end:s+1}));for(;n.length>1;){let r=null;for(let s=0;s<n.length-1;s++){const a=e.slice(n[s].start,n[s+1].end),i=t.get(a.join(","));i!=null&&(r==null||i<r[0])&&(r=[i,s])}if(r!=null){const s=r[1];n[s]={start:n[s].start,end:n[s+1].end},n.splice(s+1,1)}else break}return n}function Vve(e,t){return e.length===1?[t.get(e.join(","))]:qve(e,t).map(n=>t.get(e.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function Gve(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var cC=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;const n=e.bpe_ranks.split(`
`).filter(Boolean).reduce((r,s)=>{const[a,i,...o]=s.split(" "),u=Number.parseInt(i,10);return o.forEach((h,f)=>r[h]=u+f),r},{});for(const[r,s]of Object.entries(n)){const a=Uve.toByteArray(r);this.rankMap.set(a.join(","),s),this.textMap.set(s,a)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[s,a])=>(r[a]=this.textEncoder.encode(s),r),{})}encode(e,t=[],n="all"){const r=new RegExp(this.patStr,"ug"),s=cC.specialTokenRegex(Object.keys(this.specialTokens)),a=[],i=new Set(t==="all"?Object.keys(this.specialTokens):t),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(h=>!i.has(h)):n);if(o.size>0){const h=cC.specialTokenRegex([...o]),f=e.match(h);if(f!=null)throw new Error(`The text contains a special token that is not allowed: ${f[0]}`)}let u=0;for(;;){let h=null,f=u;for(;s.lastIndex=f,h=s.exec(e),!(h==null||i.has(h[0]));)f=h.index+1;const m=h?.index??e.length;for(const b of e.substring(u,m).matchAll(r)){const w=this.textEncoder.encode(b[0]),x=this.rankMap.get(w.join(","));if(x!=null){a.push(x);continue}a.push(...Vve(w,this.rankMap))}if(h==null)break;let g=this.specialTokens[h[0]];a.push(g),u=h.index+h[0].length}return a}decode(e){const t=[];let n=0;for(let a=0;a<e.length;++a){const i=e[a],o=this.textMap.get(i)??this.inverseSpecialTokens[i];o!=null&&(t.push(o),n+=o.length)}const r=new Uint8Array(n);let s=0;for(const a of t)r.set(a,s),s+=a.length;return this.textDecoder.decode(r)}},M7=cC;Hve(M7,"specialTokenRegex",e=>new RegExp(e.map(t=>Gve(t)).join("|"),"g"));function Kve(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var Zve={};Ut(Zve,{encodingForModel:()=>Kj,getEncoding:()=>D7});const i0={},Wve=new Pm({});async function D7(e){return e in i0||(i0[e]=Wve.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(t=>t.json()).then(t=>new M7(t)).catch(t=>{throw delete i0[e],t})),await i0[e]}async function Kj(e){return D7(Kve(e))}var Jve={};Ut(Jve,{BaseLangChain:()=>Zj,BaseLanguageModel:()=>Wj,calculateMaxTokens:()=>Qve,getEmbeddingContextSize:()=>Yve,getModelContextSize:()=>$7,getModelNameForTiktoken:()=>av,isOpenAITool:()=>yh});const av=e=>e.startsWith("gpt-5")?"gpt-5":e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,Yve=e=>e==="text-embedding-ada-002"?8191:2046,$7=e=>{switch(av(e)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function yh(e){return typeof e!="object"||!e?!1:!!("type"in e&&e.type==="function"&&"function"in e&&typeof e.function=="object"&&e.function&&"name"in e.function&&"parameters"in e.function)}const Qve=async({prompt:e,modelName:t})=>{let n;try{n=(await Kj(av(t))).encode(e).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(e.length/4)}return $7(t)-n},Xve=()=>!1;var Zj=class extends Fn{verbose;callbacks;tags;metadata;get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),this.verbose=e.verbose??Xve(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},Wj=class extends Zj{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}caller;cache;constructor({callbacks:e,callbackManager:t,...n}){const{cache:r,...s}=n;super({callbacks:e??t,...s}),typeof r=="object"?this.cache=r:r?this.cache=R7.global():this.cache=void 0,this.caller=new Pm(n??{})}_encoding;async getNumTokens(e){let t;typeof e=="string"?t=e:t=e.map(r=>typeof r=="string"?r:r.type==="text"&&"text"in r?r.text:"").join("");let n=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await Kj("modelName"in this?av(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(t).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new j7(e):Array.isArray(e)?new N7(e.map(Sp)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const n={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([a,i])=>i!==void 0).map(([a,i])=>`${a}:${JSON.stringify(i)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}};const ewe=e=>e();function K1(e){const t=e.constructor;return new t({...e,content:e.contentBlocks,response_metadata:{...e.response_metadata,output_version:"v1"}})}var twe={};Ut(twe,{BaseChatModel:()=>bh,SimpleChatModel:()=>nwe});function Z1(e){const t=[];for(const n of e){let r=n;if(Array.isArray(n.content))for(let s=0;s<n.content.length;s++){const a=n.content[s];(ej(a)||tj(a))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,s),sU(a),...n.content.slice(s+1)]}))}t.push(r)}return t}var bh=class wc extends Wj{lc_namespace=["langchain","chat_models",this._llmType()];disableStreaming=!1;outputVersion;get callKeys(){return[...super.callKeys,"outputVersion"]}constructor(t){super(t),this.outputVersion=ewe(()=>{const n=t.outputVersion??Ws("LC_OUTPUT_VERSION");return n&&["v0","v1"].includes(n)?n:"v0"})}_separateRunnableConfigFromCallOptionsCompat(t){const[n,r]=super._separateRunnableConfigFromCallOptions(t);return r.signal=n.signal,[n,r]}async invoke(t,n){const r=wc._convertInputToPromptValue(t);return(await this.generatePrompt([r],n,n?.callbacks)).generations[0][0].message}async*_streamResponseChunks(t,n,r){throw new Error("Not implemented.")}async*_streamIterator(t,n){if(this._streamResponseChunks===wc.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,n);else{const s=wc._convertInputToPromptValue(t).toChatMessages(),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(n),o={...a.metadata,...this.getLsParams(i)},u=await Cs.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),h={options:i,invocation_params:this?.invocationParams(i),batch_size:1},f=i.outputVersion??this.outputVersion,m=await u?.handleChatModelStart(this.toJSON(),[Z1(s)],a.runId,void 0,h,void 0,void 0,a.runName);let g,b;try{for await(const w of this._streamResponseChunks(s,i,m?.[0])){if(w.message.id==null){const x=m?.at(0)?.runId;x!=null&&w.message._updateId(`run-${x}`)}w.message.response_metadata={...w.generationInfo,...w.message.response_metadata},f==="v1"?yield K1(w.message):yield w.message,g?g=g.concat(w):g=w,vT(w.message)&&w.message.usage_metadata!==void 0&&(b={tokenUsage:{promptTokens:w.message.usage_metadata.input_tokens,completionTokens:w.message.usage_metadata.output_tokens,totalTokens:w.message.usage_metadata.total_tokens}})}}catch(w){throw await Promise.all((m??[]).map(x=>x?.handleLLMError(w))),w}await Promise.all((m??[]).map(w=>w?.handleLLMEnd({generations:[[g]],llmOutput:b})))}}getLsParams(t){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:t.stop,ls_provider:n}}async _generateUncached(t,n,r,s){const a=t.map(g=>g.map(Sp));let i;if(s!==void 0&&s.length===a.length)i=s;else{const g={...r.metadata,...this.getLsParams(n)},b=await Cs.configure(r.callbacks,this.callbacks,r.tags,this.tags,g,this.metadata,{verbose:this.verbose}),w={options:n,invocation_params:this?.invocationParams(n),batch_size:1};i=await b?.handleChatModelStart(this.toJSON(),a.map(Z1),r.runId,void 0,w,void 0,void 0,r.runName)}const o=n.outputVersion??this.outputVersion,u=[],h=[];if(!!i?.[0].handlers.find(fj)&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==wc.prototype._streamResponseChunks)try{const g=await this._streamResponseChunks(a[0],n,i?.[0]);let b,w;for await(const x of g){if(x.message.id==null){const S=i?.at(0)?.runId;S!=null&&x.message._updateId(`run-${S}`)}b===void 0?b=x:b=Nl(b,x),vT(x.message)&&x.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if(b===void 0)throw new Error("Received empty response from chat model call.");u.push([b]),await i?.[0].handleLLMEnd({generations:u,llmOutput:w})}catch(g){throw await i?.[0].handleLLMError(g),g}else{const g=await Promise.allSettled(a.map(async(b,w)=>{const x=await this._generate(b,{...n,promptIndex:w},i?.[w]);if(o==="v1")for(const S of x.generations)S.message=K1(S.message);return x}));await Promise.all(g.map(async(b,w)=>{if(b.status==="fulfilled"){const x=b.value;for(const S of x.generations){if(S.message.id==null){const k=i?.at(0)?.runId;k!=null&&S.message._updateId(`run-${k}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata}}return x.generations.length===1&&(x.generations[0].message.response_metadata={...x.llmOutput,...x.generations[0].message.response_metadata}),u[w]=x.generations,h[w]=x.llmOutput,i?.[w]?.handleLLMEnd({generations:[x.generations],llmOutput:x.llmOutput})}else return await i?.[w]?.handleLLMError(b.reason),Promise.reject(b.reason)}))}const m={generations:u,llmOutput:h.length?this._combineLLMOutput?.(...h):void 0};return Object.defineProperty(m,Yp,{value:i?{runIds:i?.map(g=>g.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:t,cache:n,llmStringKey:r,parsedOptions:s,handledOptions:a}){const i=t.map(k=>k.map(Sp)),o={...a.metadata,...this.getLsParams(s)},u=await Cs.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),h={options:s,invocation_params:this?.invocationParams(s),batch_size:1},f=await u?.handleChatModelStart(this.toJSON(),i.map(Z1),a.runId,void 0,h,void 0,void 0,a.runName),m=[],b=(await Promise.allSettled(i.map(async(k,C)=>{const T=wc._convertInputToPromptValue(k).toString(),P=await n.lookup(T,r);return P==null&&m.push(C),P}))).map((k,C)=>({result:k,runManager:f?.[C]})).filter(({result:k})=>k.status==="fulfilled"&&k.value!=null||k.status==="rejected"),w=s.outputVersion??this.outputVersion,x=[];await Promise.all(b.map(async({result:k,runManager:C},T)=>{if(k.status==="fulfilled"){const P=k.value;return x[T]=P.map(D=>("message"in D&&xo(D.message)&&Co(D.message)&&(D.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},w==="v1"&&(D.message=K1(D.message))),D.generationInfo={...D.generationInfo,tokenUsage:{}},D)),P.length&&await C?.handleLLMNewToken(P[0].text),C?.handleLLMEnd({generations:[P]},void 0,void 0,void 0,{cached:!0})}else return await C?.handleLLMError(k.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(k.reason)}));const S={generations:x,missingPromptIndices:m,startedRunManagers:f};return Object.defineProperty(S,Yp,{value:f?{runIds:f?.map(k=>k.runId)}:void 0,configurable:!0}),S}async generate(t,n,r){let s;Array.isArray(n)?s={stop:n}:s=n;const a=t.map(w=>w.map(Sp)),[i,o]=this._separateRunnableConfigFromCallOptionsCompat(s);if(i.callbacks=i.callbacks??r,!this.cache)return this._generateUncached(a,o,i);const{cache:u}=this,h=this._getSerializedCacheKeyParametersForCall(o),{generations:f,missingPromptIndices:m,startedRunManagers:g}=await this._generateCached({messages:a,cache:u,llmStringKey:h,parsedOptions:o,handledOptions:i});let b={};if(m.length>0){const w=await this._generateUncached(m.map(x=>a[x]),o,i,g!==void 0?m.map(x=>g?.[x]):void 0);await Promise.all(w.generations.map(async(x,S)=>{const k=m[S];f[k]=x;const C=wc._convertInputToPromptValue(a[k]).toString();return u.update(C,h,x)})),b=w.llmOutput??{}}return{generations:f,llmOutput:b}}invocationParams(t){return{}}_modelType(){return"base_chat_model"}async generatePrompt(t,n,r){const s=t.map(a=>a.toChatMessages());return this.generate(s,n,r)}withStructuredOutput(t,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n?.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=t,s=n?.name,a=Zx(r)??"A function available to call.",i=n?.method,o=n?.includeRaw;if(i==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=s??"extract",h;Lr(r)?h=[{type:"function",function:{name:u,description:a,parameters:dr(r)}}]:("name"in r&&(u=r.name),h=[{type:"function",function:{name:u,description:a,parameters:r}}]);const f=this.bindTools(h),m=Ro.from(x=>{if(!kn.isInstance(x))throw new Error("Input is not an AIMessageChunk.");if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");const S=x.tool_calls.find(k=>k.name===u);if(!S)throw new Error(`No tool call found with name ${u}.`);return S.args});if(!o)return f.pipe(m).withConfig({runName:"StructuredOutput"});const g=ja.assign({parsed:(x,S)=>m.invoke(x.raw,S)}),b=ja.assign({parsed:()=>null}),w=g.withFallbacks({fallbacks:[b]});return Ul.from([{raw:f},w]).withConfig({runName:"StructuredOutputRunnable"})}},nwe=class extends bh{async _generate(e,t,n){const r=await this._call(e,t,n),s=new pr(r);if(typeof s.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:s.content,message:s}]}}};function Jj(e){return e!==void 0&&Array.isArray(e.lc_namespace)}function Yj(e){return e!==void 0&&Fn.isRunnable(e)&&"lc_name"in e.constructor&&typeof e.constructor.lc_name=="function"&&e.constructor.lc_name()==="RunnableToolLike"}function Qj(e){return!!e&&typeof e=="object"&&"name"in e&&"schema"in e&&(Lr(e.schema)||e.schema!=null&&typeof e.schema=="object"&&"type"in e.schema&&typeof e.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function Pl(e){return Qj(e)||Yj(e)||Jj(e)}var rwe={};Ut(rwe,{convertToOpenAIFunction:()=>L7,convertToOpenAITool:()=>Hb,isLangChainTool:()=>Pl,isRunnableToolLike:()=>Yj,isStructuredTool:()=>Jj,isStructuredToolParams:()=>Qj});function L7(e,t){const n=typeof t=="number"?void 0:t;return{name:e.name,description:e.description,parameters:dr(e.schema),...n?.strict!==void 0?{strict:n.strict}:{}}}function Hb(e,t){const n=typeof t=="number"?void 0:t;let r;return Pl(e)?r={type:"function",function:L7(e)}:r=e,n?.strict!==void 0&&(r.function.strict=n.strict),r}const swe={"claude-opus-4-1":8192,"claude-opus-4":8192,"claude-sonnet-4":8192,"claude-sonnet-3-7-sonnet":8192,"claude-3-5-sonnet":4096,"claude-3-5-haiku":4096,"claude-3-haiku":2048},t$=2048;function awe(e){return e?Object.entries(swe).find(([n])=>e.startsWith(n))?.[1]??t$:t$}function iwe(e){return!!(e.tools&&e.tools.length>0)}function owe(e){for(const t of e.messages??[])if(typeof t.content!="string"){for(const n of t.content??[])if(typeof n=="object"&&n!=null&&n.type==="document"&&typeof n.citations=="object"&&n.citations?.enabled)return!0}return!1}function lwe(e){return!!(e.thinking&&e.thinking.type==="enabled")}function cwe(e){return"input_schema"in e}function uwe(e){const t=["text_editor_","computer_","bash_","web_search_","web_fetch_","str_replace_editor_","str_replace_based_edit_tool_","code_execution_","memory_","tool_search_","mcp_toolset"];return typeof e=="object"&&e!==null&&"type"in e&&("name"in e||"mcp_server_name"in e)&&typeof e.type=="string"&&t.some(n=>typeof e.type=="string"&&e.type.startsWith(n))}function dwe(e,t,...n){return Array.from(new Set([...e??[],...t??[],...n.flatMap(r=>Array.from(r))]))}function hwe(e){if(typeof e.content=="string")return e.content;if(Array.isArray(e.content)&&e.content.length>=1&&"input"in e.content[0])return typeof e.content[0].input=="string"?e.content[0].input:JSON.stringify(e.content[0].input);if(Array.isArray(e.content)&&e.content.length>=1&&"text"in e.content[0]&&typeof e.content[0].text=="string")return e.content[0].text}var fwe=class extends bh{static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}lc_serializable=!0;anthropicApiKey;apiKey;apiUrl;temperature;topK;topP;maxTokens;modelName="claude-3-5-sonnet-latest";model="claude-3-5-sonnet-latest";invocationKwargs;stopSequences;streaming=!1;clientOptions;thinking={type:"disabled"};contextManagement;batchClient;streamingClient;streamUsage=!0;betas;createClient;constructor(e){if(super(e??{}),this.anthropicApiKey=e?.apiKey??e?.anthropicApiKey??Ws("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!e?.createClient)throw new Error("Anthropic API key not found");this.clientOptions=e?.clientOptions??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e?.anthropicApiUrl,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.invocationKwargs=e?.invocationKwargs??{},this.topP=e?.topP??this.topP,this.temperature=e?.temperature??this.temperature,this.topK=e?.topK??this.topK,this.maxTokens=e?.maxTokens??awe(this.model),this.stopSequences=e?.stopSequences??this.stopSequences,this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.thinking=e?.thinking??this.thinking,this.contextManagement=e?.contextManagement??this.contextManagement,this.betas=e?.betas??this.betas,this.createClient=e?.createClient??(t=>new zm(t))}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(e)return e.map(t=>{if(Pl(t)&&t.extras?.providerToolDefinition)return t.extras.providerToolDefinition;if(uwe(t)||cwe(t))return t;if(yh(t))return{name:t.function.name,description:t.function.description,input_schema:t.function.parameters};if(Pl(t))return{name:t.name,description:t.description,input_schema:Lr(t.schema)?dr(t.schema):t.schema,...t.extras?wxe.parse(t.extras):{}};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(t,null,2)}`)})}bindTools(e,t){return this.withConfig({tools:this.formatStructuredToolToAnthropic(e),...t})}invocationParams(e){const t=vxe(e?.tool_choice),n=e?.tools?.reduce((s,a)=>{if(typeof a=="object"&&"type"in a&&a.type in SD){const i=SD[a.type];if(!s.includes(i))return[...s,i]}return s},[]),r={model:this.model,stop_sequences:e?.stop??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e?.tools),tool_choice:t,thinking:this.thinking,context_management:this.contextManagement,...this.invocationKwargs,container:e?.container,betas:dwe(this.betas,e?.betas,n??[]),output_format:e?.output_format,mcp_servers:e?.mcp_servers};if(this.thinking.type==="enabled"){if(this.topP!==void 0&&this.topK!==-1)throw new Error("topK is not supported when thinking is enabled");if(this.temperature!==void 0&&this.temperature!==1)throw new Error("temperature is not supported when thinking is enabled")}else r.temperature=this.temperature,r.top_k=this.topK,r.top_p=this.topP;return r}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,t,n){const r=this.invocationParams(t),s=jD(e),a={...r,...s,stream:!0},i=!iwe(a)&&!owe(a)&&!lwe(a),o=await this.createStreamWithRetry(a,{headers:t.headers});for await(const u of o){if(t.signal?.aborted)throw o.controller.abort(),new Error("AbortError: User aborted the request.");const h=this.streamUsage??t.streamUsage,f=Mxe(u,{streamUsage:h,coerceContentToString:i});if(!f)continue;const{chunk:m}=f,g=hwe(m),b=new Ui({message:new kn({content:m.content,additional_kwargs:m.additional_kwargs,tool_call_chunks:m.tool_call_chunks,usage_metadata:h?m.usage_metadata:void 0,response_metadata:m.response_metadata,id:m.id}),text:g??""});yield b,await n?.handleLLMNewToken(g??"",void 0,void 0,void 0,void 0,{chunk:b})}}async _generateNonStreaming(e,t,n){const r=await this.completionWithRetry({...t,stream:!1,...jD(e)},n),{content:s,...a}=r,i=Dxe(s,a),{role:o,type:u,...h}=a;return{generations:i,llmOutput:h}}async _generate(e,t,n){if(this.stopSequences&&t.stop)throw new Error('"stopSequence" parameter found in input and default params');const r=this.invocationParams(t);if(r.stream){let s;const a=this._streamResponseChunks(e,t,n);for await(const i of a)s===void 0?s=i:s=s.concat(i);if(s===void 0)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:s.text,message:s.message}]}}else return this._generateNonStreaming(e,r,{signal:t.signal,headers:t.headers})}async createStreamWithRetry(e,t){if(!this.streamingClient){const a=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...a,apiKey:this.apiKey,maxRetries:0})}const{betas:n,...r}=e,s=async()=>{try{return e?.betas?.length?await this.streamingClient.beta.messages.create({...r,betas:n,...this.invocationKwargs,stream:!0},t):await this.streamingClient.messages.create({...r,...this.invocationKwargs,stream:!0},t)}catch(a){throw ND(a)}};return this.caller.call(s)}async completionWithRetry(e,t){if(!this.batchClient){const a=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...a,apiKey:this.apiKey,maxRetries:0})}const{betas:n,...r}=e,s=async()=>{try{return e?.betas?.length?await this.batchClient.beta.messages.create({...r,...this.invocationKwargs,betas:n},t):await this.batchClient.messages.create({...r,...this.invocationKwargs},t)}catch(a){throw ND(a)}};return this.caller.callWithOptions({signal:t.signal??void 0},s)}_llmType(){return"anthropic"}get profile(){return Lxe[this.model]??{}}withStructuredOutput(e,t){let n,r;const{schema:s,name:a,includeRaw:i}={...t,schema:e};let o=t?.method??"functionCalling";if(o==="jsonMode"&&(console.warn('"jsonMode" is not supported for Anthropic models. Falling back to "jsonSchema".'),o="jsonSchema"),o==="jsonSchema"){r=Lr(s)?Vd.fromZodSchema(s):new qd;const m=Nve(dr(s));n=this.withConfig({outputVersion:"v0",output_format:{type:"json_schema",schema:m},betas:["structured-outputs-2025-11-13"],ls_structured_output_format:{kwargs:{method:"json_schema"},schema:m}})}else if(o==="functionCalling"){let m=a??"extract",g;if(Lr(s)){const b=dr(s);g=[{name:m,description:b.description??"A function available to call.",input_schema:b}],r=new bD({returnSingle:!0,keyName:m,zodSchema:s})}else{let b;typeof s.name=="string"&&typeof s.description=="string"&&typeof s.input_schema=="object"&&s.input_schema!=null?(b=s,m=s.name):b={name:m,description:s.description??"",input_schema:s},g=[b],r=new bD({returnSingle:!0,keyName:m})}if(this.thinking?.type==="enabled"){const b="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(b),n=this.withConfig({outputVersion:"v0",tools:g,ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:dr(s)}});const w=x=>{if(!x.tool_calls||x.tool_calls.length===0)throw new Error(b);return x};n=n.pipe(w)}else n=this.withConfig({outputVersion:"v0",tools:g,tool_choice:{type:"tool",name:m},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:dr(s)}})}else throw new TypeError(`Unrecognized structured output method '${o}'. Expected 'functionCalling' or 'jsonSchema'`);if(!i)return n.pipe(r).withConfig({runName:"ChatAnthropicStructuredOutput"});const u=ja.assign({parsed:(m,g)=>r.invoke(m.raw,g)}),h=ja.assign({parsed:()=>null}),f=u.withFallbacks({fallbacks:[h]});return Ul.from([{raw:n},f]).withConfig({runName:"StructuredOutputRunnable"})}},pwe=class extends fwe{};const mwe=xe({command:Ct("view"),path:J()}),gwe=xe({command:Ct("create"),path:J(),file_text:J()}),ywe=xe({command:Ct("str_replace"),path:J(),old_str:J(),new_str:J()}),bwe=xe({command:Ct("insert"),path:J(),insert_line:qe(),insert_text:J()}),xwe=xe({command:Ct("delete"),path:J()}),vwe=xe({command:Ct("rename"),old_path:J(),new_path:J()});eu("command",[mwe,gwe,ywe,bwe,xwe,vwe]);const wwe=xe({command:Ct("view"),path:J(),view_range:Uj([qe(),qe()]).optional()}),_we=xe({command:Ct("str_replace"),path:J(),old_str:J(),new_str:J()}),kwe=xe({command:Ct("create"),path:J(),file_text:J()}),Swe=xe({command:Ct("insert"),path:J(),insert_line:qe(),new_str:J()});eu("command",[wwe,_we,kwe,Swe]);const li=Uj([qe(),qe()]),z7=xe({action:Ct("screenshot")}),U7=xe({action:Ct("left_click"),coordinate:li}),F7=xe({action:Ct("right_click"),coordinate:li}),B7=xe({action:Ct("middle_click"),coordinate:li}),H7=xe({action:Ct("double_click"),coordinate:li}),q7=xe({action:Ct("triple_click"),coordinate:li}),V7=xe({action:Ct("left_click_drag"),start_coordinate:li,end_coordinate:li}),G7=xe({action:Ct("left_mouse_down"),coordinate:li}),K7=xe({action:Ct("left_mouse_up"),coordinate:li}),Z7=xe({action:Ct("scroll"),coordinate:li,scroll_direction:Ue(["up","down","left","right"]),scroll_amount:qe()}),W7=xe({action:Ct("type"),text:J()}),J7=xe({action:Ct("key"),key:J()}),Y7=xe({action:Ct("mouse_move"),coordinate:li}),Q7=xe({action:Ct("hold_key"),key:J()}),X7=xe({action:Ct("wait"),duration:qe().optional()}),Twe=xe({action:Ct("zoom"),region:Uj([qe(),qe(),qe(),qe()])});eu("action",[z7,U7,F7,B7,H7,q7,V7,G7,K7,Z7,W7,J7,Y7,Q7,X7]);eu("action",[z7,U7,F7,B7,H7,q7,V7,G7,K7,Z7,W7,J7,Y7,Q7,X7,Twe]);const Cwe=xe({command:J().describe("The bash command to run")}),Ewe=xe({restart:Ct(!0).describe("Set to true to restart the bash session")});BB([Cwe,Ewe]);var jwe={};Ut(jwe,{BaseToolkit:()=>Nwe,DynamicStructuredTool:()=>n8,DynamicTool:()=>t8,StructuredTool:()=>Xj,Tool:()=>e8,ToolInputParsingException:()=>yb,isLangChainTool:()=>Pl,isRunnableToolLike:()=>Yj,isStructuredTool:()=>Jj,isStructuredToolParams:()=>Qj,tool:()=>Awe});var Xj=class extends Zj{extras;returnDirect=!1;verboseParsingErrors=!1;get lc_namespace(){return["langchain","tools"]}responseFormat="content";defaultConfig;constructor(e){super(e??{}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig,this.metadata=e?.metadata??this.metadata,this.extras=e?.extras??this.extras}async invoke(e,t){let n,r=Gt(_b(this.defaultConfig,t));return _p(e)?(n=e.args,r={...r,toolCall:e}):n=e,this.call(n,r)}async call(e,t,n){const r=_p(e)?e.args:e;let s;if(Lr(this.schema))try{s=await Kx(this.schema,r)}catch(b){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${b.message}`),fB(b)&&(w=`${w}

${yfe(b)}`),new yb(w,JSON.stringify(e))}else{const b=_n(r,this.schema);if(!b.valid){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${b.errors.map(x=>`${x.keywordLocation}: ${x.error}`).join(`
`)}`),new yb(w,JSON.stringify(e))}s=r}const a=Dx(t),o=await Cs.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),a.runId,void 0,void 0,void 0,a.runName);delete a.runId;let u;try{u=await this._call(s,o,a)}catch(b){throw await o?.handleToolError(b),b}let h,f;if(this.responseFormat==="content_and_artifact")if(Array.isArray(u)&&u.length===2)[h,f]=u;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(u)}`);else h=u;let m;_p(e)&&(m=e.id),!m&&Vle(a)&&(m=a.toolCall.id);const g=Iwe({content:h,artifact:f,toolCallId:m,name:this.name,metadata:this.metadata});return await o?.handleToolEnd(g),g}},e8=class extends Xj{schema=Yx({input:Jx().optional()}).transform(e=>e.input);constructor(e){super(e)}call(e,t){const n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,t)}},t8=class extends e8{static lc_name(){return"DynamicTool"}name;description;func;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,t){const n=Dx(t);return n.runName===void 0&&(n.runName=this.name),super.call(e,n)}async _call(e,t,n){return this.func(e,t,n)}},n8=class extends Xj{static lc_name(){return"DynamicStructuredTool"}name;description;func;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,t,n){const r=Dx(t);return r.runName===void 0&&(r.runName=this.name),super.call(e,r,n)}_call(e,t,n){return this.func(e,t,n)}},Nwe=class{getTools(){return this.tools}};function Awe(e,t){const n=Oj(t.schema),r=Tp(t.schema);if(!t.schema||n||r)return new t8({...t,description:t.description??t.schema?.description??`${t.name} tool`,func:async(i,o,u)=>new Promise((h,f)=>{const m=xn(u,{callbacks:o?.getChild()});ai.runWithConfig(Eo(m),async()=>{try{h(e(i,m))}catch(g){f(g)}})})});const s=t.schema,a=t.description??t.schema.description??`${t.name} tool`;return new n8({...t,description:a,schema:s,func:async(i,o,u)=>new Promise((h,f)=>{let m;const g=()=>{u?.signal&&m&&u.signal.removeEventListener("abort",m)};u?.signal&&(m=()=>{g(),f(Wp(u.signal))},u.signal.addEventListener("abort",m));const b=xn(u,{callbacks:o?.getChild()});ai.runWithConfig(Eo(b),async()=>{try{const w=await e(i,b);if(u?.signal?.aborted){g();return}g(),h(w)}catch(w){g(),f(w)}})})})}function Iwe(e){const{content:t,artifact:n,toolCallId:r,metadata:s}=e;return r&&!aj(t)?typeof t=="string"||Array.isArray(t)&&t.every(a=>typeof a=="object")?new $i({status:"success",content:t,artifact:n,tool_call_id:r,name:e.name,metadata:s}):new $i({status:"success",content:Owe(t),artifact:n,tool_call_id:r,name:e.name,metadata:s}):t}function Owe(e){try{return JSON.stringify(e,null,2)??""}catch{return`${e}`}}class tu{apiKey;model;constructor(t,n){this.apiKey=t,this.model=n}async invoke(t){return(await this.createModel().invoke(t.map(s=>[s.role,s.content]))).content.toString()}async stream(t,n){const r=this.createModel();let s="";const a=await r.stream(t.map(i=>[i.role,i.content]));for await(const i of a){const o=i.content.toString();s+=o,n(o)}return s}withStructuredOutput(t){return this.createModel().withStructuredOutput(t)}async invokeStructured(t,n){return await this.withStructuredOutput(t).invoke(n.map(a=>[a.role,a.content]))}}class Rwe extends tu{getProviderName(){return"anthropic"}getEndpoint(){return"https://api.anthropic.com"}createModel(){return new pwe({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096})}}function o0(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function mt(e,t,n,r,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}function ce(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}let r8=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return r8=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function uC(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const dC=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class it extends Error{}let Es=class hC extends it{constructor(t,n,r,s){super(`${hC.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(t,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new iv({message:r,cause:dC(n)});const a=n?.error;return t===400?new s8(t,a,r,s):t===401?new a8(t,a,r,s):t===403?new i8(t,a,r,s):t===404?new o8(t,a,r,s):t===409?new l8(t,a,r,s):t===422?new c8(t,a,r,s):t===429?new u8(t,a,r,s):t>=500?new d8(t,a,r,s):new hC(t,a,r,s)}},Zs=class extends Es{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},iv=class extends Es{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},ov=class extends iv{constructor({message:t}={}){super({message:t??"Request timed out."})}},s8=class extends Es{},a8=class extends Es{},i8=class extends Es{},o8=class extends Es{},l8=class extends Es{},c8=class extends Es{},u8=class extends Es{},d8=class extends Es{};class h8 extends it{constructor(){super("Could not parse response content as the length limit was reached")}}class f8 extends it{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ip extends Error{constructor(t){super(t)}}const Pwe=/^[a-z][a-z0-9+.-]*:/i,Mwe=e=>Pwe.test(e);let ws=e=>(ws=Array.isArray,ws(e)),n$=ws;function p8(e){return typeof e!="object"?{}:e??{}}function Dwe(e){if(!e)return!0;for(const t in e)return!1;return!0}function $we(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W1(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}const Lwe=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new it(`${e} must be an integer`);if(t<0)throw new it(`${e} must be a positive integer`);return t},zwe=e=>{try{return JSON.parse(e)}catch{return}},Um=e=>new Promise(t=>setTimeout(t,e)),sd="6.15.0",Uwe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Fwe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Bwe=()=>{const e=Fwe();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sd,"X-Stainless-OS":s$(Deno.build.os),"X-Stainless-Arch":r$(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sd,"X-Stainless-OS":s$(globalThis.process.platform??"unknown"),"X-Stainless-Arch":r$(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=Hwe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Hwe(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,i=r[3]||0;return{browser:t,version:`${s}.${a}.${i}`}}}return null}const r$=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",s$=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let a$;const qwe=()=>a$??(a$=Bwe());function Vwe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function m8(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function g8(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return m8({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){await t.return?.()}})}function y8(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Gwe(e){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}const Kwe=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),b8="RFC3986",x8=e=>String(e),i$={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:x8},Zwe="RFC1738";let fC=(e,t)=>(fC=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),fC(e,t));const Si=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),J1=1024,Wwe=(e,t,n,r,s)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=J1){const u=a.length>=J1?a.slice(o,o+J1):a,h=[];for(let f=0;f<u.length;++f){let m=u.charCodeAt(f);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||s===Zwe&&(m===40||m===41)){h[h.length]=u.charAt(f);continue}if(m<128){h[h.length]=Si[m];continue}if(m<2048){h[h.length]=Si[192|m>>6]+Si[128|m&63];continue}if(m<55296||m>=57344){h[h.length]=Si[224|m>>12]+Si[128|m>>6&63]+Si[128|m&63];continue}f+=1,m=65536+((m&1023)<<10|u.charCodeAt(f)&1023),h[h.length]=Si[240|m>>18]+Si[128|m>>12&63]+Si[128|m>>6&63]+Si[128|m&63]}i+=h.join("")}return i};function Jwe(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function o$(e,t){if(ws(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const v8={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},w8=function(e,t){Array.prototype.push.apply(e,ws(t)?t:[t])};let l$;const ir={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Wwe,encodeValuesOnly:!1,format:b8,formatter:x8,indices:!1,serializeDate(e){return(l$??(l$=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function Ywe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const Y1={};function _8(e,t,n,r,s,a,i,o,u,h,f,m,g,b,w,x,S,k){let C=e,T=k,P=0,D=!1;for(;(T=T.get(Y1))!==void 0&&!D;){const B=T.get(e);if(P+=1,typeof B<"u"){if(B===P)throw new RangeError("Cyclic object value");D=!0}typeof T.get(Y1)>"u"&&(P=0)}if(typeof h=="function"?C=h(t,C):C instanceof Date?C=g?.(C):n==="comma"&&ws(C)&&(C=o$(C,function(B){return B instanceof Date?g?.(B):B})),C===null){if(a)return u&&!x?u(t,ir.encoder,S,"key",b):t;C=""}if(Ywe(C)||Jwe(C)){if(u){const B=x?t:u(t,ir.encoder,S,"key",b);return[w?.(B)+"="+w?.(u(C,ir.encoder,S,"value",b))]}return[w?.(t)+"="+w?.(String(C))]}const R=[];if(typeof C>"u")return R;let U;if(n==="comma"&&ws(C))x&&u&&(C=o$(C,u)),U=[{value:C.length>0?C.join(",")||null:void 0}];else if(ws(h))U=h;else{const B=Object.keys(C);U=f?B.sort(f):B}const j=o?String(t).replace(/\./g,"%2E"):String(t),se=r&&ws(C)&&C.length===1?j+"[]":j;if(s&&ws(C)&&C.length===0)return se+"[]";for(let B=0;B<U.length;++B){const ee=U[B],ie=typeof ee=="object"&&typeof ee.value<"u"?ee.value:C[ee];if(i&&ie===null)continue;const _e=m&&o?ee.replace(/\./g,"%2E"):ee,G=ws(C)?typeof n=="function"?n(se,_e):se:se+(m?"."+_e:"["+_e+"]");k.set(e,P);const H=new WeakMap;H.set(Y1,k),w8(R,_8(ie,G,n,r,s,a,i,o,n==="comma"&&x&&ws(C)?null:u,h,f,m,g,b,w,x,S,H))}return R}function Qwe(e=ir){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||ir.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=b8;if(typeof e.format<"u"){if(!fC(i$,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=i$[n];let s=ir.filter;(typeof e.filter=="function"||ws(e.filter))&&(s=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in v8?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=ir.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:ir.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ir.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ir.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ir.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?ir.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ir.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:ir.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:ir.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ir.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ir.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ir.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ir.strictNullHandling}}function Xwe(e,t={}){let n=e;const r=Qwe(t);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):ws(r.filter)&&(a=r.filter,s=a);const i=[];if(typeof n!="object"||n===null)return"";const o=v8[r.arrayFormat],u=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const h=new WeakMap;for(let g=0;g<s.length;++g){const b=s[g];r.skipNulls&&n[b]===null||w8(i,_8(n[b],b,o,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const f=i.join(r.delimiter);let m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),f.length>0?m+f:""}function e_e(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let c$;function eN(e){let t;return(c$??(t=new globalThis.TextEncoder,c$=t.encode.bind(t)))(e)}let u$;function d$(e){let t;return(u$??(t=new globalThis.TextDecoder,u$=t.decode.bind(t)))(e)}var Bs,Hs;let lv=class{constructor(){Bs.set(this,void 0),Hs.set(this,void 0),mt(this,Bs,new Uint8Array),mt(this,Hs,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?eN(t):t;mt(this,Bs,e_e([ce(this,Bs,"f"),n]));const r=[];let s;for(;(s=t_e(ce(this,Bs,"f"),ce(this,Hs,"f")))!=null;){if(s.carriage&&ce(this,Hs,"f")==null){mt(this,Hs,s.index);continue}if(ce(this,Hs,"f")!=null&&(s.index!==ce(this,Hs,"f")+1||s.carriage)){r.push(d$(ce(this,Bs,"f").subarray(0,ce(this,Hs,"f")-1))),mt(this,Bs,ce(this,Bs,"f").subarray(ce(this,Hs,"f"))),mt(this,Hs,null);continue}const a=ce(this,Hs,"f")!==null?s.preceding-1:s.preceding,i=d$(ce(this,Bs,"f").subarray(0,a));r.push(i),mt(this,Bs,ce(this,Bs,"f").subarray(s.index)),mt(this,Hs,null)}return r}flush(){return ce(this,Bs,"f").length?this.decode(`
`):[]}};Bs=new WeakMap,Hs=new WeakMap;lv.NEWLINE_CHARS=new Set([`
`,"\r"]);lv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function t_e(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function n_e(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const qb={off:0,error:200,warn:300,info:400,debug:500},h$=(e,t,n)=>{if(e){if($we(qb,e))return e;Mr(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(qb))}`)}};function op(){}function l0(e,t,n){return!t||qb[e]>qb[n]?op:t[e].bind(t)}const r_e={error:op,warn:op,info:op,debug:op};let f$=new WeakMap;function Mr(e){const t=e.logger,n=e.logLevel??"off";if(!t)return r_e;const r=f$.get(t);if(r&&r[0]===n)return r[1];const s={error:l0("error",t,n),warn:l0("warn",t,n),info:l0("info",t,n),debug:l0("debug",t,n)};return f$.set(t,[n,s]),s}const _c=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Ff;let am=class lp{constructor(t,n,r){this.iterator=t,Ff.set(this,void 0),this.controller=n,mt(this,Ff,r)}static fromSSEResponse(t,n,r){let s=!1;const a=r?Mr(r):console;async function*i(){if(s)throw new it("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const u of s_e(t,n))if(!o){if(u.data.startsWith("[DONE]")){o=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let h;try{h=JSON.parse(u.data)}catch(f){throw a.error("Could not parse message into JSON:",u.data),a.error("From chunk:",u.raw),f}if(h&&h.error)throw new Es(void 0,h.error,void 0,t.headers);yield h}else{let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(u.event=="error")throw new Es(void 0,h.error,h.message,void 0);yield{event:u.event,data:h}}}o=!0}catch(u){if(uC(u))return;throw u}finally{o||n.abort()}}return new lp(i,n,r)}static fromReadableStream(t,n,r){let s=!1;async function*a(){const o=new lv,u=y8(t);for await(const h of u)for(const f of o.decode(h))yield f;for(const h of o.flush())yield h}async function*i(){if(s)throw new it("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const u of a())o||u&&(yield JSON.parse(u));o=!0}catch(u){if(uC(u))return;throw u}finally{o||n.abort()}}return new lp(i,n,r)}[(Ff=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const i=r.next();t.push(i),n.push(i)}return a.shift()}});return[new lp(()=>s(t),this.controller,ce(this,Ff,"f")),new lp(()=>s(n),this.controller,ce(this,Ff,"f"))]}toReadableStream(){const t=this;let n;return m8({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const i=eN(JSON.stringify(s)+`
`);r.enqueue(i)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}};async function*s_e(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new it("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new it("Attempted to iterate over a response with no body");const n=new i_e,r=new lv,s=y8(e.body);for await(const a of a_e(s))for(const i of r.decode(a)){const o=n.decode(i);o&&(yield o)}for(const a of r.flush()){const i=n.decode(a);i&&(yield i)}}async function*a_e(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?eN(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let a;for(;(a=n_e(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}let i_e=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=o_e(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}};function o_e(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function k8(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=t,i=await(async()=>{if(t.options.stream)return Mr(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):am.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const u=n.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){const m=await n.json();return S8(m,n)}return await n.text()})();return Mr(e).debug(`[${r}] response parsed`,_c({retryOfRequestLogID:s,url:n.url,status:n.status,body:i,durationMs:Date.now()-a})),i}function S8(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var cp;let T8=class C8 extends Promise{constructor(t,n,r=k8){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,cp.set(this,void 0),mt(this,cp,t)}_thenUnwrap(t){return new C8(ce(this,cp,"f"),this.responsePromise,async(n,r)=>S8(t(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(ce(this,cp,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};cp=new WeakMap;var c0;class tN{constructor(t,n,r,s){c0.set(this,void 0),mt(this,c0,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new it("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ce(this,c0,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(c0=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}let l_e=class extends T8{constructor(t,n,r){super(t,n,async(s,a)=>new r(s,a.response,await k8(s,a),a.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}};class cv extends tN{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Xn extends tN{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?{...this.options,query:{...p8(this.options.query),after:n}}:null}}class Vb extends tN{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...p8(this.options.query),after:t}}:null}}const E8=()=>{if(typeof File>"u"){const{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cp(e,t,n){return E8(),new File(e,t??"unknown_file",n)}function H0(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const nN=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",p$=async(e,t)=>pC(e.body)?{...e,body:await j8(e.body,t)}:e,Kc=async(e,t)=>({...e,body:await j8(e.body,t)}),m$=new WeakMap;function c_e(e){const t=typeof e=="function"?e:e.fetch,n=m$.get(t);if(n)return n;const r=(async()=>{try{const s="Response"in t?t.Response:(await t("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return m$.set(t,r),r}const j8=async(e,t)=>{if(!await c_e(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([r,s])=>mC(n,r,s))),n},N8=e=>e instanceof Blob&&"name"in e,u_e=e=>typeof e=="object"&&e!==null&&(e instanceof Response||nN(e)||N8(e)),pC=e=>{if(u_e(e))return!0;if(Array.isArray(e))return e.some(pC);if(e&&typeof e=="object"){for(const t in e)if(pC(e[t]))return!0}return!1},mC=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,Cp([await n.blob()],H0(n)));else if(nN(n))e.append(t,Cp([await new Response(g8(n)).blob()],H0(n)));else if(N8(n))e.append(t,n,H0(n));else if(Array.isArray(n))await Promise.all(n.map(r=>mC(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>mC(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},A8=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",d_e=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&A8(e),h_e=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function f_e(e,t,n){if(E8(),e=await e,d_e(e))return e instanceof File?e:Cp([await e.arrayBuffer()],e.name);if(h_e(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Cp(await gC(s),t,n)}const r=await gC(e);if(t||(t=H0(e)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return Cp(r,t,n)}async function gC(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(A8(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(nN(e))for await(const n of e)t.push(...await gC(n));else{const n=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${p_e(e)}`)}return t}function p_e(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}let st=class{constructor(t){this._client=t}};function I8(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const g$=Object.freeze(Object.create(null)),m_e=(e=I8)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],i=n.reduce((f,m,g)=>{/[?#]/.test(m)&&(s=!0);const b=r[g];let w=(s?encodeURIComponent:e)(""+b);return g!==r.length&&(b==null||typeof b=="object"&&b.toString===Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??g$)??g$)?.toString)&&(w=b+"",a.push({start:f.length+m.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),f+m+(g===r.length?"":w)},""),o=i.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=u.exec(o))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((f,m)=>f.start-m.start),a.length>0){let f=0;const m=a.reduce((g,b)=>{const w=" ".repeat(b.start-f),x="^".repeat(b.length);return f=b.start+b.length,g+w+x},"");throw new it(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${i}
${m}`)}return i},Ae=m_e(I8);let O8=class extends st{list(t,n={},r){return this._client.getAPIList(Ae`/chat/completions/${t}/messages`,Xn,{query:n,...r})}};function Gb(e){return e!==void 0&&"function"in e&&e.function!==void 0}function g_e(e,t){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function rN(e){return e?.$brand==="auto-parseable-response-format"}function Fm(e){return e?.$brand==="auto-parseable-tool"}function y_e(e,t){return!t||!R8(t)?{...e,choices:e.choices.map(n=>(P8(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:sN(e,t)}function sN(e,t){const n=e.choices.map(r=>{if(r.finish_reason==="length")throw new h8;if(r.finish_reason==="content_filter")throw new f8;return P8(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>x_e(t,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?b_e(t,r.message.content):null}}});return{...e,choices:n}}function b_e(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function x_e(e,t){const n=e.tools?.find(r=>Gb(r)&&r.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:Fm(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function v_e(e,t){if(!e||!("tools"in e)||!e.tools)return!1;const n=e.tools?.find(r=>Gb(r)&&r.function?.name===t.function.name);return Gb(n)&&(Fm(n)||n?.function.strict||!1)}function R8(e){return rN(e.response_format)?!0:e.tools?.some(t=>Fm(t)||t.type==="function"&&t.function.strict===!0)??!1}function P8(e){for(const t of e||[])if(t.type!=="function")throw new it(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function w_e(e){for(const t of e??[]){if(t.type!=="function")throw new it(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new it(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Kb=e=>e?.role==="assistant",M8=e=>e?.role==="tool";var yC,q0,V0,up,dp,G0,hp,fo,fp,Zb,Wb,ad,D8;class aN{constructor(){yC.add(this),this.controller=new AbortController,q0.set(this,void 0),V0.set(this,()=>{}),up.set(this,()=>{}),dp.set(this,void 0),G0.set(this,()=>{}),hp.set(this,()=>{}),fo.set(this,{}),fp.set(this,!1),Zb.set(this,!1),Wb.set(this,!1),ad.set(this,!1),mt(this,q0,new Promise((t,n)=>{mt(this,V0,t,"f"),mt(this,up,n,"f")})),mt(this,dp,new Promise((t,n)=>{mt(this,G0,t,"f"),mt(this,hp,n,"f")})),ce(this,q0,"f").catch(()=>{}),ce(this,dp,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},ce(this,yC,"m",D8).bind(this))},0)}_connected(){this.ended||(ce(this,V0,"f").call(this),this._emit("connect"))}get ended(){return ce(this,fp,"f")}get errored(){return ce(this,Zb,"f")}get aborted(){return ce(this,Wb,"f")}abort(){this.controller.abort()}on(t,n){return(ce(this,fo,"f")[t]||(ce(this,fo,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=ce(this,fo,"f")[t];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(ce(this,fo,"f")[t]||(ce(this,fo,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{mt(this,ad,!0),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){mt(this,ad,!0),await ce(this,dp,"f")}_emit(t,...n){if(ce(this,fp,"f"))return;t==="end"&&(mt(this,fp,!0),ce(this,G0,"f").call(this));const r=ce(this,fo,"f")[t];if(r&&(ce(this,fo,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!ce(this,ad,"f")&&!r?.length&&Promise.reject(s),ce(this,up,"f").call(this,s),ce(this,hp,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!ce(this,ad,"f")&&!r?.length&&Promise.reject(s),ce(this,up,"f").call(this,s),ce(this,hp,"f").call(this,s),this._emit("end")}}_emitFinal(){}}q0=new WeakMap,V0=new WeakMap,up=new WeakMap,dp=new WeakMap,G0=new WeakMap,hp=new WeakMap,fo=new WeakMap,fp=new WeakMap,Zb=new WeakMap,Wb=new WeakMap,ad=new WeakMap,yC=new WeakSet,D8=function(t){if(mt(this,Zb,!0),t instanceof Error&&t.name==="AbortError"&&(t=new Zs),t instanceof Zs)return mt(this,Wb,!0),this._emit("abort",t);if(t instanceof it)return this._emit("error",t);if(t instanceof Error){const n=new it(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new it(String(t)))};function __e(e){return typeof e.parse=="function"}var ns,bC,Jb,xC,vC,wC,$8,L8;const k_e=10;class z8 extends aN{constructor(){super(...arguments),ns.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),M8(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(Kb(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new it("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),ce(this,ns,"m",bC).call(this)}async finalMessage(){return await this.done(),ce(this,ns,"m",Jb).call(this)}async finalFunctionToolCall(){return await this.done(),ce(this,ns,"m",xC).call(this)}async finalFunctionToolCallResult(){return await this.done(),ce(this,ns,"m",vC).call(this)}async totalUsage(){return await this.done(),ce(this,ns,"m",wC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=ce(this,ns,"m",Jb).call(this);n&&this._emit("finalMessage",n);const r=ce(this,ns,"m",bC).call(this);r&&this._emit("finalContent",r);const s=ce(this,ns,"m",xC).call(this);s&&this._emit("finalFunctionToolCall",s);const a=ce(this,ns,"m",vC).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",ce(this,ns,"m",wC).call(this))}async _createChatCompletion(t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ce(this,ns,"m",$8).call(this,n);const a=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(sN(a,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runTools(t,n,r){const s="tool",{tool_choice:a="auto",stream:i,...o}=n,u=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:h=k_e}=r||{},f=n.tools.map(b=>{if(Fm(b)){if(!b.$callback)throw new it("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),m={};for(const b of f)b.type==="function"&&(m[b.function.name||b.function.function.name]=b.function);const g="tools"in n?f.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<h;++b){const x=(await this._createChatCompletion(t,{...o,tool_choice:a,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!x)throw new it("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const S of x.tool_calls){if(S.type!=="function")continue;const k=S.id,{name:C,arguments:T}=S.function,P=m[C];if(P){if(u&&u!==C){const j=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:s,tool_call_id:k,content:j});continue}}else{const j=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(m).map(se=>JSON.stringify(se)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:k,content:j});continue}let D;try{D=__e(P)?await P.parse(T):T}catch(j){const se=j instanceof Error?j.message:String(j);this._addMessage({role:s,tool_call_id:k,content:se});continue}const R=await P.function(D,this),U=ce(this,ns,"m",L8).call(this,R);if(this._addMessage({role:s,tool_call_id:k,content:U}),u)return}}}}ns=new WeakSet,bC=function(){return ce(this,ns,"m",Jb).call(this).content??null},Jb=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(Kb(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new it("stream ended without producing a ChatCompletionMessage with role=assistant")},xC=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Kb(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},vC=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(M8(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},wC=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},$8=function(t){if(t.n!=null&&t.n>1)throw new it("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},L8=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class iN extends z8{static runTools(t,n,r){const s=new iN,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}_addMessage(t,n=!0){super._addMessage(t,n),Kb(t)&&t.content&&this._emit("content",t.content)}}const U8=1,F8=2,B8=4,H8=8,q8=16,V8=32,G8=64,K8=128,Z8=256,W8=K8|Z8,J8=q8|V8|W8|G8,Y8=U8|F8|J8,Q8=B8|H8,S_e=Y8|Q8,vr={STR:U8,NUM:F8,ARR:B8,OBJ:H8,NULL:q8,BOOL:V8,NAN:G8,INFINITY:K8,MINUS_INFINITY:Z8,INF:W8,SPECIAL:J8,ATOM:Y8,COLLECTION:Q8,ALL:S_e};class T_e extends Error{}class C_e extends Error{}function E_e(e,t=vr.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return j_e(e.trim(),t)}const j_e=(e,t)=>{const n=e.length;let r=0;const s=g=>{throw new T_e(`${g} at position ${r}`)},a=g=>{throw new C_e(`${g} at position ${r}`)},i=()=>(m(),r>=n&&s("Unexpected end of input"),e[r]==='"'?o():e[r]==="{"?u():e[r]==="["?h():e.substring(r,r+4)==="null"||vr.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||vr.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||vr.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||vr.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||vr.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||vr.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):f()),o=()=>{const g=r;let b=!1;for(r++;r<n&&(e[r]!=='"'||b&&e[r-1]==="\\");)b=e[r]==="\\"?!b:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(g,++r-Number(b)))}catch(w){a(String(w))}else if(vr.STR&t)try{return JSON.parse(e.substring(g,r-Number(b))+'"')}catch{return JSON.parse(e.substring(g,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},u=()=>{r++,m();const g={};try{for(;e[r]!=="}";){if(m(),r>=n&&vr.OBJ&t)return g;const b=o();m(),r++;try{const w=i();Object.defineProperty(g,b,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(vr.OBJ&t)return g;throw w}m(),e[r]===","&&r++}}catch{if(vr.OBJ&t)return g;s("Expected '}' at end of object")}return r++,g},h=()=>{r++;const g=[];try{for(;e[r]!=="]";)g.push(i()),m(),e[r]===","&&r++}catch{if(vr.ARR&t)return g;s("Expected ']' at end of array")}return r++,g},f=()=>{if(r===0){e==="-"&&vr.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(b){if(vr.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(b))}}const g=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(vr.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(g,r))}catch{e.substring(g,r)==="-"&&vr.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(g,e.lastIndexOf("e")))}catch(w){a(String(w))}}},m=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return i()},y$=e=>E_e(e,vr.ALL^vr.NUM);var sr,ho,Gu,hl,Q1,u0,X1,eS,tS,d0,nS,b$;class im extends z8{constructor(t){super(),sr.add(this),ho.set(this,void 0),Gu.set(this,void 0),hl.set(this,void 0),mt(this,ho,t),mt(this,Gu,[])}get currentChatCompletionSnapshot(){return ce(this,hl,"f")}static fromReadableStream(t){const n=new im(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new im(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ce(this,sr,"m",Q1).call(this);const a=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const i of a)ce(this,sr,"m",X1).call(this,i);if(a.controller.signal?.aborted)throw new Zs;return this._addChatCompletion(ce(this,sr,"m",d0).call(this))}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,sr,"m",Q1).call(this),this._connected();const s=am.fromReadableStream(t,this.controller);let a;for await(const i of s)a&&a!==i.id&&this._addChatCompletion(ce(this,sr,"m",d0).call(this)),ce(this,sr,"m",X1).call(this,i),a=i.id;if(s.controller.signal?.aborted)throw new Zs;return this._addChatCompletion(ce(this,sr,"m",d0).call(this))}[(ho=new WeakMap,Gu=new WeakMap,hl=new WeakMap,sr=new WeakSet,Q1=function(){this.ended||mt(this,hl,void 0)},u0=function(n){let r=ce(this,Gu,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ce(this,Gu,"f")[n.index]=r,r)},X1=function(n){if(this.ended)return;const r=ce(this,sr,"m",b$).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const i=ce(this,sr,"m",u0).call(this,a);a.finish_reason&&(ce(this,sr,"m",tS).call(this,a),i.current_tool_call_index!=null&&ce(this,sr,"m",eS).call(this,a,i.current_tool_call_index));for(const o of s.delta.tool_calls??[])i.current_tool_call_index!==o.index&&(ce(this,sr,"m",tS).call(this,a),i.current_tool_call_index!=null&&ce(this,sr,"m",eS).call(this,a,i.current_tool_call_index)),i.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const u=a.message.tool_calls?.[o.index];u?.type&&(u?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:u.function?.name,index:o.index,arguments:u.function.arguments,parsed_arguments:u.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(u?.type,void 0))}}},eS=function(n,r){if(ce(this,sr,"m",u0).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const i=ce(this,ho,"f")?.tools?.find(o=>Gb(o)&&o.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Fm(i)?i.$parseRaw(a.function.arguments):i?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},tS=function(n){const r=ce(this,sr,"m",u0).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ce(this,sr,"m",nS).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},d0=function(){if(this.ended)throw new it("stream has ended, this shouldn't happen");const n=ce(this,hl,"f");if(!n)throw new it("request ended without sending any chunks");return mt(this,hl,void 0),mt(this,Gu,[]),N_e(n,ce(this,ho,"f"))},nS=function(){const n=ce(this,ho,"f")?.response_format;return rN(n)?n:null},b$=function(n){var r,s,a,i;let o=ce(this,hl,"f");const{choices:u,...h}=n;o?Object.assign(o,h):o=mt(this,hl,{...h,choices:[]});for(const{delta:f,finish_reason:m,index:g,logprobs:b=null,...w}of n.choices){let x=o.choices[g];if(x||(x=o.choices[g]={finish_reason:m,index:g,message:{},logprobs:b,...w}),b)if(!x.logprobs)x.logprobs=Object.assign({},b);else{const{content:R,refusal:U,...j}=b;Object.assign(x.logprobs,j),R&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...R)),U&&((s=x.logprobs).refusal??(s.refusal=[]),x.logprobs.refusal.push(...U))}if(m&&(x.finish_reason=m,ce(this,ho,"f")&&R8(ce(this,ho,"f")))){if(m==="length")throw new h8;if(m==="content_filter")throw new f8}if(Object.assign(x,w),!f)continue;const{content:S,refusal:k,function_call:C,role:T,tool_calls:P,...D}=f;if(Object.assign(x.message,D),k&&(x.message.refusal=(x.message.refusal||"")+k),T&&(x.message.role=T),C&&(x.message.function_call?(C.name&&(x.message.function_call.name=C.name),C.arguments&&((a=x.message.function_call).arguments??(a.arguments=""),x.message.function_call.arguments+=C.arguments)):x.message.function_call=C),S&&(x.message.content=(x.message.content||"")+S,!x.message.refusal&&ce(this,sr,"m",nS).call(this)&&(x.message.parsed=y$(x.message.content))),P){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:R,id:U,type:j,function:se,...B}of P){const ee=(i=x.message.tool_calls)[R]??(i[R]={});Object.assign(ee,B),U&&(ee.id=U),j&&(ee.type=j),se&&(ee.function??(ee.function={name:se.name??"",arguments:""})),se?.name&&(ee.function.name=se.name),se?.arguments&&(ee.function.arguments+=se.arguments,v_e(ce(this,ho,"f"),ee)&&(ee.function.parsed_arguments=y$(ee.function.arguments)))}}}return o},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,i)=>n.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new am(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function N_e(e,t){const{id:n,choices:r,created:s,model:a,system_fingerprint:i,...o}=e,u={...o,id:n,choices:r.map(({message:h,finish_reason:f,index:m,logprobs:g,...b})=>{if(!f)throw new it(`missing finish_reason for choice ${m}`);const{content:w=null,function_call:x,tool_calls:S,...k}=h,C=h.role;if(!C)throw new it(`missing role for choice ${m}`);if(x){const{arguments:T,name:P}=x;if(T==null)throw new it(`missing function_call.arguments for choice ${m}`);if(!P)throw new it(`missing function_call.name for choice ${m}`);return{...b,message:{content:w,function_call:{arguments:T,name:P},role:C,refusal:h.refusal??null},finish_reason:f,index:m,logprobs:g}}return S?{...b,index:m,finish_reason:f,logprobs:g,message:{...k,role:C,content:w,refusal:h.refusal??null,tool_calls:S.map((T,P)=>{const{function:D,type:R,id:U,...j}=T,{arguments:se,name:B,...ee}=D||{};if(U==null)throw new it(`missing choices[${m}].tool_calls[${P}].id
${h0(e)}`);if(R==null)throw new it(`missing choices[${m}].tool_calls[${P}].type
${h0(e)}`);if(B==null)throw new it(`missing choices[${m}].tool_calls[${P}].function.name
${h0(e)}`);if(se==null)throw new it(`missing choices[${m}].tool_calls[${P}].function.arguments
${h0(e)}`);return{...j,id:U,type:R,function:{...ee,name:B,arguments:se}}})}}:{...b,message:{...k,content:w,role:C,refusal:h.refusal??null},finish_reason:f,index:m,logprobs:g}}),created:s,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return y_e(u,t)}function h0(e){return JSON.stringify(e)}class Yb extends im{static fromReadableStream(t){const n=new Yb(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,r){const s=new Yb(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,a)),s}}let oN=class extends st{constructor(){super(...arguments),this.messages=new O8(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(Ae`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(Ae`/chat/completions/${t}`,{body:n,...r})}list(t={},n){return this._client.getAPIList("/chat/completions",Xn,{query:t,...n})}delete(t,n){return this._client.delete(Ae`/chat/completions/${t}`,n)}parse(t,n){return w_e(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>sN(r,t))}runTools(t,n){return t.stream?Yb.runTools(this._client,t,n):iN.runTools(this._client,t,n)}stream(t,n){return im.createChatCompletion(this._client,t,n)}};oN.Messages=O8;let lN=class extends st{constructor(){super(...arguments),this.completions=new oN(this._client)}};lN.Completions=oN;const X8=Symbol("brand.privateNullableHeaders");function*A_e(e){if(!e)return;if(X8 in e){const{values:r,nulls:s}=e;yield*r.entries();for(const a of s)yield[a,null];return}let t=!1,n;e instanceof Headers?n=e.entries():n$(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=n$(r[1])?r[1]:[r[1]];let i=!1;for(const o of a)o!==void 0&&(t&&!i&&(i=!0,yield[s,null]),yield[s,o])}}const Ge=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[a,i]of A_e(r)){const o=a.toLowerCase();s.has(o)||(t.delete(a),s.add(o)),i===null?(t.delete(a),n.add(o)):(t.append(a,i),n.delete(o))}}return{[X8]:!0,values:t,nulls:n}};let eH=class extends st{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:Ge([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}},tH=class extends st{create(t,n){return this._client.post("/audio/transcriptions",Kc({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}},nH=class extends st{create(t,n){return this._client.post("/audio/translations",Kc({body:t,...n,__metadata:{model:t.model}},this._client))}},Bm=class extends st{constructor(){super(...arguments),this.transcriptions=new tH(this._client),this.translations=new nH(this._client),this.speech=new eH(this._client)}};Bm.Transcriptions=tH;Bm.Translations=nH;Bm.Speech=eH;let rH=class extends st{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(Ae`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",Xn,{query:t,...n})}cancel(t,n){return this._client.post(Ae`/batches/${t}/cancel`,n)}};class sH extends st{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(Ae`/assistants/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(Ae`/assistants/${t}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t={},n){return this._client.getAPIList("/assistants",Xn,{query:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(Ae`/assistants/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let aH=class extends st{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class iH extends st{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let uv=class extends st{constructor(){super(...arguments),this.sessions=new aH(this._client),this.transcriptionSessions=new iH(this._client)}};uv.Sessions=aH;uv.TranscriptionSessions=iH;class oH extends st{create(t,n){return this._client.post("/chatkit/sessions",{body:t,...n,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(t,n){return this._client.post(Ae`/chatkit/sessions/${t}/cancel`,{...n,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let lH=class extends st{retrieve(t,n){return this._client.get(Ae`/chatkit/threads/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(t={},n){return this._client.getAPIList("/chatkit/threads",Vb,{query:t,...n,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(t,n){return this._client.delete(Ae`/chatkit/threads/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(t,n={},r){return this._client.getAPIList(Ae`/chatkit/threads/${t}/items`,Vb,{query:n,...r,headers:Ge([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class dv extends st{constructor(){super(...arguments),this.sessions=new oH(this._client),this.threads=new lH(this._client)}}dv.Sessions=oH;dv.Threads=lH;class cH extends st{create(t,n,r){return this._client.post(Ae`/threads/${t}/messages`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{thread_id:s}=n;return this._client.get(Ae`/threads/${s}/messages/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{thread_id:s,...a}=n;return this._client.post(Ae`/threads/${s}/messages/${t}`,{body:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(Ae`/threads/${t}/messages`,Xn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n,r){const{thread_id:s}=n;return this._client.delete(Ae`/threads/${s}/messages/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class uH extends st{retrieve(t,n,r){const{thread_id:s,run_id:a,...i}=n;return this._client.get(Ae`/threads/${s}/runs/${a}/steps/${t}`,{query:i,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(Ae`/threads/${s}/runs/${t}/steps`,Xn,{query:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const I_e=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var O_e={};const Ku=e=>{if(typeof globalThis.process<"u")return O_e?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var Dr,Ic,_C,Ci,K0,Ja,Oc,bd,Tc,Qb,Gs,Z0,W0,Ep,pp,mp,x$,v$,w$,_$,k$,S$,T$;class jp extends aN{constructor(){super(...arguments),Dr.add(this),_C.set(this,[]),Ci.set(this,{}),K0.set(this,{}),Ja.set(this,void 0),Oc.set(this,void 0),bd.set(this,void 0),Tc.set(this,void 0),Qb.set(this,void 0),Gs.set(this,void 0),Z0.set(this,void 0),W0.set(this,void 0),Ep.set(this,void 0)}[(_C=new WeakMap,Ci=new WeakMap,K0=new WeakMap,Ja=new WeakMap,Oc=new WeakMap,bd=new WeakMap,Tc=new WeakMap,Qb=new WeakMap,Gs=new WeakMap,Z0=new WeakMap,W0=new WeakMap,Ep=new WeakMap,Dr=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,i)=>n.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Ic;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=am.fromReadableStream(t,this.controller);for await(const a of s)ce(this,Dr,"m",pp).call(this,a);if(s.controller.signal?.aborted)throw new Zs;return this._addRun(ce(this,Dr,"m",mp).call(this))}toReadableStream(){return new am(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s){const a=new Ic;return a._run(()=>a._runToolAssistantStream(t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},o=await t.submitToolOutputs(n,i,{...s,signal:this.controller.signal});this._connected();for await(const u of o)ce(this,Dr,"m",pp).call(this,u);if(o.controller.signal?.aborted)throw new Zs;return this._addRun(ce(this,Dr,"m",mp).call(this))}static createThreadAssistantStream(t,n,r){const s=new Ic;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const a=new Ic;return a._run(()=>a._runAssistantStream(t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ce(this,Z0,"f")}currentRun(){return ce(this,W0,"f")}currentMessageSnapshot(){return ce(this,Ja,"f")}currentRunStepSnapshot(){return ce(this,Ep,"f")}async finalRunSteps(){return await this.done(),Object.values(ce(this,Ci,"f"))}async finalMessages(){return await this.done(),Object.values(ce(this,K0,"f"))}async finalRun(){if(await this.done(),!ce(this,Oc,"f"))throw Error("Final run was not received.");return ce(this,Oc,"f")}async _createThreadAssistantStream(t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},i=await t.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const o of i)ce(this,Dr,"m",pp).call(this,o);if(i.controller.signal?.aborted)throw new Zs;return this._addRun(ce(this,Dr,"m",mp).call(this))}async _createAssistantStream(t,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},o=await t.create(n,i,{...s,signal:this.controller.signal});this._connected();for await(const u of o)ce(this,Dr,"m",pp).call(this,u);if(o.controller.signal?.aborted)throw new Zs;return this._addRun(ce(this,Dr,"m",mp).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let a=t[r];if(a==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(W1(a)&&W1(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...s);continue}for(const i of s){if(!W1(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const u=a[o];u==null?a.push(i):a[o]=this.accumulateDelta(u,i)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);t[r]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s){return await this._createToolAssistantStream(n,t,r,s)}}Ic=jp,pp=function(t){if(!this.ended)switch(mt(this,Z0,t),ce(this,Dr,"m",w$).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ce(this,Dr,"m",T$).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Dr,"m",v$).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ce(this,Dr,"m",x$).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},mp=function(){if(this.ended)throw new it("stream has ended, this shouldn't happen");if(!ce(this,Oc,"f"))throw Error("Final run has not been received");return ce(this,Oc,"f")},x$=function(t){const[n,r]=ce(this,Dr,"m",k$).call(this,t,ce(this,Ja,"f"));mt(this,Ja,n),ce(this,K0,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,i=n.content[s.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ce(this,bd,"f")){if(ce(this,Tc,"f"))switch(ce(this,Tc,"f").type){case"text":this._emit("textDone",ce(this,Tc,"f").text,ce(this,Ja,"f"));break;case"image_file":this._emit("imageFileDone",ce(this,Tc,"f").image_file,ce(this,Ja,"f"));break}mt(this,bd,s.index)}mt(this,Tc,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ce(this,bd,"f")!==void 0){const s=t.data.content[ce(this,bd,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ce(this,Ja,"f"));break;case"text":this._emit("textDone",s.text,ce(this,Ja,"f"));break}}ce(this,Ja,"f")&&this._emit("messageDone",t.data),mt(this,Ja,void 0)}},v$=function(t){const n=ce(this,Dr,"m",_$).call(this,t);switch(mt(this,Ep,n),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==ce(this,Qb,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ce(this,Gs,"f")&&this._emit("toolCallDone",ce(this,Gs,"f")),mt(this,Qb,a.index),mt(this,Gs,n.step_details.tool_calls[a.index]),ce(this,Gs,"f")&&this._emit("toolCallCreated",ce(this,Gs,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":mt(this,Ep,void 0),t.data.step_details.type=="tool_calls"&&ce(this,Gs,"f")&&(this._emit("toolCallDone",ce(this,Gs,"f")),mt(this,Gs,void 0)),this._emit("runStepDone",t.data,n);break}},w$=function(t){ce(this,_C,"f").push(t),this._emit("event",t)},_$=function(t){switch(t.event){case"thread.run.step.created":return ce(this,Ci,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=ce(this,Ci,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=Ic.accumulateDelta(n,r.delta);ce(this,Ci,"f")[t.data.id]=s}return ce(this,Ci,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ce(this,Ci,"f")[t.data.id]=t.data;break}if(ce(this,Ci,"f")[t.data.id])return ce(this,Ci,"f")[t.data.id];throw new Error("No snapshot available")},k$=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let i=n.content[a.index];n.content[a.index]=ce(this,Dr,"m",S$).call(this,a,i)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},S$=function(t,n){return Ic.accumulateDelta(n,t)},T$=function(t){switch(mt(this,W0,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":mt(this,Oc,t.data),ce(this,Gs,"f")&&(this._emit("toolCallDone",ce(this,Gs,"f")),mt(this,Gs,void 0));break}};let cN=class extends st{constructor(){super(...arguments),this.steps=new uH(this._client)}create(t,n,r){const{include:s,...a}=n;return this._client.post(Ae`/threads/${t}/runs`,{query:{include:s},body:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(t,n,r){const{thread_id:s}=n;return this._client.get(Ae`/threads/${s}/runs/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{thread_id:s,...a}=n;return this._client.post(Ae`/threads/${s}/runs/${t}`,{body:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(Ae`/threads/${t}/runs`,Xn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(t,n,r){const{thread_id:s}=n;return this._client.post(Ae`/threads/${s}/runs/${t}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(s.id,{thread_id:t},r)}createAndStream(t,n,r){return jp.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s=Ge([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(t,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(o=h)}}await Um(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,n,r){return jp.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r){const{thread_id:s,...a}=n;return this._client.post(Ae`/threads/${s}/runs/${t}/submit_tool_outputs`,{body:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(t,n,r){const s=await this.submitToolOutputs(t,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(t,n,r){return jp.createToolAssistantStream(t,this._client.beta.threads.runs,n,r)}};cN.Steps=uH;class hv extends st{constructor(){super(...arguments),this.runs=new cN(this._client),this.messages=new cH(this._client)}create(t={},n){return this._client.post("/threads",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(Ae`/threads/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(Ae`/threads/${t}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n){return this._client.delete(Ae`/threads/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(t,n){return jp.createThreadAssistantStream(t,this._client.beta.threads,n)}}hv.Runs=cN;hv.Messages=cH;class xh extends st{constructor(){super(...arguments),this.realtime=new uv(this._client),this.chatkit=new dv(this._client),this.assistants=new sH(this._client),this.threads=new hv(this._client)}}xh.Realtime=uv;xh.ChatKit=dv;xh.Assistants=sH;xh.Threads=hv;let dH=class extends st{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}};class hH extends st{retrieve(t,n,r){const{container_id:s}=n;return this._client.get(Ae`/containers/${s}/files/${t}/content`,{...r,headers:Ge([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let uN=class extends st{constructor(){super(...arguments),this.content=new hH(this._client)}create(t,n,r){return this._client.post(Ae`/containers/${t}/files`,Kc({body:n,...r},this._client))}retrieve(t,n,r){const{container_id:s}=n;return this._client.get(Ae`/containers/${s}/files/${t}`,r)}list(t,n={},r){return this._client.getAPIList(Ae`/containers/${t}/files`,Xn,{query:n,...r})}delete(t,n,r){const{container_id:s}=n;return this._client.delete(Ae`/containers/${s}/files/${t}`,{...r,headers:Ge([{Accept:"*/*"},r?.headers])})}};uN.Content=hH;class dN extends st{constructor(){super(...arguments),this.files=new uN(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(Ae`/containers/${t}`,n)}list(t={},n){return this._client.getAPIList("/containers",Xn,{query:t,...n})}delete(t,n){return this._client.delete(Ae`/containers/${t}`,{...n,headers:Ge([{Accept:"*/*"},n?.headers])})}}dN.Files=uN;class fH extends st{create(t,n,r){const{include:s,...a}=n;return this._client.post(Ae`/conversations/${t}/items`,{query:{include:s},body:a,...r})}retrieve(t,n,r){const{conversation_id:s,...a}=n;return this._client.get(Ae`/conversations/${s}/items/${t}`,{query:a,...r})}list(t,n={},r){return this._client.getAPIList(Ae`/conversations/${t}/items`,Vb,{query:n,...r})}delete(t,n,r){const{conversation_id:s}=n;return this._client.delete(Ae`/conversations/${s}/items/${t}`,r)}}class hN extends st{constructor(){super(...arguments),this.items=new fH(this._client)}create(t={},n){return this._client.post("/conversations",{body:t,...n})}retrieve(t,n){return this._client.get(Ae`/conversations/${t}`,n)}update(t,n,r){return this._client.post(Ae`/conversations/${t}`,{body:n,...r})}delete(t,n){return this._client.delete(Ae`/conversations/${t}`,n)}}hN.Items=fH;let pH=class extends st{create(t,n){const r=!!t.encoding_format;let s=r?t.encoding_format:"base64";r&&Mr(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const a=this._client.post("/embeddings",{body:{...t,encoding_format:s},...n});return r?a:(Mr(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const u=o.embedding;o.embedding=I_e(u)}),i)))}};class mH extends st{retrieve(t,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(Ae`/evals/${s}/runs/${a}/output_items/${t}`,r)}list(t,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(Ae`/evals/${s}/runs/${t}/output_items`,Xn,{query:a,...r})}}class fN extends st{constructor(){super(...arguments),this.outputItems=new mH(this._client)}create(t,n,r){return this._client.post(Ae`/evals/${t}/runs`,{body:n,...r})}retrieve(t,n,r){const{eval_id:s}=n;return this._client.get(Ae`/evals/${s}/runs/${t}`,r)}list(t,n={},r){return this._client.getAPIList(Ae`/evals/${t}/runs`,Xn,{query:n,...r})}delete(t,n,r){const{eval_id:s}=n;return this._client.delete(Ae`/evals/${s}/runs/${t}`,r)}cancel(t,n,r){const{eval_id:s}=n;return this._client.post(Ae`/evals/${s}/runs/${t}`,r)}}fN.OutputItems=mH;class pN extends st{constructor(){super(...arguments),this.runs=new fN(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(Ae`/evals/${t}`,n)}update(t,n,r){return this._client.post(Ae`/evals/${t}`,{body:n,...r})}list(t={},n){return this._client.getAPIList("/evals",Xn,{query:t,...n})}delete(t,n){return this._client.delete(Ae`/evals/${t}`,n)}}pN.Runs=fN;let gH=class extends st{create(t,n){return this._client.post("/files",Kc({body:t,...n},this._client))}retrieve(t,n){return this._client.get(Ae`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",Xn,{query:t,...n})}delete(t,n){return this._client.delete(Ae`/files/${t}`,n)}content(t,n){return this._client.get(Ae`/files/${t}/content`,{...n,headers:Ge([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(t);for(;!i.status||!s.has(i.status);)if(await Um(n),i=await this.retrieve(t),Date.now()-a>r)throw new ov({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return i}};class yH extends st{}let bH=class extends st{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class mN extends st{constructor(){super(...arguments),this.graders=new bH(this._client)}}mN.Graders=bH;class xH extends st{create(t,n,r){return this._client.getAPIList(Ae`/fine_tuning/checkpoints/${t}/permissions`,cv,{body:n,method:"post",...r})}retrieve(t,n={},r){return this._client.get(Ae`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...r})}delete(t,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(Ae`/fine_tuning/checkpoints/${s}/permissions/${t}`,r)}}let gN=class extends st{constructor(){super(...arguments),this.permissions=new xH(this._client)}};gN.Permissions=xH;class vH extends st{list(t,n={},r){return this._client.getAPIList(Ae`/fine_tuning/jobs/${t}/checkpoints`,Xn,{query:n,...r})}}class yN extends st{constructor(){super(...arguments),this.checkpoints=new vH(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(Ae`/fine_tuning/jobs/${t}`,n)}list(t={},n){return this._client.getAPIList("/fine_tuning/jobs",Xn,{query:t,...n})}cancel(t,n){return this._client.post(Ae`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return this._client.getAPIList(Ae`/fine_tuning/jobs/${t}/events`,Xn,{query:n,...r})}pause(t,n){return this._client.post(Ae`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(Ae`/fine_tuning/jobs/${t}/resume`,n)}}yN.Checkpoints=vH;class vh extends st{constructor(){super(...arguments),this.methods=new yH(this._client),this.jobs=new yN(this._client),this.checkpoints=new gN(this._client),this.alpha=new mN(this._client)}}vh.Methods=yH;vh.Jobs=yN;vh.Checkpoints=gN;vh.Alpha=mN;class wH extends st{}class bN extends st{constructor(){super(...arguments),this.graderModels=new wH(this._client)}}bN.GraderModels=wH;class _H extends st{createVariation(t,n){return this._client.post("/images/variations",Kc({body:t,...n},this._client))}edit(t,n){return this._client.post("/images/edits",Kc({body:t,...n,stream:t.stream??!1},this._client))}generate(t,n){return this._client.post("/images/generations",{body:t,...n,stream:t.stream??!1})}}let kH=class extends st{retrieve(t,n){return this._client.get(Ae`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",cv,t)}delete(t,n){return this._client.delete(Ae`/models/${t}`,n)}};class SH extends st{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class TH extends st{accept(t,n,r){return this._client.post(Ae`/realtime/calls/${t}/accept`,{body:n,...r,headers:Ge([{Accept:"*/*"},r?.headers])})}hangup(t,n){return this._client.post(Ae`/realtime/calls/${t}/hangup`,{...n,headers:Ge([{Accept:"*/*"},n?.headers])})}refer(t,n,r){return this._client.post(Ae`/realtime/calls/${t}/refer`,{body:n,...r,headers:Ge([{Accept:"*/*"},r?.headers])})}reject(t,n={},r){return this._client.post(Ae`/realtime/calls/${t}/reject`,{body:n,...r,headers:Ge([{Accept:"*/*"},r?.headers])})}}class CH extends st{create(t,n){return this._client.post("/realtime/client_secrets",{body:t,...n})}}class fv extends st{constructor(){super(...arguments),this.clientSecrets=new CH(this._client),this.calls=new TH(this._client)}}fv.ClientSecrets=CH;fv.Calls=TH;function R_e(e,t){return!t||!M_e(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:EH(e,t)}function EH(e,t){const n=e.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:L_e(t,s)};if(s.type==="message"){const a=s.content.map(i=>i.type==="output_text"?{...i,parsed:P_e(t,i.text)}:i);return{...s,content:a}}return s}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||kC(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function P_e(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function M_e(e){return!!rN(e.text?.format)}function D_e(e){return e?.$brand==="auto-parseable-tool"}function $_e(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function L_e(e,t){const n=$_e(e.tools??[],t.name);return{...t,...t,parsed_arguments:D_e(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function kC(e){const t=[];for(const n of e.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&t.push(r.text);e.output_text=t.join("")}var Zu,f0,fl,p0,C$,E$,j$,N$;class xN extends aN{constructor(t){super(),Zu.add(this),f0.set(this,void 0),fl.set(this,void 0),p0.set(this,void 0),mt(this,f0,t)}static createResponse(t,n,r){const s=new xN(n);return s._run(()=>s._createOrRetrieveResponse(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ce(this,Zu,"m",C$).call(this);let a,i=null;"response_id"in n?(a=await t.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),i=n.starting_after??null):a=await t.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of a)ce(this,Zu,"m",E$).call(this,o,i);if(a.controller.signal?.aborted)throw new Zs;return ce(this,Zu,"m",j$).call(this)}[(f0=new WeakMap,fl=new WeakMap,p0=new WeakMap,Zu=new WeakSet,C$=function(){this.ended||mt(this,fl,void 0)},E$=function(n,r){if(this.ended)return;const s=(i,o)=>{(r==null||o.sequence_number>r)&&this._emit(i,o)},a=ce(this,Zu,"m",N$).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const i=a.output[n.output_index];if(!i)throw new it(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new it(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new it(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=a.output[n.output_index];if(!i)throw new it(`missing output at index ${n.output_index}`);i.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:i.arguments});break}default:s(n.type,n);break}},j$=function(){if(this.ended)throw new it("stream has ended, this shouldn't happen");const n=ce(this,fl,"f");if(!n)throw new it("request ended without sending any events");mt(this,fl,void 0);const r=z_e(n,ce(this,f0,"f"));return mt(this,p0,r),r},N$=function(n){let r=ce(this,fl,"f");if(!r){if(n.type!=="response.created")throw new it(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=mt(this,fl,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new it(`missing output at index ${n.output_index}`);const a=s.type,i=n.part;a==="message"&&i.type!=="reasoning_text"?s.content.push(i):a==="reasoning"&&i.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(i));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new it(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new it(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new it(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new it(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new it(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new it(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new it(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{mt(this,fl,n.response);break}}return r},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,i)=>n.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=ce(this,p0,"f");if(!t)throw new it("stream ended without producing a ChatCompletion");return t}}function z_e(e,t){return R_e(e,t)}class jH extends st{list(t,n={},r){return this._client.getAPIList(Ae`/responses/${t}/input_items`,Xn,{query:n,...r})}}class NH extends st{count(t={},n){return this._client.post("/responses/input_tokens",{body:t,...n})}}class pv extends st{constructor(){super(...arguments),this.inputItems=new jH(this._client),this.inputTokens=new NH(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&kC(r),r))}retrieve(t,n={},r){return this._client.get(Ae`/responses/${t}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&kC(s),s))}delete(t,n){return this._client.delete(Ae`/responses/${t}`,{...n,headers:Ge([{Accept:"*/*"},n?.headers])})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(r=>EH(r,t))}stream(t,n){return xN.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(Ae`/responses/${t}/cancel`,n)}compact(t,n){return this._client.post("/responses/compact",{body:t,...n})}}pv.InputItems=jH;pv.InputTokens=NH;class AH extends st{create(t,n,r){return this._client.post(Ae`/uploads/${t}/parts`,Kc({body:n,...r},this._client))}}class vN extends st{constructor(){super(...arguments),this.parts=new AH(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(Ae`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(Ae`/uploads/${t}/complete`,{body:n,...r})}}vN.Parts=AH;const U_e=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};class IH extends st{create(t,n,r){return this._client.post(Ae`/vector_stores/${t}/file_batches`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{vector_store_id:s}=n;return this._client.get(Ae`/vector_stores/${s}/file_batches/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(t,n,r){const{vector_store_id:s}=n;return this._client.post(Ae`/vector_stores/${s}/file_batches/${t}/cancel`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(Ae`/vector_stores/${s}/file_batches/${t}/files`,Xn,{query:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(t,n,r){const s=Ge([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(n,{vector_store_id:t},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(o=h)}}await Um(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,i=Math.min(a,n.length),o=this._client,u=n.values(),h=[...r];async function f(g){for(let b of g){const w=await o.files.create({file:b,purpose:"assistants"},s);h.push(w.id)}}const m=Array(i).fill(u).map(f);return await U_e(m),await this.createAndPoll(t,{file_ids:h})}}let OH=class extends st{create(t,n,r){return this._client.post(Ae`/vector_stores/${t}/files`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{vector_store_id:s}=n;return this._client.get(Ae`/vector_stores/${s}/files/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{vector_store_id:s,...a}=n;return this._client.post(Ae`/vector_stores/${s}/files/${t}`,{body:a,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(Ae`/vector_stores/${t}/files`,Xn,{query:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n,r){const{vector_store_id:s}=n;return this._client.delete(Ae`/vector_stores/${s}/files/${t}`,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s=Ge([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:t},{...r,headers:s}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const u=a.response.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(o=h)}}await Um(o);break;case"failed":case"completed":return i}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}content(t,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(Ae`/vector_stores/${s}/files/${t}/content`,cv,{...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};class mv extends st{constructor(){super(...arguments),this.files=new OH(this._client),this.fileBatches=new IH(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(Ae`/vector_stores/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(Ae`/vector_stores/${t}`,{body:n,...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t={},n){return this._client.getAPIList("/vector_stores",Xn,{query:t,...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(Ae`/vector_stores/${t}`,{...n,headers:Ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(t,n,r){return this._client.getAPIList(Ae`/vector_stores/${t}/search`,cv,{body:n,method:"post",...r,headers:Ge([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}mv.Files=OH;mv.FileBatches=IH;class RH extends st{create(t,n){return this._client.post("/videos",p$({body:t,...n},this._client))}retrieve(t,n){return this._client.get(Ae`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",Vb,{query:t,...n})}delete(t,n){return this._client.delete(Ae`/videos/${t}`,n)}downloadContent(t,n={},r){return this._client.get(Ae`/videos/${t}/content`,{query:n,...r,headers:Ge([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(t,n,r){return this._client.post(Ae`/videos/${t}/remix`,p$({body:n,...r},this._client))}}var id,PH,J0;class MH extends st{constructor(){super(...arguments),id.add(this)}async unwrap(t,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(t,n,r,s),JSON.parse(t)}async verifySignature(t,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ce(this,id,"m",PH).call(this,r);const a=Ge([n]).values,i=ce(this,id,"m",J0).call(this,a,"webhook-signature"),o=ce(this,id,"m",J0).call(this,a,"webhook-timestamp"),u=ce(this,id,"m",J0).call(this,a,"webhook-id"),h=parseInt(o,10);if(isNaN(h))throw new ip("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-h>s)throw new ip("Webhook timestamp is too old");if(h>f+s)throw new ip("Webhook timestamp is too new");const m=i.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),b=u?`${u}.${o}.${t}`:`${o}.${t}`,w=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of m)try{const S=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",w,S,new TextEncoder().encode(b)))return}catch{continue}throw new ip("The given webhook signature does not match the expected signature")}}id=new WeakSet,PH=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},J0=function(t,n){if(!t)throw new Error("Headers are required");const r=t.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var SC,wN,Y0,DH;class Et{constructor({baseURL:t=Ku("OPENAI_BASE_URL"),apiKey:n=Ku("OPENAI_API_KEY"),organization:r=Ku("OPENAI_ORG_ID")??null,project:s=Ku("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ku("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(SC.add(this),Y0.set(this,void 0),this.completions=new dH(this),this.chat=new lN(this),this.embeddings=new pH(this),this.files=new gH(this),this.images=new _H(this),this.audio=new Bm(this),this.moderations=new SH(this),this.models=new kH(this),this.fineTuning=new vh(this),this.graders=new bN(this),this.vectorStores=new mv(this),this.webhooks=new MH(this),this.beta=new xh(this),this.batches=new rH(this),this.uploads=new vN(this),this.responses=new pv(this),this.realtime=new fv(this),this.conversations=new hN(this),this.evals=new pN(this),this.containers=new dN(this),this.videos=new RH(this),n===void 0)throw new it("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:s,webhookSecret:a,...i,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Uwe())throw new it(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??wN.DEFAULT_TIMEOUT,this.logger=o.logger??console;const u="warn";this.logLevel=u,this.logLevel=h$(o.logLevel,"ClientOptions.logLevel",this)??h$(Ku("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??Vwe(),mt(this,Y0,Kwe),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}async authHeaders(t){return Ge([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return Xwe(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${sd}`}defaultIdempotencyKey(){return`stainless-node-retry-${r8()}`}makeStatusError(t,n,r,s){return Es.generate(t,n,r,s)}async _callApiKey(){const t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=await t()}catch(r){throw r instanceof it?r:new it(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new it(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(t,n,r){const s=!ce(this,SC,"m",DH).call(this)&&r||this.baseURL,a=Mwe(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return Dwe(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(t){await this._callApiKey()}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>({method:t,path:n,...s})))}request(t,n=null){return new T8(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){const s=await t,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:i,url:o,timeout:u}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(i,{url:o,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,m=Date.now();if(Mr(this).debug(`[${h}] sending request`,_c({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:i.headers})),s.signal?.aborted)throw new Zs;const g=new AbortController,b=await this.fetchWithTimeout(o,i,u,g).catch(dC),w=Date.now();if(b instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Zs;const C=uC(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Mr(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${k}`),Mr(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${k})`,_c({retryOfRequestLogID:r,url:o,durationMs:w-m,message:b.message})),this.retryRequest(s,n,r??h);throw Mr(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),Mr(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,_c({retryOfRequestLogID:r,url:o,durationMs:w-m,message:b.message})),C?new ov:new iv({cause:b})}const x=[...b.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${h}${f}${x}] ${i.method} ${o} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-m}ms`;if(!b.ok){const k=await this.shouldRetry(b);if(n&&k){const U=`retrying, ${n} attempts remaining`;return await Gwe(b.body),Mr(this).info(`${S} - ${U}`),Mr(this).debug(`[${h}] response error (${U})`,_c({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-m})),this.retryRequest(s,n,r??h,b.headers)}const C=k?"error; no more retries left":"error; not retryable";Mr(this).info(`${S} - ${C}`);const T=await b.text().catch(U=>dC(U).message),P=zwe(T),D=P?void 0:T;throw Mr(this).debug(`[${h}] response error (${C})`,_c({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:D,durationMs:Date.now()-m})),this.makeStatusError(b.status,P,D,b.headers)}return Mr(this).info(S),Mr(this).debug(`[${h}] response start`,_c({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-m})),{response:b,options:s,controller:g,requestLogID:h,retryOfRequestLogID:r,startTime:m}}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}requestAPIList(t,n){const r=this.makeRequest(n,null,void 0);return new l_e(this,r,t)}async fetchWithTimeout(t,n,r,s){const{signal:a,method:i,...o}=n||{};a&&a.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:s.signal,...h?{duplex:"half"}:{},method:"GET",...o};i&&(f.method=i.toUpperCase());try{return await this.fetch.call(void 0,t,f)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){let a;const i=s?.get("retry-after-ms");if(i){const u=parseFloat(i);Number.isNaN(u)||(a=u)}const o=s?.get("retry-after");if(o&&!a){const u=parseFloat(o);Number.isNaN(u)?a=Date.parse(o)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=t.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Um(a),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}async buildRequest(t,{retryCount:n=0}={}){const r={...t},{method:s,path:a,query:i,defaultBaseURL:o}=r,u=this.buildURL(a,i,o);"timeout"in r&&Lwe("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),m=await this.buildHeaders({options:t,method:s,bodyHeaders:h,retryCount:n});return{req:{method:s,headers:m,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:u,timeout:r.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const i=Ge([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...qwe(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=Ge([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:g8(t)}:ce(this,Y0,"f").call(this,{body:t,headers:r})}}wN=Et,Y0=new WeakMap,SC=new WeakSet,DH=function(){return this.baseURL!=="https://api.openai.com/v1"};Et.OpenAI=wN;Et.DEFAULT_TIMEOUT=6e5;Et.OpenAIError=it;Et.APIError=Es;Et.APIConnectionError=iv;Et.APIConnectionTimeoutError=ov;Et.APIUserAbortError=Zs;Et.NotFoundError=o8;Et.ConflictError=l8;Et.RateLimitError=u8;Et.BadRequestError=s8;Et.AuthenticationError=a8;Et.InternalServerError=d8;Et.PermissionDeniedError=i8;Et.UnprocessableEntityError=c8;Et.InvalidWebhookSignatureError=ip;Et.toFile=f_e;Et.Completions=dH;Et.Chat=lN;Et.Embeddings=pH;Et.Files=gH;Et.Images=_H;Et.Audio=Bm;Et.Moderations=SH;Et.Models=kH;Et.FineTuning=vh;Et.Graders=bN;Et.VectorStores=mv;Et.Webhooks=MH;Et.Beta=xh;Et.Batches=rH;Et.Uploads=vN;Et.Responses=pv;Et.Realtime=fv;Et.Conversations=hN;Et.Evals=pN;Et.Containers=dN;Et.Videos=RH;function _N(e){if(!e||typeof e!="object")return e;let t;return e.constructor.name===ov.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===Zs.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="AbortError"):"status"in e&&e.status===400&&"message"in e&&typeof e.message=="string"&&e.message.includes("tool_calls")?t=o0(e,"INVALID_TOOL_RESULTS"):"status"in e&&e.status===401?t=o0(e,"MODEL_AUTHENTICATION"):"status"in e&&e.status===429?t=o0(e,"MODEL_RATE_LIMIT"):"status"in e&&e.status===404?t=o0(e,"MODEL_NOT_FOUND"):t=e,t}const zc=e=>e();function Hm(e){return e?!!(/^o\d/.test(e??"")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat")):!1}function F_e(e){return e.role!=="system"&&e.role!=="developer"&&e.role!=="assistant"&&e.role!=="user"&&e.role!=="function"&&e.role!=="tool"&&console.warn(`Unknown message role: ${e.role}`),e.role}function Xb(e){const t=e.metadata?.filename??e.metadata?.name??e.metadata?.title;if(!t)throw new Error("a filename or name or title is needed via meta-data for OpenAI when working with multimodal blocks");return t}function qm(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!Bi.isInstance(e))throw new Error("Invalid generic chat message");return F_e(e);default:throw new Error(`Unknown message type: ${t}`)}}function B_e(e){return e.includes("gpt-5.2-pro")}function H_e(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:s,baseURL:a,azureADTokenProvider:i,azureOpenAIEndpoint:o}=e;if((r||i)&&s&&t)return`${s}/${t}`;if((r||i)&&o&&t)return`${o}/openai/deployments/${t}`;if(r||i){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${t}`}return a}function A$(e){return typeof Headers<"u"&&e!==null&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Headers]"}function q_e(e){const t=zc(()=>{if(A$(e))return e;if(Array.isArray(e))return new Headers(e);if(typeof e=="object"&&e!==null&&"values"in e&&A$(e.values))return e.values;if(typeof e=="object"&&e!==null){const n=Object.entries(e).filter(([,r])=>typeof r=="string").map(([r,s])=>[r,s]);return new Headers(n)}return new Headers});return Object.fromEntries(t.entries())}function V_e(){let e=hj();return(e==="node"||e==="deno")&&(e=`(${e}/${process.version}; ${process.platform}; ${process.arch})`),e}function G_e(e,t=!1,n="1.0.0"){const r=q_e(e),s=V_e(),a=`langchainjs${t?"-azure":""}-openai`;return{...r,"User-Agent":r["User-Agent"]?`${a}/${n} (${s})${r["User-Agent"]}`:`${a}/${n} (${s})`}}function K_e(e,t){let n;return Pl(e)?n=Hb(e):n=e,t?.strict!==void 0&&(n.function.strict=t.strict),n}function Z_e(e){return e.anyOf!==void 0&&Array.isArray(e.anyOf)}function W_e(e){const t=["namespace functions {",""];for(const n of e)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push($H(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join(`
`)}function $H(e,t){const n=[];for(const[r,s]of Object.entries(e.properties??{}))s.description&&t<2&&n.push(`// ${s.description}`),e.required?.includes(r)?n.push(`${r}: ${ex(s,t)},`):n.push(`${r}?: ${ex(s,t)},`);return n.map(r=>" ".repeat(t)+r).join(`
`)}function ex(e,t){if(Z_e(e))return e.anyOf.map(n=>ex(n,t)).join(" | ");switch(e.type){case"string":return e.enum?e.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",$H(e,t+2),"}"].join(`
`);case"array":return e.items?`${ex(e.items,t)}[]`:"any[]";default:return""}}function LH(e){if(e)return e==="any"||e==="required"?"required":e==="auto"?"auto":e==="none"?"none":typeof e=="string"?{type:"function",function:{name:e}}:e}function kN(e){return"type"in e&&e.type!=="function"}function J_e(e){return typeof e=="object"&&e!==null&&"extras"in e&&typeof e.extras=="object"&&e.extras!==null&&"providerToolDefinition"in e.extras&&typeof e.extras.providerToolDefinition=="object"&&e.extras.providerToolDefinition!==null}function Y_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type!=="function"}function tx(e){return typeof e=="object"&&e!==null&&"metadata"in e&&typeof e.metadata=="object"&&e.metadata!==null&&"customTool"in e.metadata&&typeof e.metadata.customTool=="object"&&e.metadata.customTool!==null}function zH(e){return"type"in e&&e.type==="custom"&&"custom"in e&&typeof e.custom=="object"&&e.custom!==null}function Q_e(e){if(e.type==="custom_tool_call")return{...e,type:"tool_call",call_id:e.id,id:e.call_id,name:e.name,isCustomTool:!0,args:{input:e.input}}}function X_e(e){if(e.type==="computer_call")return{...e,type:"tool_call",call_id:e.id,id:e.call_id,name:"computer_use",isComputerTool:!0,args:{action:e.action}}}function eke(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="tool_call"&&"isComputerTool"in e&&e.isComputerTool===!0}function tke(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="tool_call"&&"isCustomTool"in e&&e.isCustomTool===!0}function nke(e){const t=()=>{if(e.custom.format){if(e.custom.format.type==="grammar")return{type:"grammar",definition:e.custom.format.grammar.definition,syntax:e.custom.format.grammar.syntax};if(e.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:e.custom.name,description:e.custom.description,format:t()}}function rke(e){const t=()=>{if(e.format){if(e.format.type==="grammar")return{type:"grammar",grammar:{definition:e.format.definition,syntax:e.format.syntax}};if(e.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:e.name,description:e.description,format:t()}}}const ske=Symbol("Let zodToJsonSchema decide on which parser to use"),I$={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},ake=e=>typeof e=="string"?{...I$,basePath:["#"],definitions:{},name:e}:{...I$,basePath:["#"],definitions:{},...e},TC=e=>"_def"in e?e._def:e;function ike(e){if(!e)return!0;for(const t in e)return!1;return!0}const oke=e=>{const t=ake(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[TC(s),{def:TC(s),path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function UH(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function sn(e,t,n,r,s){e[t]=n,UH(e,t,r,s)}function lke(){return{}}function cke(e,t){const n={type:"array"};return e.type?._def?.typeName!==we.ZodAny&&(n.items=Zt(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&sn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&sn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(sn(n,"minItems",e.exactLength.value,e.exactLength.message,t),sn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function uke(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?sn(n,"minimum",r.value,r.message,t):sn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),sn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?sn(n,"maximum",r.value,r.message,t):sn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),sn(n,"maximum",r.value,r.message,t));break;case"multipleOf":sn(n,"multipleOf",r.value,r.message,t);break}return n}function dke(){return{type:"boolean"}}function hke(e,t){return Zt(e.type._def,t)}const fke=(e,t)=>Zt(e.innerType._def,t);function FH(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>FH(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return pke(e,t)}}const pke=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":sn(n,"minimum",r.value,r.message,t);break;case"max":sn(n,"maximum",r.value,r.message,t);break}return n};function mke(e,t){return{...Zt(e.innerType._def,t),default:e.defaultValue()}}function gke(e,t,n){return t.effectStrategy==="input"?Zt(e.schema._def,t,n):{}}function yke(e){return{type:"string",enum:[...e.values]}}const bke=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function xke(e,t){const n=[Zt(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Zt(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(a=>{if(bke(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...u}=a;i=u}else r=void 0;s.push(i)}}),s.length?{allOf:s,...r}:void 0}function vke(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let rS;const fc={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(rS===void 0&&(rS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),rS),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function BH(e,t){const n={type:"string"};function r(s){return t.patternStrategy==="escape"?wke(s):s}if(e.checks)for(const s of e.checks)switch(s.kind){case"min":sn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,t);break;case"max":sn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ba(n,"email",s.message,t);break;case"format:idn-email":Ba(n,"idn-email",s.message,t);break;case"pattern:zod":Ha(n,fc.email,s.message,t);break}break;case"url":Ba(n,"uri",s.message,t);break;case"uuid":Ba(n,"uuid",s.message,t);break;case"regex":Ha(n,s.regex,s.message,t);break;case"cuid":Ha(n,fc.cuid,s.message,t);break;case"cuid2":Ha(n,fc.cuid2,s.message,t);break;case"startsWith":Ha(n,RegExp(`^${r(s.value)}`),s.message,t);break;case"endsWith":Ha(n,RegExp(`${r(s.value)}$`),s.message,t);break;case"datetime":Ba(n,"date-time",s.message,t);break;case"date":Ba(n,"date",s.message,t);break;case"time":Ba(n,"time",s.message,t);break;case"duration":Ba(n,"duration",s.message,t);break;case"length":sn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,t),sn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,t);break;case"includes":{Ha(n,RegExp(r(s.value)),s.message,t);break}case"ip":{s.version!=="v6"&&Ba(n,"ipv4",s.message,t),s.version!=="v4"&&Ba(n,"ipv6",s.message,t);break}case"emoji":Ha(n,fc.emoji,s.message,t);break;case"ulid":{Ha(n,fc.ulid,s.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ba(n,"binary",s.message,t);break}case"contentEncoding:base64":{sn(n,"contentEncoding","base64",s.message,t);break}case"pattern:zod":{Ha(n,fc.base64,s.message,t);break}}break}case"nanoid":Ha(n,fc.nanoid,s.message,t)}return n}const wke=e=>Array.from(e).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),Ba=(e,t,n,r)=>{e.format||e.anyOf?.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):sn(e,"format",t,n,r)},Ha=(e,t,n,r)=>{e.pattern||e.allOf?.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:O$(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):sn(e,"pattern",O$(t,r),n,r)},O$=(e,t)=>{const n=typeof e=="function"?e():e;if(!t.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},s=r.i?n.source.toLowerCase():n.source;let a="",i=!1,o=!1,u=!1;for(let h=0;h<s.length;h++){if(i){a+=s[h],i=!1;continue}if(r.i){if(o){if(s[h].match(/[a-z]/)){u?(a+=s[h],a+=`${s[h-2]}-${s[h]}`.toUpperCase(),u=!1):s[h+1]==="-"&&s[h+2]?.match(/[a-z]/)?(a+=s[h],u=!0):a+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){a+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(r.m){if(s[h]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&s[h]==="."){a+=o?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}a+=s[h],s[h]==="\\"?i=!0:o&&s[h]==="]"?o=!1:!o&&s[h]==="["&&(o=!0)}try{const h=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return a};function HH(e,t){if(t.target==="openApi3"&&e.keyType?._def.typeName===we.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,s)=>({...r,[s]:Zt(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",s]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Zt(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===we.ZodString&&e.keyType._def.checks?.length){const r=Object.entries(BH(e.keyType._def,t)).reduce((s,[a,i])=>a==="type"?s:{...s,[a]:i},{});return{...n,propertyNames:r}}else if(e.keyType?._def.typeName===we.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};return n}function _ke(e,t){if(t.mapStrategy==="record")return HH(e,t);const n=Zt(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=Zt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function kke(e){const t=e.values,r=Object.keys(e.values).filter(a=>typeof t[t[a]]!="number").map(a=>t[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Ske(){return{not:{}}}function Tke(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const nx={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Cke(e,t){if(t.target==="openApi3")return R$(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in nx&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,a)=>{const i=nx[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];default:return s}},[]);if(r.length===n.length){const s=r.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:n.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return R$(e,t)}const R$=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>Zt(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Eke(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"||t.nullableStrategy==="property"?{type:nx[e.innerType._def.typeName],nullable:!0}:{type:[nx[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=Zt(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Zt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function jke(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",UH(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?sn(n,"minimum",r.value,r.message,t):sn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),sn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?sn(n,"maximum",r.value,r.message,t):sn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),sn(n,"maximum",r.value,r.message,t));break;case"multipleOf":sn(n,"multipleOf",r.value,r.message,t);break}return n}function Nke(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":Zt(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":Zt(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function Ake(e,t){const n={type:"object",...Object.entries(e.shape()).reduce((r,[s,a])=>{if(a===void 0||a._def===void 0)return r;const i=[...t.currentPath,"properties",s],o=Zt(a._def,{...t,currentPath:i,propertyPath:i});if(o===void 0)return r;if(t.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&typeof a._def?.defaultValue>"u")throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:a.isOptional()&&!t.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:Nke(e,t)};return n.required.length||delete n.required,n}const Ike=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return Zt(e.innerType._def,{...t,currentPath:t.currentPath});const n=Zt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Oke=(e,t)=>{if(t.pipeStrategy==="input")return Zt(e.in._def,t);if(t.pipeStrategy==="output")return Zt(e.out._def,t);const n=Zt(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=Zt(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function Rke(e,t){return Zt(e.type._def,t)}function Pke(e,t){const r={type:"array",uniqueItems:!0,items:Zt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&sn(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&sn(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Mke(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>Zt(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Zt(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>Zt(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Dke(){return{not:{}}}function $ke(){return{}}const Lke=(e,t)=>Zt(e.innerType._def,t);function Zt(e,t,n=!1){const r=t.seen.get(e);if(t.override){const i=t.override?.(e,t,r,n);if(i!==ske)return i}if(r&&!n){const i=zke(r,t);if(i!==void 0)return"$ref"in i&&t.seenRefs.add(i.$ref),i}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const a=Fke(e,e.typeName,t,n);return a&&Bke(e,t,a),s.jsonSchema=a,a}const zke=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":const n=e.path.slice(t.basePath.length+1).join("_");return n!==t.name&&t.nameStrategy==="duplicate-ref"&&(t.definitions[n]=e.def),{$ref:[...t.basePath,t.definitionPath,n].join("/")};case"relative":return{$ref:Uke(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,s)=>t.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Uke=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Fke=(e,t,n,r)=>{switch(t){case we.ZodString:return BH(e,n);case we.ZodNumber:return jke(e,n);case we.ZodObject:return Ake(e,n);case we.ZodBigInt:return uke(e,n);case we.ZodBoolean:return dke();case we.ZodDate:return FH(e,n);case we.ZodUndefined:return Dke();case we.ZodNull:return Tke(n);case we.ZodArray:return cke(e,n);case we.ZodUnion:case we.ZodDiscriminatedUnion:return Cke(e,n);case we.ZodIntersection:return xke(e,n);case we.ZodTuple:return Mke(e,n);case we.ZodRecord:return HH(e,n);case we.ZodLiteral:return vke(e,n);case we.ZodEnum:return yke(e);case we.ZodNativeEnum:return kke(e);case we.ZodNullable:return Eke(e,n);case we.ZodOptional:return Ike(e,n);case we.ZodMap:return _ke(e,n);case we.ZodSet:return Pke(e,n);case we.ZodLazy:return Zt(e.getter()._def,n);case we.ZodPromise:return Rke(e,n);case we.ZodNaN:case we.ZodNever:return Ske();case we.ZodEffects:return gke(e,n,r);case we.ZodAny:return lke();case we.ZodUnknown:return $ke();case we.ZodDefault:return mke(e,n);case we.ZodBranded:return hke(e,n);case we.ZodReadonly:return Lke(e,n);case we.ZodCatch:return fke(e,n);case we.ZodPipeline:return Oke(e,n);case we.ZodFunction:case we.ZodVoid:case we.ZodSymbol:return;default:return(s=>{})()}},Bke=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Hke=(e,t)=>{const n=oke(t),r=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,s=Zt(e._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(s.title=a);const i=(()=>{if(ike(n.definitions))return;const u={},h=new Set;for(let f=0;f<500;f++){const m=Object.entries(n.definitions).filter(([g])=>!h.has(g));if(m.length===0)break;for(const[g,b]of m)u[g]=Zt(TC(b),{...n,currentPath:[...n.basePath,n.definitionPath,g]},!0)??{},h.add(g)}return u})(),o=r===void 0?i?{...s,[n.definitionPath]:i}:s:n.nameStrategy==="duplicate-ref"?{...s,...i||n.seenRefs.size?{[n.definitionPath]:{...i,...n.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...i,[r]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function qke(e){if(e.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${e.type?`'${e.type}'`:"undefined"}`);const t=structuredClone(e);return po(t,[],t)}function CC(e){if(typeof e=="boolean")return!1;if(e.type==="null")return!0;for(const t of e.oneOf??[])if(CC(t))return!0;for(const t of e.anyOf??[])if(CC(t))return!0;return!1}function po(e,t,n){if(typeof e=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${t.join("/")}`);if(!kc(e))throw new TypeError(`Expected ${JSON.stringify(e)} to be an object; path=${t.join("/")}`);const r=e.$defs;if(kc(r))for(const[g,b]of Object.entries(r))po(b,[...t,"$defs",g],n);const s=e.definitions;if(kc(s))for(const[g,b]of Object.entries(s))po(b,[...t,"definitions",g],n);e.type==="object"&&!("additionalProperties"in e)&&(e.additionalProperties=!1);const i=e.required??[],o=e.properties;if(kc(o)){for(const[g,b]of Object.entries(o))if(!CC(b)&&!i.includes(g))throw new Error(`Zod field at \`${[...t,"properties",g].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);e.required=Object.keys(o),e.properties=Object.fromEntries(Object.entries(o).map(([g,b])=>[g,po(b,[...t,"properties",g],n)]))}const u=e.items;kc(u)&&(e.items=po(u,[...t,"items"],n));const h=e.anyOf;Array.isArray(h)&&(e.anyOf=h.map((g,b)=>po(g,[...t,"anyOf",String(b)],n)));const f=e.allOf;if(Array.isArray(f))if(f.length===1){const g=po(f[0],[...t,"allOf","0"],n);Object.assign(e,g),delete e.allOf}else e.allOf=f.map((g,b)=>po(g,[...t,"allOf",String(b)],n));e.default===null&&delete e.default;const m=e.$ref;if(m&&Gke(e,1)){if(typeof m!="string")throw new TypeError(`Received non-string $ref - ${m}; path=${t.join("/")}`);const g=Vke(n,m);if(typeof g=="boolean")throw new Error(`Expected \`$ref: ${m}\` to resolve to an object schema but got boolean`);if(!kc(g))throw new Error(`Expected \`$ref: ${m}\` to resolve to an object but got ${JSON.stringify(g)}`);return Object.assign(e,{...g,...e}),delete e.$ref,po(e,t,n)}return e}function Vke(e,t){if(!t.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(t)}; Does not start with #/`);const n=t.slice(2).split("/");let r=e;for(const s of n){if(!kc(r))throw new Error(`encountered non-object entry while resolving ${t} - ${JSON.stringify(r)}`);const a=r[s];if(a===void 0)throw new Error(`Key ${s} not found while resolving ${t}`);r=a}return r}function kc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Gke(e,t){let n=0;for(const r in e)if(n++,n>t)return!0;return!1}function Kke(e,t){return Hke(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Zke(e){return qke(DT(e,{target:"draft-7"}))}function Wke(e){return"_zod"in e}function Jke(e,t,n){return g_e({type:"json_schema",json_schema:{...n,name:t,strict:!0,schema:Wke(e)?Zke(e):Kke(e,{name:t})}},r=>e.parse(JSON.parse(r)))}const P$=["jsonSchema","functionCalling","jsonMode"];function Yke(e,t){if(typeof t<"u"&&!P$.includes(t))throw new Error(`Invalid method: ${t}. Supported methods are: ${P$.join(", ")}`);const n=!e.startsWith("gpt-3")&&!e.startsWith("gpt-4-")&&e!=="gpt-4";if(n&&!t)return"jsonSchema";if(!n&&t==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${e}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return t??"functionCalling"}function Qke(e,t){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function Xke(e,t,n){if(er(e))return Jke(e,t,n);if(En(e))return Qke({type:"json_schema",json_schema:{...n,name:t,strict:!0,schema:dr(e,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=t}})}},r=>Ux(e,JSON.parse(r)));throw new Error("Unsupported schema response format")}function e1e(e,t){if(t&&typeof t=="object"&&"images"in t&&Array.isArray(t.images)){const n=t.images.filter(r=>typeof r?.image_url?.url=="string").map(r=>({type:"image",url:r.image_url.url}));return[{type:"text",text:e},...n]}return e}const t1e={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}};var n1e=t1e;function Vm(e,t){if(e.function===void 0)return;let n;if(t?.partial)try{n=jx(e.function.arguments??"{}")}catch{return}else try{n=JSON.parse(e.function.arguments)}catch(s){throw new ka([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${s.message}`].join(`
`))}const r={name:e.function.name,args:n,type:"tool_call"};return t?.returnId&&(r.id=e.id),r}function SN(e){if(e.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function Td(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}var qH=class extends ev{static lc_name(){return"JsonOutputToolsParser"}returnId=!1;lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;constructor(e){super(e),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){const n=e[0].message;let r;if(Co(n)&&n.tool_calls?.length?r=n.tool_calls.map(a=>{const{id:i,...o}=a;return this.returnId?{id:i,...o}:o}):n.additional_kwargs.tool_calls!==void 0&&(r=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(i=>Vm(i,{returnId:this.returnId,partial:t}))),!r)return[];const s=[];for(const a of r)if(a!==void 0){const i={type:a.name,args:a.args,id:a.id};s.push(i)}return s}},om=class extends qH{static lc_name(){return"JsonOutputKeyToolsParser"}lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(e){super(e),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await Gx(this.zodSchema,e);if(t.success)return t.data;throw new ka(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const n=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName);let r=n;if(n.length)return this.returnId||(r=n.map(s=>s.args)),this.returnSingle?r[0]:r}async parseResult(e){const n=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let r=n;return n.length?(this.returnId||(r=n.map(a=>a.args)),this.returnSingle?this._validateResult(r[0]):await Promise.all(r.map(a=>this._validateResult(a)))):void 0}},r1e={};Ut(r1e,{JsonOutputKeyToolsParser:()=>om,JsonOutputToolsParser:()=>qH,convertLangChainToolCallToOpenAI:()=>SN,makeInvalidToolCall:()=>Td,parseToolCall:()=>Vm});var TN=class extends bh{temperature;topP;frequencyPenalty;presencePenalty;n;logitBias;model="gpt-3.5-turbo";modelKwargs;stop;stopSequences;user;timeout;streaming=!1;streamUsage=!0;maxTokens;logprobs;topLogprobs;apiKey;organization;__includeRawResponse;client;clientConfig;supportsStrictToolCalling;audio;modalities;reasoning;zdrEnabled;service_tier;promptCacheKey;promptCacheRetention;verbosity;defaultOptions;_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}lc_serializable=!0;get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","promptCacheRetention","verbosity"]}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){super(e??{});const t=typeof e?.configuration?.apiKey=="string"||typeof e?.configuration?.apiKey=="function"?e?.configuration?.apiKey:void 0;this.apiKey=e?.apiKey??t??Ws("OPENAI_API_KEY"),this.organization=e?.configuration?.organization??Ws("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoning=e?.reasoning,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.promptCacheKey=e?.promptCacheKey??this.promptCacheKey,this.promptCacheRetention=e?.promptCacheRetention??this.promptCacheRetention,this.verbosity=e?.verbosity??this.verbosity,this.disableStreaming=e?.disableStreaming===!0,this.streaming=e?.streaming===!0,this.disableStreaming&&(this.streaming=!1),e?.streaming===!1&&(this.disableStreaming=!0),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),e?.service_tier!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}_getReasoningParams(e){if(!Hm(this.model))return;let t;return this.reasoning!==void 0&&(t={...t,...this.reasoning}),e?.reasoning!==void 0&&(t={...t,...e.reasoning}),t}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Lr(e.json_schema.schema)?Xke(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const n={baseURL:this.clientConfig.baseURL},r=H_e(n),s={...this.clientConfig,baseURL:r,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,s.defaultHeaders=G_e(s.defaultHeaders),this.client=new Et(s)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,t){return tx(e)?rke(e.metadata.customTool):yh(e)?t?.strict!==void 0?{...e,function:{...e.function,strict:t.strict}}:e:K_e(e,t)}bindTools(e,t){let n;return t?.strict!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.withConfig({tools:e.map(r=>kN(r)||tx(r)?r:J_e(r)?r.extras.providerToolDefinition:this._convertChatOpenAIToolToCompletionsTool(r,{strict:n})),...t})}async stream(e,t){return super.stream(e,this._combineCallOptions(t))}async invoke(e,t){return super.invoke(e,this._combineCallOptions(t))}_combineLLMOutput(...e){return e.reduce((t,n)=>(n&&n.tokenUsage&&(t.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let t=0,n=0,r=0;this.model==="gpt-3.5-turbo-0301"?(n=4,r=-1):(n=3,r=1);const s=await Promise.all(e.map(async a=>{const i=await this.getNumTokens(a.content),o=await this.getNumTokens(qm(a)),u=a.name!==void 0?r+await this.getNumTokens(a.name):0;let h=i+n+o+u;const f=a;if(f._getType()==="function"&&(h-=2),f.additional_kwargs?.function_call&&(h+=3),f?.additional_kwargs.function_call?.name&&(h+=await this.getNumTokens(f.additional_kwargs.function_call?.name)),f.additional_kwargs.function_call?.arguments)try{h+=await this.getNumTokens(JSON.stringify(JSON.parse(f.additional_kwargs.function_call?.arguments)))}catch(m){console.error("Error parsing function arguments",m,JSON.stringify(f.additional_kwargs.function_call)),h+=await this.getNumTokens(f.additional_kwargs.function_call?.arguments)}return t+=h,h}));return t+=3,{totalCount:t,countPerMessage:s}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>n.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)))).reduce((n,r)=>n+r,0)}async _getEstimatedTokenCountFromPrompt(e,t,n){let r=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&n!=="auto"){const s=W_e(t);r+=await this.getNumTokens(s),r+=9}return t&&e.find(s=>s._getType()==="system")&&(r-=4),n==="none"?r+=1:typeof n=="object"&&(r+=await this.getNumTokens(n.name)+4),r}async moderateContent(e,t){const n=this._getClientOptions(t?.options),r=t?.model??"omni-moderation-latest",s={input:e,model:r};return this.caller.call(async()=>{try{return await this.client.moderations.create(s,n)}catch(a){throw _N(a)}})}get profile(){return n1e[this.model]??{}}_getStructuredOutputMethod(e){const t={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if(t?.method===void 0)return"jsonSchema"}else t.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return t.method}withStructuredOutput(e,t){let n,r;const{schema:s,name:a,includeRaw:i}={...t,schema:e};if(t?.strict!==void 0&&t.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");const o=Yke(this.model,t?.method);if(o==="jsonMode"){Lr(s)?r=Vd.fromZodSchema(s):r=new qd;const m=dr(s);n=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:a??"extract",...m}}})}else if(o==="jsonSchema"){const m={name:a??"extract",description:Zx(s),schema:s,strict:t?.strict},g=dr(m.schema);if(n=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:m},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:m.name,description:m.description,...g}}}),Lr(s)){const b=Vd.fromZodSchema(s);r=Ro.from(w=>"parsed"in w.additional_kwargs?w.additional_kwargs.parsed:b)}else r=new qd}else{let m=a??"extract";if(Lr(s)){const g=dr(s);n=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:m,description:g.description,parameters:g}}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...g}},...t?.strict!==void 0?{strict:t.strict}:{}}),r=new om({returnSingle:!0,keyName:m,zodSchema:s})}else{let g;typeof s.name=="string"&&typeof s.parameters=="object"&&s.parameters!=null?(g=s,m=s.name):(m=s.title??m,g={name:m,description:s.description??"",parameters:s});const b=dr(s);n=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:g}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...b}},...t?.strict!==void 0?{strict:t.strict}:{}}),r=new om({returnSingle:!0,keyName:m})}}if(!i)return n.pipe(r);const u=ja.assign({parsed:(m,g)=>r.invoke(m.raw,g)}),h=ja.assign({parsed:()=>null}),f=u.withFallbacks({fallbacks:[h]});return Ul.from([{raw:n},f])}};const VH={providerName:"ChatOpenAI",fromStandardTextBlock(e){return{type:"text",text:e.text}},fromStandardImageBlock(e){if(e.source_type==="url")return{type:"image_url",image_url:{url:e.url,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};if(e.source_type==="base64")return{type:"image_url",image_url:{url:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if(e.source_type==="url"){const t=Oi({dataUrl:e.url});if(!t)throw new Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);const n=t.mime_type||e.mime_type||"";let r;try{r=xT(n)}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:t.data}}}if(e.source_type==="base64"){let t;try{t=xT(e.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(t.type!=="audio"||t.subtype!=="wav"&&t.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw new Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if(e.source_type==="url"){const t=Oi({dataUrl:e.url}),n=Xb(e);if(!t)throw new Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:e.url,...e.metadata?.filename||e.metadata?.name?{filename:n}:{}}}}if(e.source_type==="base64"){const t=Xb(e);return{type:"file",file:{file_data:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:t}:{}}}}if(e.source_type==="id")return{type:"file",file:{file_id:e.id}};throw new Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}},s1e=({message:e,rawResponse:t,includeRawResponse:n})=>{const r=e.tool_calls;switch(e.role){case"assistant":{const s=[],a=[];for(const h of r??[])try{s.push(Vm(h,{returnId:!0}))}catch(f){a.push(Td(h,f.message))}const i={function_call:e.function_call,tool_calls:r};n!==void 0&&(i.__raw_response=t);const o={model_provider:"openai",model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};e.audio&&(i.audio=e.audio);const u=e1e(e.content||"",t.choices?.[0]?.message);return new pr({content:u,tool_calls:s,invalid_tool_calls:a,additional_kwargs:i,response_metadata:o,id:t.id})}default:return new Bi(e.content||"",e.role??"unknown")}},a1e=({delta:e,rawResponse:t,includeRawResponse:n,defaultRole:r})=>{const s=e.role??r,a=e.content??"";let i;e.function_call?i={function_call:e.function_call}:e.tool_calls?i={tool_calls:e.tool_calls}:i={},n&&(i.__raw_response=t),e.audio&&(i.audio={...e.audio,index:t.choices[0].index});const o={model_provider:"openai",usage:{...t.usage}};if(s==="user")return new dh({content:a,response_metadata:o});if(s==="assistant"){const u=[];if(Array.isArray(e.tool_calls))for(const h of e.tool_calls)u.push({name:h.function?.name,args:h.function?.arguments,id:h.id,index:h.index,type:"tool_call_chunk"});return new kn({content:a,tool_call_chunks:u,additional_kwargs:i,id:t.id,response_metadata:o})}else return s==="system"?new Li({content:a,response_metadata:o}):s==="developer"?new Li({content:a,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new uh({content:a,additional_kwargs:i,name:e.name,response_metadata:o}):s==="tool"?new lh({content:a,additional_kwargs:i,tool_call_id:e.tool_call_id,response_metadata:o}):new ch({content:a,role:s,response_metadata:o})},i1e=e=>{if(e.type==="image"){if(e.url)return{type:"image_url",image_url:{url:e.url}};if(e.data)return{type:"image_url",image_url:{url:`data:${e.mimeType};base64,${e.data}`}}}if(e.type==="audio"&&e.data){const t=yU(()=>{const[,n]=e.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:e.data.toString(),format:t}}}if(e.type==="file"){if(e.data){const t=Xb(e);return{type:"file",file:{file_data:`data:${e.mimeType};base64,${e.data}`,filename:t}}}if(e.fileId)return{type:"file",file:{file_id:e.fileId}}}},o1e=({message:e,model:t})=>{let n=qm(e);if(n==="system"&&Hm(t)&&(n="developer"),n==="developer")return{role:"developer",content:e.contentBlocks.filter(s=>s.type==="text")};if(n==="system")return{role:"system",content:e.contentBlocks.filter(s=>s.type==="text")};if(n==="assistant")return{role:"assistant",content:e.contentBlocks.filter(s=>s.type==="text")};if(n==="tool"&&$i.isInstance(e))return{role:"tool",tool_call_id:e.tool_call_id,content:e.contentBlocks.filter(s=>s.type==="text")};if(n==="function")return{role:"function",name:e.name??"",content:e.contentBlocks.filter(s=>s.type==="text").join("")};function*r(s){for(const a of s){a.type==="text"&&(yield{type:"text",text:a.text});const i=i1e(a);i&&(yield i)}}return{role:"user",content:Array.from(r(e.contentBlocks))}},M$=({messages:e,model:t})=>e.flatMap(n=>{if("output_version"in n.response_metadata&&n.response_metadata?.output_version==="v1")return o1e({message:n});let r=qm(n);r==="system"&&Hm(t)&&(r="developer");const s=typeof n.content=="string"?n.content:n.content.map(i=>Ea(i)?Nm(i,VH):i),a={role:r,content:s};if(n.name!=null&&(a.name=n.name),n.additional_kwargs.function_call!=null&&(a.function_call=n.additional_kwargs.function_call),pr.isInstance(n)&&n.tool_calls?.length?a.tool_calls=n.tool_calls.map(SN):(n.additional_kwargs.tool_calls!=null&&(a.tool_calls=n.additional_kwargs.tool_calls),$i.isInstance(n)&&n.tool_call_id!=null&&(a.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){const i={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[a,i]}return a});var l1e=class extends TN{invocationParams(e,t){let n;e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let r={};e?.stream_options!==void 0?r={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(r={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(i=>this._convertChatOpenAIToolToCompletionsTool(i,{strict:n})):void 0,tool_choice:LH(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed,...r,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention,verbosity:e?.verbosity??this.verbosity};e?.prediction!==void 0&&(s.prediction=e.prediction),this.service_tier!==void 0&&(s.service_tier=this.service_tier),e?.service_tier!==void 0&&(s.service_tier=e.service_tier);const a=this._getReasoningParams(e);return a!==void 0&&a.effort!==void 0&&(s.reasoning_effort=a.effort),Hm(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}async _generate(e,t,n){const r={},s=this.invocationParams(t),a=M$({messages:e,model:this.model});if(s.stream){const i=this._streamResponseChunks(e,t,n),o={};for await(const b of i){b.message.response_metadata={...b.generationInfo,...b.message.response_metadata};const w=b.generationInfo?.completion??0;o[w]===void 0?o[w]=b:o[w]=o[w].concat(b)}const u=Object.entries(o).sort(([b],[w])=>parseInt(b,10)-parseInt(w,10)).map(([b,w])=>w),{functions:h,function_call:f}=this.invocationParams(t),m=await this._getEstimatedTokenCountFromPrompt(e,h,f),g=await this._getNumTokensFromGenerations(u);return r.input_tokens=m,r.output_tokens=g,r.total_tokens=m+g,{generations:u,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{const i=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:t?.signal,...t?.options}),{completion_tokens:o,prompt_tokens:u,total_tokens:h,prompt_tokens_details:f,completion_tokens_details:m}=i?.usage??{};o&&(r.output_tokens=(r.output_tokens??0)+o),u&&(r.input_tokens=(r.input_tokens??0)+u),h&&(r.total_tokens=(r.total_tokens??0)+h),(f?.audio_tokens!==null||f?.cached_tokens!==null)&&(r.input_token_details={...f?.audio_tokens!==null&&{audio:f?.audio_tokens},...f?.cached_tokens!==null&&{cache_read:f?.cached_tokens}}),(m?.audio_tokens!==null||m?.reasoning_tokens!==null)&&(r.output_token_details={...m?.audio_tokens!==null&&{audio:m?.audio_tokens},...m?.reasoning_tokens!==null&&{reasoning:m?.reasoning_tokens}});const g=[];for(const b of i?.choices??[]){const x={text:b.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(b.message??{role:"assistant"},i)};x.generationInfo={...b.finish_reason?{finish_reason:b.finish_reason}:{},...b.logprobs?{logprobs:b.logprobs}:{}},Co(x.message)&&(x.message.usage_metadata=r),x.message=new pr(Object.fromEntries(Object.entries(x.message).filter(([S])=>!S.startsWith("lc_")))),g.push(x)}return{generations:g,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}}async*_streamResponseChunks(e,t,n){const r=M$({messages:e,model:this.model}),s={...this.invocationParams(t,{streaming:!0}),messages:r,stream:!0};let a;const i=await this.completionWithRetry(s,t);let o;for await(const u of i){const h=u?.choices?.[0];if(u.usage&&(o=u.usage),!h)continue;const{delta:f}=h;if(!f)continue;const m=this._convertCompletionsDeltaToBaseMessageChunk(f,u,a);a=f.role??a;const g={prompt:t.promptIndex??0,completion:h.index??0};if(typeof m.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const b={...g};h.finish_reason!=null&&(b.finish_reason=h.finish_reason,b.system_fingerprint=u.system_fingerprint,b.model_name=u.model,b.service_tier=u.service_tier),this.logprobs&&(b.logprobs=h.logprobs);const w=new Ui({message:m,text:m.content,generationInfo:b});yield w,await n?.handleLLMNewToken(w.text??"",g,void 0,void 0,void 0,{chunk:w})}if(o){const u={...o.prompt_tokens_details?.audio_tokens!==null&&{audio:o.prompt_tokens_details?.audio_tokens},...o.prompt_tokens_details?.cached_tokens!==null&&{cache_read:o.prompt_tokens_details?.cached_tokens}},h={...o.completion_tokens_details?.audio_tokens!==null&&{audio:o.completion_tokens_details?.audio_tokens},...o.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:o.completion_tokens_details?.reasoning_tokens}};yield new Ui({message:new kn({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(u).length>0&&{input_token_details:u},...Object.keys(h).length>0&&{output_token_details:h}}}),text:""})}if(t.signal?.aborted)throw new Error("AbortError")}async completionWithRetry(e,t){const n=this._getClientOptions(t),r=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(async()=>{try{return r&&!e.stream?await this.client.chat.completions.parse(e,n):await this.client.chat.completions.create(e,n)}catch(s){throw _N(s)}})}_convertCompletionsDeltaToBaseMessageChunk(e,t,n){return a1e({delta:e,rawResponse:t,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(e,t){return s1e({message:e,rawResponse:t,includeRawResponse:this.__includeRawResponse})}};const rx="__openai_function_call_ids__",GH=e=>{const t={...e?.input_tokens_details?.cached_tokens!=null&&{cache_read:e?.input_tokens_details?.cached_tokens}},n={...e?.output_tokens_details?.reasoning_tokens!=null&&{reasoning:e?.output_tokens_details?.reasoning_tokens}};return{input_tokens:e?.input_tokens??0,output_tokens:e?.output_tokens??0,total_tokens:e?.total_tokens??0,input_token_details:t,output_token_details:n}},KH=e=>{if(e.error){const o=new Error(e.error.message);throw o.name=e.error.code,o}let t;const n=[],r=[],s=[],a={model_provider:"openai",model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},i={};for(const o of e.output)if(o.type==="message")t=o.id,n.push(...o.content.flatMap(u=>u.type==="output_text"?("parsed"in u&&u.parsed!=null&&(i.parsed=u.parsed),{type:"text",text:u.text,annotations:u.annotations}):u.type==="refusal"?(i.refusal=u.refusal,[]):u));else if(o.type==="function_call"){const u={function:{name:o.name,arguments:o.arguments},id:o.call_id};try{r.push(Vm(u,{returnId:!0}))}catch(h){let f;typeof h=="object"&&h!=null&&"message"in h&&typeof h.message=="string"&&(f=h.message),s.push(Td(u,f))}i[rx]??={},o.id&&(i[rx][o.call_id]=o.id)}else if(o.type==="reasoning")i.reasoning=o;else if(o.type==="custom_tool_call"){const u=Q_e(o);u?r.push(u):s.push(Td(o,"Malformed custom tool call"))}else if(o.type==="computer_call"){const u=X_e(o);u?r.push(u):s.push(Td(o,"Malformed computer call"))}else i.tool_outputs??=[],i.tool_outputs.push(o);return new pr({id:t,content:n,tool_calls:r,invalid_tool_calls:s,usage_metadata:GH(e.usage),additional_kwargs:i,response_metadata:a})},c1e=e=>{const t=(e.summary.length>1?e.summary.reduce((n,r)=>{const s=n[n.length-1];return s.index===r.index?s.text+=r.text:n.push(r),n},[{...e.summary[0]}]):e.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([r])=>r!=="index")));return{...e,summary:t}},u1e=e=>{const t=[];let n={},r;const s=[],a={model_provider:"openai"},i={};let o;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")o=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")s.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),i[rx]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&e.item.type==="computer_call")s.push({type:"tool_call_chunk",name:"computer_use",args:JSON.stringify({action:e.item.action}),id:e.item.call_id,index:e.output_index}),i.tool_outputs=[e.item];else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))i.tool_outputs=[e.item];else if(e.type==="response.created")a.id=e.response.id,a.model_name=e.response.model,a.model=e.response.model;else if(e.type==="response.completed"){const u=KH(e.response);r=GH(e.response.usage),e.response.text?.format?.type==="json_schema"&&(i.parsed??=JSON.parse(u.text));for(const[h,f]of Object.entries(e.response))h!=="id"&&(a[h]=f)}else if(e.type==="response.function_call_arguments.delta"||e.type==="response.custom_tool_call_input.delta")s.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")n={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")i.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){const u=e.item.summary?e.item.summary.map((h,f)=>({...h,index:f})):void 0;i.reasoning={id:e.item.id,type:e.item.type,...u?{summary:u}:{}}}else if(e.type==="response.reasoning_summary_part.added")i.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else if(e.type==="response.reasoning_summary_text.delta")i.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new Ui({text:t.map(u=>u.text).join(""),message:new kn({id:o,content:t,tool_call_chunks:s,usage_metadata:r,additional_kwargs:i,response_metadata:a}),generationInfo:n})},d1e=e=>{const t=pr.isInstance(e)&&e.response_metadata?.model_provider==="openai";function*n(){const r=zc(()=>{try{const k=qm(e);return k==="system"||k==="developer"||k==="assistant"||k==="user"?k:"assistant"}catch{return"assistant"}});let s;const a=new Set,i=new Set,o=new Map,u=new Map;function*h(){if(!s)return;const k=s.content;(typeof k=="string"&&k.length>0||Array.isArray(k)&&k.length>0)&&(yield s),s=void 0}const f=k=>{s||(s={type:"message",role:r,content:[]}),typeof s.content=="string"?s.content=s.content.length>0?[{type:"input_text",text:s.content},...k]:[...k]:s.content.push(...k)},m=k=>{if(typeof k=="string")return k;try{return JSON.stringify(k??{})}catch{return"{}"}},g=k=>{const C=zc(()=>{const T=k.metadata?.detail;return T==="low"||T==="high"||T==="auto"?T:"auto"});if(k.fileId)return{type:"input_image",detail:C,file_id:k.fileId};if(k.url)return{type:"input_image",detail:C,image_url:k.url};if(k.data){const T=typeof k.data=="string"?k.data:Buffer.from(k.data).toString("base64"),P=k.mimeType??"image/png";return{type:"input_image",detail:C,image_url:`data:${P};base64,${T}`}}},b=k=>{const C=Xb(k);if(k.fileId&&typeof C=="string")return{type:"input_file",file_id:k.fileId,...C?{filename:C}:{}};if(k.url&&typeof C=="string")return{type:"input_file",file_url:k.url,...C?{filename:C}:{}};if(k.data&&typeof C=="string"){const T=typeof k.data=="string"?k.data:Buffer.from(k.data).toString("base64");return{type:"input_file",file_data:`data:${k.mimeType??"application/octet-stream"};base64,${T}`,...C?{filename:C}:{}}}},w=k=>{const C=zc(()=>{if(Array.isArray(k.summary)){const R=k.summary?.map(U=>U?.text).filter(U=>typeof U=="string")??[];if(R.length>0)return R}return k.reasoning?[k.reasoning]:[]}),T=C.length>0?C.map(D=>({type:"summary_text",text:D})):[{type:"summary_text",text:""}],P={type:"reasoning",id:k.id??"",summary:T};return k.reasoning&&(P.content=[{type:"reasoning_text",text:k.reasoning}]),P},x=k=>({type:"function_call",name:k.name??"",call_id:k.id??"",arguments:m(k.args)}),S=k=>{const C=m(k.output),T=k.status==="success"?"completed":k.status==="error"?"incomplete":void 0;return{type:"function_call_output",call_id:k.toolCallId??"",output:C,...T?{status:T}:{}}};for(const k of e.contentBlocks)if(k.type==="text")f([{type:"input_text",text:k.text}]);else if(k.type!=="invalid_tool_call"){if(k.type==="reasoning")yield*h(),yield w(k);else if(k.type==="tool_call"){yield*h();const C=k.id??"";C&&(a.add(C),o.delete(C)),yield x(k)}else if(k.type==="tool_call_chunk"){if(k.id){const C=o.get(k.id)??{name:k.name,args:[]};k.name&&(C.name=k.name),k.args&&C.args.push(k.args),o.set(k.id,C)}}else if(k.type==="server_tool_call"){yield*h();const C=k.id??"";C&&(i.add(C),u.delete(C)),yield x(k)}else if(k.type==="server_tool_call_chunk"){if(k.id){const C=u.get(k.id)??{name:k.name,args:[]};k.name&&(C.name=k.name),k.args&&C.args.push(k.args),u.set(k.id,C)}}else if(k.type==="server_tool_call_result")yield*h(),yield S(k);else if(k.type!=="audio")if(k.type==="file"){const C=b(k);C&&f([C])}else if(k.type==="image"){const C=g(k);C&&f([C])}else if(k.type==="video"){const C=b(k);C&&f([C])}else k.type==="text-plain"?k.text&&f([{type:"input_text",text:k.text}]):k.type==="non_standard"&&t&&(yield*h(),yield k.value)}yield*h();for(const[k,C]of o){if(!k||a.has(k))continue;const T=C.args.join("");!C.name&&!T||(yield{type:"function_call",call_id:k,name:C.name??"",arguments:T})}for(const[k,C]of u){if(!k||i.has(k))continue;const T=C.args.join("");!C.name&&!T||(yield{type:"function_call",call_id:k,name:C.name??"",arguments:T})}}return Array.from(n())},D$=({messages:e,zdrEnabled:t,model:n})=>e.flatMap(r=>{const s=r.response_metadata;if(s?.output_version==="v1")return d1e(r);const a=r.additional_kwargs;let i=qm(r);if(i==="system"&&Hm(n)&&(i="developer"),i==="function")throw new Error("Function messages are not supported in Responses API");if(i==="tool"){const o=r;return a?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof o.content=="string")return{type:"input_image",image_url:o.content};if(Array.isArray(o.content)){const h=o.content.find(g=>g.type==="input_image");if(h)return h;const f=o.content.find(g=>g.type==="computer_screenshot");if(f)return f;const m=o.content.find(g=>g.type==="image_url");if(m)return{type:"input_image",image_url:typeof m.image_url=="string"?m.image_url:m.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:o.tool_call_id}:o.additional_kwargs?.customTool?{type:"custom_tool_call_output",call_id:o.tool_call_id,output:o.content}:{type:"function_call_output",call_id:o.tool_call_id,id:o.id?.startsWith("fc_")?o.id:void 0,output:typeof o.content!="string"?JSON.stringify(o.content):o.content}}if(i==="assistant"){if(!t&&s?.output!=null&&Array.isArray(s?.output)&&s?.output.length>0&&s?.output.every(g=>"type"in g))return s?.output;const o=[];if(a?.reasoning&&!t){const g=c1e(a.reasoning);o.push(g)}let{content:u}=r;a?.refusal&&(typeof u=="string"&&(u=[{type:"output_text",text:u,annotations:[]}]),u=[...u,{type:"refusal",refusal:a.refusal}]),(typeof u=="string"||u.length>0)&&o.push({type:"message",role:"assistant",...r.id&&!t&&r.id.startsWith("msg_")?{id:r.id}:{},content:zc(()=>typeof u=="string"?u:u.flatMap(g=>g.type==="text"?{type:"output_text",text:g.text,annotations:g.annotations??[]}:g.type==="output_text"||g.type==="refusal"?g:[]))});const h=a?.[rx];pr.isInstance(r)&&r.tool_calls?.length?o.push(...r.tool_calls.map(g=>tke(g)?{type:"custom_tool_call",id:g.call_id,call_id:g.id??"",input:g.args.input,name:g.name}:eke(g)?{type:"computer_call",id:g.call_id,call_id:g.id??"",action:g.args.action}:{type:"function_call",name:g.name,arguments:JSON.stringify(g.args),call_id:g.id,...t?{}:{id:h?.[g.id]}})):a?.tool_calls&&o.push(...a.tool_calls.map(g=>({type:"function_call",name:g.function.name,call_id:g.id,arguments:g.function.arguments,...t?{}:{id:h?.[g.id]}})));const f=s?.output?.length?s?.output:a.tool_outputs,m=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(f!=null){const b=f?.filter(w=>m.includes(w.type));b.length>0&&o.push(...b)}return o}if(i==="user"||i==="system"||i==="developer"){if(typeof r.content=="string")return{type:"message",role:i,content:r.content};const o=[],u=r.content.flatMap(h=>{if(h.type==="mcp_approval_response"&&o.push({type:"mcp_approval_response",approval_request_id:h.approval_request_id,approve:h.approve}),Ea(h))return Nm(h,VH);if(h.type==="text")return{type:"input_text",text:h.text};if(h.type==="image_url"){const f=zc(()=>{if(typeof h.image_url=="string")return h.image_url;if(typeof h.image_url=="object"&&h.image_url!==null&&"url"in h.image_url)return h.image_url.url}),m=zc(()=>{if(typeof h.image_url=="string")return"auto";if(typeof h.image_url=="object"&&h.image_url!==null&&"detail"in h.image_url)return h.image_url.detail});return{type:"input_image",image_url:f,detail:m}}return h.type==="input_text"||h.type==="input_image"||h.type==="input_file"?h:[]});return u.length>0&&o.push({type:"message",role:i,content:u}),o}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${i}`),[]});var h1e=class extends TN{invocationParams(e){let t;e?.strict!==void 0&&(t=e.strict),t===void 0&&this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);const n={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:Y_e(e?.tool_choice)?e?.tool_choice:(()=>{const s=LH(e?.tool_choice);if(typeof s=="object"&&"type"in s){if(s.type==="function")return{type:"function",name:s.function.name};if(s.type==="allowed_tools")return{type:"allowed_tools",mode:s.allowed_tools.mode,tools:s.allowed_tools.tools};if(s.type==="custom")return{type:"custom",name:s.custom.name}}})(),text:(()=>{if(e?.text)return e.text;const s=this._getResponseFormat(e?.response_format);return s?.type==="json_schema"?s.json_schema.schema!=null?{format:{type:"json_schema",schema:s.json_schema.schema,description:s.json_schema.description,name:s.json_schema.name,strict:s.json_schema.strict},verbosity:e?.verbosity}:void 0:{format:s,verbosity:e?.verbosity}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},r=this._getReasoningParams(e);return r!==void 0&&(n.reasoning=r),n}async _generate(e,t){const n=this.invocationParams(t);if(n.stream){const r=this._streamResponseChunks(e,t);let s;for await(const a of r)a.message.response_metadata={...a.generationInfo,...a.message.response_metadata},s=s?.concat(a)??a;return{generations:s?[s]:[],llmOutput:{estimatedTokenUsage:s?.message?.usage_metadata}}}else{const r=await this.completionWithRetry({input:D$({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),...n,stream:!1},{signal:t?.signal,...t?.options});return{generations:[{text:r.output_text,message:KH(r)}],llmOutput:{id:r.id,estimatedTokenUsage:r.usage?{promptTokens:r.usage.input_tokens,completionTokens:r.usage.output_tokens,totalTokens:r.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(e,t,n){const r=await this.completionWithRetry({...this.invocationParams(t),input:D$({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0},t);for await(const s of r){const a=u1e(s);a!=null&&(yield a,await n?.handleLLMNewToken(a.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:a}))}}async completionWithRetry(e,t){return this.caller.call(async()=>{const n=this._getClientOptions(t);try{return e.text?.format?.type==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(r){throw _N(r)}})}_reduceChatOpenAITools(e,t){const n=[];for(const r of e)if(kN(r))r.type==="image_generation"&&t?.stream&&(r.partial_images=1),n.push(r);else if(tx(r)){const s=r.metadata.customTool;n.push({type:"custom",name:s.name,description:s.description,format:s.format})}else yh(r)?n.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:t?.strict??null}):zH(r)&&n.push(nke(r));return n}},gv=class ZH extends TN{useResponsesApi=!1;responses;completions;get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}constructor(t){super(t),this.fields=t,this.useResponsesApi=t?.useResponsesApi??!1,this.responses=t?.responses??new h1e(t),this.completions=t?.completions??new l1e(t)}_useResponsesApi(t){const n=t?.tools?.some(kN),r=t?.previous_response_id!=null||t?.text!=null||t?.truncation!=null||t?.include!=null||t?.reasoning?.summary!=null||this.reasoning?.summary!=null,s=t?.tools?.some(zH)||t?.tools?.some(tx);return this.useResponsesApi||n||r||s||B_e(this.model)}getLsParams(t){const n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.getLsParams(n):this.completions.getLsParams(n)}invocationParams(t){const n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.invocationParams(n):this.completions.invocationParams(n)}async _generate(t,n,r){return this._useResponsesApi(n)?this.responses._generate(t,n):this.completions._generate(t,n,r)}async*_streamResponseChunks(t,n,r){if(this._useResponsesApi(n)){yield*this.responses._streamResponseChunks(t,this._combineCallOptions(n),r);return}yield*this.completions._streamResponseChunks(t,this._combineCallOptions(n),r)}withConfig(t){const n=new ZH(this.fields);return n.defaultOptions={...this.defaultOptions,...t},n}},f1e={};Ut(f1e,{BaseLLM:()=>WH,LLM:()=>p1e});var WH=class gp extends Wj{lc_namespace=["langchain","llms",this._llmType()];async invoke(t,n){const r=gp._convertInputToPromptValue(t);return(await this.generatePrompt([r],n,n?.callbacks)).generations[0][0].text}async*_streamResponseChunks(t,n,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(t){const[n,r]=super._separateRunnableConfigFromCallOptions(t);return r.signal=n.signal,[n,r]}async*_streamIterator(t,n){if(this._streamResponseChunks===gp.prototype._streamResponseChunks)yield this.invoke(t,n);else{const r=gp._convertInputToPromptValue(t),[s,a]=this._separateRunnableConfigFromCallOptionsCompat(n),i=await Cs.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o={options:a,invocation_params:this?.invocationParams(a),batch_size:1},u=await i?.handleLLMStart(this.toJSON(),[r.toString()],s.runId,void 0,o,void 0,void 0,s.runName);let h=new Dd({text:""});try{for await(const f of this._streamResponseChunks(r.toString(),a,u?.[0]))h?h=h.concat(f):h=f,typeof f.text=="string"&&(yield f.text)}catch(f){throw await Promise.all((u??[]).map(m=>m?.handleLLMError(f))),f}await Promise.all((u??[]).map(f=>f?.handleLLMEnd({generations:[[h]]})))}}async generatePrompt(t,n,r){const s=t.map(a=>a.toString());return this.generate(s,n,r)}invocationParams(t){return{}}_flattenLLMResult(t){const n=[];for(let r=0;r<t.generations.length;r+=1){const s=t.generations[r];if(r===0)n.push({generations:[s],llmOutput:t.llmOutput});else{const a=t.llmOutput?{...t.llmOutput,tokenUsage:{}}:void 0;n.push({generations:[s],llmOutput:a})}}return n}async _generateUncached(t,n,r,s){let a;if(s!==void 0&&s.length===t.length)a=s;else{const h=await Cs.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),f={options:n,invocation_params:this?.invocationParams(n),batch_size:t.length};a=await h?.handleLLMStart(this.toJSON(),t,r.runId,void 0,f,void 0,void 0,r?.runName)}const i=!!a?.[0].handlers.find(fj);let o;if(i&&t.length===1&&this._streamResponseChunks!==gp.prototype._streamResponseChunks)try{const h=await this._streamResponseChunks(t[0],n,a?.[0]);let f;for await(const m of h)f===void 0?f=m:f=Nl(f,m);if(f===void 0)throw new Error("Received empty response from chat model call.");o={generations:[[f]],llmOutput:{}},await a?.[0].handleLLMEnd(o)}catch(h){throw await a?.[0].handleLLMError(h),h}else{try{o=await this._generate(t,n,a?.[0])}catch(f){throw await Promise.all((a??[]).map(m=>m?.handleLLMError(f))),f}const h=this._flattenLLMResult(o);await Promise.all((a??[]).map((f,m)=>f?.handleLLMEnd(h[m])))}const u=a?.map(h=>h.runId)||void 0;return Object.defineProperty(o,Yp,{value:u?{runIds:u}:void 0,configurable:!0}),o}async _generateCached({prompts:t,cache:n,llmStringKey:r,parsedOptions:s,handledOptions:a,runId:i}){const o=await Cs.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(s),batch_size:t.length},h=await o?.handleLLMStart(this.toJSON(),t,i,void 0,u,void 0,void 0,a?.runName),f=[],g=(await Promise.allSettled(t.map(async(x,S)=>{const k=await n.lookup(x,r);return k==null&&f.push(S),k}))).map((x,S)=>({result:x,runManager:h?.[S]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),b=[];await Promise.all(g.map(async({result:x,runManager:S},k)=>{if(x.status==="fulfilled"){const C=x.value;return b[k]=C.map(T=>(T.generationInfo={...T.generationInfo,tokenUsage:{}},T)),C.length&&await S?.handleLLMNewToken(C[0].text),S?.handleLLMEnd({generations:[C]},void 0,void 0,void 0,{cached:!0})}else return await S?.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(x.reason)}));const w={generations:b,missingPromptIndices:f,startedRunManagers:h};return Object.defineProperty(w,Yp,{value:h?{runIds:h?.map(x=>x.runId)}:void 0,configurable:!0}),w}async generate(t,n,r){if(!Array.isArray(t))throw new Error("Argument 'prompts' is expected to be a string[]");let s;Array.isArray(n)?s={stop:n}:s=n;const[a,i]=this._separateRunnableConfigFromCallOptionsCompat(s);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(t,i,a);const{cache:o}=this,u=this._getSerializedCacheKeyParametersForCall(i),{generations:h,missingPromptIndices:f,startedRunManagers:m}=await this._generateCached({prompts:t,cache:o,llmStringKey:u,parsedOptions:i,handledOptions:a,runId:a.runId});let g={};if(f.length>0){const b=await this._generateUncached(f.map(w=>t[w]),i,a,m!==void 0?f.map(w=>m?.[w]):void 0);await Promise.all(b.generations.map(async(w,x)=>{const S=f[x];return h[S]=w,o.update(t[S],u,w)})),g=b.llmOutput??{}}return{generations:h,llmOutput:g}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},p1e=class extends WH{async _generate(e,t,n){return{generations:await Promise.all(e.map((s,a)=>this._call(s,{...t,promptIndex:a},n).then(i=>[{text:i}])))}}},m1e={};Ut(m1e,{chunkArray:()=>g1e});const g1e=(e,t)=>e.reduce((n,r,s)=>{const a=Math.floor(s/t),i=n[a]||[];return n[a]=i.concat([r]),n},[]);var y1e={};Ut(y1e,{Embeddings:()=>b1e});var b1e=class{caller;constructor(t){this.caller=new Pm(t??{})}};const x1e=xe({type:Ct("screenshot")}),v1e=xe({type:Ct("click"),x:qe(),y:qe(),button:Ue(["left","right","wheel","back","forward"]).default("left")}),w1e=xe({type:Ct("double_click"),x:qe(),y:qe(),button:Ue(["left","right","wheel","back","forward"]).default("left")}),_1e=xe({type:Ct("drag"),path:Pe(xe({x:qe(),y:qe()}))}),k1e=xe({type:Ct("keypress"),keys:Pe(J())}),S1e=xe({type:Ct("move"),x:qe(),y:qe()}),T1e=xe({type:Ct("scroll"),x:qe(),y:qe(),scroll_x:qe(),scroll_y:qe()}),C1e=xe({type:Ct("type"),text:J()}),E1e=xe({type:Ct("wait"),duration:qe().optional()}),j1e=eu("type",[x1e,v1e,w1e,_1e,k1e,S1e,T1e,C1e,E1e]);xe({action:j1e});const N1e=xe({type:Ct("exec"),command:Pe(J()),env:exe(J(),J()).optional(),working_directory:J().optional(),timeout_ms:qe().optional(),user:J().optional()});eu("type",[N1e]);xe({commands:Pe(J()).describe("Array of shell commands to execute"),timeout_ms:qe().optional().describe("Optional timeout in milliseconds for the commands"),max_output_length:qe().optional().describe("Optional maximum number of characters to return from each command")});const A1e=xe({type:Ct("create_file"),path:J(),diff:J()}),I1e=xe({type:Ct("update_file"),path:J(),diff:J()}),O1e=xe({type:Ct("delete_file"),path:J()});eu("type",[A1e,I1e,O1e]);class R1e extends tu{getProviderName(){return"openai"}getEndpoint(){return"https://api.openai.com/v1"}createModel(){return new gv({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096})}}function Zc(e){if(typeof e=="object"&&e!==null){const t={...e};"additionalProperties"in t&&delete t.additionalProperties,"$schema"in t&&delete t.$schema,"strict"in t&&delete t.strict;for(const n in t)n in t&&(Array.isArray(t[n])?t[n]=t[n].map(Zc):typeof t[n]=="object"&&t[n]!==null&&(t[n]=Zc(t[n])));return t}return e}function EC(e){const t=Zc(Lr(e)?dr(e):e),{$schema:n,...r}=t;return r}function P1e(e){const t=Zc(e),{$schema:n,...r}=t;return r}const CN="__gemini_function_call_thought_signatures__",M1e="ErYCCrMCAdHtim9kOoOkrPiCNVsmlpMIKd7ZMxgiFbVQOkgp7nlLcDMzVsZwIzvuT7nQROivoXA72ccC2lSDvR0Gh7dkWaGuj7ctv6t7ZceHnecx0QYa+ix8tYpRfjhyWozQ49lWiws6+YGjCt10KRTyWsZ2h6O7iHTYJwKIRwGUHRKy/qK/6kFxJm5ML00gLq4D8s5Z6DBpp2ZlR+uF4G8jJgeWQgyHWVdx2wGYElaceVAc66tZdPQRdOHpWtgYSI1YdaXgVI8KHY3/EfNc2YqqMIulvkDBAnuMhkAjV9xmBa54Tq+ih3Im4+r3DzqhGqYdsSkhS0kZMwte4Hjs65dZzCw9lANxIqYi1DJ639WNPYihp/DCJCos7o+/EeSPJaio5sgWDyUnMGkY1atsJZ+m7pj7DD5tvQ==",D1e=e=>e();function $1e(e){return Bi.isInstance(e)?e.role:e.type}function L1e(e){switch(e){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${e}`)}}function z1e(e){if("mimeType"in e&&"data"in e)return{inlineData:{mimeType:e.mimeType,data:e.data}};if("mimeType"in e&&"fileUri"in e)return{fileData:{mimeType:e.mimeType,fileUri:e.fileUri}};throw new Error("Invalid media content")}function U1e(e,t){return t.map(n=>Co(n)?n.tool_calls??[]:[]).flat().find(n=>n.id===e.tool_call_id)?.name}function F1e(e){return{providerName:"Google Gemini",fromStandardTextBlock(n){return{text:n.text}},fromStandardImageBlock(n){if(!e)throw new Error("This model does not support images");if(n.source_type==="url"){const r=Oi({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)},fromStandardAudioBlock(n){if(!e)throw new Error("This model does not support audio");if(n.source_type==="url"){const r=Oi({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)},fromStandardFileBlock(n){if(!e)throw new Error("This model does not support files");if(n.source_type==="text")return{text:n.text};if(n.source_type==="url"){const r=Oi({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)}}}function $$(e,t){if(Ea(e))return Nm(e,F1e(t));if(e.type==="text")return{text:e.text};if(e.type==="executableCode")return{executableCode:e.executableCode};if(e.type==="codeExecutionResult")return{codeExecutionResult:e.codeExecutionResult};if(e.type==="image_url"){if(!t)throw new Error("This model does not support images");let n;if(typeof e.image_url=="string")n=e.image_url;else if(typeof e.image_url=="object"&&"url"in e.image_url)n=e.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[r,s]=n.split(",");if(!r.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[a,i]=r.replace(/^data:/,"").split(";");if(i!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:s,mimeType:a}}}else{if(e.type==="media")return z1e(e);if(e.type==="tool_use")return{functionCall:{name:e.name,args:e.input}};if(e.type?.includes("/")&&e.type.split("/").length===2&&"data"in e&&typeof e.data=="string")return{inlineData:{mimeType:e.type,data:e.data}};if("functionCall"in e)return;throw"type"in e?new Error(`Unknown content type ${e.type}`):new Error(`Unknown content ${JSON.stringify(e)}`)}}function B1e(e,t,n,r){if(oj(e)){const o=e.name??U1e(e,n);if(o===void 0)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${e.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const u=Array.isArray(e.content)?e.content.map(h=>$$(h,t)).filter(h=>h!==void 0):e.content;return e.status==="error"?[{functionResponse:{name:o,response:{error:{details:u}}}}]:[{functionResponse:{name:o,response:{result:u}}}]}let s=[];const a=[];typeof e.content=="string"&&e.content&&a.push({text:e.content}),Array.isArray(e.content)&&a.push(...e.content.map(o=>$$(o,t)).filter(o=>o!==void 0));const i=e.additional_kwargs?.[CN];return Co(e)&&e.tool_calls?.length&&(s=e.tool_calls.map(o=>{const u=D1e(()=>{if(o.id){const h=i?.[o.id];if(h)return h}return r?.includes("gemini-3")?M1e:""});return{functionCall:{name:o.name,args:o.args},...u?{thoughtSignature:u}:{}}})),[...a,...s]}function L$(e,t,n=!1,r){return e.reduce((s,a,i)=>{if(!xo(a))throw new Error("Unsupported message input");const o=$1e(a);if(o==="system"&&i!==0)throw new Error("System message should be the first one");const u=L1e(o),h=s.content[s.content.length];if(!s.mergeWithPreviousContent&&h&&h.role===u)throw new Error("Google Generative AI requires alternate messages between authors");const f=B1e(a,t,e.slice(0,i),r);if(s.mergeWithPreviousContent){const b=s.content[s.content.length-1];if(!b)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return b.parts.push(...f),{mergeWithPreviousContent:!1,content:s.content}}let m=u;(m==="function"||m==="system"&&!n)&&(m="user");const g={role:m,parts:f};return{mergeWithPreviousContent:o==="system"&&!n,content:[...s.content,g]}},{content:[],mergeWithPreviousContent:!1}).content}function H1e(e,t){if(!e.candidates||e.candidates.length===0||!e.candidates[0])return{generations:[],llmOutput:{filters:e.promptFeedback}};const[n]=e.candidates,{content:r,...s}=n,a=r.parts?.reduce((f,m)=>("functionCall"in m&&m.functionCall&&f.push({...m,id:"id"in m.functionCall&&typeof m.functionCall.id=="string"?m.functionCall.id:WC()}),f),[]);let i;Array.isArray(r?.parts)&&r.parts.length===1&&r.parts[0].text?i=r.parts[0].text:Array.isArray(r?.parts)&&r.parts.length>0?i=r.parts.map(f=>"text"in f?{type:"text",text:f.text}:"inlineData"in f?{type:"inlineData",inlineData:f.inlineData}:"functionCall"in f?{type:"functionCall",functionCall:f.functionCall}:"functionResponse"in f?{type:"functionResponse",functionResponse:f.functionResponse}:"fileData"in f?{type:"fileData",fileData:f.fileData}:"executableCode"in f?{type:"executableCode",executableCode:f.executableCode}:"codeExecutionResult"in f?{type:"codeExecutionResult",codeExecutionResult:f.codeExecutionResult}:f):i=[];const o=a?.reduce((f,m)=>("thoughtSignature"in m&&typeof m.thoughtSignature=="string"&&(f[m.id]=m.thoughtSignature),f),{});let u="";return typeof i=="string"?u=i:Array.isArray(i)&&i.length>0&&(u=i.find(m=>"text"in m)?.text??u),{generations:[{text:u,message:new pr({content:i??"",tool_calls:a?.map(f=>({type:"tool_call",id:f.id,name:f.functionCall.name,args:f.functionCall.args})),additional_kwargs:{...s,[CN]:o},usage_metadata:t?.usageMetadata}),generationInfo:s}],llmOutput:{tokenUsage:{promptTokens:t?.usageMetadata?.input_tokens,completionTokens:t?.usageMetadata?.output_tokens,totalTokens:t?.usageMetadata?.total_tokens}}}}function q1e(e,t){if(!e.candidates||e.candidates.length===0)return null;const[n]=e.candidates,{content:r,...s}=n,a=r.parts?.reduce((f,m)=>("functionCall"in m&&m.functionCall&&f.push({...m,id:"id"in m.functionCall&&typeof m.functionCall.id=="string"?m.functionCall.id:WC()}),f),[]);let i;Array.isArray(r?.parts)&&r.parts.every(f=>"text"in f)?i=r.parts.map(f=>f.text).join(""):Array.isArray(r?.parts)?i=r.parts.map(f=>"text"in f?{type:"text",text:f.text}:"inlineData"in f?{type:"inlineData",inlineData:f.inlineData}:"functionCall"in f?{type:"functionCall",functionCall:f.functionCall}:"functionResponse"in f?{type:"functionResponse",functionResponse:f.functionResponse}:"fileData"in f?{type:"fileData",fileData:f.fileData}:"executableCode"in f?{type:"executableCode",executableCode:f.executableCode}:"codeExecutionResult"in f?{type:"codeExecutionResult",codeExecutionResult:f.codeExecutionResult}:f):i=[];let o="";i&&typeof i=="string"?o=i:Array.isArray(i)&&(o=i.find(m=>"text"in m)?.text??"");const u=[];a&&u.push(...a.map(f=>({type:"tool_call_chunk",id:f.id,name:f.functionCall.name,args:JSON.stringify(f.functionCall.args)})));const h=a?.reduce((f,m)=>("thoughtSignature"in m&&typeof m.thoughtSignature=="string"&&(f[m.id]=m.thoughtSignature),f),{});return new Ui({text:o,message:new kn({content:i||"",name:r?r.role:void 0,tool_call_chunks:u,additional_kwargs:{[CN]:h},response_metadata:{model_provider:"google-genai"},usage_metadata:t.usageMetadata}),generationInfo:s})}function V1e(e){return e.every(t=>"functionDeclarations"in t&&Array.isArray(t.functionDeclarations))?e:[{functionDeclarations:e.map(t=>{if(Pl(t)){const n=EC(t.schema);return n.type==="object"&&"properties"in n&&Object.keys(n.properties).length===0?{name:t.name,description:t.description}:{name:t.name,description:t.description,parameters:n}}return yh(t)?{name:t.function.name,description:t.function.description??"A function available to call.",parameters:P1e(t.function.parameters)}:t})}]}function z$(e,t){const n={input_tokens:e?.promptTokenCount??0,output_tokens:e?.candidatesTokenCount??0,total_tokens:e?.totalTokenCount??0};if(e?.cachedContentTokenCount&&(n.input_token_details??={},n.input_token_details.cache_read=e.cachedContentTokenCount),t==="gemini-3-pro-preview"){const r=Math.max(0,e?.promptTokenCount??-2e5),s=Math.max(0,e?.cachedContentTokenCount??-2e5);r&&(n.input_token_details={...n.input_token_details,over_200k:r}),s&&(n.input_token_details={...n.input_token_details,cache_read_over_200k:s})}return n}var U$=class extends Qx{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}lc_namespace=["langchain","google_genai","output_parsers"];returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(e){super(e),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await Gx(this.zodSchema,e);if(t.success)return t.data;throw new ka(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.issues)}`,JSON.stringify(e,null,2))}async parseResult(e){const t=e.flatMap(s=>{const{message:a}=s;return!("tool_calls"in a)||!Array.isArray(a.tool_calls)?[]:a.tool_calls});if(t[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[n]=t;return await this._validateResult(n.args)}},F$;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(F$||(F$={}));var B$;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(B$||(B$={}));var H$;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(H$||(H$={}));const q$=["user","model","function","system"];var V$;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(V$||(V$={}));var G$;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(G$||(G$={}));var K$;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(K$||(K$={}));var Z$;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Z$||(Z$={}));var Np;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Np||(Np={}));var W$;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(W$||(W$={}));var xd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(xd||(xd={}));var J$;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(J$||(J$={}));class Hr extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Wu extends Hr{constructor(t,n){super(t),this.response=n}}class JH extends Hr{constructor(t,n,r,s){super(t),this.status=n,this.statusText=r,this.errorDetails=s}}class Tl extends Hr{}class YH extends Hr{}const G1e="https://generativelanguage.googleapis.com",K1e="v1beta",Z1e="0.24.1",W1e="genai-js";var Wc;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Wc||(Wc={}));class J1e{constructor(t,n,r,s,a){this.model=t,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=a}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||K1e;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||G1e}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function Y1e(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${W1e}/${Z1e}`),t.join(" ")}async function Q1e(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Y1e(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new Tl(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,a]of r.entries()){if(s==="x-goog-api-key")throw new Tl(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Tl(`Header name ${s} can only be set using the apiClient field`);n.append(s,a)}}return n}async function X1e(e,t,n,r,s,a){const i=new J1e(e,t,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},rSe(a)),{method:"POST",headers:await Q1e(i),body:s})}}async function Gm(e,t,n,r,s,a={},i=fetch){const{url:o,fetchOptions:u}=await X1e(e,t,n,r,s,a);return eSe(o,u,i)}async function eSe(e,t,n=fetch){let r;try{r=await n(e,t)}catch(s){tSe(s,e)}return r.ok||await nSe(r,e),r}function tSe(e,t){let n=e;throw n.name==="AbortError"?(n=new YH(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof JH||e instanceof Tl||(n=new Hr(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function nSe(e,t){let n="",r;try{const s=await e.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new JH(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function rSe(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const n=new AbortController;e?.timeout>=0&&setTimeout(()=>n.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function EN(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Q0(e.candidates[0]))throw new Wu(`${yl(e)}`,e);return sSe(e)}else if(e.promptFeedback)throw new Wu(`Text not available. ${yl(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Q0(e.candidates[0]))throw new Wu(`${yl(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Y$(e)[0]}else if(e.promptFeedback)throw new Wu(`Function call not available. ${yl(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Q0(e.candidates[0]))throw new Wu(`${yl(e)}`,e);return Y$(e)}else if(e.promptFeedback)throw new Wu(`Function call not available. ${yl(e)}`,e)},e}function sSe(e){var t,n,r,s;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function Y$(e){var t,n,r,s;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const aSe=[Np.RECITATION,Np.SAFETY,Np.LANGUAGE];function Q0(e){return!!e.finishReason&&aSe.includes(e.finishReason)}function yl(e){var t,n,r;let s="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)s+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(s+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const a=e.candidates[0];Q0(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function lm(e){return this instanceof lm?(this.v=e,this):new lm(e)}function iSe(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(g){r[g]&&(s[g]=function(b){return new Promise(function(w,x){a.push([g,b,w,x])>1||o(g,b)})})}function o(g,b){try{u(r[g](b))}catch(w){m(a[0][3],w)}}function u(g){g.value instanceof lm?Promise.resolve(g.value.v).then(h,f):m(a[0][2],g)}function h(g){o("next",g)}function f(g){o("throw",g)}function m(g,b){g(b),a.shift(),a.length&&o(a[0][0],a[0][1])}}const Q$=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function oSe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=uSe(t),[r,s]=n.tee();return{stream:cSe(r),response:lSe(s)}}async function lSe(e){const t=[],n=e.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return EN(dSe(t));t.push(s)}}function cSe(e){return iSe(this,arguments,function*(){const n=e.getReader();for(;;){const{value:r,done:s}=yield lm(n.read());if(s)break;yield yield lm(EN(r))}})}function uSe(e){const t=e.getReader();return new ReadableStream({start(r){let s="";return a();function a(){return t.read().then(({value:i,done:o})=>{if(o){if(s.trim()){r.error(new Hr("Failed to parse stream"));return}r.close();return}s+=i;let u=s.match(Q$),h;for(;u;){try{h=JSON.parse(u[1])}catch{r.error(new Hr(`Error parsing JSON response: "${u[1]}"`));return}r.enqueue(h),s=s.substring(u[0].length),u=s.match(Q$)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new YH("Request aborted when reading from the stream"):o=new Hr("Error reading from the stream"),o})}}})}function dSe(e){const t=e[e.length-1],n={promptFeedback:t?.promptFeedback};for(const r of e){if(r.candidates){let s=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=a.citationMetadata,n.candidates[s].groundingMetadata=a.groundingMetadata,n.candidates[s].finishReason=a.finishReason,n.candidates[s].finishMessage=a.finishMessage,n.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[s].content||(n.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),n.candidates[s].content.parts.push(i)}s++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function QH(e,t,n,r){const s=await Gm(t,Wc.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r);return oSe(s)}async function XH(e,t,n,r){const a=await(await Gm(t,Wc.GENERATE_CONTENT,e,!1,JSON.stringify(n),r)).json();return{response:EN(a)}}function eq(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function cm(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return hSe(t)}function hSe(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),s=!0):(t.parts.push(a),r=!0);if(r&&s)throw new Hr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new Hr("No content is provided for sending chat message.");return r?t:n}function fSe(e,t){var n;let r={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(n=t?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=e.generateContentRequest!=null;if(e.contents){if(s)throw new Tl("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(s)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const a=cm(e);r.contents=[a]}return{generateContentRequest:r}}function X$(e){let t;return e.contents?t=e:t={contents:[cm(e)]},e.systemInstruction&&(t.systemInstruction=eq(e.systemInstruction)),t}function pSe(e){return typeof e=="string"||Array.isArray(e)?{content:cm(e)}:e}const eL=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],mSe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function gSe(e){let t=!1;for(const n of e){const{role:r,parts:s}=n;if(!t&&r!=="user")throw new Hr(`First content should be with role 'user', got ${r}`);if(!q$.includes(r))throw new Hr(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(q$)}`);if(!Array.isArray(s))throw new Hr("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Hr("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const u of eL)u in o&&(a[u]+=1);const i=mSe[r];for(const o of eL)if(!i.includes(o)&&a[o]>0)throw new Hr(`Content with role '${r}' can't contain '${o}' part`);t=!0}}function tL(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const nL="SILENT_ERROR";class ySe{constructor(t,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r?.history&&(gSe(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,s,a,i,o,u;await this._sendPromise;const h=cm(t),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,h]},m=Object.assign(Object.assign({},this._requestOptions),n);let g;return this._sendPromise=this._sendPromise.then(()=>XH(this._apiKey,this.model,f,m)).then(b=>{var w;if(tL(b.response)){this._history.push(h);const x=Object.assign({parts:[],role:"model"},(w=b.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(x)}else{const x=yl(b.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}g=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,g}async sendMessageStream(t,n={}){var r,s,a,i,o,u;await this._sendPromise;const h=cm(t),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,h]},m=Object.assign(Object.assign({},this._requestOptions),n),g=QH(this._apiKey,this.model,f,m);return this._sendPromise=this._sendPromise.then(()=>g).catch(b=>{throw new Error(nL)}).then(b=>b.response).then(b=>{if(tL(b)){this._history.push(h);const w=Object.assign({},b.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=yl(b);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(b=>{b.message!==nL&&console.error(b)}),g}}async function bSe(e,t,n,r){return(await Gm(t,Wc.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}async function xSe(e,t,n,r){return(await Gm(t,Wc.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}async function vSe(e,t,n,r){const s=n.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await Gm(t,Wc.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),r)).json()}class rL{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=eq(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const s=X$(t),a=Object.assign(Object.assign({},this._requestOptions),n);return XH(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}async generateContentStream(t,n={}){var r;const s=X$(t),a=Object.assign(Object.assign({},this._requestOptions),n);return QH(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}startChat(t){var n;return new ySe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=fSe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return bSe(this.apiKey,this.model,r,s)}async embedContent(t,n={}){const r=pSe(t),s=Object.assign(Object.assign({},this._requestOptions),n);return xSe(this.apiKey,this.model,r,s)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return vSe(this.apiKey,this.model,t,r)}}class sL{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new Hr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new rL(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new Tl("Cached content must contain a `name` field.");if(!t.model)throw new Tl("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(n?.[i]&&t[i]&&n?.[i]!==t[i]){if(i==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===u)continue}throw new Tl(`Different value for "${i}" specified in modelParams (${n[i]}) and cachedContent (${t[i]})`)}const a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new rL(this.apiKey,a,r)}}function aL(e,t){const n=wSe(e),r=kSe(n,t);return{tools:n,toolConfig:r}}function wSe(e){let t=[];const n=[];return e.forEach(s=>{if(Pl(s)){const[a]=V1e([s]);a.functionDeclarations&&t.push(...a.functionDeclarations)}else if(yh(s)){const{functionDeclarations:a}=_Se(s);if(a)t.push(...a);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else n.push(s)}),n.find(s=>"functionDeclarations"in s)?n.map(s=>{if(t?.length>0&&"functionDeclarations"in s){const a={functionDeclarations:[...s.functionDeclarations||[],...t]};return t=[],a}return s}):[...n,...t.length>0?[{functionDeclarations:t}]:[]]}function _Se(e){return{functionDeclarations:[{name:e.function.name,description:e.function.description,parameters:Zc(e.function.parameters)}]}}function kSe(e,t){if(!e.length||!t)return;const{toolChoice:n,allowedFunctionNames:r}=t,s={any:xd.ANY,auto:xd.AUTO,none:xd.NONE};if(n&&["any","auto","none"].includes(n))return{functionCallingConfig:{mode:s[n]??"MODE_UNSPECIFIED",allowedFunctionNames:r}};if(typeof n=="string"||r)return{functionCallingConfig:{mode:xd.ANY,allowedFunctionNames:[...r??[],...n&&typeof n=="string"?[n]:[]]}}}const SSe={"gemini-embedding-001":{maxInputTokens:2048,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-image":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-05-20":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-lite-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-05-06":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.0-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash-preview-native-audio":{maxInputTokens:131072,imageInputs:!1,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.0-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-06-05":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-06-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-image-preview":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-04-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-pro-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-pro":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-flash":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-1.5-flash-8b":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-pro":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1}};var TSe=SSe,CSe=class extends bh{static lc_name(){return"ChatGoogleGenerativeAI"}lc_serializable=!0;get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}lc_namespace=["langchain","chat_models","google_genai"];get lc_aliases(){return{apiKey:"google_api_key"}}model;temperature;maxOutputTokens;topP;topK;stopSequences=[];safetySettings;apiKey;streaming=!1;json;streamUsage=!0;convertSystemMessageToHumanContent;thinkingConfig;client;get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")||this.model.startsWith("gemma-3-")&&!this.model.startsWith("gemma-3-1b")||this.model.startsWith("gemini-3")}constructor(e){if(super(e),this.model=e.model.replace(/^models\//,""),this.maxOutputTokens=e.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=e.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e.stopSequences??this.stopSequences,this.apiKey=e.apiKey??Ws("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(n=>n.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e.streaming??this.streaming,this.json=e.json,this.thinkingConfig=e.thinkingConfig??this.thinkingConfig,this.client=new sL(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{},...this.thinkingConfig?{thinkingConfig:this.thinkingConfig}:{}}},{apiVersion:e.apiVersion,baseUrl:e.baseUrl,customHeaders:e.customHeaders}),this.streamUsage=e.streamUsage??this.streamUsage}useCachedContent(e,t,n){this.apiKey&&(this.client=new sL(this.apiKey).getGenerativeModelFromCachedContent(e,t,n))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.model==="gemini-1.0-pro-001"||this.model.startsWith("gemini-pro-vision")||this.model.startsWith("gemini-1.0-pro-vision")?!1:this.model!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,t){return this.withConfig({tools:aL(e)?.tools,...t})}invocationParams(e){const t=e?.tools?.length?aL(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return e?.responseSchema?(this.client.generationConfig.responseSchema=e.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...t?.tools?{tools:t.tools}:{},...t?.toolConfig?{toolConfig:t.toolConfig}:{}}}async _generate(e,t,n){const r=L$(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let s=r;if(r[0].role==="system"){const[h]=r;this.client.systemInstruction=h,s=r.slice(1)}const a=this.invocationParams(t);if(this.streaming){const h={},f=this._streamResponseChunks(e,t,n),m={};for await(const b of f){const w=b.generationInfo?.completion??0;m[w]===void 0?m[w]=b:m[w]=m[w].concat(b)}return{generations:Object.entries(m).sort(([b],[w])=>parseInt(b,10)-parseInt(w,10)).map(([b,w])=>w),llmOutput:{estimatedTokenUsage:h}}}const i=await this.completionWithRetry({...a,contents:s});let o;"usageMetadata"in i.response&&(o=z$(i.response.usageMetadata,this.model));const u=H1e(i.response,{usageMetadata:o});return u.generations?.length>0&&await n?.handleLLMNewToken(u.generations[0]?.text??""),u}async*_streamResponseChunks(e,t,n){const r=L$(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let s=r;if(r[0].role==="system"){const[g]=r;this.client.systemInstruction=g,s=r.slice(1)}const i={...this.invocationParams(t),contents:s},o=await this.caller.callWithOptions({signal:t?.signal},async()=>{const{stream:g}=await this.client.generateContentStream(i);return g});let u,h=0,f=0,m=0;for await(const g of o){if("usageMetadata"in g&&g.usageMetadata!==void 0&&this.streamUsage!==!1&&t.streamUsage!==!1){u=z$(g.usageMetadata,this.model);const w=g.usageMetadata.promptTokenCount??0;u.input_tokens=Math.max(0,w-h),h=w;const x=g.usageMetadata.candidatesTokenCount??0;u.output_tokens=Math.max(0,x-f),f=x;const S=g.usageMetadata.totalTokenCount??0;u.total_tokens=Math.max(0,S-m),m=S}const b=q1e(g,{usageMetadata:u});b&&(yield b,await n?.handleLLMNewToken(b.text??""))}}async completionWithRetry(e,t){return this.caller.callWithOptions({signal:t?.signal},async()=>{try{return await this.client.generateContent(e)}catch(n){throw n.message?.includes("400 Bad Request")&&(n.status=400),n}})}get profile(){return TSe[this.model]??{}}withStructuredOutput(e,t){const n=e,r=t?.name,s=t?.method,a=t?.includeRaw;if(s==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let i,o;if(s==="functionCalling"){let m=r??"extract",g;if(Lr(n)){const b=EC(n);g=[{functionDeclarations:[{name:m,description:b.description??"A function available to call.",parameters:b}]}],o=new U$({returnSingle:!0,keyName:m,zodSchema:n})}else{let b;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(b=n,b.parameters=Zc(n.parameters),m=n.name):b={name:m,description:n.description??"",parameters:Zc(n)},g=[{functionDeclarations:[b]}],o=new U$({returnSingle:!0,keyName:m})}i=this.bindTools(g).withConfig({allowedFunctionNames:[m]})}else{const m=EC(n);i=this.withConfig({responseSchema:m}),o=new qd}if(!a)return i.pipe(o).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const u=ja.assign({parsed:(m,g)=>o.invoke(m.raw,g)}),h=ja.assign({parsed:()=>null}),f=u.withFallbacks({fallbacks:[h]});return Ul.from([{raw:i},f]).withConfig({runName:"StructuredOutputRunnable"})}};class ESe extends tu{getProviderName(){return"gemini"}getEndpoint(){return"https://generativelanguage.googleapis.com"}createModel(){return new CSe({apiKey:this.apiKey,model:this.model,temperature:.7,maxOutputTokens:4096})}}const jSe={"llama-3.1-8b-instant":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"mistral-saba-24b":{maxInputTokens:32768,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"llama3-8b-8192":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"qwen-qwq-32b":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"llama3-70b-8192":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"deepseek-r1-distill-llama-70b":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"llama-guard-3-8b":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemma2-9b-it":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"llama-3.3-70b-versatile":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"moonshotai/kimi-k2-instruct-0905":{maxInputTokens:262144,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"moonshotai/kimi-k2-instruct":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"openai/gpt-oss-20b":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"openai/gpt-oss-120b":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"qwen/qwen3-32b":{maxInputTokens:131072,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"meta-llama/llama-4-scout-17b-16e-instruct":{maxInputTokens:131072,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"meta-llama/llama-4-maverick-17b-128e-instruct":{maxInputTokens:131072,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"meta-llama/llama-guard-4-12b":{maxInputTokens:131072,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:128,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1}};var NSe=jSe;const od="0.19.0";let iL=!1,Ap,tq,nq,jC,rq,sq,aq,iq,oq;function ASe(e,t={auto:!1}){if(iL)throw new Error(`you must \`import 'groq-sdk/shims/${e.kind}'\` before importing anything else from groq-sdk`);if(Ap)throw new Error(`can't \`import 'groq-sdk/shims/${e.kind}'\` after \`import 'groq-sdk/shims/${Ap}'\``);iL=t.auto,Ap=e.kind,tq=e.fetch,nq=e.FormData,jC=e.File,rq=e.ReadableStream,sq=e.getMultipartRequestOptions,aq=e.getDefaultAgent,iq=e.fileFromPath,oq=e.isFsReadStream}class ISe{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function OSe({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,s,a;try{n=fetch,r=Request,s=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new ISe(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:i=>!1}}const lq=()=>{Ap||ASe(OSe(),{auto:!0})};lq();class ti extends Error{}class Kr extends ti{constructor(t,n,r,s){super(`${Kr.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.error=n}static makeMessage(t,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new yv({message:r,cause:IC(n)});const a=n;return t===400?new uq(t,a,r,s):t===401?new dq(t,a,r,s):t===403?new hq(t,a,r,s):t===404?new fq(t,a,r,s):t===409?new pq(t,a,r,s):t===422?new mq(t,a,r,s):t===429?new gq(t,a,r,s):t>=500?new yq(t,a,r,s):new Kr(t,a,r,s)}}class NC extends Kr{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class yv extends Kr{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class cq extends yv{constructor({message:t}={}){super({message:t??"Request timed out."})}}class uq extends Kr{}class dq extends Kr{}class hq extends Kr{}class fq extends Kr{}class pq extends Kr{}class mq extends Kr{}class gq extends Kr{}class yq extends Kr{}class vd{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;const s=new RSe;async function*a(){if(!t.body)throw n.abort(),new ti("Attempted to iterate over a response with no body");const o=new Jc,u=oL(t.body);for await(const h of u)for(const f of o.decode(h)){const m=s.decode(f);m&&(yield m)}for(const h of o.flush()){const f=s.decode(h);f&&(yield f)}}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const u of a())if(!o){if(u.data.startsWith("[DONE]")){o=!0;continue}if(u.event===null||u.event==="error"){let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(h&&h.error)throw new Kr(h.error.status_code,h.error,h.error.message,void 0);yield h}}o=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{o||n.abort()}}return new vd(i,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const i=new Jc,o=oL(t);for await(const u of o)for(const h of i.decode(u))yield h;for(const u of i.flush())yield u}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const o of s())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||n.abort()}}return new vd(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const i=r.next();t.push(i),n.push(i)}return a.shift()}});return[new vd(()=>s(t),this.controller),new vd(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new rq({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:i}=await n.next();if(i)return s.close();const o=r.encode(JSON.stringify(a)+`
`);s.enqueue(o)}catch(a){s.error(a)}},async cancel(){await n.return?.()}})}}class RSe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=PSe(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}class Jc{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Jc.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(Jc.NEWLINE_REGEXP);return s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ti(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ti(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ti("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}Jc.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);Jc.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function PSe(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function oL(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const bq=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",xq=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&bv(e),bv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",MSe=e=>xq(e)||bq(e)||oq(e);async function vq(e,t,n){if(e=await e,xq(e))return e;if(bq(e)){const s=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=bv(s)?[await s.arrayBuffer()]:[s];return new jC(a,t,n)}const r=await DSe(e);if(t||(t=LSe(e)??"unknown_file"),!n?.type){const s=r[0]?.type;typeof s=="string"&&(n={...n,type:s})}return new jC(r,t,n)}async function DSe(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(bv(e))t.push(await e.arrayBuffer());else if(zSe(e))for await(const n of e)t.push(n);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${$Se(e)}`);return t}function $Se(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function LSe(e){return sS(e.name)||sS(e.filename)||sS(e.path)?.split(/[\\/]/).pop()}const sS=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},zSe=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",lL=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",jN=async e=>{const t=await USe(e.body);return sq(t,e)},USe=async e=>{const t=new nq;return await Promise.all(Object.entries(e||{}).map(([n,r])=>AC(t,n,r))),t},AC=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(MSe(n)){const r=await vq(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>AC(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>AC(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var wq={};lq();async function _q(e){const{response:t}=e;if(e.options.stream)return Cd("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):vd.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const i=await t.json();return Cd("response",t.status,t.url,t.headers,i),i}const a=await t.text();return Cd("response",t.status,t.url,t.headers,a),a}class xv extends Promise{constructor(t,n=_q){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new xv(this.responsePromise,async n=>t(await this.parseResponse(n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class FSe{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e4,httpAgent:s,fetch:a}){this.baseURL=t,this.maxRetries=aS("maxRetries",n),this.timeout=aS("timeout",r),this.httpAgent=s,this.fetch=a??tq}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...GSe(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${XSe()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&bv(s?.body)?new DataView(await s.body.arrayBuffer()):s?.body instanceof DataView?s.body:s?.body instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s?.body)?new DataView(s.body.buffer):s?.body;return{method:t,path:n,...s,body:a}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){t={...t};const{method:r,path:s,query:a,headers:i={}}=t,o=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:lL(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,u=this.calculateContentLength(o),h=this.buildURL(s,a);"timeout"in t&&aS("timeout",t.timeout),t.timeout=t.timeout??this.timeout;const f=t.httpAgent??this.httpAgent??aq(h),m=t.timeout+1e3;typeof f?.options?.timeout=="number"&&m>(f.options.timeout??0)&&(f.options.timeout=m),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const g=this.buildHeaders({options:t,headers:i,contentLength:u,retryCount:n});return{req:{method:r,...o&&{body:o},headers:g,...f&&{agent:f},signal:t.signal??null},url:h,timeout:t.timeout}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const i=this.defaultHeaders(t);return fL(a,i),fL(a,n),lL(t.body)&&Ap!=="node"&&delete a["content-type"],m0(i,"x-stainless-retry-count")===void 0&&m0(n,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),m0(i,"x-stainless-timeout")===void 0&&m0(n,"x-stainless-timeout")===void 0&&t.timeout&&(a["x-stainless-timeout"]=String(t.timeout)),this.validateHeaders(a,n),a}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return Kr.generate(t,n,r,s)}request(t,n=null){return new xv(this.makeRequest(t,n))}async makeRequest(t,n){const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:a,url:i,timeout:o}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(a,{url:i,options:r}),Cd("request",i,r,a.headers),r.signal?.aborted)throw new NC;const u=new AbortController,h=await this.fetchWithTimeout(i,a,o,u).catch(IC);if(h instanceof Error){if(r.signal?.aborted)throw new NC;if(n)return this.retryRequest(r,n);throw h.name==="AbortError"?new cq:new yv({cause:h})}const f=HSe(h.headers);if(!h.ok){if(n&&this.shouldRetry(h)){const S=`retrying, ${n} attempts remaining`;return Cd(`response (error; ${S})`,h.status,i,f),this.retryRequest(r,n,f)}const m=await h.text().catch(S=>IC(S).message),g=KSe(m),b=g?void 0:m;throw Cd(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,h.status,i,f,b),this.makeStatusError(h.status,g,b,f)}return{response:h,options:r,controller:u}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new BSe(this,r,t)}buildURL(t,n){const r=WSe(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return YSe(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ti(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:a,...i}=n||{};a&&a.addEventListener("abort",()=>s.abort());const o=setTimeout(()=>s.abort(),r),u={signal:s.signal,...i};return u.method&&(u.method=u.method.toUpperCase()),this.fetch.call(void 0,t,u).finally(()=>{clearTimeout(o)})}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const a=r?.["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(s=o)}const i=r?.["retry-after"];if(i&&!s){const o=parseFloat(i);Number.isNaN(o)?s=Date.parse(i)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,o)}return await JSe(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${od}`}}class BSe extends xv{constructor(t,n,r){super(n,async s=>new r(t,s.response,await _q(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const HSe=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),qSe=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":od,"X-Stainless-OS":uL(Deno.build.os),"X-Stainless-Arch":cL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":od,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":od,"X-Stainless-OS":uL(process.platform),"X-Stainless-Arch":cL(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=VSe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":od,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":od,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function VSe(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,i=r[3]||0;return{browser:t,version:`${s}.${a}.${i}`}}}return null}const cL=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",uL=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let dL;const GSe=()=>dL??(dL=qSe()),KSe=e=>{try{return JSON.parse(e)}catch{return}},ZSe=/^[a-z][a-z0-9+.-]*:/i,WSe=e=>ZSe.test(e),JSe=e=>new Promise(t=>setTimeout(t,e)),aS=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ti(`${e} must be an integer`);if(t<0)throw new ti(`${e} must be a positive integer`);return t},IC=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},hL=e=>{if(typeof process<"u")return wq?.[e]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(e)?.trim()};function YSe(e){if(!e)return!0;for(const t in e)return!1;return!0}function QSe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fL(e,t){for(const n in t){if(!QSe(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}function Cd(e,...t){typeof process<"u"&&wq?.DEBUG==="true"&&console.log(`Groq:DEBUG:${e}`,...t)}const XSe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),eTe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",tTe=e=>typeof e?.get=="function",m0=(e,t)=>{const n=t.toLowerCase();if(tTe(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(s,a,i)=>a+i.toUpperCase());for(const s of[t,n,t.toUpperCase(),r]){const a=e.get(s);if(a)return a}}for(const[r,s]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};class pi{constructor(t){this._client=t}}class kq extends pi{create(t,n){return this._client.post("/openai/v1/audio/speech",{body:t,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class Sq extends pi{create(t,n){return this._client.post("/openai/v1/audio/transcriptions",jN({body:t,...n}))}}class Tq extends pi{create(t,n){return this._client.post("/openai/v1/audio/translations",jN({body:t,...n}))}}class Km extends pi{constructor(){super(...arguments),this.speech=new kq(this._client),this.transcriptions=new Sq(this._client),this.translations=new Tq(this._client)}}Km.Speech=kq;Km.Transcriptions=Sq;Km.Translations=Tq;class Cq extends pi{create(t,n){return this._client.post("/openai/v1/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/openai/v1/batches/${t}`,n)}list(t){return this._client.get("/openai/v1/batches",t)}cancel(t,n){return this._client.post(`/openai/v1/batches/${t}/cancel`,n)}}let Eq=class extends pi{create(t,n){return this._client.post("/openai/v1/chat/completions",{body:t,...n,stream:t.stream??!1})}};class NN extends pi{constructor(){super(...arguments),this.completions=new Eq(this._client)}}NN.Completions=Eq;class jq extends pi{}class Nq extends pi{create(t,n){return this._client.post("/openai/v1/embeddings",{body:t,...n})}}class Aq extends pi{create(t,n){return this._client.post("/openai/v1/files",jN({body:t,...n}))}list(t){return this._client.get("/openai/v1/files",t)}delete(t,n){return this._client.delete(`/openai/v1/files/${t}`,n)}content(t,n){return this._client.get(`/openai/v1/files/${t}/content`,n)}info(t,n){return this._client.get(`/openai/v1/files/${t}`,n)}}class Iq extends pi{retrieve(t,n){return this._client.get(`/openai/v1/models/${t}`,n)}list(t){return this._client.get("/openai/v1/models",t)}delete(t,n){return this._client.delete(`/openai/v1/models/${t}`,n)}}var Oq;class gn extends FSe{constructor({baseURL:t=hL("GROQ_BASE_URL"),apiKey:n=hL("GROQ_API_KEY"),...r}={}){if(n===void 0)throw new ti("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const s={apiKey:n,...r,baseURL:t||"https://api.groq.com"};if(!s.dangerouslyAllowBrowser&&eTe())throw new ti(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:s.baseURL,timeout:s.timeout??6e4,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new jq(this),this.chat=new NN(this),this.embeddings=new Nq(this),this.audio=new Km(this),this.models=new Iq(this),this.batches=new Cq(this),this.files=new Aq(this),this._options=s,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}Oq=gn;gn.Groq=Oq;gn.DEFAULT_TIMEOUT=6e4;gn.GroqError=ti;gn.APIError=Kr;gn.APIConnectionError=yv;gn.APIConnectionTimeoutError=cq;gn.APIUserAbortError=NC;gn.NotFoundError=fq;gn.ConflictError=pq;gn.RateLimitError=gq;gn.BadRequestError=uq;gn.AuthenticationError=dq;gn.InternalServerError=yq;gn.PermissionDeniedError=hq;gn.UnprocessableEntityError=mq;gn.toFile=vq;gn.fileFromPath=iq;gn.Completions=jq;gn.Chat=NN;gn.Embeddings=Nq;gn.Audio=Km;gn.Models=Iq;gn.Batches=Cq;gn.Files=Aq;const nTe=["frequency_penalty","function_call","functions","logit_bias","logprobs","max_completion_tokens","max_tokens","n","parallel_tool_calls","presence_penalty","reasoning_format","response_format","seed","service_tier","stop","temperature","tool_choice","top_logprobs","top_p"],rTe=["headers","promptIndex","stream_options","tools"],sTe=[...nTe,...rTe];function aTe(e){if(e.role!=="system"&&e.role!=="assistant"&&e.role!=="user"&&e.role!=="function")throw new Error(`Unsupported message role: ${e.role}. Expected "system", "assistant", "user", or "function"`);return e.role}function iTe(e){switch(e.type){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!Bi.isInstance(e))throw new Error("Invalid generic chat message");return aTe(e);default:throw new Error(`Unknown message type: ${e.type}`)}}function pL(e){return e.map(t=>{const n={role:iTe(t),content:t.content,name:t.name,function_call:t.additional_kwargs.function_call,tool_calls:t.additional_kwargs.tool_calls,tool_call_id:t.tool_call_id};return Co(t)&&t.tool_calls?.length?n.tool_calls=t.tool_calls.map(SN):(t.additional_kwargs.tool_calls!=null&&(n.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(n.tool_call_id=t.tool_call_id)),n})}function oTe(e,t,n){const r=e.tool_calls;switch(e.role){case"assistant":{const s=[],a=[];for(const i of r??[])try{s.push(Vm(i,{returnId:!0}))}catch(o){a.push(Td(i,o.message))}return new pr({content:e.content||"",additional_kwargs:{tool_calls:r},tool_calls:s,invalid_tool_calls:a,usage_metadata:t,response_metadata:n})}default:return new Bi(e.content||"",e.role??"unknown")}}function lTe(e,t,n,r){const s=e.role??t,a=e.content??"";let i;e.function_call?i={function_call:e.function_call}:e.tool_calls?i={tool_calls:e.tool_calls}:i={},e.audio&&(i.audio={...e.audio,index:n.choices[0].index});let o,u=r,h;const f=n.x_groq;f?.usage&&(o={input_tokens:f.usage.prompt_tokens,output_tokens:f.usage.completion_tokens,total_tokens:f.usage.total_tokens},h={completion_time:f.usage.completion_time,prompt_time:f.usage.prompt_time,queue_time:f.usage.queue_time,total_time:f.usage.total_time}),f?.id&&(u=f.id);const m={usage:o,timing:h};if(s==="user")return new dh({content:a,response_metadata:m});if(s==="assistant"){const g=[];if(Array.isArray(e.tool_calls))for(const b of e.tool_calls)g.push({name:b.function?.name,args:b.function?.arguments,id:b.id,index:b.index,type:"tool_call_chunk"});return new kn({content:a,tool_call_chunks:g,additional_kwargs:i,id:u,response_metadata:m})}else return s==="system"?new Li({content:a,response_metadata:m}):s==="developer"?new Li({content:a,response_metadata:m,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new uh({content:a,additional_kwargs:i,name:e.name,response_metadata:m}):s==="tool"?new lh({content:a,additional_kwargs:i,tool_call_id:e.tool_call_id,response_metadata:m}):new ch({content:a,role:s,response_metadata:m})}var cTe=class extends bh{lc_namespace=["langchain","chat_models","groq"];client;model;temperature=.7;stop;stopSequences;maxTokens;streaming=!1;apiKey;streamUsage=!0;topP;frequencyPenalty;presencePenalty;logprobs;n;logitBias;user;reasoningFormat;serviceTier;topLogprobs;lc_serializable=!0;get lc_serialized_keys(){return["client","model","temperature","stop","stopSequences","maxTokens","streaming","apiKey","streamUsage","topP","frequencyPenalty","presencePenalty","logprobs","n","logitBias","user","reasoningFormat","serviceTier","topLogprobs"]}static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}get callKeys(){return[...super.callKeys,...sTe]}constructor(e){super(e);const t=e.apiKey||Ws("GROQ_API_KEY");if(!t)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');const n={"User-Agent":"langchainjs",...e.defaultHeaders??{}};this.client=new gn({apiKey:t,dangerouslyAllowBrowser:!0,baseURL:e.baseUrl,timeout:e.timeout,httpAgent:e.httpAgent,fetch:e.fetch,maxRetries:0,defaultHeaders:n,defaultQuery:e.defaultQuery}),this.apiKey=t,this.temperature=e.temperature??this.temperature,this.model=e.model,this.streaming=e.streaming??this.streaming,this.stop=e.stopSequences??(typeof e.stop=="string"?[e.stop]:e.stop)??[],this.stopSequences=this.stop,this.maxTokens=e.maxTokens,this.topP=e.topP,this.frequencyPenalty=e.frequencyPenalty,this.presencePenalty=e.presencePenalty,this.logprobs=e.logprobs,this.n=e.n,this.logitBias=e.logitBias,this.user=e.user}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??this.temperature,ls_max_tokens:t.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,t){return this.caller.call(async()=>this.client.chat.completions.create(e,t))}invocationParams(e,t){const n=super.invocationParams(e);let r={};e?.stream_options!==void 0?r={stream_options:e.stream_options}:(this.streamUsage&&this.streaming||t?.streaming)&&(r={stream_options:{include_usage:!0}});const s={model:this.model,frequency_penalty:this.frequencyPenalty,function_call:e?.function_call,functions:e?.functions,logit_bias:this.logitBias,logprobs:this.logprobs,n:this.n,parallel_tool_calls:e?.parallel_tool_calls,presence_penalty:this.presencePenalty,reasoning_format:this.reasoningFormat,response_format:e?.response_format,seed:e?.seed,service_tier:this.serviceTier,stop:e?.stop??this.stopSequences,temperature:e?.temperature??this.temperature,tool_choice:uTe(e?.tool_choice),tools:e?.tools?.length?e.tools.map(a=>Hb(a)):void 0,top_logprobs:this.topLogprobs,top_p:this.topP,user:this.user,stream:this.streaming,...n,...r};return s.max_completion_tokens=e?.max_completion_tokens??e?.max_tokens??this.maxTokens,s.max_completion_tokens===-1&&delete s.max_completion_tokens,s}bindTools(e,t){return this.withConfig({tools:e.map(n=>Hb(n)),...t})}async*_streamResponseChunks(e,t,n){const r=this.invocationParams(t,{streaming:!0}),s=pL(e),a=await this.completionWithRetry({...r,messages:s,stream:!0},{signal:t?.signal,headers:t?.headers});let i,o,u;for await(const h of a){u=h;const f=h?.choices[0];if(!f)continue;f.delta?.role&&(i=f.delta.role);const m=lTe(f.delta,i,h,o),g={prompt:t.promptIndex??0,completion:f.index??0};if(typeof m.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const b={...g};f.finish_reason!=null&&(b.finish_reason=f.finish_reason,b.system_fingerprint=h.system_fingerprint,b.model_name=h.model);const w=new Ui({message:m,text:m.content,generationInfo:b});yield w,await n?.handleLLMNewToken(w.text??"",g,void 0,void 0,void 0,{chunk:w})}if(u&&("choices"in u&&delete u.choices,yield new Ui({message:new kn({content:"",response_metadata:u}),text:""})),t.signal?.aborted)throw new Error("AbortError")}async _generate(e,t,n){if(this.streaming){const r={},s=this._streamResponseChunks(e,t,n),a={};for await(const o of s){const u=o.generationInfo?.completion??0;a[u]===void 0?a[u]=o:a[u]=a[u].concat(o)}return{generations:Object.entries(a).sort(([o],[u])=>parseInt(o,10)-parseInt(u,10)).map(([o,u])=>u),llmOutput:{estimatedTokenUsage:r}}}else return this._generateNonStreaming(e,t,n)}async _generateNonStreaming(e,t,n){const r={},s=this.invocationParams(t),a=pL(e),i=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:t?.signal,headers:t?.headers});if("usage"in i&&i.usage){const{completion_tokens:u,prompt_tokens:h,total_tokens:f}=i.usage;u&&(r.completionTokens=(r.completionTokens??0)+u),h&&(r.promptTokens=(r.promptTokens??0)+h),f&&(r.totalTokens=(r.totalTokens??0)+f)}const o=[];if("choices"in i&&i.choices)for(const u of i.choices){const h=u.message?.content??"";let f;r.totalTokens!==void 0&&(f={input_tokens:r.promptTokens??0,output_tokens:r.completionTokens??0,total_tokens:r.totalTokens});const{choices:m,...g}=i,b={text:h,message:oTe(u.message??{role:"assistant"},f,g)};b.generationInfo={...u.finish_reason?{finish_reason:u.finish_reason}:{},...u.logprobs?{logprobs:u.logprobs}:{}},o.push(b)}return{generations:o,llmOutput:{tokenUsage:r}}}get profile(){return NSe[this.model]??{}}withStructuredOutput(e,t){const n=e,r=t?.name,s=t?.method,a=t?.includeRaw;let i=r??"extract",o,u;if(s==="jsonMode"){let g;Lr(n)?(o=Vd.fromZodSchema(n),g=dr(n)):o=new qd,u=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"jsonMode"},schema:g}})}else if(Lr(n)){const g=dr(n);u=this.bindTools([{type:"function",function:{name:i,description:g.description,parameters:g}}]).withConfig({tool_choice:{type:"function",function:{name:i}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:g}}),o=new om({returnSingle:!0,keyName:i,zodSchema:n})}else{let g;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(g=n,i=n.name):(i=n.title??i,g={name:i,description:n.description??"",parameters:n}),u=this.bindTools([{type:"function",function:g}]).withConfig({tool_choice:{type:"function",function:{name:i}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:n}}),o=new om({returnSingle:!0,keyName:i})}if(!a)return u.pipe(o).withConfig({runName:"ChatGroqStructuredOutput"});const h=ja.assign({parsed:(g,b)=>o.invoke(g.raw,b)}),f=ja.assign({parsed:()=>null}),m=h.withFallbacks({fallbacks:[f]});return Ul.from([{raw:u},m]).withConfig({runName:"ChatGroqStructuredOutput"})}};function uTe(e){if(e)return e==="any"||e==="required"?"required":e==="auto"?"auto":e==="none"?"none":typeof e=="string"?{type:"function",function:{name:e}}:e}class dTe extends tu{getProviderName(){return"groq"}getEndpoint(){return"https://api.groq.com/openai/v1"}createModel(){return new cTe({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096})}}class hTe extends tu{getProviderName(){return"grok"}getEndpoint(){return"https://api.x.ai/v1"}createModel(){return new gv({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096,configuration:{baseURL:this.getEndpoint()}})}}class fTe extends tu{getProviderName(){return"deepseek"}getEndpoint(){return"https://api.deepseek.com"}createModel(){return new gv({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096,configuration:{baseURL:this.getEndpoint()}})}}class pTe extends tu{getProviderName(){return"cerebras"}getEndpoint(){return"https://api.cerebras.ai/v1"}createModel(){return new gv({apiKey:this.apiKey,model:this.model,temperature:.7,maxTokens:4096,configuration:{baseURL:this.getEndpoint()}})}}function mTe(e,t,n){switch(e){case"anthropic":return new Rwe(t,n);case"openai":return new R1e(t,n);case"gemini":return new ESe(t,n);case"groq":return new dTe(t,n);case"grok":return new hTe(t,n);case"deepseek":return new fTe(t,n);case"cerebras":return new pTe(t,n);default:throw new Error(`Unsupported provider: ${e}`)}}const sx=Ue(["Health","Wealth","Love","Happiness","Operations","DayJob"]),ax=Ue(["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise","Income","Expenses","Investments","Debt","NetWorth","Romantic","Family","Friends","Social","Joy","Gratitude","Purpose","Peace","Productivity","Organization","Systems","Habits","Career","Skills","Projects","Performance"]),vv=Ue(["P1","P2","P3","P4"]);Ue(["NotStarted","InProgress","Blocked","OnHold","Done","Cancelled"]);Ue(["Planning","Active","OnHold","Completed","Cancelled"]);Ue(["Planning","Active","OnTrack","AtRisk","Achieved","Abandoned"]);const Ft=qe().min(0).max(1),mL=Ue(["Yearly","Quarterly","Monthly","Weekly","Daily"]),gTe=xe({title:J().describe("The task title extracted from natural language"),description:J().optional().describe("Optional task description"),area:sx.describe("The life area this task belongs to"),subCategory:ax.optional().describe("Optional subcategory within the area"),priority:vv.default("P3").describe("Suggested priority level"),dueDate:J().optional().describe("ISO date string if a deadline was mentioned"),scheduledDate:J().optional().describe("ISO date string if a specific date was mentioned"),size:qe().min(1).max(5).optional().describe("Effort estimate (1-5 scale)"),confidence:Ft.describe("Confidence in the parsing accuracy")}),yTe=xe({title:J(),description:J().optional(),estimatedSize:qe().min(1).max(5).optional(),order:qe()}),bTe=xe({subtasks:Pe(yTe).describe("List of subtasks in logical order"),reasoning:J().describe("Explanation of how the task was broken down"),confidence:Ft.describe("Confidence in the breakdown quality"),totalEstimatedEffort:qe().optional().describe("Total estimated effort across all subtasks")}),xTe=xe({recommendedPriority:vv.describe("Recommended priority level"),reasoning:J().describe("Detailed explanation for the recommendation"),urgencyScore:qe().min(0).max(10).describe("Urgency rating (0-10)"),impactScore:qe().min(0).max(10).describe("Impact rating (0-10)"),confidence:Ft.describe("Confidence in the recommendation"),factors:Pe(J()).describe("Key factors considered in the decision")}),vTe=xe({estimatedSize:qe().min(1).max(5).describe("Size estimate on 1-5 scale"),reasoning:J().describe("Explanation for the estimate"),confidence:Ft.describe("Confidence in the estimate"),factors:Pe(J()).describe("Factors affecting the estimate"),breakdown:xe({research:qe().min(0).max(5).optional(),implementation:qe().min(0).max(5).optional(),testing:qe().min(0).max(5).optional(),documentation:qe().min(0).max(5).optional()}).optional().describe("Optional breakdown by work type")}),wTe=xe({area:sx.describe("Recommended life area"),subCategory:ax.optional().describe("Recommended subcategory"),reasoning:J().describe("Explanation for the categorization"),confidence:Ft.describe("Confidence in the categorization"),alternativeCategories:Pe(xe({area:sx,subCategory:ax.optional(),reasoning:J()})).optional().describe("Alternative categorizations with lower confidence")}),_Te=xe({taskId:J().describe("ID of the task that should be a dependency"),taskTitle:J().describe("Title of the dependency task"),reasoning:J().describe("Why this dependency makes sense"),isBlocking:Gc().describe("Whether this is a blocking dependency")}),kTe=xe({suggestions:Pe(_Te).describe("Suggested dependencies"),reasoning:J().describe("Overall analysis of task dependencies"),confidence:Ft.describe("Confidence in the suggestions"),newTasksSuggested:Pe(xe({title:J(),description:J(),reasoning:J()})).optional().describe("New tasks that should be created as prerequisites")}),STe=xe({blockerAnalysis:J().describe("Analysis of what is blocking the task"),suggestedActions:Pe(J()).describe("Concrete steps to unblock"),newTasks:Pe(xe({title:J(),description:J(),priority:vv})).optional().describe("New tasks to create to resolve the blocker"),estimatedTimeToResolve:J().optional().describe("Estimate of how long to unblock"),confidence:Ft.describe("Confidence in the resolution plan")}),TTe=xe({severity:Ue(["low","medium","high","critical"]).describe("Severity level"),category:Ue(["timeline","scope","dependencies","resources","risk","progress","blockers","team"]).describe("Issue category"),description:J().describe("Description of the issue"),impact:J().describe("Potential impact if not addressed"),recommendation:J().describe("Recommended action to address")}),CTe=xe({overallHealth:qe().min(0).max(100).describe("Overall project health score (0-100)"),healthCategory:Ue(["critical","at-risk","stable","healthy","excellent"]),summary:J().describe("Executive summary of project health"),issues:Pe(TTe).describe("Identified issues"),strengths:Pe(J()).describe("Project strengths"),recommendations:Pe(J()).describe("High-level recommendations"),confidence:Ft.describe("Confidence in the analysis"),metrics:xe({completionRate:qe().min(0).max(100).optional(),blockerCount:qe().optional(),overdueTasks:qe().optional(),averageTaskSize:qe().optional()}).optional().describe("Quantitative metrics")}),ETe=xe({title:J().describe("Task title"),description:J().describe("Task description"),area:sx.describe("Life area"),subCategory:ax.optional().describe("Subcategory"),priority:vv.describe("Suggested priority"),size:qe().min(1).max(5).optional().describe("Effort estimate"),reasoning:J().describe("Why this task is needed"),dependencies:Pe(J()).optional().describe("Task titles this depends on"),order:qe().describe("Suggested execution order")}),jTe=xe({tasks:Pe(ETe).describe("Generated tasks"),overallStrategy:J().describe("Overall approach and strategy"),phaseBreakdown:Pe(xe({phase:J(),tasks:Pe(J()),duration:J().optional()})).optional().describe("Optional breakdown into phases"),confidence:Ft.describe("Confidence in the task generation"),estimatedTotalEffort:J().optional().describe("Total estimated effort")}),NTe=xe({category:Ue(["technical","timeline","resource","dependency","scope","external","team","quality"]).describe("Risk category"),description:J().describe("Description of the risk"),probability:Ue(["low","medium","high"]).describe("Likelihood of occurring"),impact:Ue(["low","medium","high","critical"]).describe("Impact if it occurs"),mitigation:J().describe("How to mitigate or prevent"),contingency:J().optional().describe("Backup plan if it occurs")}),ATe=xe({overallRiskLevel:Ue(["low","medium","high","critical"]).describe("Overall risk level"),summary:J().describe("Executive summary of risk assessment"),risks:Pe(NTe).describe("Identified risks"),topRisks:Pe(J()).describe("Top 3-5 risks to focus on"),recommendations:Pe(J()).describe("Key risk management recommendations"),confidence:Ft.describe("Confidence in the assessment")}),ITe=["Health","Wealth","Love","Happiness","Operations","DayJob"],OTe=["P1","P2","P3","P4"],RTe={Health:["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise"],Wealth:["Income","Expenses","Investments","Debt","NetWorth"],Love:["Romantic","Family","Friends","Social"],Happiness:["Joy","Gratitude","Purpose","Peace"],Operations:["Productivity","Organization","Systems","Habits"],DayJob:["Career","Skills","Projects","Performance"]},PTe=`You are an AI assistant specialized in personal productivity and task management. You help users organize their tasks, projects, and goals across six life areas: Health, Wealth, Love, Happiness, Operations, and DayJob.

Available Areas: ${ITe.join(", ")}
Available Priorities: ${OTe.join(", ")} (P1 = highest urgency)

Subcategories by Area:
${Object.entries(RTe).map(([e,t])=>`- ${e}: ${t.join(", ")}`).join(`
`)}

Always respond with valid JSON matching the requested format. Be concise and actionable.`;function MTe(e){return`Parse the following natural language input into a structured task. Extract the title, description, area, subcategory, priority, due date, and any other relevant fields.

Input: "${e}"

Respond with JSON in this exact format:
{
  "task": {
    "title": "extracted title",
    "description": "extracted description or null",
    "area": "one of: Health, Wealth, Love, Happiness, Operations, DayJob",
    "subCategory": "appropriate subcategory or null",
    "priority": "P1, P2, P3, or P4",
    "dueDate": "YYYY-MM-DD format or null",
    "scheduledDate": "YYYY-MM-DD format or null",
    "size": "estimated hours as number or null"
  },
  "confidence": 0.0 to 1.0,
  "extractedEntities": ["list", "of", "key", "entities", "found"]
}`}function DTe(e,t,n){return`Break down the following task into smaller, actionable subtasks:

Task: ${e}
${t?`Description: ${t}`:""}
Area: ${n}

Create 2-5 concrete subtasks that together complete the main task.

Respond with JSON in this exact format:
{
  "subtasks": [
    {
      "title": "subtask title",
      "description": "brief description",
      "area": "${n}",
      "priority": "P1-P4",
      "size": estimated hours as number or null
    }
  ],
  "reasoning": "brief explanation of the breakdown approach"
}`}function $Te(e,t){return`Suggest how to resolve blockers for this task:

Task: ${e}

Blockers:
${t.map(n=>`- [${n.id}] ${n.title} (Status: ${n.status})`).join(`
`)}

Respond with JSON in this exact format:
{
  "suggestions": ["actionable suggestion 1", "actionable suggestion 2"],
  "recommendedActions": [
    {
      "action": "specific action to take",
      "targetTaskId": "id of the blocker task",
      "reason": "why this helps"
    }
  ]
}`}function LTe(e,t,n,r){return`Recommend the appropriate priority for this task given the context:

Task: ${e}
${t?`Description: ${t}`:""}
Current Priority: ${n}

Other active tasks:
${r.map(s=>`- ${s.title} (${s.priority}${s.dueDate?`, due: ${s.dueDate}`:""})`).join(`
`)}

Respond with JSON in this exact format:
{
  "recommendedPriority": "P1, P2, P3, or P4",
  "reasoning": "explanation of the recommendation",
  "factors": ["factor 1", "factor 2", "factor 3"]
}`}function zTe(e,t,n){return`Estimate the effort required for this task:

Task: ${e}
${t?`Description: ${t}`:""}

${n.length>0?`Similar completed tasks for reference:
${n.map(r=>`- ${r.title}: ${r.size??"unknown"} hours`).join(`
`)}`:""}

Respond with JSON in this exact format:
{
  "estimatedSize": number in hours,
  "confidence": 0.0 to 1.0,
  "comparisons": ["comparison note 1", "comparison note 2"]
}`}function UTe(e,t){return`Categorize this task into the appropriate life area and subcategory:

Title: ${e}
${t?`Description: ${t}`:""}

Respond with JSON in this exact format:
{
  "area": "one of: Health, Wealth, Love, Happiness, Operations, DayJob",
  "subCategory": "appropriate subcategory or null",
  "confidence": 0.0 to 1.0,
  "reasoning": "brief explanation"
}`}function FTe(e,t,n){return`Identify potential dependencies for this task from the existing task list:

New Task: ${e}
${t?`Description: ${t}`:""}

Existing Tasks:
${n.map(r=>`- [${r.id}] ${r.title} (${r.status})`).join(`
`)}

Respond with JSON in this exact format:
{
  "suggestedDependencies": [
    {
      "taskId": "id of the dependency",
      "taskTitle": "title of the dependency",
      "reason": "why this should be a dependency",
      "confidence": 0.0 to 1.0
    }
  ]
}`}function BTe(e,t,n){return`Analyze the health of this project:

Project: ${e}
${t?`Description: ${t}`:""}

Tasks (${n.length} total):
${n.map(r=>`- ${r.title} [${r.status}] (${r.priority}${r.dueDate?`, due: ${r.dueDate}`:""})`).join(`
`)}

Respond with JSON in this exact format:
{
  "healthScore": 0 to 100,
  "issues": [
    {
      "type": "progress_analysis or health_analysis or blocker_resolution",
      "title": "issue title",
      "content": "description of the issue",
      "severity": "info, warning, or critical"
    }
  ],
  "recommendations": ["recommendation 1", "recommendation 2"],
  "summary": "brief overall health summary"
}`}function HTe(e,t,n,r){return`Suggest additional tasks needed to complete this project:

Project: ${e}
${t?`Description: ${t}`:""}
Area: ${n}

Existing Tasks:
${r.map(s=>`- ${s.title}`).join(`
`)}

Respond with JSON in this exact format:
{
  "suggestedTasks": [
    {
      "title": "task title",
      "description": "brief description",
      "area": "${n}",
      "priority": "P1-P4",
      "size": estimated hours or null
    }
  ],
  "reasoning": "explanation of what gaps these tasks fill"
}`}function qTe(e,t,n){return`Identify risks for this project:

Project: ${e}
${t?`Description: ${t}`:""}

Tasks:
${n.map(r=>`- [${r.id}] ${r.title} [${r.status}] (${r.priority}${r.dueDate?`, due: ${r.dueDate}`:""})`).join(`
`)}

Respond with JSON in this exact format:
{
  "risks": [
    {
      "severity": "low, medium, or high",
      "description": "risk description",
      "mitigation": "suggested mitigation",
      "affectedTasks": ["task ids if applicable"]
    }
  ],
  "overallRiskLevel": "low, medium, or high",
  "summary": "brief risk summary"
}`}class VTe{async callLLMForFeature(t,n,r,s){try{const a=gT(t),i=QE(a.provider);if(!i)return{data:null,error:`API key not configured for provider: ${a.provider}`,success:!1};const o=mTe(a.provider,i,a.model),u=[{role:"system",content:PTe},{role:"user",content:r}],h=await o.invokeStructured(n,u);return{data:s(h),error:null,success:!0}}catch(a){return{data:null,error:a instanceof Error?a.message:"Unknown error",success:!1}}}isConfigured(){return M0("anthropic")||M0("openai")||M0("gemini")}async parseNaturalLanguageTask(t){const n=MTe(t.text);return this.callLLMForFeature("parseTask",gTe,n,r=>({task:{title:r.title,description:r.description,area:r.area,subCategory:r.subCategory,priority:r.priority,dueDate:r.dueDate,scheduledDate:r.scheduledDate,size:r.size},confidence:r.confidence,extractedEntities:[]}))}async breakdownTask(t){const n=DTe(t.task.title,t.task.description,t.task.area);return this.callLLMForFeature("breakdownTask",bTe,n,r=>({subtasks:r.subtasks.map(s=>({title:s.title,description:s.description,area:t.task.area,size:s.estimatedSize})),reasoning:r.reasoning}))}async resolveBlockers(t){const n=t.blockers.map(s=>({id:s.id,title:s.title,status:s.status})),r=$Te(t.task.title,n);return this.callLLMForFeature("dependencyDetection",STe,r,s=>({suggestions:s.suggestedActions,recommendedActions:s.newTasks?.map(a=>({action:a.title,targetTaskId:"",reason:a.description}))||[]}))}async advisePriority(t){const n=t.allTasks.filter(s=>s.id!==t.task.id&&s.status!=="Done"&&s.status!=="Cancelled").slice(0,10).map(s=>({title:s.title,priority:s.priority,dueDate:s.dueDate})),r=LTe(t.task.title,t.task.description,t.task.priority,n);return this.callLLMForFeature("priorityAdvisor",xTe,r,s=>({recommendedPriority:s.recommendedPriority,reasoning:s.reasoning,factors:s.factors}))}async estimateEffort(t){const n=(t.similarTasks||[]).filter(s=>s.size!==null).slice(0,5).map(s=>({title:s.title,size:s.size})),r=zTe(t.task.title||"",t.task.description||null,n);return this.callLLMForFeature("effortEstimation",vTe,r,s=>({estimatedSize:s.estimatedSize,confidence:s.confidence,comparisons:s.factors}))}async categorizeTask(t){const n=UTe(t.title,t.description);return this.callLLMForFeature("taskCategorization",wTe,n,r=>({area:r.area,subCategory:r.subCategory,confidence:r.confidence,reasoning:r.reasoning}))}async detectDependencies(t){const n=t.existingTasks.filter(s=>s.status!=="Done"&&s.status!=="Cancelled").slice(0,20).map(s=>({id:s.id,title:s.title,status:s.status})),r=FTe(t.task.title||"",t.task.description||null,n);return this.callLLMForFeature("dependencyDetection",kTe,r,s=>({suggestedDependencies:s.suggestions.map(a=>({taskId:a.taskId,taskTitle:a.taskTitle,reason:a.reasoning,confidence:s.confidence}))}))}async analyzeProjectHealth(t){const n=t.tasks.map(s=>({title:s.title,status:s.status,priority:s.priority,dueDate:s.dueDate})),r=BTe(t.project.name,t.project.description,n);return this.callLLMForFeature("projectHealth",CTe,r,s=>{const a=s.issues.map((i,o)=>({id:`issue-${Date.now()}-${o}`,type:"health_analysis",title:i.description,content:`${i.impact}

Recommendation: ${i.recommendation}`,severity:i.severity==="critical"||i.severity==="high"?"critical":i.severity==="medium"?"warning":"info",relatedEntities:[{type:"project",id:t.project.id}],createdAt:new Date().toISOString(),viewedAt:null}));return{healthScore:s.overallHealth,issues:a,recommendations:s.recommendations,summary:s.summary}})}async generateProjectTasks(t){const n=t.existingTasks.map(s=>({title:s.title})),r=HTe(t.project.name,t.project.description,t.project.area,n);return this.callLLMForFeature("projectTaskGen",jTe,r,s=>({suggestedTasks:s.tasks.map(a=>({title:a.title,description:a.description,area:a.area,subCategory:a.subCategory,priority:a.priority,size:a.size})),reasoning:s.overallStrategy}))}async identifyProjectRisks(t){const n=t.tasks.map(s=>({id:s.id,title:s.title,status:s.status,priority:s.priority,dueDate:s.dueDate})),r=qTe(t.project.name,t.project.description,n);return this.callLLMForFeature("projectRisk",ATe,r,s=>({risks:s.risks.map(a=>({severity:a.impact==="critical"?"high":a.impact,description:a.description,mitigation:a.mitigation,affectedTasks:[]})),overallRiskLevel:s.overallRiskLevel==="critical"?"high":s.overallRiskLevel,summary:s.summary}))}}const GTe="https://jkmmucxxxtgufwgqblno.supabase.co";class KTe{baseUrl;constructor(){this.baseUrl=`${GTe}/functions/v1`}isConfigured(){return!0}async callEndpoint(t,n){try{const r=await fetch(`${this.baseUrl}/${t}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImprbW11Y3h4eHRndWZ3Z3FibG5vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NjY4MzAsImV4cCI6MjA4MzA0MjgzMH0.gf8ABRPqIm3vIaHaleJDb-2EBrn_OTHjsG1FINXAjo4"},body:JSON.stringify(n)});if(!r.ok){const a=await r.text();return{data:null,error:`API error: ${r.status} - ${a}`,success:!1}}const s=await r.json();return s.error?{data:null,error:s.error,success:!1}:{data:s.data||s,error:null,success:!0,usage:s.usage}}catch(r){return{data:null,error:r instanceof Error?r.message:"Unknown error",success:!1}}}async parseNaturalLanguageTask(t){return this.callEndpoint("ai-parse-task",t)}async breakdownTask(t){return this.callEndpoint("ai-breakdown-task",{taskId:t.task.id,title:t.task.title,description:t.task.description,area:t.task.area})}async resolveBlockers(t){return this.callEndpoint("ai-resolve-blockers",{taskId:t.task.id,title:t.task.title,blockers:t.blockers.map(n=>({id:n.id,title:n.title,status:n.status}))})}async advisePriority(t){return this.callEndpoint("ai-advise-priority",{taskId:t.task.id,title:t.task.title,description:t.task.description,currentPriority:t.task.priority,otherTasks:t.allTasks.filter(n=>n.id!==t.task.id&&n.status!=="Done"&&n.status!=="Cancelled").slice(0,10).map(n=>({title:n.title,priority:n.priority,dueDate:n.dueDate}))})}async estimateEffort(t){return this.callEndpoint("ai-estimate-effort",{title:t.task.title,description:t.task.description,similarTasks:(t.similarTasks||[]).filter(n=>n.size!==null).slice(0,5).map(n=>({title:n.title,size:n.size}))})}async categorizeTask(t){return this.callEndpoint("ai-categorize-task",t)}async detectDependencies(t){return this.callEndpoint("ai-detect-dependencies",{title:t.task.title,description:t.task.description,existingTasks:t.existingTasks.filter(n=>n.status!=="Done"&&n.status!=="Cancelled").slice(0,20).map(n=>({id:n.id,title:n.title,status:n.status}))})}async analyzeProjectHealth(t){return this.callEndpoint("ai-project-health",{projectId:t.project.id,name:t.project.name,description:t.project.description,tasks:t.tasks.map(n=>({title:n.title,status:n.status,priority:n.priority,dueDate:n.dueDate}))})}async generateProjectTasks(t){return this.callEndpoint("ai-generate-tasks",{projectId:t.project.id,name:t.project.name,description:t.project.description,area:t.project.area,existingTasks:t.existingTasks.map(n=>({title:n.title}))})}async identifyProjectRisks(t){return this.callEndpoint("ai-identify-risks",{projectId:t.project.id,name:t.project.name,description:t.project.description,tasks:t.tasks.map(n=>({id:n.id,title:n.title,status:n.status,priority:n.priority,dueDate:n.dueDate}))})}}const gL="gs_llm_adapter_type";class wd{static instance;currentAdapter;currentType;directAdapter;apiAdapter;constructor(){const t=localStorage.getItem(gL)||"direct";this.currentType=t,this.directAdapter=new VTe,this.apiAdapter=new KTe,this.currentAdapter=this.createAdapter(t)}static getInstance(){return wd.instance||(wd.instance=new wd),wd.instance}createAdapter(t){switch(t){case"direct":return this.directAdapter;case"api":return this.apiAdapter;default:return this.directAdapter}}getAdapter(){return this.currentAdapter}getDirectAdapter(){return this.directAdapter}getCurrentType(){return this.currentType}setAdapterType(t){t!==this.currentType&&(this.currentType=t,this.currentAdapter=this.createAdapter(t),localStorage.setItem(gL,t))}isConfigured(){return this.currentAdapter.isConfigured()}}const Zr=wd.getInstance(),qa=()=>Zr.getAdapter(),um={anthropic:"Anthropic (Claude)",openai:"OpenAI (GPT)",gemini:"Google (Gemini)",groq:"Groq",grok:"xAI (Grok)",deepseek:"DeepSeek",cerebras:"Cerebras"};xe({refinedTitle:J().describe("More specific and actionable goal title"),refinedDescription:J().describe("Detailed goal description with context"),reasoning:J().describe("Why these refinements improve the goal"),confidence:Ft.describe("Confidence in the refinements"),suggestedAdjustments:Pe(J()).describe("Additional suggestions")});xe({criteria:Pe(xe({criterion:J().describe("SMART success criterion"),measurable:Gc().describe("Whether this is measurable"),suggestedMetric:J().optional().describe("Optional metric to track this")})).describe("Generated success criteria"),reasoning:J().describe("Why these criteria are appropriate"),confidence:Ft.describe("Confidence in the criteria")});xe({metrics:Pe(xe({name:J().describe("Metric name"),description:J().describe("What this metric measures"),unit:J().describe("Unit of measurement"),targetValue:qe().optional().describe("Suggested target value"),frequency:Ue(["daily","weekly","monthly"]).describe("How often to track"),reasoning:J().describe("Why this metric is relevant")})).describe("Suggested metrics for the goal"),overallRationale:J().describe("How these metrics connect to the goal"),confidence:Ft.describe("Confidence in the suggestions")});xe({parentGoals:Pe(xe({timeHorizon:mL,title:J(),description:J(),reasoning:J()})).describe("Suggested parent goals (longer time horizon)"),childGoals:Pe(xe({timeHorizon:mL,title:J(),description:J(),reasoning:J()})).describe("Suggested child goals (shorter time horizon)"),overallStrategy:J().describe("How these goals connect strategically"),confidence:Ft.describe("Confidence in the cascade structure")});xe({probability:qe().min(0).max(100).describe("Probability of achievement (0-100%)"),expectedDate:J().optional().describe("Expected completion date"),confidenceLevel:Ue(["low","medium","high"]).describe("Confidence in the forecast"),factors:xe({positive:Pe(J()).describe("Factors increasing likelihood"),negative:Pe(J()).describe("Factors decreasing likelihood")}).describe("Factors affecting achievement"),recommendations:Pe(J()).describe("Actions to improve likelihood"),reasoning:J().describe("Detailed forecast explanation")});xe({hasConflicts:Gc().describe("Whether conflicts were detected"),conflicts:Pe(xe({goalId:J().describe("ID of conflicting goal"),goalTitle:J().describe("Title of conflicting goal"),conflictType:Ue(["resource","timeline","priority","value"]).describe("Type of conflict"),description:J().describe("Description of the conflict"),severity:Ue(["low","medium","high"]).describe("Severity of conflict"),resolution:J().describe("Suggested resolution")})).describe("Identified conflicts"),overallAssessment:J().describe("Overall goal alignment assessment"),confidence:Ft.describe("Confidence in conflict detection")});xe({currentProgress:qe().min(0).max(100).describe("Current progress percentage"),trajectory:Ue(["ahead","on-track","behind","stalled"]).describe("Progress trajectory"),insights:Pe(J()).describe("Key insights about progress"),blockers:Pe(J()).describe("Identified blockers"),strengths:Pe(J()).describe("What is working well"),recommendations:Pe(J()).describe("Recommendations to improve progress"),confidence:Ft.describe("Confidence in the analysis")});xe({metrics:Pe(xe({name:J().describe("Metric name"),description:J().describe("What this metric measures"),unit:J().describe("Unit of measurement"),direction:Ue(["Higher","Lower","Target"]).describe("Direction of improvement"),targetValue:qe().optional().describe("Suggested target value"),frequency:Ue(["daily","weekly","monthly"]).describe("How often to track"),reasoning:J().describe("Why this metric is relevant")})).describe("Suggested metrics"),reasoning:J().describe("Overall rationale for metric selection"),confidence:Ft.describe("Confidence in suggestions")});xe({patterns:Pe(xe({type:Ue(["trend","cycle","correlation","anomaly","plateau"]).describe("Pattern type"),description:J().describe("Description of the pattern"),significance:Ue(["low","medium","high"]).describe("Pattern significance"),startDate:J().optional().describe("When pattern started"),dataPoints:Pe(qe()).optional().describe("Relevant data points"),insights:J().describe("What this pattern means"),recommendations:Pe(J()).describe("Actions based on this pattern")})).describe("Identified patterns"),overallTrend:Ue(["improving","stable","declining","volatile"]).describe("Overall trend direction"),confidence:Ft.describe("Confidence in pattern recognition")});xe({isAnomaly:Gc().describe("Whether this is truly an anomaly"),anomalyType:Ue(["spike","drop","outlier","gap","shift"]).optional().describe("Type of anomaly"),severity:Ue(["low","medium","high"]).describe("Severity of anomaly"),possibleCauses:Pe(J()).describe("Potential explanations"),expectedRange:xe({min:qe(),max:qe()}).optional().describe("Expected value range"),recommendations:Pe(J()).describe("Recommended actions"),requiresAttention:Gc().describe("Whether immediate attention is needed"),confidence:Ft.describe("Confidence in the explanation")});xe({correlations:Pe(xe({metricId:J().optional().describe("ID of correlated metric"),metricName:J().describe("Name of correlated metric"),correlationType:Ue(["positive","negative","causal","coincidental"]).describe("Type of correlation"),strength:Ue(["weak","moderate","strong"]).describe("Correlation strength"),description:J().describe("Description of the correlation"),insights:J().describe("What this correlation suggests"),actionable:Gc().describe("Whether this insight is actionable")})).describe("Discovered correlations"),overallInsights:J().describe("Overall insights from correlations"),confidence:Ft.describe("Confidence in correlations")});xe({recommendedTarget:qe().describe("Recommended target value"),currentValue:qe().describe("Current/latest value"),reasoning:J().describe("Why this target is appropriate"),achievability:Ue(["easy","moderate","challenging","stretch"]).describe("How achievable the target is"),timeframe:J().describe("Suggested timeframe to reach target"),milestones:Pe(xe({value:qe(),date:J(),description:J()})).describe("Suggested milestones"),confidence:Ft.describe("Confidence in recommendation")});xe({healthScore:qe().min(0).max(100).describe("Overall metric health (0-100)"),status:Ue(["excellent","good","concerning","critical"]).describe("Health status"),alerts:Pe(xe({severity:Ue(["info","warning","critical"]),message:J(),recommendation:J()})).describe("Health alerts"),trackingQuality:Ue(["excellent","good","poor","insufficient"]).describe("Quality of tracking"),dataGaps:qe().describe("Number of days with missing data"),recommendations:Pe(J()).describe("Health improvement recommendations"),confidence:Ft.describe("Confidence in health assessment")});xe({optimizedTrigger:J().describe("Specific, observable cue for the habit"),optimizedAction:J().describe("Clear, actionable behavior"),optimizedReward:J().describe("Immediate positive reinforcement"),frictionStrategies:Pe(xe({strategy:J(),implementation:J(),effectiveness:Ue(["low","medium","high"])})).describe("Ways to add/remove friction based on habit type"),targetFrequency:J().describe("Recommended frequency"),reasoning:J().describe("Why this design works"),confidence:Ft});xe({stackSuggestions:Pe(xe({existingHabit:J().describe("Existing habit to stack on"),newHabit:J().describe("New habit to add"),stackingPattern:J().describe("How to connect them"),rationale:J().describe("Why this stack works"),difficulty:Ue(["easy","moderate","challenging"])})),timingRecommendations:Pe(xe({timeOfDay:J(),habits:Pe(J()),reasoning:J()})),confidence:Ft});xe({analysis:xe({currentStreak:qe(),longestStreak:qe(),recentMisses:qe(),pattern:J().describe("Pattern of misses")}),recoveryPlan:Pe(xe({step:J(),timeframe:J(),difficulty:Ue(["easy","moderate","hard"])})),motivationalInsights:Pe(J()),adjustmentSuggestions:Pe(J()).describe("Ways to make habit easier"),confidence:Ft});xe({completionPatterns:Pe(xe({pattern:J(),frequency:J(),context:J(),strength:Ue(["weak","moderate","strong"])})),optimalTiming:xe({bestTimeOfDay:J(),bestDayOfWeek:J(),reasoning:J()}),correlations:Pe(xe({factor:J().describe("Energy level, mood, etc."),impact:Ue(["positive","negative","neutral"]),strength:Ue(["weak","moderate","strong"]),insights:J()})),recommendations:Pe(J()),confidence:Ft});xe({alignedGoals:Pe(xe({goalTitle:J(),alignmentStrength:Ue(["weak","moderate","strong"]),explanation:J(),impact:J().describe("How habit supports goal")})),misalignments:Pe(xe({issue:J(),severity:Ue(["low","medium","high"]),suggestion:J()})),newHabitSuggestions:Pe(xe({habitName:J(),goalSupported:J(),rationale:J(),priority:Ue(["low","medium","high"])})),confidence:Ft});xe({currentTriggerAnalysis:xe({clarity:Ue(["unclear","somewhat clear","very clear"]),observability:Ue(["hard to notice","noticeable","obvious"]),consistency:Ue(["inconsistent","somewhat consistent","very consistent"]),issues:Pe(J())}),optimizedTriggers:Pe(xe({trigger:J(),type:Ue(["time","location","preceding action","emotional state","person"]),specificity:Ue(["vague","moderate","very specific"]),effectiveness:Ue(["low","medium","high"]),implementation:J()})),environmentalCues:Pe(J()).describe("Visual or physical reminders"),confidence:Ft});xe({prompts:Pe(xe({question:J(),category:Ue(["gratitude","learning","progress","challenges","future"]),depth:Ue(["surface","moderate","deep"]),context:J().describe("Why this prompt is relevant now")})),focusAreas:Pe(J()).describe("Key areas to reflect on"),confidence:Ft});xe({summary:J().describe("Brief narrative summary of the day"),highlights:Pe(xe({type:Ue(["accomplishment","learning","challenge","insight"]),description:J()})),metrics:xe({tasksCompleted:qe(),habitsLogged:qe(),energyAverage:qe().optional(),moodSummary:J().optional()}),momentum:Ue(["declining","stable","building"]),tomorrowFocus:Pe(J()).describe("Suggested focus for tomorrow"),confidence:Ft});xe({patterns:Pe(xe({pattern:J(),frequency:J(),significance:Ue(["low","medium","high"]),examples:Pe(J()).describe("Specific dates or entries"),insights:J()})),trends:xe({energyTrend:Ue(["declining","stable","improving"]).optional(),moodTrend:Ue(["declining","stable","improving"]).optional(),productivityTrend:Ue(["declining","stable","improving"]).optional()}),correlations:Pe(xe({factor1:J(),factor2:J(),relationship:J(),strength:Ue(["weak","moderate","strong"])})),recommendations:Pe(J()),confidence:Ft});xe({overallSentiment:Ue(["very negative","negative","neutral","positive","very positive"]),sentimentScore:qe().min(-1).max(1).describe("Score from -1 to 1"),emotionalThemes:Pe(xe({theme:J(),frequency:Ue(["rare","occasional","frequent"]),context:J()})),sentimentTrend:Ue(["declining","stable","improving"]),concerningPatterns:Pe(xe({pattern:J(),severity:Ue(["low","medium","high"]),suggestion:J()})),positiveMoments:Pe(J()).describe("Dates with particularly positive entries"),confidence:Ft});xe({weekSummary:J().describe("Narrative summary of the week"),achievements:Pe(xe({description:J(),impact:Ue(["small","moderate","significant"]),category:J()})),challenges:Pe(xe({description:J(),lessons:J(),futureAction:J()})),insights:Pe(J()),metrics:xe({weeklyProgress:J(),habitConsistency:J(),energyPattern:J(),moodPattern:J()}),nextWeekFocus:Pe(xe({area:J(),objective:J(),actions:Pe(J())})),confidence:Ft});xe({suggestedConnections:Pe(xe({entityType:Ue(["task","project","goal","habit","metric"]),entityTitle:J(),entityId:J(),relevance:Ue(["low","medium","high"]),reasoning:J().describe("Why this connection is relevant")})),missingContext:Pe(J()).describe("What could be added to entry"),relatedDays:Pe(xe({date:J(),similarity:Ue(["somewhat similar","similar","very similar"]),commonThemes:Pe(J())})),confidence:Ft});function ZTe(){const[e,t]=A.useState([]),[n,r]=A.useState(!0),[s,a]=A.useState([]),{tasks:i}=Cm(),{habits:o}=Em(),{metrics:u}=jm(),{goals:h}=Ex(),{projects:f}=WE(),m=Zr.isConfigured(),g=async()=>{r(!0),await new Promise(ie=>setTimeout(ie,800));const C=[],T=i.filter(ie=>ie.status==="Blocked");T.length>0&&C.push({id:"blocked-tasks",type:"warning",title:`${T.length} blocked tasks need attention`,description:"Review dependencies and remove blockers to keep momentum",action:{label:"View Tasks",link:"/admin/tasks"},priority:"high"});const P=h.filter(ie=>ie.status==="Active");P.length>0&&C.push({id:"active-goals",type:"opportunity",title:`${P.length} active goals to track`,description:"Review your goals and ensure they have clear success criteria",action:{label:"Review Goals",link:"/admin/goals"},priority:"medium"}),new Date().setHours(0,0,0,0);const R=o.filter(ie=>ie.frequency==="Daily");R.length>0&&C.push({id:"daily-habits",type:"opportunity",title:`${R.length} daily habits to complete today`,description:"Build consistency by maintaining your habit streaks",action:{label:"Log Habits",link:"/admin/habits"},priority:"high"});const U=i.filter(ie=>ie.priority==="P1"&&(ie.status==="NotStarted"||ie.status==="InProgress"));U.length>0&&C.push({id:"high-priority-tasks",type:"opportunity",title:`${U.length} high-priority tasks in progress`,description:"Focus on completing critical tasks first",action:{label:"View Tasks",link:"/admin/tasks"},priority:"high"});const j=h.filter(ie=>ie.status==="AtRisk");j.length>0&&C.push({id:"at-risk-goals",type:"warning",title:`${j.length} goals at risk`,description:"Review and adjust strategy to get back on track",action:{label:"Review Goals",link:"/admin/goals"},priority:"high"}),u.filter(ie=>ie.status==="Active").length>0&&C.push({id:"track-metrics",type:"recommendation",title:"Time to log your metrics",description:"Regular tracking ensures accurate progress monitoring",action:{label:"Log Metrics",link:"/admin/metrics"},priority:"medium"});const B=i.filter(ie=>ie.status==="Done"),ee=i.length>0?B.length/i.length*100:0;ee>70&&C.push({id:"high-completion",type:"achievement",title:`${Math.round(ee)}% task completion rate`,description:"Great job staying productive! Keep the momentum going",priority:"low"}),t(C.filter(ie=>!s.includes(ie.id))),r(!1)};A.useEffect(()=>{g()},[i,o,u,h,f]);const b=C=>{a(T=>[...T,C]),t(T=>T.filter(P=>P.id!==C))},w=()=>{a([]),g()},x=e.slice(0,4),S=C=>{switch(C){case"opportunity":return c.jsx(uE,{className:"w-5 h-5"});case"warning":return c.jsx(qc,{className:"w-5 h-5"});case"achievement":return c.jsx(_r,{className:"w-5 h-5"});case"recommendation":return c.jsx(kr,{className:"w-5 h-5"})}},k=C=>{switch(C){case"opportunity":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300";case"warning":return"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-300";case"achievement":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-700 dark:text-green-300";case"recommendation":return"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-700 dark:text-purple-300"}};return!m&&e.length===0?null:c.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-6 rounded-lg border border-amber-200 dark:border-amber-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"}),c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"AI Insights"})]}),c.jsx("button",{onClick:w,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded-lg transition",title:"Refresh insights",children:c.jsx(ab,{className:`w-5 h-5 text-amber-600 dark:text-amber-400 ${n?"animate-spin":""}`})})]}),n?c.jsx("div",{className:"space-y-3",children:[1,2,3].map(C=>c.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-4 animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"})]},C))}):x.length>0?c.jsx("div",{className:"space-y-3",children:x.map(C=>c.jsxs("div",{className:`rounded-lg border p-4 ${k(C.type)} relative group`,children:[c.jsx("button",{onClick:()=>b(C.id),className:"absolute top-2 right-2 p-1 opacity-0 group-hover:opacity-100 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition",children:c.jsx(cn,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:S(C.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:C.title}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:C.description}),C.action&&c.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>window.location.href=C.action.link,className:"mt-2",children:C.action.label})]})]})]},C.id))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Jt,{className:"w-12 h-12 text-amber-400 dark:text-amber-600 mx-auto mb-3 opacity-50"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"All caught up! No new insights at the moment."})]})]})}function WTe(){const[e,t]=A.useState(null),[n,r]=A.useState(!0),[s,a]=A.useState(!1),{tasks:i}=Cm(),{habits:o}=Em(),{metrics:u}=jm(),h=async()=>{r(!0),await new Promise(T=>setTimeout(T,500));const f=new Date,m=f.getHours();let g;m<12?g="morning":m<18?g="afternoon":g="evening";const w=i.filter(T=>T.status==="NotStarted"||T.status==="InProgress").filter(T=>T.status!=="Blocked").map(T=>{let P=0;if(T.priority==="P1"?P+=40:T.priority==="P2"?P+=30:T.priority==="P3"?P+=20:P+=10,T.dueDate){const D=new Date(T.dueDate),R=Math.floor((D.getTime()-f.getTime())/(1e3*60*60*24));R<=0?P+=50:R<=2?P+=30:R<=7&&(P+=10)}if(T.scheduledDate){const D=new Date(T.scheduledDate),R=f.toDateString();D.toDateString()===R&&(P+=25)}return T.size&&T.size<=1?P+=15:T.size&&T.size<=3&&(P+=10),{task:T,score:P}});w.sort((T,P)=>P.score-T.score);const x=w.slice(0,3).map(T=>T.task),S=o.filter(T=>T.frequency==="Daily"),k=u.filter(T=>T.status==="Active");let C="";g==="morning"?C=`Good morning! You have ${x.length} priority tasks, ${S.length} habits to build, and ${k.length} metrics to track. Start your day strong!`:g==="afternoon"?C=`Good afternoon! ${x.length} tasks await your focus. Don't forget your ${S.length} daily habits!`:C=`Good evening! Wind down by completing ${x.length} remaining tasks and logging your ${S.length} habits for today.`,t({topTasks:x,habitsToComplete:S,metricsToLog:k.slice(0,3),energyLevel:g,briefing:C}),r(!1)};return A.useEffect(()=>{h()},[i,o,u]),n||!e?c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:c.jsxs("div",{className:"animate-pulse space-y-4",children:[c.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"})]})]})}):c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:c.jsx(ib,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Daily Planning"}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.energyLevel==="morning"&&"Start your day right",e.energyLevel==="afternoon"&&"Maintain momentum",e.energyLevel==="evening"&&"Finish strong"]})]})]}),c.jsx("div",{className:"mb-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:c.jsxs("p",{className:"text-gray-700 dark:text-gray-300 flex items-start gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),c.jsx("span",{children:e.briefing})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Di,{className:"w-4 h-4"}),"Top 3 Tasks for Today"]}),c.jsx(Ur,{to:"/admin/tasks",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]}),e.topTasks.length>0?c.jsx("div",{className:"space-y-2",children:e.topTasks.map((f,m)=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[c.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 text-sm font-bold flex-shrink-0",children:m+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:f.title}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${f.priority==="P1"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":f.priority==="P2"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":f.priority==="P3"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:f.priority}),c.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:f.size})]})]}),c.jsx(ym,{className:"w-5 h-5 text-gray-400"})]},f.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"No tasks for today. Enjoy your free time!"})]}),s&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Ad,{className:"w-4 h-4"}),"Habits to Complete"]}),c.jsx(Ur,{to:"/admin/habits",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]}),e.habitsToComplete.length>0?c.jsx("div",{className:"space-y-2",children:e.habitsToComplete.slice(0,5).map(f=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[c.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),c.jsx("p",{className:"flex-1 font-medium text-gray-900 dark:text-white",children:f.name})]},f.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"No daily habits configured"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(kr,{className:"w-4 h-4"}),"Metrics to Log"]}),c.jsx(Ur,{to:"/admin/metrics",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]}),e.metricsToLog.length>0?c.jsx("div",{className:"space-y-2",children:e.metricsToLog.map(f=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:f.name}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.unit==="custom"?f.customUnit:f.unit})]},f.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center py-4",children:"No active metrics"})]})]}),c.jsx(Ee,{variant:"secondary",onClick:()=>a(!s),className:"w-full",children:s?"Show Less":"Show More"})]})]})}const Ju=({title:e,value:t,icon:n,link:r,description:s})=>c.jsx(Ur,{to:r,className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-md transition group",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/50 transition flex-shrink-0",children:n}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:t}),c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:s})]})]})});function JTe(){const{tasks:e}=Cm(),{habits:t}=Em(),{metrics:n}=jm(),{goals:r}=Ex(),{projects:s}=WE(),{entries:a}=JE(),i=e.filter(f=>f.status!=="Done"&&f.status!=="Cancelled"),o=t.filter(f=>f.frequency==="Daily"),u=r.filter(f=>f.status==="Active"),h=s.filter(f=>f.status==="Active");return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Growth System Dashboard"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your progress and manage your personal growth journey"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[c.jsx(Ju,{title:"Active Tasks",value:i.length,icon:c.jsx(Di,{size:24}),link:"/admin/tasks",description:`${e.length} total tasks`}),c.jsx(Ju,{title:"Active Habits",value:o.length,icon:c.jsx(Dn,{size:24}),link:"/admin/habits",description:`${t.length} total habits`}),c.jsx(Ju,{title:"Metrics Tracked",value:n.length,icon:c.jsx(kr,{size:24}),link:"/admin/metrics",description:"Key performance indicators"}),c.jsx(Ju,{title:"Active Goals",value:u.length,icon:c.jsx(_r,{size:24}),link:"/admin/goals",description:`${r.length} total goals`}),c.jsx(Ju,{title:"Active Projects",value:h.length,icon:c.jsx(Nd,{size:24}),link:"/admin/projects",description:`${s.length} total projects`}),c.jsx(Ju,{title:"Journal Entries",value:a.length,icon:c.jsx(Bc,{size:24}),link:"/admin/logbook",description:"Daily reflections"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[c.jsx(WTe,{}),c.jsx(ZTe,{})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"Recent Tasks"}),i.length>0?c.jsx("div",{className:"space-y-2",children:i.slice(0,5).map(f=>c.jsxs("div",{className:"flex items-start gap-3 p-2.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${f.priority==="P1"?"bg-red-500":f.priority==="P2"?"bg-orange-500":f.priority==="P3"?"bg-yellow-500":"bg-green-500"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm",children:f.title}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:f.status})]})]},f.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-6 text-sm",children:"No active tasks"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"Active Projects"}),h.length>0?c.jsx("div",{className:"space-y-2",children:h.slice(0,5).map(f=>c.jsx("div",{className:"p-2.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm",children:f.name}),c.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:f.status})]})},f.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-6 text-sm",children:"No active projects"})]})]})]})}function YTe(){const[e,t]=A.useState({anthropic:{value:"",showKey:!1,isTesting:!1,testResult:null},openai:{value:"",showKey:!1,isTesting:!1,testResult:null},gemini:{value:"",showKey:!1,isTesting:!1,testResult:null},groq:{value:"",showKey:!1,isTesting:!1,testResult:null},grok:{value:"",showKey:!1,isTesting:!1,testResult:null},deepseek:{value:"",showKey:!1,isTesting:!1,testResult:null},cerebras:{value:"",showKey:!1,isTesting:!1,testResult:null}});A.useEffect(()=>{const o=["anthropic","openai","gemini","groq","grok","deepseek","cerebras"],u={};o.forEach(h=>{const f=QE(h)||"";u[h]={value:f,showKey:!1,isTesting:!1,testResult:null}}),t(u)},[]);const n=(o,u)=>{t(h=>({...h,[o]:{...h[o],value:u,testResult:null}}))},r=o=>{t(u=>({...u,[o]:{...u[o],showKey:!u[o].showKey}}))},s=o=>{const u=e[o].value.trim();u?Ale(o,u):Ile(o)},a=async o=>{t(h=>({...h,[o]:{...h[o],isTesting:!0,testResult:null}})),await new Promise(h=>setTimeout(h,1e3));const u=e[o].value.trim().length>0;t(h=>({...h,[o]:{...h[o],isTesting:!1,testResult:u?"success":"error"}}))},i=["anthropic","openai","gemini","groq","grok","deepseek","cerebras"];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"API Keys"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure API keys for different LLM providers. You only need to configure providers you want to use."})]}),c.jsx("div",{className:"space-y-4",children:i.map(o=>{const u=e[o];return c.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:um[o]}),u.testResult==="success"&&c.jsxs("span",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Connected"]}),u.testResult==="error"&&c.jsxs("span",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[c.jsx(cn,{className:"w-4 h-4 mr-1"}),"Invalid"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{type:u.showKey?"text":"password",value:u.value,onChange:h=>n(o,h.target.value),placeholder:`Enter ${um[o]} API key`,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),c.jsx("button",{type:"button",onClick:()=>r(o),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u.showKey?c.jsx(zX,{className:"w-4 h-4"}):c.jsx(FX,{className:"w-4 h-4"})})]}),c.jsx("button",{onClick:()=>s(o),disabled:u.isTesting,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"}),c.jsx("button",{onClick:()=>a(o),disabled:u.isTesting||!u.value.trim(),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u.isTesting?"Testing...":"Test"})]})]},o)})})]})}function QTe(){const[e,t]=A.useState("parseTask"),[n,r]=A.useState("anthropic"),[s,a]=A.useState(""),[i,o]=A.useState([]),[u,h]=A.useState(!1),[f,m]=A.useState(!1);A.useEffect(()=>{const x=Q9();if(o(x),x.length>0){const S=gT(e);if(x.includes(S.provider))r(S.provider),a(S.model);else{r(x[0]);const k=xk(x[0]);a(k.length>0?k[0].name:"")}}},[e]),A.useEffect(()=>{const x=xk(n);x.length>0&&!x.find(S=>S.name===s)&&a(x[0].name)},[n]);const g=async()=>{h(!0),m(!1);try{$t(e,n,s),m(!0),setTimeout(()=>m(!1),2e3)}catch(x){console.error("Failed to save feature config:",x)}finally{h(!1)}},b=["parseTask","breakdownTask","priorityAdvisor","effortEstimation","taskCategorization","dependencyDetection","projectHealth","projectTaskGen","projectRisk","goalRefinement","successCriteriaGen","metricSuggestions","goalCascade","achievementForecast","goalConflict","goalProgress","metricPatterns","metricAnomalies","metricCorrelations","metricTargets","metricHealth","habitDesign","habitStack","streakRecovery","habitPatterns","triggerOptimization","habitGoalAlignment","reflectionPrompts","dailyDigest","logbookPatterns","sentimentAnalysis","weeklyReview","connectionSuggestions"],w=xk(n);return i.length===0?c.jsxs("div",{className:"p-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[c.jsx("h3",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-100 mb-2",children:"No Providers Configured"}),c.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Please configure at least one API key in the API Keys tab before setting up feature providers."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Feature Provider Configuration"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure which LLM provider and model to use for each AI feature. This allows you to optimize for cost, performance, or specific capabilities."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"AI Feature"}),c.jsx("select",{value:e,onChange:x=>t(x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:b.map(x=>c.jsx("option",{value:x,children:F4[x]},x))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provider"}),c.jsx("select",{value:n,onChange:x=>r(x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:i.map(x=>c.jsx("option",{value:x,children:um[x]},x))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model"}),c.jsx("select",{value:s,onChange:x=>a(x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",children:w.map(x=>c.jsx("option",{value:x.name,children:x.displayName},x.name))})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:g,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[c.jsx(Dee,{className:"w-4 h-4"}),u?"Saving...":"Save Configuration"]}),f&&c.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Configuration saved successfully!"})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Current Configuration Summary"}),c.jsx("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:b.map(x=>{const S=gT(x);return c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:[F4[x],":"]}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[um[S.provider]," - ",S.model]})]},x)})})]})]})}function XTe(){const[e,t]=A.useState("api-keys"),n=r=>{if(r==="cost-optimized")Nle();else if(Q9().includes(r))jle(r);else{alert(`Please configure ${um[r]} API key first.`);return}alert("Preset applied successfully! Check the Feature Configuration tab to see changes.")};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"AI Configuration"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage API keys and configure which AI providers to use for different features."})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:c.jsxs("nav",{className:"flex gap-6",children:[c.jsx("button",{onClick:()=>t("api-keys"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${e==="api-keys"?"border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"API Keys"}),c.jsx("button",{onClick:()=>t("features"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${e==="features"?"border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Feature Configuration"})]})}),e==="features"&&c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[c.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Quick Presets"}),c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Apply a preset configuration to all features:"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>n("anthropic"),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors text-sm",children:"All Anthropic"}),c.jsx("button",{onClick:()=>n("openai"),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors text-sm",children:"All OpenAI"}),c.jsx("button",{onClick:()=>n("cost-optimized"),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors text-sm",children:"Cost-Optimized Mix"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e==="api-keys"&&c.jsx(YTe,{}),e==="features"&&c.jsx(QTe,{})]})]})}function eCe(){const[e,t]=A.useState(()=>localStorage.getItem("theme")||"system"),[n,r]=A.useState(()=>pT.getCurrentType());A.useEffect(()=>{localStorage.setItem("theme",e),a(e)},[e]);const s=u=>{r(u),pT.setStorageType(u),window.location.reload()},a=u=>{let h=u;u==="system"&&(h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),h==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},i=[{value:"light",label:"Light",icon:c.jsx(ib,{size:20}),description:"Use light theme"},{value:"dark",label:"Dark",icon:c.jsx(FS,{size:20}),description:"Use dark theme"},{value:"system",label:"System",icon:c.jsx(US,{size:20}),description:"Follow system preference"}],o=[{value:"local",label:"Local Storage",icon:c.jsx(MX,{size:20}),description:"Store data in browser (no server needed)"},{value:"api",label:"API Backend",icon:c.jsx(OX,{size:20}),description:"Sync data with backend server"}];return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your Personal OS preferences"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Appearance"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Customize how Personal OS looks on your device"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Color Theme"}),i.map(u=>c.jsxs("button",{onClick:()=>t(u.value),className:`w-full flex items-center gap-4 p-4 rounded-lg border-2 transition ${e===u.value?"border-blue-500 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-700/50"}`,children:[c.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${e===u.value?"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}`,children:u.icon}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:u.label}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.description})]}),e===u.value&&c.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 dark:bg-blue-500 flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},u.value))]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mt-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"Data Storage"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Choose where your data is stored"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Storage Type"}),o.map(u=>c.jsxs("button",{onClick:()=>s(u.value),className:`w-full flex items-center gap-4 p-4 rounded-lg border-2 transition ${n===u.value?"border-blue-500 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-700/50"}`,children:[c.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${n===u.value?"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}`,children:u.icon}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:u.label}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.description})]}),n===u.value&&c.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 dark:bg-blue-500 flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},u.value))]})]}),c.jsx("div",{className:"mt-6",children:c.jsx(XTe,{})})]})}const tCe=({title:e,description:t,icon:n,link:r})=>c.jsx(Ur,{to:r,className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-lg transition group",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/50 transition",children:n}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:e}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t})]})]})});function nCe(){const e=[{title:"Goals",description:"Set and track long-term objectives with measurable outcomes and deadlines.",icon:c.jsx(_r,{size:24}),link:"/admin/goals"},{title:"Projects",description:"Manage complex initiatives with milestones, tasks, and progress tracking.",icon:c.jsx(Nd,{size:24}),link:"/admin/projects"},{title:"Tasks",description:"Organize daily work with priorities, deadlines, and project associations.",icon:c.jsx(Di,{size:24}),link:"/admin/tasks"},{title:"Habits",description:"Build consistent routines with streak tracking and daily logging.",icon:c.jsx(Dn,{size:24}),link:"/admin/habits"},{title:"Metrics",description:"Monitor key performance indicators with historical data and trends.",icon:c.jsx(kr,{size:24}),link:"/admin/metrics"},{title:"Logbook",description:"Maintain daily journal entries linked to your tasks, habits, and achievements.",icon:c.jsx(Bc,{size:24}),link:"/admin/logbook"}];return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Growth System"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"A comprehensive framework for personal development and productivity"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-8 mb-8 border border-blue-100 dark:border-blue-900/50",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"How It Works"}),c.jsxs("div",{className:"space-y-4 text-gray-700 dark:text-gray-300",children:[c.jsx("p",{children:"The Growth System is a holistic approach to personal development that integrates multiple productivity methodologies into a cohesive framework."}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:[c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Strategic Layer"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Goals and Projects provide the big picture vision, defining what you want to achieve and how you'll get there."})]}),c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Tactical Layer"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasks and Habits handle day-to-day execution, turning strategy into consistent action."})]}),c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Measurement Layer"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Metrics track progress with quantifiable data, providing objective feedback on performance."})]}),c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Reflection Layer"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Logbook captures daily insights and learning, connecting activities to outcomes."})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 mb-8 border border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"How Layers Integrate"}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"relative pl-20",children:[c.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"1"}),c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-5 border-l-4 border-blue-500 dark:border-blue-400",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 text-lg",children:"Goals Drive Projects"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Start with long-term goals in the Strategic Layer. Break them down into Projects with clear milestones and deliverables."})]})]}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(bl,{className:"text-blue-500 dark:text-blue-400",size:32,strokeWidth:2.5})}),c.jsxs("div",{className:"relative pl-20",children:[c.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"2"}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-5 border-l-4 border-green-500 dark:border-green-400",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 text-lg",children:"Projects Create Tasks"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Projects in the Strategic Layer generate Tasks in the Tactical Layer. Each task is a concrete action step toward project completion."})]})]}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(bl,{className:"text-green-500 dark:text-green-400",size:32,strokeWidth:2.5})}),c.jsxs("div",{className:"relative pl-20",children:[c.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"3"}),c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-5 border-l-4 border-orange-500 dark:border-orange-400",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 text-lg",children:"Metrics Measure Progress"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"The Measurement Layer tracks key performance indicators tied to your goals and projects, providing data-driven insights on what's working."})]})]}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(bl,{className:"text-orange-500 dark:text-orange-400",size:32,strokeWidth:2.5})}),c.jsxs("div",{className:"relative pl-20",children:[c.jsx("div",{className:"absolute left-0 top-0 w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"4"}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-5 border-l-4 border-purple-500 dark:border-purple-400",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 text-lg",children:"Reflection Informs Strategy"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Daily Logbook entries in the Reflection Layer capture insights about what works, what doesn't, and what adjustments are neededfeeding back into your strategic planning."})]})]}),c.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-xl border-2 border-blue-200 dark:border-blue-800 shadow-sm",children:c.jsxs("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:[c.jsx("strong",{className:"text-blue-700 dark:text-blue-300",children:"The Result:"})," A continuous cycle where strategic vision guides daily actions, metrics validate progress, and reflection drives continuous improvement. Each layer reinforces the others, creating a compound effect on your growth."]})})]})]}),c.jsx("div",{className:"mb-6",children:c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"System Components"})}),c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(t=>c.jsx(tCe,{...t},t.title))})]})}function rCe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const sCe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aCe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iCe={};function yL(e,t){return(iCe.jsx?aCe:sCe).test(e)}const oCe=/[ \t\n\f\r]/g;function lCe(e){return typeof e=="object"?e.type==="text"?bL(e.value):!1:bL(e)}function bL(e){return e.replace(oCe,"")===""}class Zm{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Zm.prototype.normal={};Zm.prototype.property={};Zm.prototype.space=void 0;function Rq(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Zm(n,r,t)}function OC(e){return e.toLowerCase()}class Ns{constructor(t,n){this.attribute=n,this.property=t}}Ns.prototype.attribute="";Ns.prototype.booleanish=!1;Ns.prototype.boolean=!1;Ns.prototype.commaOrSpaceSeparated=!1;Ns.prototype.commaSeparated=!1;Ns.prototype.defined=!1;Ns.prototype.mustUseProperty=!1;Ns.prototype.number=!1;Ns.prototype.overloadedBoolean=!1;Ns.prototype.property="";Ns.prototype.spaceSeparated=!1;Ns.prototype.space=void 0;let cCe=0;const Tt=nu(),Wn=nu(),RC=nu(),Ie=nu(),fn=nu(),Ed=nu(),qs=nu();function nu(){return 2**++cCe}const PC=Object.freeze(Object.defineProperty({__proto__:null,boolean:Tt,booleanish:Wn,commaOrSpaceSeparated:qs,commaSeparated:Ed,number:Ie,overloadedBoolean:RC,spaceSeparated:fn},Symbol.toStringTag,{value:"Module"})),iS=Object.keys(PC);class AN extends Ns{constructor(t,n,r,s){let a=-1;if(super(t,n),xL(this,"space",s),typeof r=="number")for(;++a<iS.length;){const i=iS[a];xL(this,iS[a],(r&PC[i])===PC[i])}}}AN.prototype.defined=!0;function xL(e,t,n){n&&(e[t]=n)}function wh(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new AN(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[OC(r)]=r,n[OC(a.attribute)]=r}return new Zm(t,n,e.space)}const Pq=wh({properties:{ariaActiveDescendant:null,ariaAtomic:Wn,ariaAutoComplete:null,ariaBusy:Wn,ariaChecked:Wn,ariaColCount:Ie,ariaColIndex:Ie,ariaColSpan:Ie,ariaControls:fn,ariaCurrent:null,ariaDescribedBy:fn,ariaDetails:null,ariaDisabled:Wn,ariaDropEffect:fn,ariaErrorMessage:null,ariaExpanded:Wn,ariaFlowTo:fn,ariaGrabbed:Wn,ariaHasPopup:null,ariaHidden:Wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fn,ariaLevel:Ie,ariaLive:null,ariaModal:Wn,ariaMultiLine:Wn,ariaMultiSelectable:Wn,ariaOrientation:null,ariaOwns:fn,ariaPlaceholder:null,ariaPosInSet:Ie,ariaPressed:Wn,ariaReadOnly:Wn,ariaRelevant:null,ariaRequired:Wn,ariaRoleDescription:fn,ariaRowCount:Ie,ariaRowIndex:Ie,ariaRowSpan:Ie,ariaSelected:Wn,ariaSetSize:Ie,ariaSort:null,ariaValueMax:Ie,ariaValueMin:Ie,ariaValueNow:Ie,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Mq(e,t){return t in e?e[t]:t}function Dq(e,t){return Mq(e,t.toLowerCase())}const uCe=wh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ed,acceptCharset:fn,accessKey:fn,action:null,allow:null,allowFullScreen:Tt,allowPaymentRequest:Tt,allowUserMedia:Tt,alt:null,as:null,async:Tt,autoCapitalize:null,autoComplete:fn,autoFocus:Tt,autoPlay:Tt,blocking:fn,capture:null,charSet:null,checked:Tt,cite:null,className:fn,cols:Ie,colSpan:null,content:null,contentEditable:Wn,controls:Tt,controlsList:fn,coords:Ie|Ed,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Tt,defer:Tt,dir:null,dirName:null,disabled:Tt,download:RC,draggable:Wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Tt,formTarget:null,headers:fn,height:Ie,hidden:RC,high:Ie,href:null,hrefLang:null,htmlFor:fn,httpEquiv:fn,id:null,imageSizes:null,imageSrcSet:null,inert:Tt,inputMode:null,integrity:null,is:null,isMap:Tt,itemId:null,itemProp:fn,itemRef:fn,itemScope:Tt,itemType:fn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Tt,low:Ie,manifest:null,max:null,maxLength:Ie,media:null,method:null,min:null,minLength:Ie,multiple:Tt,muted:Tt,name:null,nonce:null,noModule:Tt,noValidate:Tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Tt,optimum:Ie,pattern:null,ping:fn,placeholder:null,playsInline:Tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Tt,referrerPolicy:null,rel:fn,required:Tt,reversed:Tt,rows:Ie,rowSpan:Ie,sandbox:fn,scope:null,scoped:Tt,seamless:Tt,selected:Tt,shadowRootClonable:Tt,shadowRootDelegatesFocus:Tt,shadowRootMode:null,shape:null,size:Ie,sizes:null,slot:null,span:Ie,spellCheck:Wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ie,step:null,style:null,tabIndex:Ie,target:null,title:null,translate:null,type:null,typeMustMatch:Tt,useMap:null,value:Wn,width:Ie,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fn,axis:null,background:null,bgColor:null,border:Ie,borderColor:null,bottomMargin:Ie,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Tt,declare:Tt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ie,leftMargin:Ie,link:null,longDesc:null,lowSrc:null,marginHeight:Ie,marginWidth:Ie,noResize:Tt,noHref:Tt,noShade:Tt,noWrap:Tt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ie,rules:null,scheme:null,scrolling:Wn,standby:null,summary:null,text:null,topMargin:Ie,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ie,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Tt,disableRemotePlayback:Tt,prefix:null,property:null,results:Ie,security:null,unselectable:null},space:"html",transform:Dq}),dCe=wh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:qs,accentHeight:Ie,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ie,amplitude:Ie,arabicForm:null,ascent:Ie,attributeName:null,attributeType:null,azimuth:Ie,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ie,by:null,calcMode:null,capHeight:Ie,className:fn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ie,diffuseConstant:Ie,direction:null,display:null,dur:null,divisor:Ie,dominantBaseline:null,download:Tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ie,enableBackground:null,end:null,event:null,exponent:Ie,externalResourcesRequired:null,fill:null,fillOpacity:Ie,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ed,g2:Ed,glyphName:Ed,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ie,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ie,horizOriginX:Ie,horizOriginY:Ie,id:null,ideographic:Ie,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ie,k:Ie,k1:Ie,k2:Ie,k3:Ie,k4:Ie,kernelMatrix:qs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ie,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ie,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ie,overlineThickness:Ie,paintOrder:null,panose1:null,path:null,pathLength:Ie,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ie,pointsAtY:Ie,pointsAtZ:Ie,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qs,rev:qs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qs,requiredFeatures:qs,requiredFonts:qs,requiredFormats:qs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ie,specularExponent:Ie,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ie,strikethroughThickness:Ie,string:null,stroke:null,strokeDashArray:qs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ie,strokeOpacity:Ie,strokeWidth:null,style:null,surfaceScale:Ie,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qs,tabIndex:Ie,tableValues:null,target:null,targetX:Ie,targetY:Ie,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ie,underlineThickness:Ie,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ie,values:null,vAlphabetic:Ie,vMathematical:Ie,vectorEffect:null,vHanging:Ie,vIdeographic:Ie,version:null,vertAdvY:Ie,vertOriginX:Ie,vertOriginY:Ie,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ie,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Mq}),$q=wh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Lq=wh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Dq}),zq=wh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),hCe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},fCe=/[A-Z]/g,vL=/-[a-z]/g,pCe=/^data[-\w.:]+$/i;function mCe(e,t){const n=OC(t);let r=t,s=Ns;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pCe.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(vL,yCe);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!vL.test(a)){let i=a.replace(fCe,gCe);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=AN}return new s(r,t)}function gCe(e){return"-"+e.toLowerCase()}function yCe(e){return e.charAt(1).toUpperCase()}const bCe=Rq([Pq,uCe,$q,Lq,zq],"html"),IN=Rq([Pq,dCe,$q,Lq,zq],"svg");function xCe(e){return e.join(" ").trim()}var Yu={},oS,wL;function vCe(){if(wL)return oS;wL=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,h="/",f="*",m="",g="comment",b="declaration";function w(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,T=1;function P(G){var H=G.match(t);H&&(C+=H.length);var L=G.lastIndexOf(u);T=~L?G.length-L:T+G.length}function D(){var G={line:C,column:T};return function(H){return H.position=new R(G),se(),H}}function R(G){this.start=G,this.end={line:C,column:T},this.source=k.source}R.prototype.content=S;function U(G){var H=new Error(k.source+":"+C+":"+T+": "+G);if(H.reason=G,H.filename=k.source,H.line=C,H.column=T,H.source=S,!k.silent)throw H}function j(G){var H=G.exec(S);if(H){var L=H[0];return P(L),S=S.slice(L.length),H}}function se(){j(n)}function B(G){var H;for(G=G||[];H=ee();)H!==!1&&G.push(H);return G}function ee(){var G=D();if(!(h!=S.charAt(0)||f!=S.charAt(1))){for(var H=2;m!=S.charAt(H)&&(f!=S.charAt(H)||h!=S.charAt(H+1));)++H;if(H+=2,m===S.charAt(H-1))return U("End of comment missing");var L=S.slice(2,H-2);return T+=2,P(L),S=S.slice(H),T+=2,G({type:g,comment:L})}}function ie(){var G=D(),H=j(r);if(H){if(ee(),!j(s))return U("property missing ':'");var L=j(a),Z=G({type:b,property:x(H[0].replace(e,m)),value:L?x(L[0].replace(e,m)):m});return j(i),Z}}function _e(){var G=[];B(G);for(var H;H=ie();)H!==!1&&(G.push(H),B(G));return G}return se(),_e()}function x(S){return S?S.replace(o,m):m}return oS=w,oS}var _L;function wCe(){if(_L)return Yu;_L=1;var e=Yu&&Yu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.default=n;const t=e(vCe());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const i=(0,t.default)(r),o=typeof s=="function";return i.forEach(u=>{if(u.type!=="declaration")return;const{property:h,value:f}=u;o?s(h,f,u):f&&(a=a||{},a[h]=f)}),a}return Yu}var Bf={},kL;function _Ce(){if(kL)return Bf;kL=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(h){return!h||n.test(h)||e.test(h)},i=function(h,f){return f.toUpperCase()},o=function(h,f){return"".concat(f,"-")},u=function(h,f){return f===void 0&&(f={}),a(h)?h:(h=h.toLowerCase(),f.reactCompat?h=h.replace(s,o):h=h.replace(r,o),h.replace(t,i))};return Bf.camelCase=u,Bf}var Hf,SL;function kCe(){if(SL)return Hf;SL=1;var e=Hf&&Hf.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(wCe()),n=_Ce();function r(s,a){var i={};return!s||typeof s!="string"||(0,t.default)(s,function(o,u){o&&u&&(i[(0,n.camelCase)(o,a)]=u)}),i}return r.default=r,Hf=r,Hf}var SCe=kCe();const TCe=Kd(SCe),Uq=Fq("end"),ON=Fq("start");function Fq(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function CCe(e){const t=ON(e),n=Uq(e);if(t&&n)return{start:t,end:n}}function Ip(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?TL(e.position):"start"in e||"end"in e?TL(e):"line"in e||"column"in e?MC(e):""}function MC(e){return CL(e&&e.line)+":"+CL(e&&e.column)}function TL(e){return MC(e&&e.start)+"-"+MC(e&&e.end)}function CL(e){return e&&typeof e=="number"?e:1}class Wr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},i=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(i=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?a.ruleId=r:(a.source=r.slice(0,u),a.ruleId=r.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=o?o.line:void 0,this.name=Ip(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=i&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wr.prototype.file="";Wr.prototype.name="";Wr.prototype.reason="";Wr.prototype.message="";Wr.prototype.stack="";Wr.prototype.column=void 0;Wr.prototype.line=void 0;Wr.prototype.ancestors=void 0;Wr.prototype.cause=void 0;Wr.prototype.fatal=void 0;Wr.prototype.place=void 0;Wr.prototype.ruleId=void 0;Wr.prototype.source=void 0;const RN={}.hasOwnProperty,ECe=new Map,jCe=/[A-Z]/g,NCe=new Set(["table","tbody","thead","tfoot","tr"]),ACe=new Set(["td","th"]),Bq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ICe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zCe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=LCe(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?IN:bCe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=Hq(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function Hq(e,t,n){if(t.type==="element")return OCe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return RCe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return MCe(e,t,n);if(t.type==="mdxjsEsm")return PCe(e,t);if(t.type==="root")return DCe(e,t,n);if(t.type==="text")return $Ce(e,t)}function OCe(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=IN,e.schema=s),e.ancestors.push(t);const a=Vq(e,t.tagName,!1),i=UCe(e,t);let o=MN(e,t);return NCe.has(t.tagName)&&(o=o.filter(function(u){return typeof u=="string"?!lCe(u):!0})),qq(e,i,a,t),PN(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}function RCe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}dm(e,t.position)}function PCe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);dm(e,t.position)}function MCe(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=IN,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Vq(e,t.name,!0),i=FCe(e,t),o=MN(e,t);return qq(e,i,a,t),PN(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}function DCe(e,t,n){const r={};return PN(r,MN(e,t)),e.create(t,e.Fragment,r,n)}function $Ce(e,t){return t.value}function qq(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function PN(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function LCe(e,t,n){return r;function r(s,a,i,o){const h=Array.isArray(i.children)?n:t;return o?h(a,i,o):h(a,i)}}function zCe(e,t){return n;function n(r,s,a,i){const o=Array.isArray(a.children),u=ON(r);return t(s,a,i,o,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function UCe(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&RN.call(t.properties,s)){const a=BCe(e,s,t.properties[s]);if(a){const[i,o]=a;e.tableCellAlignToStyle&&i==="align"&&typeof o=="string"&&ACe.has(t.tagName)?r=o:n[i]=o}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function FCe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const i=a.expression;i.type;const o=i.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else dm(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,a=e.evaluater.evaluateExpression(o.expression)}else dm(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function MN(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:ECe;for(;++r<t.children.length;){const a=t.children[r];let i;if(e.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const h=s.get(u)||0;i=u+"-"+h,s.set(u,h+1)}}const o=Hq(e,a,i);o!==void 0&&n.push(o)}return n}function BCe(e,t,n){const r=mCe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?rCe(n):xCe(n)),r.property==="style"){let s=typeof n=="object"?n:HCe(e,String(n));return e.stylePropertyNameCase==="css"&&(s=qCe(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?hCe[r.property]||r.property:r.attribute,n]}}function HCe(e,t){try{return TCe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Wr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Bq+"#cannot-parse-style-attribute",s}}function Vq(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,i;for(;++a<s.length;){const o=yL(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};i=i?{type:"MemberExpression",object:i,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}r=i}else r=yL(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return RN.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);dm(e)}function dm(e,t){const n=new Wr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Bq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function qCe(e){const t={};let n;for(n in e)RN.call(e,n)&&(t[VCe(n)]=e[n]);return t}function VCe(e){let t=e.replace(jCe,GCe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function GCe(e){return"-"+e.toLowerCase()}const lS={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},KCe={};function DN(e,t){const n=KCe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Gq(e,r,s)}function Gq(e,t,n){if(ZCe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return EL(e.children,t,n)}return Array.isArray(e)?EL(e,t,n):""}function EL(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Gq(e[s],t,n);return r.join("")}function ZCe(e){return!!(e&&typeof e=="object")}const jL=document.createElement("i");function $N(e){const t="&"+e+";";jL.innerHTML=t;const n=jL.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ys(e,t,n,r){const s=e.length;let a=0,i;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function xa(e,t){return e.length>0?(Ys(e,e.length,0,t),e):t}const NL={}.hasOwnProperty;function Kq(e){const t={};let n=-1;for(;++n<e.length;)WCe(t,e[n]);return t}function WCe(e,t){let n;for(n in t){const s=(NL.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let i;if(a)for(i in a){NL.call(s,i)||(s[i]=[]);const o=a[i];JCe(s[i],Array.isArray(o)?o:o?[o]:[])}}}function JCe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ys(e,0,0,r)}function Zq(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ni(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const as=Fl(/[A-Za-z]/),Vr=Fl(/[\dA-Za-z]/),YCe=Fl(/[#-'*+\--9=?A-Z^-~]/);function ix(e){return e!==null&&(e<32||e===127)}const DC=Fl(/\d/),QCe=Fl(/[\dA-Fa-f]/),XCe=Fl(/[!-/:-@[-`{-~]/);function dt(e){return e!==null&&e<-2}function hn(e){return e!==null&&(e<0||e===32)}function Ot(e){return e===-2||e===-1||e===32}const wv=Fl(new RegExp("\\p{P}|\\p{S}","u")),Yc=Fl(/\s/);function Fl(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function _h(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let i="";if(a===37&&Vr(e.charCodeAt(n+1))&&Vr(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const o=e.charCodeAt(n+1);a<56320&&o>56319&&o<57344?(i=String.fromCharCode(a,o),s=1):i=""}else i=String.fromCharCode(a);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function zt(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return i;function i(u){return Ot(u)?(e.enter(n),o(u)):t(u)}function o(u){return Ot(u)&&a++<s?(e.consume(u),o):(e.exit(n),t(u))}}const eEe={tokenize:tEe};function tEe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),zt(e,t,"linePrefix")}function s(o){return e.enter("paragraph"),a(o)}function a(o){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,i(o)}function i(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return dt(o)?(e.consume(o),e.exit("chunkText"),a):(e.consume(o),i)}}const nEe={tokenize:rEe},AL={tokenize:sEe};function rEe(e){const t=this,n=[];let r=0,s,a,i;return o;function o(T){if(r<n.length){const P=n[r];return t.containerState=P[1],e.attempt(P[0].continuation,u,h)(T)}return h(T)}function u(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&C();const P=t.events.length;let D=P,R;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){R=t.events[D][1].end;break}k(r);let U=P;for(;U<t.events.length;)t.events[U][1].end={...R},U++;return Ys(t.events,D+1,0,t.events.slice(P)),t.events.length=U,h(T)}return o(T)}function h(T){if(r===n.length){if(!s)return g(T);if(s.currentConstruct&&s.currentConstruct.concrete)return w(T);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(AL,f,m)(T)}function f(T){return s&&C(),k(r),g(T)}function m(T){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,w(T)}function g(T){return t.containerState={},e.attempt(AL,b,w)(T)}function b(T){return r++,n.push([t.currentConstruct,t.containerState]),g(T)}function w(T){if(T===null){s&&C(),k(0),e.consume(T);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(T)}function x(T){if(T===null){S(e.exit("chunkFlow"),!0),k(0),e.consume(T);return}return dt(T)?(e.consume(T),S(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(T),x)}function S(T,P){const D=t.sliceStream(T);if(P&&D.push(null),T.previous=a,a&&(a.next=T),a=T,s.defineSkip(T.start),s.write(D),t.parser.lazy[T.start.line]){let R=s.events.length;for(;R--;)if(s.events[R][1].start.offset<i&&(!s.events[R][1].end||s.events[R][1].end.offset>i))return;const U=t.events.length;let j=U,se,B;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(se){B=t.events[j][1].end;break}se=!0}for(k(r),R=U;R<t.events.length;)t.events[R][1].end={...B},R++;Ys(t.events,j+1,0,t.events.slice(U)),t.events.length=R}}function k(T){let P=n.length;for(;P-- >T;){const D=n[P];t.containerState=D[1],D[0].exit.call(t,e)}n.length=T}function C(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function sEe(e,t,n){return zt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gd(e){if(e===null||hn(e)||Yc(e))return 1;if(wv(e))return 2}function _v(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const $C={name:"attention",resolveAll:aEe,tokenize:iEe};function aEe(e,t){let n=-1,r,s,a,i,o,u,h,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},g={...e[n][1].start};IL(m,-u),IL(g,u),i={type:u>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},o={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},a={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:u>1?"strong":"emphasis",start:{...i.start},end:{...o.end}},e[r][1].end={...i.start},e[n][1].start={...o.end},h=[],e[r][1].end.offset-e[r][1].start.offset&&(h=xa(h,[["enter",e[r][1],t],["exit",e[r][1],t]])),h=xa(h,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",a,t]]),h=xa(h,_v(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),h=xa(h,[["exit",a,t],["enter",o,t],["exit",o,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,h=xa(h,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,Ys(e,r-1,n-r+3,h),n=r+h.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function iEe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Gd(r);let a;return i;function i(u){return a=u,e.enter("attentionSequence"),o(u)}function o(u){if(u===a)return e.consume(u),o;const h=e.exit("attentionSequence"),f=Gd(u),m=!f||f===2&&s||n.includes(u),g=!s||s===2&&f||n.includes(r);return h._open=!!(a===42?m:m&&(s||!g)),h._close=!!(a===42?g:g&&(f||!m)),t(u)}}function IL(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const oEe={name:"autolink",tokenize:lEe};function lEe(e,t,n){let r=0;return s;function s(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(b){return as(b)?(e.consume(b),i):b===64?n(b):h(b)}function i(b){return b===43||b===45||b===46||Vr(b)?(r=1,o(b)):h(b)}function o(b){return b===58?(e.consume(b),r=0,u):(b===43||b===45||b===46||Vr(b))&&r++<32?(e.consume(b),o):(r=0,h(b))}function u(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||ix(b)?n(b):(e.consume(b),u)}function h(b){return b===64?(e.consume(b),f):YCe(b)?(e.consume(b),h):n(b)}function f(b){return Vr(b)?m(b):n(b)}function m(b){return b===46?(e.consume(b),r=0,f):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):g(b)}function g(b){if((b===45||Vr(b))&&r++<63){const w=b===45?g:m;return e.consume(b),w}return n(b)}}const Wm={partial:!0,tokenize:cEe};function cEe(e,t,n){return r;function r(a){return Ot(a)?zt(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||dt(a)?t(a):n(a)}}const Wq={continuation:{tokenize:dEe},exit:hEe,name:"blockQuote",tokenize:uEe};function uEe(e,t,n){const r=this;return s;function s(i){if(i===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),a}return n(i)}function a(i){return Ot(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function dEe(e,t,n){const r=this;return s;function s(i){return Ot(i)?zt(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):a(i)}function a(i){return e.attempt(Wq,t,n)(i)}}function hEe(e){e.exit("blockQuote")}const Jq={name:"characterEscape",tokenize:fEe};function fEe(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return XCe(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Yq={name:"characterReference",tokenize:pEe};function pEe(e,t,n){const r=this;let s=0,a,i;return o;function o(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),u}function u(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),a=31,i=Vr,f(m))}function h(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,i=QCe,f):(e.enter("characterReferenceValue"),a=7,i=DC,f(m))}function f(m){if(m===59&&s){const g=e.exit("characterReferenceValue");return i===Vr&&!$N(r.sliceSerialize(g))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(m)&&s++<a?(e.consume(m),f):n(m)}}const OL={partial:!0,tokenize:gEe},RL={concrete:!0,name:"codeFenced",tokenize:mEe};function mEe(e,t,n){const r=this,s={partial:!0,tokenize:D};let a=0,i=0,o;return u;function u(R){return h(R)}function h(R){const U=r.events[r.events.length-1];return a=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,o=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(R)}function f(R){return R===o?(i++,e.consume(R),f):i<3?n(R):(e.exit("codeFencedFenceSequence"),Ot(R)?zt(e,m,"whitespace")(R):m(R))}function m(R){return R===null||dt(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(OL,x,P)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(R))}function g(R){return R===null||dt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(R)):Ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),zt(e,b,"whitespace")(R)):R===96&&R===o?n(R):(e.consume(R),g)}function b(R){return R===null||dt(R)?m(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(R))}function w(R){return R===null||dt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(R)):R===96&&R===o?n(R):(e.consume(R),w)}function x(R){return e.attempt(s,P,S)(R)}function S(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),k}function k(R){return a>0&&Ot(R)?zt(e,C,"linePrefix",a+1)(R):C(R)}function C(R){return R===null||dt(R)?e.check(OL,x,P)(R):(e.enter("codeFlowValue"),T(R))}function T(R){return R===null||dt(R)?(e.exit("codeFlowValue"),C(R)):(e.consume(R),T)}function P(R){return e.exit("codeFenced"),t(R)}function D(R,U,j){let se=0;return B;function B(H){return R.enter("lineEnding"),R.consume(H),R.exit("lineEnding"),ee}function ee(H){return R.enter("codeFencedFence"),Ot(H)?zt(R,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):ie(H)}function ie(H){return H===o?(R.enter("codeFencedFenceSequence"),_e(H)):j(H)}function _e(H){return H===o?(se++,R.consume(H),_e):se>=i?(R.exit("codeFencedFenceSequence"),Ot(H)?zt(R,G,"whitespace")(H):G(H)):j(H)}function G(H){return H===null||dt(H)?(R.exit("codeFencedFence"),U(H)):j(H)}}}function gEe(e,t,n){const r=this;return s;function s(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const cS={name:"codeIndented",tokenize:bEe},yEe={partial:!0,tokenize:xEe};function bEe(e,t,n){const r=this;return s;function s(h){return e.enter("codeIndented"),zt(e,a,"linePrefix",5)(h)}function a(h){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?i(h):n(h)}function i(h){return h===null?u(h):dt(h)?e.attempt(yEe,i,u)(h):(e.enter("codeFlowValue"),o(h))}function o(h){return h===null||dt(h)?(e.exit("codeFlowValue"),i(h)):(e.consume(h),o)}function u(h){return e.exit("codeIndented"),t(h)}}function xEe(e,t,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):dt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):zt(e,a,"linePrefix",5)(i)}function a(i){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):dt(i)?s(i):n(i)}}const vEe={name:"codeText",previous:_Ee,resolve:wEe,tokenize:kEe};function wEe(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function _Ee(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kEe(e,t,n){let r=0,s,a;return i;function i(m){return e.enter("codeText"),e.enter("codeTextSequence"),o(m)}function o(m){return m===96?(e.consume(m),r++,o):(e.exit("codeTextSequence"),u(m))}function u(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),u):m===96?(a=e.enter("codeTextSequence"),s=0,f(m)):dt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||dt(m)?(e.exit("codeTextData"),u(m)):(e.consume(m),h)}function f(m){return m===96?(e.consume(m),s++,f):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",h(m))}}class SEe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&qf(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),qf(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),qf(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);qf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);qf(this.left,n.reverse())}}}function qf(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Qq(e){const t={};let n=-1,r,s,a,i,o,u,h;const f=new SEe(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,TEe(f,n)),n=t[n],h=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(i=f.get(a),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(s&&(f.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=a);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;s&&(r[1].end={...f.get(s)[1].start},o=f.slice(s,n),o.unshift(r),f.splice(s,n-s+1,o))}}return Ys(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!h}function TEe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,u=[],h={};let f,m,g=-1,b=n,w=0,x=0;const S=[x];for(;b;){for(;e.get(++s)[1]!==b;);a.push(s),b._tokenizer||(f=r.sliceStream(b),b.next||f.push(null),m&&i.defineSkip(b.start),b._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(f),b._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),m=b,b=b.next}for(b=n;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(x=g+1,S.push(x),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(i.events=[],b?(b._tokenizer=void 0,b.previous=void 0):S.pop(),g=S.length;g--;){const k=o.slice(S[g],S[g+1]),C=a.pop();u.push([C,C+k.length-1]),e.splice(C,2,k)}for(u.reverse(),g=-1;++g<u.length;)h[w+u[g][0]]=w+u[g][1],w+=u[g][1]-u[g][0]-1;return h}const CEe={resolve:jEe,tokenize:NEe},EEe={partial:!0,tokenize:AEe};function jEe(e){return Qq(e),e}function NEe(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?a(o):dt(o)?e.check(EEe,i,a)(o):(e.consume(o),s)}function a(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function i(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function AEe(e,t,n){const r=this;return s;function s(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),zt(e,a,"linePrefix")}function a(i){if(i===null||dt(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function Xq(e,t,n,r,s,a,i,o,u){const h=u||Number.POSITIVE_INFINITY;let f=0;return m;function m(k){return k===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(k),e.exit(a),g):k===null||k===32||k===41||ix(k)?n(k):(e.enter(r),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),x(k))}function g(k){return k===62?(e.enter(a),e.consume(k),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),b(k))}function b(k){return k===62?(e.exit("chunkString"),e.exit(o),g(k)):k===null||k===60||dt(k)?n(k):(e.consume(k),k===92?w:b)}function w(k){return k===60||k===62||k===92?(e.consume(k),b):b(k)}function x(k){return!f&&(k===null||k===41||hn(k))?(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(r),t(k)):f<h&&k===40?(e.consume(k),f++,x):k===41?(e.consume(k),f--,x):k===null||k===32||k===40||ix(k)?n(k):(e.consume(k),k===92?S:x)}function S(k){return k===40||k===41||k===92?(e.consume(k),x):x(k)}}function eV(e,t,n,r,s,a){const i=this;let o=0,u;return h;function h(b){return e.enter(r),e.enter(s),e.consume(b),e.exit(s),e.enter(a),f}function f(b){return o>999||b===null||b===91||b===93&&!u||b===94&&!o&&"_hiddenFootnoteSupport"in i.parser.constructs?n(b):b===93?(e.exit(a),e.enter(s),e.consume(b),e.exit(s),e.exit(r),t):dt(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===null||b===91||b===93||dt(b)||o++>999?(e.exit("chunkString"),f(b)):(e.consume(b),u||(u=!Ot(b)),b===92?g:m)}function g(b){return b===91||b===92||b===93?(e.consume(b),o++,m):m(b)}}function tV(e,t,n,r,s,a){let i;return o;function o(g){return g===34||g===39||g===40?(e.enter(r),e.enter(s),e.consume(g),e.exit(s),i=g===40?41:g,u):n(g)}function u(g){return g===i?(e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):(e.enter(a),h(g))}function h(g){return g===i?(e.exit(a),u(i)):g===null?n(g):dt(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),zt(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===i||g===null||dt(g)?(e.exit("chunkString"),h(g)):(e.consume(g),g===92?m:f)}function m(g){return g===i||g===92?(e.consume(g),f):f(g)}}function Op(e,t){let n;return r;function r(s){return dt(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ot(s)?zt(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const IEe={name:"definition",tokenize:REe},OEe={partial:!0,tokenize:PEe};function REe(e,t,n){const r=this;let s;return a;function a(b){return e.enter("definition"),i(b)}function i(b){return eV.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function o(b){return s=ni(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),u):n(b)}function u(b){return hn(b)?Op(e,h)(b):h(b)}function h(b){return Xq(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function f(b){return e.attempt(OEe,m,m)(b)}function m(b){return Ot(b)?zt(e,g,"whitespace")(b):g(b)}function g(b){return b===null||dt(b)?(e.exit("definition"),r.parser.defined.push(s),t(b)):n(b)}}function PEe(e,t,n){return r;function r(o){return hn(o)?Op(e,s)(o):n(o)}function s(o){return tV(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return Ot(o)?zt(e,i,"whitespace")(o):i(o)}function i(o){return o===null||dt(o)?t(o):n(o)}}const MEe={name:"hardBreakEscape",tokenize:DEe};function DEe(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return dt(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const $Ee={name:"headingAtx",resolve:LEe,tokenize:zEe};function LEe(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ys(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function zEe(e,t,n){let r=0;return s;function s(f){return e.enter("atxHeading"),a(f)}function a(f){return e.enter("atxHeadingSequence"),i(f)}function i(f){return f===35&&r++<6?(e.consume(f),i):f===null||hn(f)?(e.exit("atxHeadingSequence"),o(f)):n(f)}function o(f){return f===35?(e.enter("atxHeadingSequence"),u(f)):f===null||dt(f)?(e.exit("atxHeading"),t(f)):Ot(f)?zt(e,o,"whitespace")(f):(e.enter("atxHeadingText"),h(f))}function u(f){return f===35?(e.consume(f),u):(e.exit("atxHeadingSequence"),o(f))}function h(f){return f===null||f===35||hn(f)?(e.exit("atxHeadingText"),o(f)):(e.consume(f),h)}}const UEe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PL=["pre","script","style","textarea"],FEe={concrete:!0,name:"htmlFlow",resolveTo:qEe,tokenize:VEe},BEe={partial:!0,tokenize:KEe},HEe={partial:!0,tokenize:GEe};function qEe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function VEe(e,t,n){const r=this;let s,a,i,o,u;return h;function h(O){return f(O)}function f(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),m}function m(O){return O===33?(e.consume(O),g):O===47?(e.consume(O),a=!0,x):O===63?(e.consume(O),s=3,r.interrupt?t:$):as(O)?(e.consume(O),i=String.fromCharCode(O),S):n(O)}function g(O){return O===45?(e.consume(O),s=2,b):O===91?(e.consume(O),s=5,o=0,w):as(O)?(e.consume(O),s=4,r.interrupt?t:$):n(O)}function b(O){return O===45?(e.consume(O),r.interrupt?t:$):n(O)}function w(O){const V="CDATA[";return O===V.charCodeAt(o++)?(e.consume(O),o===V.length?r.interrupt?t:ie:w):n(O)}function x(O){return as(O)?(e.consume(O),i=String.fromCharCode(O),S):n(O)}function S(O){if(O===null||O===47||O===62||hn(O)){const V=O===47,he=i.toLowerCase();return!V&&!a&&PL.includes(he)?(s=1,r.interrupt?t(O):ie(O)):UEe.includes(i.toLowerCase())?(s=6,V?(e.consume(O),k):r.interrupt?t(O):ie(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?C(O):T(O))}return O===45||Vr(O)?(e.consume(O),i+=String.fromCharCode(O),S):n(O)}function k(O){return O===62?(e.consume(O),r.interrupt?t:ie):n(O)}function C(O){return Ot(O)?(e.consume(O),C):B(O)}function T(O){return O===47?(e.consume(O),B):O===58||O===95||as(O)?(e.consume(O),P):Ot(O)?(e.consume(O),T):B(O)}function P(O){return O===45||O===46||O===58||O===95||Vr(O)?(e.consume(O),P):D(O)}function D(O){return O===61?(e.consume(O),R):Ot(O)?(e.consume(O),D):T(O)}function R(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),u=O,U):Ot(O)?(e.consume(O),R):j(O)}function U(O){return O===u?(e.consume(O),u=null,se):O===null||dt(O)?n(O):(e.consume(O),U)}function j(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||hn(O)?D(O):(e.consume(O),j)}function se(O){return O===47||O===62||Ot(O)?T(O):n(O)}function B(O){return O===62?(e.consume(O),ee):n(O)}function ee(O){return O===null||dt(O)?ie(O):Ot(O)?(e.consume(O),ee):n(O)}function ie(O){return O===45&&s===2?(e.consume(O),L):O===60&&s===1?(e.consume(O),Z):O===62&&s===4?(e.consume(O),F):O===63&&s===3?(e.consume(O),$):O===93&&s===5?(e.consume(O),de):dt(O)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(BEe,Q,_e)(O)):O===null||dt(O)?(e.exit("htmlFlowData"),_e(O)):(e.consume(O),ie)}function _e(O){return e.check(HEe,G,Q)(O)}function G(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),H}function H(O){return O===null||dt(O)?_e(O):(e.enter("htmlFlowData"),ie(O))}function L(O){return O===45?(e.consume(O),$):ie(O)}function Z(O){return O===47?(e.consume(O),i="",W):ie(O)}function W(O){if(O===62){const V=i.toLowerCase();return PL.includes(V)?(e.consume(O),F):ie(O)}return as(O)&&i.length<8?(e.consume(O),i+=String.fromCharCode(O),W):ie(O)}function de(O){return O===93?(e.consume(O),$):ie(O)}function $(O){return O===62?(e.consume(O),F):O===45&&s===2?(e.consume(O),$):ie(O)}function F(O){return O===null||dt(O)?(e.exit("htmlFlowData"),Q(O)):(e.consume(O),F)}function Q(O){return e.exit("htmlFlow"),t(O)}}function GEe(e,t,n){const r=this;return s;function s(i){return dt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),a):n(i)}function a(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function KEe(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Wm,t,n)}}const ZEe={name:"htmlText",tokenize:WEe};function WEe(e,t,n){const r=this;let s,a,i;return o;function o($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),h):$===47?(e.consume($),D):$===63?(e.consume($),T):as($)?(e.consume($),j):n($)}function h($){return $===45?(e.consume($),f):$===91?(e.consume($),a=0,w):as($)?(e.consume($),C):n($)}function f($){return $===45?(e.consume($),b):n($)}function m($){return $===null?n($):$===45?(e.consume($),g):dt($)?(i=m,Z($)):(e.consume($),m)}function g($){return $===45?(e.consume($),b):m($)}function b($){return $===62?L($):$===45?g($):m($)}function w($){const F="CDATA[";return $===F.charCodeAt(a++)?(e.consume($),a===F.length?x:w):n($)}function x($){return $===null?n($):$===93?(e.consume($),S):dt($)?(i=x,Z($)):(e.consume($),x)}function S($){return $===93?(e.consume($),k):x($)}function k($){return $===62?L($):$===93?(e.consume($),k):x($)}function C($){return $===null||$===62?L($):dt($)?(i=C,Z($)):(e.consume($),C)}function T($){return $===null?n($):$===63?(e.consume($),P):dt($)?(i=T,Z($)):(e.consume($),T)}function P($){return $===62?L($):T($)}function D($){return as($)?(e.consume($),R):n($)}function R($){return $===45||Vr($)?(e.consume($),R):U($)}function U($){return dt($)?(i=U,Z($)):Ot($)?(e.consume($),U):L($)}function j($){return $===45||Vr($)?(e.consume($),j):$===47||$===62||hn($)?se($):n($)}function se($){return $===47?(e.consume($),L):$===58||$===95||as($)?(e.consume($),B):dt($)?(i=se,Z($)):Ot($)?(e.consume($),se):L($)}function B($){return $===45||$===46||$===58||$===95||Vr($)?(e.consume($),B):ee($)}function ee($){return $===61?(e.consume($),ie):dt($)?(i=ee,Z($)):Ot($)?(e.consume($),ee):se($)}function ie($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),s=$,_e):dt($)?(i=ie,Z($)):Ot($)?(e.consume($),ie):(e.consume($),G)}function _e($){return $===s?(e.consume($),s=void 0,H):$===null?n($):dt($)?(i=_e,Z($)):(e.consume($),_e)}function G($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||hn($)?se($):(e.consume($),G)}function H($){return $===47||$===62||hn($)?se($):n($)}function L($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function Z($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),W}function W($){return Ot($)?zt(e,de,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):de($)}function de($){return e.enter("htmlTextData"),i($)}}const LN={name:"labelEnd",resolveAll:XEe,resolveTo:eje,tokenize:tje},JEe={tokenize:nje},YEe={tokenize:rje},QEe={tokenize:sje};function XEe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Ys(e,0,e.length,n),e}function eje(e,t){let n=e.length,r=0,s,a,i,o;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const u={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[a][1].start},end:{...e[i][1].end}},f={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[i-2][1].start}};return o=[["enter",u,t],["enter",h,t]],o=xa(o,e.slice(a+1,a+r+3)),o=xa(o,[["enter",f,t]]),o=xa(o,_v(t.parser.constructs.insideSpan.null,e.slice(a+r+4,i-3),t)),o=xa(o,[["exit",f,t],e[i-2],e[i-1],["exit",h,t]]),o=xa(o,e.slice(i+1)),o=xa(o,[["exit",u,t]]),Ys(e,a,e.length,o),e}function tje(e,t,n){const r=this;let s=r.events.length,a,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return o;function o(g){return a?a._inactive?m(g):(i=r.parser.defined.includes(ni(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),u):n(g)}function u(g){return g===40?e.attempt(JEe,f,i?f:m)(g):g===91?e.attempt(YEe,f,i?h:m)(g):i?f(g):m(g)}function h(g){return e.attempt(QEe,f,m)(g)}function f(g){return t(g)}function m(g){return a._balanced=!0,n(g)}}function nje(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),s}function s(m){return hn(m)?Op(e,a)(m):a(m)}function a(m){return m===41?f(m):Xq(e,i,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function i(m){return hn(m)?Op(e,u)(m):f(m)}function o(m){return n(m)}function u(m){return m===34||m===39||m===40?tV(e,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function h(m){return hn(m)?Op(e,f)(m):f(m)}function f(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function rje(e,t,n){const r=this;return s;function s(o){return eV.call(r,e,a,i,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(ni(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function i(o){return n(o)}}function sje(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const aje={name:"labelStartImage",resolveAll:LN.resolveAll,tokenize:ije};function ije(e,t,n){const r=this;return s;function s(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),a}function a(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),i):n(o)}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const oje={name:"labelStartLink",resolveAll:LN.resolveAll,tokenize:lje};function lje(e,t,n){const r=this;return s;function s(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),a}function a(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const uS={name:"lineEnding",tokenize:cje};function cje(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),zt(e,t,"linePrefix")}}const X0={name:"thematicBreak",tokenize:uje};function uje(e,t,n){let r=0,s;return a;function a(h){return e.enter("thematicBreak"),i(h)}function i(h){return s=h,o(h)}function o(h){return h===s?(e.enter("thematicBreakSequence"),u(h)):r>=3&&(h===null||dt(h))?(e.exit("thematicBreak"),t(h)):n(h)}function u(h){return h===s?(e.consume(h),r++,u):(e.exit("thematicBreakSequence"),Ot(h)?zt(e,o,"whitespace")(h):o(h))}}const ys={continuation:{tokenize:pje},exit:gje,name:"list",tokenize:fje},dje={partial:!0,tokenize:yje},hje={partial:!0,tokenize:mje};function fje(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return o;function o(b){const w=r.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||b===r.containerState.marker:DC(b)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(X0,n,h)(b):h(b);if(!r.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(b)}return n(b)}function u(b){return DC(b)&&++i<10?(e.consume(b),u):(!r.interrupt||i<2)&&(r.containerState.marker?b===r.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),h(b)):n(b)}function h(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||b,e.check(Wm,r.interrupt?n:f,e.attempt(dje,g,m))}function f(b){return r.containerState.initialBlankLine=!0,a++,g(b)}function m(b){return Ot(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),g):n(b)}function g(b){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function pje(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Wm,s,a);function s(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,zt(e,t,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!Ot(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(hje,t,i)(o))}function i(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,zt(e,e.attempt(ys,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function mje(e,t,n){const r=this;return zt(e,s,"listItemIndent",r.containerState.size+1);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(a):n(a)}}function gje(e){e.exit(this.containerState.type)}function yje(e,t,n){const r=this;return zt(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const i=r.events[r.events.length-1];return!Ot(a)&&i&&i[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const ML={name:"setextUnderline",resolveTo:bje,tokenize:xje};function bje(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",i,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function xje(e,t,n){const r=this;let s;return a;function a(h){let f=r.events.length,m;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){m=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),s=h,i(h)):n(h)}function i(h){return e.enter("setextHeadingLineSequence"),o(h)}function o(h){return h===s?(e.consume(h),o):(e.exit("setextHeadingLineSequence"),Ot(h)?zt(e,u,"lineSuffix")(h):u(h))}function u(h){return h===null||dt(h)?(e.exit("setextHeadingLine"),t(h)):n(h)}}const vje={tokenize:wje};function wje(e){const t=this,n=e.attempt(Wm,r,e.attempt(this.parser.constructs.flowInitial,s,zt(e,e.attempt(this.parser.constructs.flow,s,e.attempt(CEe,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const _je={resolveAll:rV()},kje=nV("string"),Sje=nV("text");function nV(e){return{resolveAll:rV(e==="text"?Tje:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,i,o);return i;function i(f){return h(f)?a(f):o(f)}function o(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),u}function u(f){return h(f)?(n.exit("data"),a(f)):(n.consume(f),u)}function h(f){if(f===null)return!0;const m=s[f];let g=-1;if(m)for(;++g<m.length;){const b=m[g];if(!b.previous||b.previous.call(r,r.previous))return!0}return!1}}}function rV(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function Tje(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,i=-1,o=0,u;for(;a--;){const h=s[a];if(typeof h=="string"){for(i=h.length;h.charCodeAt(i-1)===32;)o++,i--;if(i)break;i=-1}else if(h===-2)u=!0,o++;else if(h!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const h={type:n===e.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?i:r.start._bufferIndex+i,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(e.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return e}const Cje={42:ys,43:ys,45:ys,48:ys,49:ys,50:ys,51:ys,52:ys,53:ys,54:ys,55:ys,56:ys,57:ys,62:Wq},Eje={91:IEe},jje={[-2]:cS,[-1]:cS,32:cS},Nje={35:$Ee,42:X0,45:[ML,X0],60:FEe,61:ML,95:X0,96:RL,126:RL},Aje={38:Yq,92:Jq},Ije={[-5]:uS,[-4]:uS,[-3]:uS,33:aje,38:Yq,42:$C,60:[oEe,ZEe],91:oje,92:[MEe,Jq],93:LN,95:$C,96:vEe},Oje={null:[$C,_je]},Rje={null:[42,95]},Pje={null:[]},Mje=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Rje,contentInitial:Eje,disable:Pje,document:Cje,flow:Nje,flowInitial:jje,insideSpan:Oje,string:Aje,text:Ije},Symbol.toStringTag,{value:"Module"}));function Dje(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let i=[],o=[];const u={attempt:U(D),check:U(R),consume:C,enter:T,exit:P,interrupt:U(R,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:w,parser:e,previous:null,sliceSerialize:g,sliceStream:b,write:m};let f=t.tokenize.call(h,u);return t.resolveAll&&a.push(t),h;function m(ee){return i=xa(i,ee),S(),i[i.length-1]!==null?[]:(j(t,0),h.events=_v(a,h.events,h),h.events)}function g(ee,ie){return Lje(b(ee),ie)}function b(ee){return $je(i,ee)}function w(){const{_bufferIndex:ee,_index:ie,line:_e,column:G,offset:H}=r;return{_bufferIndex:ee,_index:ie,line:_e,column:G,offset:H}}function x(ee){s[ee.line]=ee.column,B()}function S(){let ee;for(;r._index<i.length;){const ie=i[r._index];if(typeof ie=="string")for(ee=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ee&&r._bufferIndex<ie.length;)k(ie.charCodeAt(r._bufferIndex));else k(ie)}}function k(ee){f=f(ee)}function C(ee){dt(ee)?(r.line++,r.column=1,r.offset+=ee===-3?2:1,B()):ee!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=ee}function T(ee,ie){const _e=ie||{};return _e.type=ee,_e.start=w(),h.events.push(["enter",_e,h]),o.push(_e),_e}function P(ee){const ie=o.pop();return ie.end=w(),h.events.push(["exit",ie,h]),ie}function D(ee,ie){j(ee,ie.from)}function R(ee,ie){ie.restore()}function U(ee,ie){return _e;function _e(G,H,L){let Z,W,de,$;return Array.isArray(G)?Q(G):"tokenize"in G?Q([G]):F(G);function F(I){return N;function N(ne){const K=ne!==null&&I[ne],re=ne!==null&&I.null,be=[...Array.isArray(K)?K:K?[K]:[],...Array.isArray(re)?re:re?[re]:[]];return Q(be)(ne)}}function Q(I){return Z=I,W=0,I.length===0?L:O(I[W])}function O(I){return N;function N(ne){return $=se(),de=I,I.partial||(h.currentConstruct=I),I.name&&h.parser.constructs.disable.null.includes(I.name)?he():I.tokenize.call(ie?Object.assign(Object.create(h),ie):h,u,V,he)(ne)}}function V(I){return ee(de,$),H}function he(I){return $.restore(),++W<Z.length?O(Z[W]):L}}}function j(ee,ie){ee.resolveAll&&!a.includes(ee)&&a.push(ee),ee.resolve&&Ys(h.events,ie,h.events.length-ie,ee.resolve(h.events.slice(ie),h)),ee.resolveTo&&(h.events=ee.resolveTo(h.events,h))}function se(){const ee=w(),ie=h.previous,_e=h.currentConstruct,G=h.events.length,H=Array.from(o);return{from:G,restore:L};function L(){r=ee,h.previous=ie,h.currentConstruct=_e,h.events.length=G,o=H,B()}}function B(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function $je(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,a)];else{if(i=e.slice(n,s),r>-1){const o=i[0];typeof o=="string"?i[0]=o.slice(r):i.shift()}a>0&&i.push(e[s].slice(0,a))}return i}function Lje(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let i;if(typeof a=="string")i=a;else switch(a){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&s)continue;i=" ";break}default:i=String.fromCharCode(a)}s=a===-2,r.push(i)}return r.join("")}function zje(e){const r={constructs:Kq([Mje,...(e||{}).extensions||[]]),content:s(eEe),defined:[],document:s(nEe),flow:s(vje),lazy:{},string:s(kje),text:s(Sje)};return r;function s(a){return i;function i(o){return Dje(r,a,o)}}}function Uje(e){for(;!Qq(e););return e}const DL=/[\0\t\n\r]/g;function Fje(){let e=1,t="",n=!0,r;return s;function s(a,i,o){const u=[];let h,f,m,g,b;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(i||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(DL.lastIndex=m,h=DL.exec(a),g=h&&h.index!==void 0?h.index:a.length,b=a.charCodeAt(g),!h){t=a.slice(m);break}if(b===10&&m===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),m<g&&(u.push(a.slice(m,g)),e+=g-m),b){case 0:{u.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,u.push(-2);e++<f;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}m=g+1}return o&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Bje=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Hje(e){return e.replace(Bje,qje)}function qje(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Zq(n.slice(a?2:1),a?16:10)}return $N(n)||e}const sV={}.hasOwnProperty;function Vje(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Gje(n)(Uje(zje(n).document().write(Fje()(e,t,!0))))}function Gje(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(en),autolinkProtocol:se,autolinkEmail:se,atxHeading:a(ft),blockQuote:a(re),characterEscape:se,characterReference:se,codeFenced:a(be),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(be,i),codeText:a(z,i),codeTextData:se,data:se,codeFlowValue:se,definition:a(Ne),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(je),hardBreakEscape:a(Fe),hardBreakTrailing:a(Fe),htmlFlow:a(Se,i),htmlFlowData:se,htmlText:a(Se,i),htmlTextData:se,image:a(Xt),label:i,link:a(en),listItem:a(Jr),listItemValue:g,listOrdered:a(Me,m),listUnordered:a(Me),paragraph:a(ut),reference:O,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(ft),strong:a(Ye),thematicBreak:a($e)},exit:{atxHeading:u(),atxHeadingSequence:D,autolink:u(),autolinkEmail:K,autolinkProtocol:ne,blockQuote:u(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:I,characterReference:N,codeFenced:u(S),codeFencedFence:x,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:B,codeIndented:u(k),codeText:u(H),codeTextData:B,data:B,definition:u(),definitionDestinationString:P,definitionLabelString:C,definitionTitleString:T,emphasis:u(),hardBreakEscape:u(ie),hardBreakTrailing:u(ie),htmlFlow:u(_e),htmlFlowData:B,htmlText:u(G),htmlTextData:B,image:u(Z),label:de,labelText:W,lineEnding:ee,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:V,resourceDestinationString:$,resourceTitleString:F,resource:Q,setextHeading:u(j),setextHeadingLineSequence:U,setextHeadingText:R,strong:u(),thematicBreak:u()}};aV(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(te){let Y={type:"root",children:[]};const ye={stack:[Y],tokenStack:[],config:t,enter:o,exit:h,buffer:i,resume:f,data:n},De=[];let Rt=-1;for(;++Rt<te.length;)if(te[Rt][1].type==="listOrdered"||te[Rt][1].type==="listUnordered")if(te[Rt][0]==="enter")De.push(Rt);else{const mr=De.pop();Rt=s(te,mr,Rt)}for(Rt=-1;++Rt<te.length;){const mr=t[te[Rt][0]];sV.call(mr,te[Rt][1].type)&&mr[te[Rt][1].type].call(Object.assign({sliceSerialize:te[Rt][2].sliceSerialize},ye),te[Rt][1])}if(ye.tokenStack.length>0){const mr=ye.tokenStack[ye.tokenStack.length-1];(mr[1]||$L).call(ye,void 0,mr[0])}for(Y.position={start:pl(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:pl(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},Rt=-1;++Rt<t.transforms.length;)Y=t.transforms[Rt](Y)||Y;return Y}function s(te,Y,ye){let De=Y-1,Rt=-1,mr=!1,Sr,Bn,In,Yr;for(;++De<=ye;){const Bt=te[De];switch(Bt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bt[0]==="enter"?Rt++:Rt--,Yr=void 0;break}case"lineEndingBlank":{Bt[0]==="enter"&&(Sr&&!Yr&&!Rt&&!In&&(In=De),Yr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Yr=void 0}if(!Rt&&Bt[0]==="enter"&&Bt[1].type==="listItemPrefix"||Rt===-1&&Bt[0]==="exit"&&(Bt[1].type==="listUnordered"||Bt[1].type==="listOrdered")){if(Sr){let As=De;for(Bn=void 0;As--;){const Oa=te[As];if(Oa[1].type==="lineEnding"||Oa[1].type==="lineEndingBlank"){if(Oa[0]==="exit")continue;Bn&&(te[Bn][1].type="lineEndingBlank",mr=!0),Oa[1].type="lineEnding",Bn=As}else if(!(Oa[1].type==="linePrefix"||Oa[1].type==="blockQuotePrefix"||Oa[1].type==="blockQuotePrefixWhitespace"||Oa[1].type==="blockQuoteMarker"||Oa[1].type==="listItemIndent"))break}In&&(!Bn||In<Bn)&&(Sr._spread=!0),Sr.end=Object.assign({},Bn?te[Bn][1].start:Bt[1].end),te.splice(Bn||De,0,["exit",Sr,Bt[2]]),De++,ye++}if(Bt[1].type==="listItemPrefix"){const As={type:"listItem",_spread:!1,start:Object.assign({},Bt[1].start),end:void 0};Sr=As,te.splice(De,0,["enter",As,Bt[2]]),De++,ye++,In=void 0,Yr=!0}}}return te[Y][1]._spread=mr,ye}function a(te,Y){return ye;function ye(De){o.call(this,te(De),De),Y&&Y.call(this,De)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(te,Y,ye){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([Y,ye||void 0]),te.position={start:pl(Y.start),end:void 0}}function u(te){return Y;function Y(ye){te&&te.call(this,ye),h.call(this,ye)}}function h(te,Y){const ye=this.stack.pop(),De=this.tokenStack.pop();if(De)De[0].type!==te.type&&(Y?Y.call(this,te,De[0]):(De[1]||$L).call(this,te,De[0]));else throw new Error("Cannot close `"+te.type+"` ("+Ip({start:te.start,end:te.end})+"): its not open");ye.position.end=pl(te.end)}function f(){return DN(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(te){if(this.data.expectingFirstListItemValue){const Y=this.stack[this.stack.length-2];Y.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function b(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.lang=te}function w(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.meta=te}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.value=te.replace(/(\r?\n|\r)$/g,"")}function C(te){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.label=Y,ye.identifier=ni(this.sliceSerialize(te)).toLowerCase()}function T(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.title=te}function P(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.url=te}function D(te){const Y=this.stack[this.stack.length-1];if(!Y.depth){const ye=this.sliceSerialize(te).length;Y.depth=ye}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function U(te){const Y=this.stack[this.stack.length-1];Y.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function se(te){const ye=this.stack[this.stack.length-1].children;let De=ye[ye.length-1];(!De||De.type!=="text")&&(De=Je(),De.position={start:pl(te.start),end:void 0},ye.push(De)),this.stack.push(De)}function B(te){const Y=this.stack.pop();Y.value+=this.sliceSerialize(te),Y.position.end=pl(te.end)}function ee(te){const Y=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=Y.children[Y.children.length-1];ye.position.end=pl(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Y.type)&&(se.call(this,te),B.call(this,te))}function ie(){this.data.atHardBreak=!0}function _e(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.value=te}function G(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.value=te}function H(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.value=te}function L(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=Y,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function Z(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=Y,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function W(te){const Y=this.sliceSerialize(te),ye=this.stack[this.stack.length-2];ye.label=Hje(Y),ye.identifier=ni(Y).toLowerCase()}function de(){const te=this.stack[this.stack.length-1],Y=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const De=te.children;ye.children=De}else ye.alt=Y}function $(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.url=te}function F(){const te=this.resume(),Y=this.stack[this.stack.length-1];Y.title=te}function Q(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function V(te){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.label=Y,ye.identifier=ni(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function he(te){this.data.characterReferenceType=te.type}function I(te){const Y=this.sliceSerialize(te),ye=this.data.characterReferenceType;let De;ye?(De=Zq(Y,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):De=$N(Y);const Rt=this.stack[this.stack.length-1];Rt.value+=De}function N(te){const Y=this.stack.pop();Y.position.end=pl(te.end)}function ne(te){B.call(this,te);const Y=this.stack[this.stack.length-1];Y.url=this.sliceSerialize(te)}function K(te){B.call(this,te);const Y=this.stack[this.stack.length-1];Y.url="mailto:"+this.sliceSerialize(te)}function re(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function z(){return{type:"inlineCode",value:""}}function Ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function ft(){return{type:"heading",depth:0,children:[]}}function Fe(){return{type:"break"}}function Se(){return{type:"html",value:""}}function Xt(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function Me(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function Jr(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function Ye(){return{type:"strong",children:[]}}function Je(){return{type:"text",value:""}}function $e(){return{type:"thematicBreak"}}}function pl(e){return{line:e.line,column:e.column,offset:e.offset}}function aV(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?aV(e,r):Kje(e,r)}}function Kje(e,t){let n;for(n in t)if(sV.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function $L(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ip({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ip({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ip({start:t.start,end:t.end})+") is still open")}function Zje(e){const t=this;t.parser=n;function n(r){return Vje(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Wje(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Jje(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Yje(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function Qje(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xje(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eNe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=_h(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let i,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=a+1,o+=1,e.footnoteCounts.set(r,o);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,h),e.applyData(t,h)}function tNe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nNe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function iV(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function rNe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iV(e,t);const s={src:_h(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function sNe(e,t){const n={src:_h(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function aNe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function iNe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iV(e,t);const s={href:_h(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function oNe(e,t){const n={href:_h(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function lNe(e,t,n){const r=e.all(t),s=n?cNe(n):oV(t),a={},i=[];if(typeof t.checked=="boolean"){const f=r[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const f=r[o];(s||o!==0||f.type!=="element"||f.tagName!=="p")&&i.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!s?i.push(...f.children):i.push(f)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:i};return e.patch(t,h),e.applyData(t,h)}function cNe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=oV(n[r])}return t}function oV(e){const t=e.spread;return t??e.children.length>1}function uNe(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function dNe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hNe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function fNe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pNe(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=ON(t.children[1]),u=Uq(t.children[t.children.length-1]);o&&u&&(i.position={start:o,end:u}),s.push(i)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function mNe(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,o=i?i.length:t.children.length;let u=-1;const h=[];for(;++u<o;){const m=t.children[u],g={},b=i?i[u]:void 0;b&&(g.align=b);let w={type:"element",tagName:a,properties:g,children:[]};m&&(w.children=e.all(m),e.patch(m,w),w=e.applyData(m,w)),h.push(w)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,f),e.applyData(t,f)}function gNe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const LL=9,zL=32;function yNe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(UL(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(UL(t.slice(s),s>0,!1)),a.join("")}function UL(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===LL||a===zL;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===LL||a===zL;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function bNe(e,t){const n={type:"text",value:yNe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function xNe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const vNe={blockquote:Wje,break:Jje,code:Yje,delete:Qje,emphasis:Xje,footnoteReference:eNe,heading:tNe,html:nNe,imageReference:rNe,image:sNe,inlineCode:aNe,linkReference:iNe,link:oNe,listItem:lNe,list:uNe,paragraph:dNe,root:hNe,strong:fNe,table:pNe,tableCell:gNe,tableRow:mNe,text:bNe,thematicBreak:xNe,toml:g0,yaml:g0,definition:g0,footnoteDefinition:g0};function g0(){}const lV=-1,kv=0,Rp=1,ox=2,zN=3,UN=4,FN=5,BN=6,cV=7,uV=8,FL=typeof self=="object"?self:globalThis,wNe=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,i]=t[s];switch(a){case kv:case lV:return n(i,s);case Rp:{const o=n([],s);for(const u of i)o.push(r(u));return o}case ox:{const o=n({},s);for(const[u,h]of i)o[r(u)]=r(h);return o}case zN:return n(new Date(i),s);case UN:{const{source:o,flags:u}=i;return n(new RegExp(o,u),s)}case FN:{const o=n(new Map,s);for(const[u,h]of i)o.set(r(u),r(h));return o}case BN:{const o=n(new Set,s);for(const u of i)o.add(r(u));return o}case cV:{const{name:o,message:u}=i;return n(new FL[o](u),s)}case uV:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:o}=new Uint8Array(i);return n(new DataView(o),i)}}return n(new FL[a](i),s)};return r},BL=e=>wNe(new Map,e)(0),Qu="",{toString:_Ne}={},{keys:kNe}=Object,Vf=e=>{const t=typeof e;if(t!=="object"||!e)return[kv,t];const n=_Ne.call(e).slice(8,-1);switch(n){case"Array":return[Rp,Qu];case"Object":return[ox,Qu];case"Date":return[zN,Qu];case"RegExp":return[UN,Qu];case"Map":return[FN,Qu];case"Set":return[BN,Qu];case"DataView":return[Rp,n]}return n.includes("Array")?[Rp,n]:n.includes("Error")?[cV,n]:[ox,n]},y0=([e,t])=>e===kv&&(t==="function"||t==="symbol"),SNe=(e,t,n,r)=>{const s=(i,o)=>{const u=r.push(i)-1;return n.set(o,u),u},a=i=>{if(n.has(i))return n.get(i);let[o,u]=Vf(i);switch(o){case kv:{let f=i;switch(u){case"bigint":o=uV,f=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);f=null;break;case"undefined":return s([lV],i)}return s([o,f],i)}case Rp:{if(u){let g=i;return u==="DataView"?g=new Uint8Array(i.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(i)),s([u,[...g]],i)}const f=[],m=s([o,f],i);for(const g of i)f.push(a(g));return m}case ox:{if(u)switch(u){case"BigInt":return s([u,i.toString()],i);case"Boolean":case"Number":case"String":return s([u,i.valueOf()],i)}if(t&&"toJSON"in i)return a(i.toJSON());const f=[],m=s([o,f],i);for(const g of kNe(i))(e||!y0(Vf(i[g])))&&f.push([a(g),a(i[g])]);return m}case zN:return s([o,i.toISOString()],i);case UN:{const{source:f,flags:m}=i;return s([o,{source:f,flags:m}],i)}case FN:{const f=[],m=s([o,f],i);for(const[g,b]of i)(e||!(y0(Vf(g))||y0(Vf(b))))&&f.push([a(g),a(b)]);return m}case BN:{const f=[],m=s([o,f],i);for(const g of i)(e||!y0(Vf(g)))&&f.push(a(g));return m}}const{message:h}=i;return s([o,{name:u,message:h}],i)};return a},HL=(e,{json:t,lossy:n}={})=>{const r=[];return SNe(!(t||n),!!t,new Map,r)(e),r},lx=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?BL(HL(e,t)):structuredClone(e):(e,t)=>BL(HL(e,t));function TNe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function CNe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function ENe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||TNe,r=e.options.footnoteBackLabel||CNe,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let u=-1;for(;++u<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[u]);if(!h)continue;const f=e.all(h),m=String(h.identifier).toUpperCase(),g=_h(m.toLowerCase());let b=0;const w=[],x=e.footnoteCounts.get(m);for(;x!==void 0&&++b<=x;){w.length>0&&w.push({type:"text",value:" "});let C=typeof n=="string"?n:n(u,b);typeof C=="string"&&(C={type:"text",value:C}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,b),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const C=S.children[S.children.length-1];C&&C.type==="text"?C.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...w)}else f.push(...w);const k={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(h,k),o.push(k)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...lx(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const Sv=(function(e){if(e==null)return INe;if(typeof e=="function")return Tv(e);if(typeof e=="object")return Array.isArray(e)?jNe(e):NNe(e);if(typeof e=="string")return ANe(e);throw new Error("Expected function, string, or object as test")});function jNe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Sv(e[n]);return Tv(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function NNe(e){const t=e;return Tv(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function ANe(e){return Tv(t);function t(n){return n&&n.type===e}}function Tv(e){return t;function t(n,r,s){return!!(ONe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function INe(){return!0}function ONe(e){return e!==null&&typeof e=="object"&&"type"in e}const dV=[],RNe=!0,LC=!1,PNe="skip";function hV(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=Sv(s),i=r?-1:1;o(e,void 0,[])();function o(u,h,f){const m=u&&typeof u=="object"?u:{};if(typeof m.type=="string"){const b=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(b?"<"+b+">":""))+")"})}return g;function g(){let b=dV,w,x,S;if((!t||a(u,h,f[f.length-1]||void 0))&&(b=MNe(n(u,f)),b[0]===LC))return b;if("children"in u&&u.children){const k=u;if(k.children&&b[0]!==PNe)for(x=(r?k.children.length:-1)+i,S=f.concat(k);x>-1&&x<k.children.length;){const C=k.children[x];if(w=o(C,x,S)(),w[0]===LC)return w;x=typeof w[1]=="number"?w[1]:x+i}}return b}}}function MNe(e){return Array.isArray(e)?e:typeof e=="number"?[RNe,e]:e==null?dV:[e]}function HN(e,t,n,r){let s,a,i;typeof t=="function"&&typeof n!="function"?(a=void 0,i=t,s=n):(a=t,i=n,s=r),hV(e,a,o,s);function o(u,h){const f=h[h.length-1],m=f?f.children.indexOf(u):void 0;return i(u,m,f)}}const zC={}.hasOwnProperty,DNe={};function $Ne(e,t){const n=t||DNe,r=new Map,s=new Map,a=new Map,i={...vNe,...n.handlers},o={all:h,applyData:zNe,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:i,one:u,options:n,patch:LNe,wrap:FNe};return HN(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const m=f.type==="definition"?r:s,g=String(f.identifier).toUpperCase();m.has(g)||m.set(g,f)}}),o;function u(f,m){const g=f.type,b=o.handlers[g];if(zC.call(o.handlers,g)&&b)return b(o,f,m);if(o.options.passThrough&&o.options.passThrough.includes(g)){if("children"in f){const{children:x,...S}=f,k=lx(S);return k.children=o.all(f),k}return lx(f)}return(o.options.unknownHandler||UNe)(o,f,m)}function h(f){const m=[];if("children"in f){const g=f.children;let b=-1;for(;++b<g.length;){const w=o.one(g[b],f);if(w){if(b&&g[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=qL(w.value)),!Array.isArray(w)&&w.type==="element")){const x=w.children[0];x&&x.type==="text"&&(x.value=qL(x.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function LNe(e,t){e.position&&(t.position=CCe(e))}function zNe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&a&&Object.assign(n.properties,lx(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function UNe(e,t){const n=t.data||{},r="value"in t&&!(zC.call(n,"hProperties")||zC.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function FNe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qL(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function VL(e,t){const n=$Ne(e,t),r=n.one(e,void 0),s=ENe(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function BNe(e,t){return e&&"run"in e?async function(n,r){const s=VL(n,{file:r,...t});await e.run(s,r)}:function(n,r){return VL(n,{file:r,...e||t})}}function GL(e){if(e)throw e}var dS,KL;function HNe(){if(KL)return dS;KL=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},a=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var f=e.call(h,"constructor"),m=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!f&&!m)return!1;var g;for(g in h);return typeof g>"u"||e.call(h,g)},i=function(h,f){n&&f.name==="__proto__"?n(h,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):h[f.name]=f.newValue},o=function(h,f){if(f==="__proto__")if(e.call(h,f)){if(r)return r(h,f).value}else return;return h[f]};return dS=function u(){var h,f,m,g,b,w,x=arguments[0],S=1,k=arguments.length,C=!1;for(typeof x=="boolean"&&(C=x,x=arguments[1]||{},S=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});S<k;++S)if(h=arguments[S],h!=null)for(f in h)m=o(x,f),g=o(h,f),x!==g&&(C&&g&&(a(g)||(b=s(g)))?(b?(b=!1,w=m&&s(m)?m:[]):w=m&&a(m)?m:{},i(x,{name:f,newValue:u(C,w,g)})):typeof g<"u"&&i(x,{name:f,newValue:g}));return x},dS}var qNe=HNe();const hS=Kd(qNe);function UC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function VNe(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);o(null,...s);function o(u,...h){const f=e[++a];let m=-1;if(u){i(u);return}for(;++m<s.length;)(h[m]===null||h[m]===void 0)&&(h[m]=s[m]);s=h,f?GNe(f,o)(...h):i(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function GNe(e,t){let n;return r;function r(...i){const o=e.length>i.length;let u;o&&i.push(s);try{u=e.apply(this,i)}catch(h){const f=h;if(o&&n)throw f;return s(f)}o||(u&&u.then&&typeof u.then=="function"?u.then(a,s):u instanceof Error?s(u):a(u))}function s(i,...o){n||(n=!0,t(i,...o))}function a(i){s(null,i)}}const Ti={basename:KNe,dirname:ZNe,extname:WNe,join:JNe,sep:"/"};function KNe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Jm(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,o=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else i<0&&(a=!0,i=s+1),o>-1&&(e.codePointAt(s)===t.codePointAt(o--)?o<0&&(r=s):(o=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function ZNe(e){if(Jm(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function WNe(e){Jm(e);let t=e.length,n=-1,r=0,s=-1,a=0,i;for(;t--;){const o=e.codePointAt(t);if(o===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),o===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function JNe(...e){let t=-1,n;for(;++t<e.length;)Jm(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":YNe(n)}function YNe(e){Jm(e);const t=e.codePointAt(0)===47;let n=QNe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function QNe(e,t){let n="",r=0,s=-1,a=0,i=-1,o,u;for(;++i<=e.length;){if(i<e.length)o=e.codePointAt(i);else{if(o===47)break;o=47}if(o===47){if(!(s===i-1||a===1))if(s!==i-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=i,a=0;continue}}else if(n.length>0){n="",r=0,s=i,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,i):n=e.slice(s+1,i),r=i-s-1;s=i,a=0}else o===46&&a>-1?a++:a=-1}return n}function Jm(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const XNe={cwd:eAe};function eAe(){return"/"}function FC(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function tAe(e){if(typeof e=="string")e=new URL(e);else if(!FC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return nAe(e)}function nAe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const fS=["history","path","basename","stem","extname","dirname"];class fV{constructor(t){let n;t?FC(t)?n={path:t}:typeof t=="string"||rAe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":XNe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<fS.length;){const a=fS[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)fS.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Ti.basename(this.path):void 0}set basename(t){mS(t,"basename"),pS(t,"basename"),this.path=Ti.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ti.dirname(this.path):void 0}set dirname(t){ZL(this.basename,"dirname"),this.path=Ti.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ti.extname(this.path):void 0}set extname(t){if(pS(t,"extname"),ZL(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ti.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){FC(t)&&(t=tAe(t)),mS(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ti.basename(this.path,this.extname):void 0}set stem(t){mS(t,"stem"),pS(t,"stem"),this.path=Ti.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Wr(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function pS(e,t){if(e&&e.includes(Ti.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ti.sep+"`")}function mS(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ZL(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function rAe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const sAe=(function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),aAe={}.hasOwnProperty;class qN extends sAe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=VNe()}copy(){const t=new qN;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(hS(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(bS("data",this.frozen),this.namespace[t]=n,this):aAe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(bS("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=b0(t),r=this.parser||this.Parser;return gS("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gS("process",this.parser||this.Parser),yS("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,i){const o=b0(t),u=r.parse(o);r.run(u,o,function(f,m,g){if(f||!m||!g)return h(f);const b=m,w=r.stringify(b,g);lAe(w)?g.value=w:g.result=w,h(f,g)});function h(f,m){f||!m?i(f):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),gS("processSync",this.parser||this.Parser),yS("processSync",this.compiler||this.Compiler),this.process(t,s),JL("processSync","process",n),r;function s(a,i){n=!0,GL(a),r=i}}run(t,n,r){WL(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(i,o){const u=b0(n);s.run(t,u,h);function h(f,m,g){const b=m||t;f?o(f):i?i(b):r(void 0,b,g)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),JL("runSync","run",r),s;function a(i,o){GL(i),s=o,r=!0}}stringify(t,n){this.freeze();const r=b0(n),s=this.compiler||this.Compiler;return yS("stringify",s),WL(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(bS("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[f,...m]=h;u(f,m)}else i(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function i(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(h.plugins),h.settings&&(s.settings=hS(!0,s.settings,h.settings))}function o(h){let f=-1;if(h!=null)if(Array.isArray(h))for(;++f<h.length;){const m=h[f];a(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,f){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===h){g=m;break}if(g===-1)r.push([h,...f]);else if(f.length>0){let[b,...w]=f;const x=r[g][1];UC(x)&&UC(b)&&(b=hS(!0,x,b)),r[g]=[h,b,...w]}}}}const iAe=new qN().freeze();function gS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function bS(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function WL(e){if(!UC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function JL(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function b0(e){return oAe(e)?e:new fV(e)}function oAe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function lAe(e){return typeof e=="string"||cAe(e)}function cAe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const uAe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",YL=[],QL={allowDangerousHtml:!0},dAe=/^(https?|ircs?|mailto|xmpp)$/i,hAe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function XL(e){const t=fAe(e),n=pAe(e);return mAe(t.runSync(t.parse(n),n),e)}function fAe(e){const t=e.rehypePlugins||YL,n=e.remarkPlugins||YL,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...QL}:QL;return iAe().use(Zje).use(n).use(BNe,r).use(t)}function pAe(e){const t=e.children||"",n=new fV;return typeof t=="string"&&(n.value=t),n}function mAe(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,u=t.urlTransform||gAe;for(const f of hAe)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+uAe+f.id,void 0);return HN(e,h),ICe(e,{Fragment:c.Fragment,components:s,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function h(f,m,g){if(f.type==="raw"&&g&&typeof m=="number")return i?g.children.splice(m,1):g.children[m]={type:"text",value:f.value},m;if(f.type==="element"){let b;for(b in lS)if(Object.hasOwn(lS,b)&&Object.hasOwn(f.properties,b)){const w=f.properties[b],x=lS[b];(x===null||x.includes(f.tagName))&&(f.properties[b]=u(String(w||""),b,f))}}if(f.type==="element"){let b=n?!n.includes(f.tagName):a?a.includes(f.tagName):!1;if(!b&&r&&typeof m=="number"&&(b=!r(f,m,g)),b&&g&&typeof m=="number")return o&&f.children?g.children.splice(m,1,...f.children):g.children.splice(m,1),m}}}function gAe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||dAe.test(e.slice(0,t))?e:""}function e5(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function yAe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function bAe(e,t,n){const s=Sv((n||{}).ignore||[]),a=xAe(t);let i=-1;for(;++i<a.length;)hV(e,"text",o);function o(h,f){let m=-1,g;for(;++m<f.length;){const b=f[m],w=g?g.children:void 0;if(s(b,w?w.indexOf(b):void 0,g))return;g=b}if(g)return u(h,f)}function u(h,f){const m=f[f.length-1],g=a[i][0],b=a[i][1];let w=0;const S=m.children.indexOf(h);let k=!1,C=[];g.lastIndex=0;let T=g.exec(h.value);for(;T;){const P=T.index,D={index:T.index,input:T.input,stack:[...f,h]};let R=b(...T,D);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?g.lastIndex=P+1:(w!==P&&C.push({type:"text",value:h.value.slice(w,P)}),Array.isArray(R)?C.push(...R):R&&C.push(R),w=P+T[0].length,k=!0),!g.global)break;T=g.exec(h.value)}return k?(w<h.value.length&&C.push({type:"text",value:h.value.slice(w)}),m.children.splice(S,1,...C)):C=[h],S+C.length}}function xAe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([vAe(s[0]),wAe(s[1])])}return t}function vAe(e){return typeof e=="string"?new RegExp(yAe(e),"g"):e}function wAe(e){return typeof e=="function"?e:function(){return e}}const xS="phrasing",vS=["autolink","link","image","label"];function _Ae(){return{transforms:[NAe],enter:{literalAutolink:SAe,literalAutolinkEmail:wS,literalAutolinkHttp:wS,literalAutolinkWww:wS},exit:{literalAutolink:jAe,literalAutolinkEmail:EAe,literalAutolinkHttp:TAe,literalAutolinkWww:CAe}}}function kAe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xS,notInConstruct:vS},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xS,notInConstruct:vS},{character:":",before:"[ps]",after:"\\/",inConstruct:xS,notInConstruct:vS}]}}function SAe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function wS(e){this.config.enter.autolinkProtocol.call(this,e)}function TAe(e){this.config.exit.autolinkProtocol.call(this,e)}function CAe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function EAe(e){this.config.exit.autolinkEmail.call(this,e)}function jAe(e){this.exit(e)}function NAe(e){bAe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,AAe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),IAe]],{ignore:["link","linkReference"]})}function AAe(e,t,n,r,s){let a="";if(!pV(s)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!OAe(n)))return!1;const i=RAe(n+r);if(!i[0])return!1;const o={type:"link",title:null,url:a+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[o,{type:"text",value:i[1]}]:o}function IAe(e,t,n,r){return!pV(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function OAe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function RAe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=e5(e,"(");let a=e5(e,")");for(;r!==-1&&s>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function pV(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Yc(n)||wv(n))&&(!t||n!==47)}mV.peek=BAe;function PAe(){this.buffer()}function MAe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function DAe(){this.buffer()}function $Ae(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function LAe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ni(this.sliceSerialize(e)).toLowerCase(),n.label=t}function zAe(e){this.exit(e)}function UAe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ni(this.sliceSerialize(e)).toLowerCase(),n.label=t}function FAe(e){this.exit(e)}function BAe(){return"["}function mV(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const i=n.enter("footnoteReference"),o=n.enter("reference");return a+=s.move(n.safe(n.associationId(e),{after:"]",before:a})),o(),i(),a+=s.move("]"),a}function HAe(){return{enter:{gfmFootnoteCallString:PAe,gfmFootnoteCall:MAe,gfmFootnoteDefinitionLabelString:DAe,gfmFootnoteDefinition:$Ae},exit:{gfmFootnoteCallString:LAe,gfmFootnoteCall:zAe,gfmFootnoteDefinitionLabelString:UAe,gfmFootnoteDefinition:FAe}}}function qAe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:mV},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,i){const o=a.createTracker(i);let u=o.move("[^");const h=a.enter("footnoteDefinition"),f=a.enter("label");return u+=o.move(a.safe(a.associationId(r),{before:u,after:"]"})),f(),u+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),u+=o.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,o.current()),t?gV:VAe))),h(),u}}function VAe(e,t,n){return t===0?e:gV(e,t,n)}function gV(e,t,n){return(n?"":"    ")+e}const GAe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];yV.peek=YAe;function KAe(){return{canContainEols:["delete"],enter:{strikethrough:WAe},exit:{strikethrough:JAe}}}function ZAe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GAe}],handlers:{delete:yV}}}function WAe(e){this.enter({type:"delete",children:[]},e)}function JAe(e){this.exit(e)}function yV(e,t,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(e,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),a(),i}function YAe(){return"~"}function QAe(e){return e.length}function XAe(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||QAe,a=[],i=[],o=[],u=[];let h=0,f=-1;for(;++f<e.length;){const x=[],S=[];let k=-1;for(e[f].length>h&&(h=e[f].length);++k<e[f].length;){const C=e2e(e[f][k]);if(n.alignDelimiters!==!1){const T=s(C);S[k]=T,(u[k]===void 0||T>u[k])&&(u[k]=T)}x.push(C)}i[f]=x,o[f]=S}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<h;)a[m]=t5(r[m]);else{const x=t5(r);for(;++m<h;)a[m]=x}m=-1;const g=[],b=[];for(;++m<h;){const x=a[m];let S="",k="";x===99?(S=":",k=":"):x===108?S=":":x===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,u[m]-S.length-k.length);const T=S+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=S.length+C+k.length,C>u[m]&&(u[m]=C),b[m]=C),g[m]=T}i.splice(1,0,g),o.splice(1,0,b),f=-1;const w=[];for(;++f<i.length;){const x=i[f],S=o[f];m=-1;const k=[];for(;++m<h;){const C=x[m]||"";let T="",P="";if(n.alignDelimiters!==!1){const D=u[m]-(S[m]||0),R=a[m];R===114?T=" ".repeat(D):R===99?D%2?(T=" ".repeat(D/2+.5),P=" ".repeat(D/2-.5)):(T=" ".repeat(D/2),P=T):P=" ".repeat(D)}n.delimiterStart!==!1&&!m&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&k.push(" "),n.alignDelimiters!==!1&&k.push(T),k.push(C),n.alignDelimiters!==!1&&k.push(P),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||m!==h-1)&&k.push("|")}w.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return w.join(`
`)}function e2e(e){return e==null?"":String(e)}function t5(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function t2e(e,t,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const i=n.indentLines(n.containerFlow(e,a.current()),n2e);return s(),i}function n2e(e,t,n){return">"+(n?"":" ")+e}function r2e(e,t){return n5(e,t.inConstruct,!0)&&!n5(e,t.notInConstruct,!1)}function n5(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function r5(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&r2e(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function s2e(e,t){const n=String(e);let r=n.indexOf(t),s=r,a=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>i&&(i=a):a=1,s=r+t.length,r=n.indexOf(t,s);return i}function a2e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function i2e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function o2e(e,t,n,r){const s=i2e(n),a=e.value||"",i=s==="`"?"GraveAccent":"Tilde";if(a2e(e,n)){const m=n.enter("codeIndented"),g=n.indentLines(a,l2e);return m(),g}const o=n.createTracker(r),u=s.repeat(Math.max(s2e(a,s)+1,3)),h=n.enter("codeFenced");let f=o.move(u);if(e.lang){const m=n.enter(`codeFencedLang${i}`);f+=o.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...o.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${i}`);f+=o.move(" "),f+=o.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...o.current()})),m()}return f+=o.move(`
`),a&&(f+=o.move(a+`
`)),f+=o.move(u),h(),f}function l2e(e,t,n){return(n?"":"    ")+e}function VN(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function c2e(e,t,n,r){const s=VN(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("definition");let o=n.enter("label");const u=n.createTracker(r);let h=u.move("[");return h+=u.move(n.safe(n.associationId(e),{before:h,after:"]",...u.current()})),h+=u.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(e.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(o=n.enter("destinationRaw"),h+=u.move(n.safe(e.url,{before:h,after:e.title?" ":`
`,...u.current()}))),o(),e.title&&(o=n.enter(`title${a}`),h+=u.move(" "+s),h+=u.move(n.safe(e.title,{before:h,after:s,...u.current()})),h+=u.move(s),o()),i(),h}function u2e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function hm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function cx(e,t,n){const r=Gd(e),s=Gd(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}bV.peek=d2e;function bV(e,t,n,r){const s=u2e(n),a=n.enter("emphasis"),i=n.createTracker(r),o=i.move(s);let u=i.move(n.containerPhrasing(e,{after:s,before:o,...i.current()}));const h=u.charCodeAt(0),f=cx(r.before.charCodeAt(r.before.length-1),h,s);f.inside&&(u=hm(h)+u.slice(1));const m=u.charCodeAt(u.length-1),g=cx(r.after.charCodeAt(0),m,s);g.inside&&(u=u.slice(0,-1)+hm(m));const b=i.move(s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},o+u+b}function d2e(e,t,n){return n.options.emphasis||"*"}function h2e(e,t){let n=!1;return HN(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,LC}),!!((!e.depth||e.depth<3)&&DN(e)&&(t.options.setext||n))}function f2e(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(h2e(e,n)){const f=n.enter("headingSetext"),m=n.enter("phrasing"),g=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return m(),f(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const i="#".repeat(s),o=n.enter("headingAtx"),u=n.enter("phrasing");a.move(i+" ");let h=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=hm(h.charCodeAt(0))+h.slice(1)),h=h?i+" "+h:i,n.options.closeAtx&&(h+=" "+i),u(),o(),h}xV.peek=p2e;function xV(e){return e.value||""}function p2e(){return"<"}vV.peek=m2e;function vV(e,t,n,r){const s=VN(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("image");let o=n.enter("label");const u=n.createTracker(r);let h=u.move("![");return h+=u.move(n.safe(e.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(e.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(o=n.enter("destinationRaw"),h+=u.move(n.safe(e.url,{before:h,after:e.title?" ":")",...u.current()}))),o(),e.title&&(o=n.enter(`title${a}`),h+=u.move(" "+s),h+=u.move(n.safe(e.title,{before:h,after:s,...u.current()})),h+=u.move(s),o()),h+=u.move(")"),i(),h}function m2e(){return"!"}wV.peek=g2e;function wV(e,t,n,r){const s=e.referenceType,a=n.enter("imageReference");let i=n.enter("label");const o=n.createTracker(r);let u=o.move("![");const h=n.safe(e.alt,{before:u,after:"]",...o.current()});u+=o.move(h+"]["),i();const f=n.stack;n.stack=[],i=n.enter("reference");const m=n.safe(n.associationId(e),{before:u,after:"]",...o.current()});return i(),n.stack=f,a(),s==="full"||!h||h!==m?u+=o.move(m+"]"):s==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function g2e(){return"!"}_V.peek=y2e;function _V(e,t,n){let r=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const i=n.unsafe[a],o=n.compilePattern(i);let u;if(i.atBreak)for(;u=o.exec(r);){let h=u.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(u.index+1)}}return s+r+s}function y2e(){return"`"}function kV(e,t){const n=DN(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}SV.peek=b2e;function SV(e,t,n,r){const s=VN(n),a=s==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let o,u;if(kV(e,n)){const f=n.stack;n.stack=[],o=n.enter("autolink");let m=i.move("<");return m+=i.move(n.containerPhrasing(e,{before:m,after:">",...i.current()})),m+=i.move(">"),o(),n.stack=f,m}o=n.enter("link"),u=n.enter("label");let h=i.move("[");return h+=i.move(n.containerPhrasing(e,{before:h,after:"](",...i.current()})),h+=i.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),h+=i.move("<"),h+=i.move(n.safe(e.url,{before:h,after:">",...i.current()})),h+=i.move(">")):(u=n.enter("destinationRaw"),h+=i.move(n.safe(e.url,{before:h,after:e.title?" ":")",...i.current()}))),u(),e.title&&(u=n.enter(`title${a}`),h+=i.move(" "+s),h+=i.move(n.safe(e.title,{before:h,after:s,...i.current()})),h+=i.move(s),u()),h+=i.move(")"),o(),h}function b2e(e,t,n){return kV(e,n)?"<":"["}TV.peek=x2e;function TV(e,t,n,r){const s=e.referenceType,a=n.enter("linkReference");let i=n.enter("label");const o=n.createTracker(r);let u=o.move("[");const h=n.containerPhrasing(e,{before:u,after:"]",...o.current()});u+=o.move(h+"]["),i();const f=n.stack;n.stack=[],i=n.enter("reference");const m=n.safe(n.associationId(e),{before:u,after:"]",...o.current()});return i(),n.stack=f,a(),s==="full"||!h||h!==m?u+=o.move(m+"]"):s==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function x2e(){return"["}function GN(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function v2e(e){const t=GN(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function w2e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function CV(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function _2e(e,t,n,r){const s=n.enter("list"),a=n.bulletCurrent;let i=e.ordered?w2e(n):GN(n);const o=e.ordered?i==="."?")":".":v2e(n);let u=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),CV(n)===i&&f){let m=-1;for(;++m<e.children.length;){const g=e.children[m];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(i=o),n.bulletCurrent=i;const h=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=a,s(),h}function k2e(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function S2e(e,t,n,r){const s=k2e(n);let a=n.bulletCurrent||GN(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let i=a.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const o=n.createTracker(r);o.move(a+" ".repeat(i-a.length)),o.shift(i);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(e,o.current()),f);return u(),h;function f(m,g,b){return g?(b?"":" ".repeat(i))+m:(b?a:a+" ".repeat(i-a.length))+m}}function T2e(e,t,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),i=n.containerPhrasing(e,r);return a(),s(),i}const C2e=Sv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function E2e(e,t,n,r){return(e.children.some(function(i){return C2e(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function j2e(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}EV.peek=N2e;function EV(e,t,n,r){const s=j2e(n),a=n.enter("strong"),i=n.createTracker(r),o=i.move(s+s);let u=i.move(n.containerPhrasing(e,{after:s,before:o,...i.current()}));const h=u.charCodeAt(0),f=cx(r.before.charCodeAt(r.before.length-1),h,s);f.inside&&(u=hm(h)+u.slice(1));const m=u.charCodeAt(u.length-1),g=cx(r.after.charCodeAt(0),m,s);g.inside&&(u=u.slice(0,-1)+hm(m));const b=i.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},o+u+b}function N2e(e,t,n){return n.options.strong||"*"}function A2e(e,t,n,r){return n.safe(e.value,r)}function I2e(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function O2e(e,t,n){const r=(CV(n)+(n.options.ruleSpaces?" ":"")).repeat(I2e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const jV={blockquote:t2e,break:r5,code:o2e,definition:c2e,emphasis:bV,hardBreak:r5,heading:f2e,html:xV,image:vV,imageReference:wV,inlineCode:_V,link:SV,linkReference:TV,list:_2e,listItem:S2e,paragraph:T2e,root:E2e,strong:EV,text:A2e,thematicBreak:O2e};function R2e(){return{enter:{table:P2e,tableData:s5,tableHeader:s5,tableRow:D2e},exit:{codeText:$2e,table:M2e,tableData:_S,tableHeader:_S,tableRow:_S}}}function P2e(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function M2e(e){this.exit(e),this.data.inTable=void 0}function D2e(e){this.enter({type:"tableRow",children:[]},e)}function _S(e){this.exit(e)}function s5(e){this.enter({type:"tableCell",children:[]},e)}function $2e(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,L2e));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function L2e(e,t){return t==="|"?t:e}function z2e(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:i,tableCell:u,tableRow:o}};function i(b,w,x,S){return h(f(b,x,S),b.align)}function o(b,w,x,S){const k=m(b,x,S),C=h([k]);return C.slice(0,C.indexOf(`
`))}function u(b,w,x,S){const k=x.enter("tableCell"),C=x.enter("phrasing"),T=x.containerPhrasing(b,{...S,before:a,after:a});return C(),k(),T}function h(b,w){return XAe(b,{align:w,alignDelimiters:r,padding:n,stringLength:s})}function f(b,w,x){const S=b.children;let k=-1;const C=[],T=w.enter("table");for(;++k<S.length;)C[k]=m(S[k],w,x);return T(),C}function m(b,w,x){const S=b.children;let k=-1;const C=[],T=w.enter("tableRow");for(;++k<S.length;)C[k]=u(S[k],b,w,x);return T(),C}function g(b,w,x){let S=jV.inlineCode(b,w,x);return x.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function U2e(){return{exit:{taskListCheckValueChecked:a5,taskListCheckValueUnchecked:a5,paragraph:B2e}}}function F2e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:H2e}}}function a5(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function B2e(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let a=-1,i;for(;++a<s.length;){const o=s[a];if(o.type==="paragraph"){i=o;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function H2e(e,t,n,r){const s=e.children[0],a=typeof e.checked=="boolean"&&s&&s.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);a&&o.move(i);let u=jV.listItem(e,t,n,{...r,...o.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(f){return f+i}}function q2e(){return[_Ae(),HAe(),KAe(),R2e(),U2e()]}function V2e(e){return{extensions:[kAe(),qAe(e),ZAe(),z2e(e),F2e()]}}const G2e={tokenize:Q2e,partial:!0},NV={tokenize:X2e,partial:!0},AV={tokenize:eIe,partial:!0},IV={tokenize:tIe,partial:!0},K2e={tokenize:nIe,partial:!0},OV={name:"wwwAutolink",tokenize:J2e,previous:PV},RV={name:"protocolAutolink",tokenize:Y2e,previous:MV},Po={name:"emailAutolink",tokenize:W2e,previous:DV},Hi={};function Z2e(){return{text:Hi}}let pc=48;for(;pc<123;)Hi[pc]=Po,pc++,pc===58?pc=65:pc===91&&(pc=97);Hi[43]=Po;Hi[45]=Po;Hi[46]=Po;Hi[95]=Po;Hi[72]=[Po,RV];Hi[104]=[Po,RV];Hi[87]=[Po,OV];Hi[119]=[Po,OV];function W2e(e,t,n){const r=this;let s,a;return i;function i(m){return!BC(m)||!DV.call(r,r.previous)||KN(r.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(m))}function o(m){return BC(m)?(e.consume(m),o):m===64?(e.consume(m),u):n(m)}function u(m){return m===46?e.check(K2e,f,h)(m):m===45||m===95||Vr(m)?(a=!0,e.consume(m),u):f(m)}function h(m){return e.consume(m),s=!0,u}function f(m){return a&&s&&as(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function J2e(e,t,n){const r=this;return s;function s(i){return i!==87&&i!==119||!PV.call(r,r.previous)||KN(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(G2e,e.attempt(NV,e.attempt(AV,a),n),n)(i))}function a(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function Y2e(e,t,n){const r=this;let s="",a=!1;return i;function i(m){return(m===72||m===104)&&MV.call(r,r.previous)&&!KN(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(m),e.consume(m),o):n(m)}function o(m){if(as(m)&&s.length<5)return s+=String.fromCodePoint(m),e.consume(m),o;if(m===58){const g=s.toLowerCase();if(g==="http"||g==="https")return e.consume(m),u}return n(m)}function u(m){return m===47?(e.consume(m),a?h:(a=!0,u)):n(m)}function h(m){return m===null||ix(m)||hn(m)||Yc(m)||wv(m)?n(m):e.attempt(NV,e.attempt(AV,f),n)(m)}function f(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function Q2e(e,t,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),s):i===46&&r===3?(e.consume(i),a):n(i)}function a(i){return i===null?n(i):t(i)}}function X2e(e,t,n){let r,s,a;return i;function i(h){return h===46||h===95?e.check(IV,u,o)(h):h===null||hn(h)||Yc(h)||h!==45&&wv(h)?u(h):(a=!0,e.consume(h),i)}function o(h){return h===95?r=!0:(s=r,r=void 0),e.consume(h),i}function u(h){return s||r||!a?n(h):t(h)}}function eIe(e,t){let n=0,r=0;return s;function s(i){return i===40?(n++,e.consume(i),s):i===41&&r<n?a(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(IV,t,a)(i):i===null||hn(i)||Yc(i)?t(i):(e.consume(i),s)}function a(i){return i===41&&r++,e.consume(i),s}}function tIe(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),a):o===93?(e.consume(o),s):o===60||o===null||hn(o)||Yc(o)?t(o):n(o)}function s(o){return o===null||o===40||o===91||hn(o)||Yc(o)?t(o):r(o)}function a(o){return as(o)?i(o):n(o)}function i(o){return o===59?(e.consume(o),r):as(o)?(e.consume(o),i):n(o)}}function nIe(e,t,n){return r;function r(a){return e.consume(a),s}function s(a){return Vr(a)?n(a):t(a)}}function PV(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||hn(e)}function MV(e){return!as(e)}function DV(e){return!(e===47||BC(e))}function BC(e){return e===43||e===45||e===46||e===95||Vr(e)}function KN(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const rIe={tokenize:dIe,partial:!0};function sIe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:lIe,continuation:{tokenize:cIe},exit:uIe}},text:{91:{name:"gfmFootnoteCall",tokenize:oIe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:aIe,resolveTo:iIe}}}}function aIe(e,t,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const u=r.events[s][1];if(u.type==="labelImage"){i=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return o;function o(u){if(!i||!i._balanced)return n(u);const h=ni(r.sliceSerialize({start:i.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function iIe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function oIe(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,i;return o;function o(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),u}function u(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(m){if(a>999||m===93&&!i||m===null||m===91||hn(m))return n(m);if(m===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return s.includes(ni(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return hn(m)||(i=!0),a++,e.consume(m),m===92?f:h}function f(m){return m===91||m===92||m===93?(e.consume(m),a++,h):h(m)}}function lIe(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0,o;return u;function u(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(w)}function f(w){if(i>999||w===93&&!o||w===null||w===91||hn(w))return n(w);if(w===93){e.exit("chunkString");const x=e.exit("gfmFootnoteDefinitionLabelString");return a=ni(r.sliceSerialize(x)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return hn(w)||(o=!0),i++,e.consume(w),w===92?m:f}function m(w){return w===91||w===92||w===93?(e.consume(w),i++,f):f(w)}function g(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),s.includes(a)||s.push(a),zt(e,b,"gfmFootnoteDefinitionWhitespace")):n(w)}function b(w){return t(w)}}function cIe(e,t,n){return e.check(Wm,t,e.attempt(rIe,t,n))}function uIe(e){e.exit("gfmFootnoteDefinition")}function dIe(e,t,n){const r=this;return zt(e,s,"gfmFootnoteDefinitionIndent",5);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(a):n(a)}}function hIe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,o){let u=-1;for(;++u<i.length;)if(i[u][0]==="enter"&&i[u][1].type==="strikethroughSequenceTemporary"&&i[u][1]._close){let h=u;for(;h--;)if(i[h][0]==="exit"&&i[h][1].type==="strikethroughSequenceTemporary"&&i[h][1]._open&&i[u][1].end.offset-i[u][1].start.offset===i[h][1].end.offset-i[h][1].start.offset){i[u][1].type="strikethroughSequence",i[h][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},i[h][1].start),end:Object.assign({},i[u][1].end)},m={type:"strikethroughText",start:Object.assign({},i[h][1].end),end:Object.assign({},i[u][1].start)},g=[["enter",f,o],["enter",i[h][1],o],["exit",i[h][1],o],["enter",m,o]],b=o.parser.constructs.insideSpan.null;b&&Ys(g,g.length,0,_v(b,i.slice(h+1,u),o)),Ys(g,g.length,0,[["exit",m,o],["enter",i[u][1],o],["exit",i[u][1],o],["exit",f,o]]),Ys(i,h-1,u-h+3,g),u=h+g.length-2;break}}for(u=-1;++u<i.length;)i[u][1].type==="strikethroughSequenceTemporary"&&(i[u][1].type="data");return i}function a(i,o,u){const h=this.previous,f=this.events;let m=0;return g;function g(w){return h===126&&f[f.length-1][1].type!=="characterEscape"?u(w):(i.enter("strikethroughSequenceTemporary"),b(w))}function b(w){const x=Gd(h);if(w===126)return m>1?u(w):(i.consume(w),m++,b);if(m<2&&!n)return u(w);const S=i.exit("strikethroughSequenceTemporary"),k=Gd(w);return S._open=!k||k===2&&!!x,S._close=!x||x===2&&!!k,o(w)}}}class fIe{constructor(){this.map=[]}add(t,n,r){pIe(this,t,n,r)}consume(t){if(this.map.sort(function(a,i){return a[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const a of s)t.push(a);s=r.pop()}this.map.length=0}}function pIe(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function mIe(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function gIe(){return{flow:{null:{name:"table",tokenize:yIe,resolveAll:bIe}}}}function yIe(e,t,n){const r=this;let s=0,a=0,i;return o;function o(B){let ee=r.events.length-1;for(;ee>-1;){const G=r.events[ee][1].type;if(G==="lineEnding"||G==="linePrefix")ee--;else break}const ie=ee>-1?r.events[ee][1].type:null,_e=ie==="tableHead"||ie==="tableRow"?R:u;return _e===R&&r.parser.lazy[r.now().line]?n(B):_e(B)}function u(B){return e.enter("tableHead"),e.enter("tableRow"),h(B)}function h(B){return B===124||(i=!0,a+=1),f(B)}function f(B){return B===null?n(B):dt(B)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),b):n(B):Ot(B)?zt(e,f,"whitespace")(B):(a+=1,i&&(i=!1,s+=1),B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),i=!0,f):(e.enter("data"),m(B)))}function m(B){return B===null||B===124||hn(B)?(e.exit("data"),f(B)):(e.consume(B),B===92?g:m)}function g(B){return B===92||B===124?(e.consume(B),m):m(B)}function b(B){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(B):(e.enter("tableDelimiterRow"),i=!1,Ot(B)?zt(e,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):w(B))}function w(B){return B===45||B===58?S(B):B===124?(i=!0,e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),x):D(B)}function x(B){return Ot(B)?zt(e,S,"whitespace")(B):S(B)}function S(B){return B===58?(a+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),k):B===45?(a+=1,k(B)):B===null||dt(B)?P(B):D(B)}function k(B){return B===45?(e.enter("tableDelimiterFiller"),C(B)):D(B)}function C(B){return B===45?(e.consume(B),C):B===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T(B))}function T(B){return Ot(B)?zt(e,P,"whitespace")(B):P(B)}function P(B){return B===124?w(B):B===null||dt(B)?!i||s!==a?D(B):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(B)):D(B)}function D(B){return n(B)}function R(B){return e.enter("tableRow"),U(B)}function U(B){return B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),U):B===null||dt(B)?(e.exit("tableRow"),t(B)):Ot(B)?zt(e,U,"whitespace")(B):(e.enter("data"),j(B))}function j(B){return B===null||B===124||hn(B)?(e.exit("data"),U(B)):(e.consume(B),B===92?se:j)}function se(B){return B===92||B===124?(e.consume(B),j):j(B)}}function bIe(e,t){let n=-1,r=!0,s=0,a=[0,0,0,0],i=[0,0,0,0],o=!1,u=0,h,f,m;const g=new fIe;for(;++n<e.length;){const b=e[n],w=b[1];b[0]==="enter"?w.type==="tableHead"?(o=!1,u!==0&&(i5(g,t,u,h,f),f=void 0,u=0),h={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},g.add(n,0,[["enter",h,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(r=!0,m=void 0,a=[0,0,0,0],i=[0,n+1,0,0],o&&(o=!1,f={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},g.add(n,0,[["enter",f,t]])),s=w.type==="tableDelimiterRow"?2:f?3:1):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(a[1]!==0&&(i[0]=i[1],m=x0(g,t,a,s,void 0,m),a=[0,0,0,0]),i[2]=n)):w.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(i[0]=i[1],m=x0(g,t,a,s,void 0,m)),a=i,i=[a[1],n,0,0])):w.type==="tableHead"?(o=!0,u=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(u=n,a[1]!==0?(i[0]=i[1],m=x0(g,t,a,s,n,m)):i[1]!==0&&(m=x0(g,t,i,s,n,m)),s=0):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(i[3]=n)}for(u!==0&&i5(g,t,u,h,f),g.consume(t.events),n=-1;++n<t.events.length;){const b=t.events[n];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=mIe(t.events,n))}return e}function x0(e,t,n,r,s,a){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(a.end=Object.assign({},ld(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const u=ld(t.events,n[1]);if(a={type:i,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const h=ld(t.events,n[2]),f=ld(t.events,n[3]),m={type:o,start:Object.assign({},h),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",m,t]]),r!==2){const g=t.events[n[2]],b=t.events[n[3]];if(g[1].end=Object.assign({},b[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,x=n[3]-n[2]-1;e.add(w,x,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return s!==void 0&&(a.end=Object.assign({},ld(t.events,s)),e.add(s,0,[["exit",a,t]]),a=void 0),a}function i5(e,t,n,r,s){const a=[],i=ld(t.events,n);s&&(s.end=Object.assign({},i),a.push(["exit",s,t])),r.end=Object.assign({},i),a.push(["exit",r,t]),e.add(n+1,0,a)}function ld(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const xIe={name:"tasklistCheck",tokenize:wIe};function vIe(){return{text:{91:xIe}}}function wIe(e,t,n){const r=this;return s;function s(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),a)}function a(u){return hn(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),i):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),i):n(u)}function i(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(u)}function o(u){return dt(u)?t(u):Ot(u)?e.check({tokenize:_Ie},t,n)(u):n(u)}}function _Ie(e,t,n){return zt(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function kIe(e){return Kq([Z2e(),sIe(),hIe(e),gIe(),vIe()])}const SIe={};function o5(e){const t=this,n=e||SIe,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(kIe(n)),a.push(q2e()),i.push(V2e(n))}const Cv={THREADS:"chatbot_threads",MESSAGES:"chatbot_messages"};function l5(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Xu(){const e=localStorage.getItem(Cv.THREADS);return e?JSON.parse(e):[]}function v0(e){localStorage.setItem(Cv.THREADS,JSON.stringify(e))}function Gf(){const e=localStorage.getItem(Cv.MESSAGES);return e?JSON.parse(e):[]}function w0(e){localStorage.setItem(Cv.MESSAGES,JSON.stringify(e))}const ma={async getThreads(){return Xu().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime())},async getThread(e){return Xu().find(n=>n.id===e)||null},async createThread(e){const t=Xu(),n={id:l5(),user_id:"local-user",title:e.title||"New Chat",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return t.push(n),v0(t),n},async updateThread(e){const t=Xu(),n=t.findIndex(r=>r.id===e.id);if(n===-1)throw new Error("Thread not found");return t[n]={...t[n],title:e.title,updated_at:new Date().toISOString()},v0(t),t[n]},async deleteThread(e){const t=Xu().filter(r=>r.id!==e);v0(t);const n=Gf().filter(r=>r.thread_id!==e);w0(n)},async getMessages(e){return Gf().filter(n=>n.thread_id===e).sort((n,r)=>new Date(n.created_at).getTime()-new Date(r.created_at).getTime())},async createMessage(e){const t=Gf(),n={id:l5(),thread_id:e.thread_id,role:e.role,content:e.content,thinking:e.thinking,metadata:e.metadata,created_at:new Date().toISOString(),parent_id:e.parent_id};t.push(n),w0(t);const r=Xu(),s=r.findIndex(a=>a.id===e.thread_id);return s!==-1&&(r[s].updated_at=new Date().toISOString(),v0(r)),n},async updateMessage(e,t){const n=Gf(),r=n.findIndex(s=>s.id===e);if(r===-1)throw new Error("Message not found");return n[r].content=t,w0(n),n[r]},async deleteMessagesAfter(e,t){const n=Gf(),r=n.findIndex(a=>a.id===e&&a.thread_id===t);if(r===-1)return;const s=n.filter((a,i)=>a.thread_id!==t||i<=r);w0(s)}},TIe=[{keywords:["task","create","add","new task"],response:`I can help you create a [task](/admin/tasks)! Based on your message, I'll add this to your task list. Tasks in Personal OS connect to your [projects](/admin/projects) and [goals](/admin/goals), helping you break down strategic objectives into actionable steps.

Would you like me to:
1. Create this as a high-priority task
2. Link it to an existing project
3. Set a specific deadline`,thinking:`The user wants to create a task. I should:
1. Parse the task details from their message
2. Check if it relates to any existing projects or goals
3. Suggest appropriate priority levels based on keywords
4. Consider deadline implications from the context`},{keywords:["goal","progress","how"],response:`Let me check your [goals](/admin/goals) progress. In Personal OS, goals are part of the Strategic Layer, driving your [projects](/admin/projects) and daily actions.

Your active goals show:
- Goal completion tracking
- Linked projects and their status
- Key [metrics](/admin/metrics) aligned with each goal

Would you like me to show detailed progress on a specific goal?`,thinking:`I need to:
1. Retrieve all active goals from the database
2. Calculate completion percentages based on linked projects and tasks
3. Identify which metrics are tracking each goal
4. Determine if any goals are at risk or exceeding expectations`},{keywords:["metric","progress","performance","analytics"],response:`Your [metrics dashboard](/admin/metrics) provides data-driven insights. The Measurement Layer tracks KPIs tied to your [goals](/admin/goals) and [projects](/admin/projects).

I can help you:
- View current metric values
- Analyze trends over time
- Identify what's working well
- Suggest areas for improvement

Which metrics would you like to review?`,thinking:`Let me analyze the metrics data:
1. Pull all tracked metrics and their recent values
2. Calculate trend directions (improving/declining)
3. Compare against historical baselines
4. Identify correlations with goal progress
5. Look for anomalies or significant changes`},{keywords:["habit","routine","daily"],response:`[Habits](/admin/habits) are part of the Tactical Layer, turning your strategy into consistent daily action. I can help you:

- Review your current habits and streaks
- Create new habits aligned with your [goals](/admin/goals)
- Analyze habit completion patterns
- Suggest optimal times for habits

What habit would you like to work on?`,thinking:`For habit management, I should:
1. Check current habit streaks and completion rates
2. Identify habits that need attention or are at risk
3. Look for patterns in successful vs. failed habit completions
4. Consider time-of-day data for optimization suggestions`},{keywords:["project","status","milestone"],response:`Let me pull up your [project](/admin/projects) statuses. Projects bridge strategy and execution, breaking down [goals](/admin/goals) into manageable milestones.

I can show you:
- Active project progress percentages
- Upcoming milestones
- [Tasks](/admin/tasks) per project
- Blocked items needing attention

Which project would you like details on?`,thinking:`I need to:
1. Get all active projects and their current status
2. Calculate progress based on completed vs. total milestones
3. Identify upcoming deadlines and milestones
4. Flag any blocked or at-risk projects
5. Show task distribution across projects`},{keywords:["logbook","journal","reflection","entry"],response:`The [Logbook](/admin/logbook) is your Reflection Layer, capturing daily insights and learning. It helps you:

- Connect activities to outcomes
- Track what's working and what isn't
- Identify patterns in your growth
- Document key learnings

Would you like to:
1. Create a new journal entry
2. Review recent reflections
3. Analyze patterns in your entries`,thinking:`For logbook analysis:
1. Retrieve recent entries and their themes
2. Look for recurring topics or concerns
3. Connect logbook insights to goal progress
4. Identify breakthrough moments or learning patterns
5. Suggest reflection prompts based on recent activity`},{keywords:["help","what can you do","capabilities"],response:`I'm your Personal OS Assistant! I have access to all your Growth System data and can help you:

 **[Tasks](/admin/tasks)**: Create, update, or review your tasks
 **[Goals](/admin/goals)**: Track progress and align actions
 **[Metrics](/admin/metrics)**: Analyze performance data
 **[Habits](/admin/habits)**: Build consistent routines
 **[Projects](/admin/projects)**: Manage complex initiatives
 **[Logbook](/admin/logbook)**: Reflect on your journey

I can create items, provide insights, search the web for information, and help you understand how everything connects. What would you like to work on?`,thinking:`The user is asking about my capabilities. I should provide a clear overview of:
1. All available Growth System modules
2. My ability to create and manage items
3. Web search capabilities for external information
4. Cross-module insights and connections
5. Proactive suggestions based on their data`},{keywords:["integration","layers","how it works","connect"],response:`The Growth System uses a four-layer architecture where everything connects:

**Strategic Layer** ([Goals](/admin/goals) & [Projects](/admin/projects))  defines what you want to achieve

**Tactical Layer** ([Tasks](/admin/tasks) & [Habits](/admin/habits))  drives daily execution

**Measurement Layer** ([Metrics](/admin/metrics))  tracks progress with data

**Reflection Layer** ([Logbook](/admin/logbook))  captures insights that inform strategy

This creates a continuous improvement cycle where each layer reinforces the others. Would you like to explore how to leverage these connections?`,thinking:`To explain the integration:
1. Show concrete examples from their data
2. Highlight where layers are working well together
3. Identify opportunities for better integration
4. Suggest specific actions to strengthen connections`},{keywords:["prioritize","what should i do","next","focus"],response:`Let me help you prioritize! Based on your Growth System data, I can suggest:

1. **Urgent [Tasks](/admin/tasks)** with approaching deadlines
2. **High-Impact Activities** aligned with your top [goals](/admin/goals)
3. **[Habit](/admin/habits) Streaks** that need attention today
4. **[Project](/admin/projects) Milestones** coming up soon

I can also help you understand which activities will have the biggest impact on your [goals](/admin/goals). What area would you like to focus on?`,thinking:`For prioritization:
1. Analyze task deadlines and urgency
2. Map tasks to goals to find high-impact work
3. Check habit streaks that are at risk
4. Review project timelines for upcoming milestones
5. Consider energy levels and optimal task sequencing`},{keywords:["report","summary","overview","status"],response:`Here's a comprehensive overview of your Personal OS:

**Strategic Health**: Your [goals](/admin/goals) and [projects](/admin/projects) status
**Tactical Momentum**: [Task](/admin/tasks) completion and [habit](/admin/habits) consistency
**Performance Insights**: Key [metrics](/admin/metrics) and trends
**Growth Patterns**: Recent [logbook](/admin/logbook) insights

I can dive deeper into any of these areas. Which would you like to explore first?`,thinking:`To generate a comprehensive report:
1. Calculate goal completion rates
2. Measure task velocity and habit consistency
3. Analyze metric trends and correlations
4. Extract themes from recent logbook entries
5. Identify areas of strength and opportunities for growth`},{keywords:["search","find","look up","research"],response:`I can search the web for information to help you! Let me find relevant resources and insights.

After searching, I'll provide:
- Key findings and summaries
- Relevant links and sources
- How this information applies to your [goals](/admin/goals) and [projects](/admin/projects)

What would you like me to search for?`,thinking:`For web search requests:
1. Identify the core search intent
2. Formulate an effective search query
3. Plan to synthesize results with Personal OS context
4. Consider how findings might apply to their goals`,webSearch:!0,searchQuery:"user query will be extracted"}],CIe=`I'm your Personal OS Assistant! I have access to all your Growth System data and can help you:

 **[Tasks](/admin/tasks)**: Create, update, or review your tasks
 **[Goals](/admin/goals)**: Track progress and align actions
 **[Metrics](/admin/metrics)**: Analyze performance data
 **[Habits](/admin/habits)**: Build consistent routines
 **[Projects](/admin/projects)**: Manage complex initiatives
 **[Logbook](/admin/logbook)**: Reflect on your journey

I can create items, provide insights, and help you understand how everything connects. What would you like to work on?`;function EIe(e){const t=e.toLowerCase();for(const n of TIe)if(n.keywords.some(r=>t.includes(r)))return{content:n.response,thinking:n.thinking,webSearch:n.webSearch,searchQuery:n.searchQuery};return{content:CIe}}function jIe(){const[e,t]=A.useState([]),[n,r]=A.useState(null),[s,a]=A.useState([]),[i,o]=A.useState(""),[u,h]=A.useState(!1),[f,m]=A.useState(null),[g,b]=A.useState(""),[w,x]=A.useState(!0),[S,k]=A.useState({}),[C,T]=A.useState(null),[P,D]=A.useState(null),[R,U]=A.useState(""),[j,se]=A.useState(""),[B,ee]=A.useState(!1),[ie,_e]=A.useState(!1),[G,H]=A.useState(""),[L,Z]=A.useState({}),[W,de]=A.useState({}),$=A.useRef(null);A.useEffect(()=>{F();const z=()=>{window.innerWidth>=1024?x(!1):x(!0)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),A.useEffect(()=>{n&&Q(n.id)},[n]),A.useEffect(()=>{$.current?.scrollIntoView({behavior:"smooth"})},[s,R]);const F=async()=>{try{const z=await ma.getThreads();t(z),z.length>0&&!n&&r(z[0])}catch(z){console.error("Error loading threads:",z)}},Q=async z=>{try{const Ne=await ma.getMessages(z);a(Ne)}catch(Ne){console.error("Error loading messages:",Ne)}},O=async()=>{try{const z=await ma.createThread({title:"New Chat"});t([z,...e]),r(z),a([])}catch(z){console.error("Error creating thread:",z)}},V=async z=>{try{await ma.deleteThread(z),t(e.filter(Ne=>Ne.id!==z)),n?.id===z&&r(e[0]||null)}catch(Ne){console.error("Error deleting thread:",Ne)}},he=async z=>{if(g.trim())try{const Ne=await ma.updateThread({id:z,title:g});t(e.map(je=>je.id===z?Ne:je)),m(null)}catch(Ne){console.error("Error renaming thread:",Ne)}},I=async(z,Ne)=>{const je=z.split(" ");let ft="";for(let Fe=0;Fe<je.length;Fe++)ft+=(Fe>0?" ":"")+je[Fe],Ne(ft),await new Promise(Se=>setTimeout(Se,30))},N=async(z,Ne=!1,je)=>{const ft=z||i.trim();if(!(!ft||!n||u)){o(""),h(!0),T(null);try{let Fe;Ne&&je?(await ma.updateMessage(je,ft),await ma.deleteMessagesAfter(je,n.id),await Q(n.id),Fe={id:je}):(Fe=await ma.createMessage({thread_id:n.id,role:"user",content:ft}),await Q(n.id));const Se=EIe(ft);Se.webSearch&&(_e(!0),H(ft),await new Promise(en=>setTimeout(en,1500)),_e(!1));const Xt=`temp-${Date.now()}`;D(Xt),U(""),se(""),ee(!1),Se.thinking&&(await I(Se.thinking,en=>{se(en)}),ee(!0),await new Promise(en=>setTimeout(en,300))),await I(Se.content,en=>{U(en)}),await ma.createMessage({thread_id:n.id,role:"assistant",content:Se.content,thinking:Se.thinking,metadata:{web_search:Se.webSearch,search_query:Se.webSearch?ft:void 0},parent_id:Fe.id}),D(null),U(""),se(""),ee(!1),await Q(n.id),h(!1)}catch(Fe){console.error("Error sending message:",Fe),h(!1),D(null),U(""),se(""),ee(!1)}}},ne=async(z,Ne)=>{if(!(!Ne.trim()||!n))try{const je=s.findIndex(Xt=>Xt.id===z);if(je===-1)return;const ft=s[je],Fe=`${z}`,Se=L[Fe]||[];Se.length===0&&Se.push({content:ft.content,response:je<s.length-1?s[je+1].content:void 0,responseThinking:je<s.length-1?s[je+1].thinking:void 0}),ft.content!==Ne&&(Se.push({content:Ne}),Z({...L,[Fe]:Se}),de({...W,[Fe]:Se.length-1})),T(null),await N(Ne,!0,z)}catch(je){console.error("Error editing message:",je)}},K=async(z,Ne)=>{const je=`${z}`,ft=L[je]||[],Fe=W[je]||0;let Se=Fe;if(Ne==="prev"&&Fe>0?Se=Fe-1:Ne==="next"&&Fe<ft.length-1&&(Se=Fe+1),Se===Fe)return;de({...W,[je]:Se});const Xt=ft[Se];if(n)try{await ma.updateMessage(z,Xt.content),await ma.deleteMessagesAfter(z,n.id),Xt.response&&await ma.createMessage({thread_id:n.id,role:"assistant",content:Xt.response,thinking:Xt.responseThinking,parent_id:z}),await Q(n.id)}catch(en){console.error("Error switching branch:",en)}},re=z=>z.split(" ").length,be=z=>{const Ne=new Date(z),ft=Math.floor((new Date().getTime()-Ne.getTime())/1e3);return ft<60?"Just now":ft<3600?`${Math.floor(ft/60)}m ago`:ft<86400?`${Math.floor(ft/3600)}h ago`:ft<604800?`${Math.floor(ft/86400)}d ago`:Ne.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return c.jsxs("div",{className:"fixed inset-0 lg:left-64 top-0 flex",children:[!w&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 lg:hidden",onClick:()=>x(!0)}),c.jsxs("div",{className:`bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 absolute lg:relative z-30 h-full ${w?"-left-64 w-64":"left-0 w-64"} lg:left-0 overflow-hidden`,children:[c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:c.jsxs("button",{onClick:O,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition text-sm",children:[c.jsx(Ca,{size:18}),c.jsx("span",{children:"New"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:e.map(z=>c.jsx("div",{className:`group relative p-3 rounded-lg mb-1 cursor-pointer transition ${n?.id===z.id?"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>{r(z),window.innerWidth<1024&&x(!0)},children:f===z.id?c.jsx("input",{type:"text",value:g,onChange:Ne=>b(Ne.target.value),onBlur:()=>he(z.id),onKeyDown:Ne=>Ne.key==="Enter"&&he(z.id),className:"w-full px-2 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded",autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(N6,{size:14,className:"text-gray-400 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate flex-1",children:z.title})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition absolute right-2 top-2",children:[c.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),m(z.id),b(z.title)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:c.jsx(Hc,{size:12})}),c.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),V(z.id)},className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded",children:c.jsx(Dl,{size:12})})]})]})},z.id))})]}),c.jsx("button",{onClick:()=>x(!w),className:"fixed lg:absolute left-4 lg:left-0 top-4 lg:top-1/2 lg:-translate-y-1/2 z-40 p-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg lg:rounded-r-lg shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition",style:{left:w?void 0:"17rem"},children:w?c.jsx(ym,{size:16}):c.jsx(w6,{size:16})}),c.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 flex flex-col",children:n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[c.jsx(Jt,{className:"text-blue-600 dark:text-blue-400",size:24}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Personal OS Assistant"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Connected to your Growth System"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[s.length===0&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx(Jt,{className:"text-blue-600 dark:text-blue-400 mb-4",size:48}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Start a conversation"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md",children:"Ask me about your tasks, goals, metrics, or habits. I can help you create items, track progress, and understand how everything connects."}),c.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-2xl",children:[c.jsxs("button",{onClick:()=>o("Show me my active goals"),className:"p-3 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition text-left",children:[c.jsx(_r,{size:20,className:"text-blue-600 dark:text-blue-400 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"View Goals"})]}),c.jsxs("button",{onClick:()=>o("Create a new task"),className:"p-3 bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-lg transition text-left",children:[c.jsx(Di,{size:20,className:"text-green-600 dark:text-green-400 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Add Task"})]}),c.jsxs("button",{onClick:()=>o("Show my performance metrics"),className:"p-3 bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 rounded-lg transition text-left",children:[c.jsx(vX,{size:20,className:"text-purple-600 dark:text-purple-400 mb-2"}),c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"View Metrics"})]})]})]}),s.map((z,Ne)=>{const je=`${z.id}`,ft=L[je]||[],Fe=W[je]||0;return c.jsx("div",{children:c.jsxs("div",{className:`flex gap-3 ${z.role==="user"?"justify-end":"justify-start"}`,children:[z.role==="assistant"&&c.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(Jt,{size:16,className:"text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex-1 max-w-[80%]",children:[z.role==="assistant"&&z.thinking&&c.jsxs("div",{className:"mb-2",children:[c.jsxs("button",{onClick:()=>k({...S,[z.id]:!S[z.id]}),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition",children:[S[z.id]?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16}),c.jsxs("span",{className:"font-medium",children:["Show Thinking (",re(z.thinking)," tokens)"]})]}),S[z.id]&&c.jsx("div",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-700/50 rounded-lg text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap border-l-2 border-gray-300 dark:border-gray-600",children:z.thinking})]}),z.metadata?.web_search&&c.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400",children:[c.jsx(ri,{size:14}),c.jsxs("span",{children:["Searched: ",z.metadata.search_query]})]}),C===z.id?c.jsx("input",{type:"text",defaultValue:z.content,onBlur:Se=>{Se.target.value!==z.content?ne(z.id,Se.target.value):T(null)},onKeyDown:Se=>{Se.key==="Enter"?ne(z.id,Se.currentTarget.value):Se.key==="Escape"&&T(null)},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`rounded-lg px-4 py-3 ${z.role==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:z.role==="assistant"?c.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-p:my-3 prose-ul:my-2 prose-li:my-1",children:c.jsx(XL,{remarkPlugins:[o5],components:{p:({children:Se})=>c.jsx("p",{className:"mb-3 last:mb-0",children:Se}),ul:({children:Se})=>c.jsx("ul",{className:"list-disc pl-5 space-y-1 my-3",children:Se}),ol:({children:Se})=>c.jsx("ol",{className:"list-decimal pl-5 space-y-1 my-3",children:Se}),li:({children:Se})=>c.jsx("li",{className:"leading-relaxed",children:Se}),a:({node:Se,...Xt})=>{const en=Xt.href||"";return en.startsWith("/")?c.jsx(Ur,{to:en,className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:Xt.children}):c.jsx("a",{...Xt,className:"text-blue-600 dark:text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer"})},code:({className:Se,children:Xt,...en})=>!Se?.includes("language-")?c.jsx("code",{className:"bg-gray-200 dark:bg-gray-600 px-1 py-0.5 rounded text-sm",...en,children:Xt}):c.jsx("code",{className:"block bg-gray-200 dark:bg-gray-600 p-2 rounded text-sm overflow-x-auto",...en,children:Xt})},children:z.content})}):z.content}),c.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:be(z.created_at)})]}),z.role==="user"&&Ne===s.length-2&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>T(z.id),className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition",children:[c.jsx(Hc,{size:12}),c.jsx("span",{children:"Edit"})]}),ft.length>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>K(z.id,"prev"),disabled:Fe===0,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(eh,{size:12})}),c.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[Fe+1," / ",ft.length]}),c.jsx("button",{onClick:()=>K(z.id,"next"),disabled:Fe===ft.length-1,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(bl,{size:12})})]})]})]})]})},z.id)}),ie&&c.jsxs("div",{className:"flex gap-3 justify-start",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:c.jsx(ri,{className:"text-blue-600 dark:text-blue-400 animate-pulse",size:16})}),c.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[c.jsx(Q_,{className:"animate-spin",size:16}),c.jsxs("span",{className:"text-sm",children:['Searching the web for "',G,'"...']})]})})]}),P&&c.jsxs("div",{className:"flex gap-3 justify-start",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:c.jsx(Jt,{size:16,className:"text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex-1 max-w-[80%]",children:[j&&!B&&c.jsx("div",{className:"mb-2",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[c.jsx(Q_,{className:"animate-spin",size:16}),c.jsxs("span",{className:"font-medium",children:["Thinking... (",re(j)," tokens)"]})]})}),R&&c.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg px-4 py-3 text-gray-900 dark:text-gray-100",children:[c.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-p:my-3 prose-ul:my-2 prose-li:my-1",children:c.jsx(XL,{remarkPlugins:[o5],components:{p:({children:z})=>c.jsx("p",{className:"mb-3 last:mb-0",children:z}),ul:({children:z})=>c.jsx("ul",{className:"list-disc pl-5 space-y-1 my-3",children:z}),ol:({children:z})=>c.jsx("ol",{className:"list-decimal pl-5 space-y-1 my-3",children:z}),li:({children:z})=>c.jsx("li",{className:"leading-relaxed",children:z})},children:R})}),c.jsx("span",{className:"inline-block w-1 h-4 bg-blue-600 dark:bg-blue-400 ml-1 animate-pulse"})]})]})]}),u&&!P&&!ie&&c.jsxs("div",{className:"flex gap-3 justify-start",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:c.jsx(Jt,{size:16,className:"text-blue-600 dark:text-blue-400"})}),c.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg px-4 py-3",children:c.jsx(Q_,{className:"animate-spin text-gray-600 dark:text-gray-400",size:20})})]}),c.jsx("div",{ref:$})]}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:z=>o(z.target.value),onKeyDown:z=>z.key==="Enter"&&!z.shiftKey&&N(),placeholder:"Ask about your tasks, goals, metrics...",className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",disabled:u}),c.jsx("button",{onClick:()=>N(),disabled:!i.trim()||u,className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white rounded-lg transition",children:c.jsx(zee,{size:20})})]})})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:"Select or create a chat to get started"})})]})}const NIe={Health:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400"},Wealth:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400"},Love:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-700 dark:text-pink-400"},Happiness:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-400"},Operations:{bg:"bg-gray-100 dark:bg-gray-900/30",text:"text-gray-700 dark:text-gray-400"},DayJob:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400"}},AIe={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};function Yn({area:e,size:t="md",className:n=""}){const r=NIe[e];return c.jsx("span",{className:`inline-flex items-center rounded-full font-medium ${r.bg} ${r.text} ${AIe[t]} ${n}`,children:e})}const IIe={P1:{bg:"bg-red-500",text:"text-red-700 dark:text-red-400",border:"border-red-500"},P2:{bg:"bg-orange-500",text:"text-orange-700 dark:text-orange-400",border:"border-orange-500"},P3:{bg:"bg-yellow-500",text:"text-yellow-700 dark:text-yellow-400",border:"border-yellow-500"},P4:{bg:"bg-green-500",text:"text-green-700 dark:text-green-400",border:"border-green-500"}};function lr({priority:e,variant:t="badge",size:n="md",className:r=""}){const s=IIe[e];if(t==="dot"){const i={sm:"w-1.5 h-1.5",md:"w-2 h-2",lg:"w-3 h-3"};return c.jsx("span",{className:`inline-block rounded-full ${s.bg} ${i[n]} ${r}`})}if(t==="bar"){const i={sm:"w-1 h-4",md:"w-1 h-6",lg:"w-1.5 h-8"};return c.jsx("span",{className:`inline-block rounded-full ${s.bg} ${i[n]} ${r}`})}const a={sm:"px-1.5 py-0.5 text-xs",md:"px-2 py-0.5 text-sm",lg:"px-2.5 py-1 text-base"};return c.jsx("span",{className:`inline-flex items-center rounded font-semibold ${s.text} border ${s.border} bg-opacity-10 ${a[n]} ${r}`,children:e})}const c5={NotStarted:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300"},InProgress:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400"},Blocked:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400"},OnHold:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-400"},Done:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400"},Cancelled:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-500 dark:text-gray-500"},Planning:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-400"},Active:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400"},Completed:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400"},OnTrack:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400"},AtRisk:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-400"},Achieved:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400"},Abandoned:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-500 dark:text-gray-500"},Paused:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-400"},Archived:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-500 dark:text-gray-500"}},OIe={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};function Ga({status:e,size:t="md",className:n=""}){const r=c5[e]||c5.NotStarted,s=e==="Done"||e==="Completed"||e==="Achieved",a=e==="Cancelled"||e==="Abandoned";return c.jsxs("span",{className:`inline-flex items-center rounded-full font-medium ${r.bg} ${r.text} ${OIe[t]} ${a?"line-through":""} ${n}`,children:[s&&c.jsx("span",{className:"mr-1",children:""}),e]})}const RIe={task:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400",hover:"hover:bg-blue-200 dark:hover:bg-blue-900/50"},project:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-400",hover:"hover:bg-purple-200 dark:hover:bg-purple-900/50"},goal:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",hover:"hover:bg-green-200 dark:hover:bg-green-900/50"},metric:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-400",hover:"hover:bg-orange-200 dark:hover:bg-orange-900/50"},habit:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-700 dark:text-pink-400",hover:"hover:bg-pink-200 dark:hover:bg-pink-900/50"},logbook:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",hover:"hover:bg-amber-200 dark:hover:bg-amber-900/50"}},PIe={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-sm gap-1.5"};function vs({id:e,label:t,type:n,onRemove:r,onClick:s,size:a="md",className:i=""}){const o=RIe[n],u=f=>{s&&(f.preventDefault(),s(e))},h=f=>{f.stopPropagation(),r&&r(e)};return c.jsxs("span",{className:`inline-flex items-center rounded-full font-medium transition-colors ${o.bg} ${o.text} ${s?`cursor-pointer ${o.hover}`:""} ${PIe[a]} ${i}`,onClick:u,children:[c.jsx("span",{className:"truncate max-w-[200px]",children:t}),r&&c.jsx("button",{type:"button",onClick:h,className:"inline-flex items-center justify-center hover:bg-black/10 dark:hover:bg-white/10 rounded-full p-0.5 transition-colors",children:c.jsx(cn,{className:"w-3 h-3"})})]})}function MIe(e){const t=new Date(e),n=new Date,r=t.getTime()-n.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s===0?"Today":s===1?"Tomorrow":s===-1?"Yesterday":s>1&&s<=7?`In ${s} days`:s<-1&&s>=-7?`${Math.abs(s)} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function DIe(e){return new Date(e)<new Date}function $Ie(e,t=3){const n=new Date(e),r=new Date,s=n.getTime()-r.getTime(),a=Math.ceil(s/(1e3*60*60*24));return a>=0&&a<=t}const _0={sm:"text-xs",md:"text-sm",lg:"text-base"},k0={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};function S0({date:e,label:t,showIcon:n=!0,showWarning:r=!0,variant:s="inline",size:a="md",className:i=""}){if(!e)return c.jsx("span",{className:`text-gray-400 dark:text-gray-600 ${_0[a]} ${i}`,children:"No date set"});const o=DIe(e),u=!o&&$Ie(e),h=MIe(e),f=o?"text-red-600 dark:text-red-400":u?"text-orange-600 dark:text-orange-400":"text-gray-600 dark:text-gray-400";return s==="block"?c.jsxs("div",{className:`flex flex-col gap-1 ${i}`,children:[t&&c.jsx("span",{className:`font-medium text-gray-700 dark:text-gray-300 ${_0[a]}`,children:t}),c.jsxs("div",{className:`flex items-center gap-1.5 ${f} ${_0[a]}`,children:[n&&c.jsx(Dn,{className:k0[a]}),c.jsx("span",{children:h}),r&&o&&c.jsx(qc,{className:k0[a]})]})]}):c.jsxs("span",{className:`inline-flex items-center gap-1.5 ${f} ${_0[a]} ${i}`,children:[n&&c.jsx(Dn,{className:k0[a]}),t&&c.jsxs("span",{className:"font-medium",children:[t,":"]}),c.jsx("span",{children:h}),r&&o&&c.jsx(qc,{className:k0[a]})]})}const LIe={sm:{dimension:40,fontSize:"text-xs"},md:{dimension:64,fontSize:"text-sm"},lg:{dimension:96,fontSize:"text-base"},xl:{dimension:128,fontSize:"text-lg"}},u5={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",orange:"text-orange-600 dark:text-orange-400",red:"text-red-600 dark:text-red-400",purple:"text-purple-600 dark:text-purple-400"};function wl({progress:e,size:t="md",strokeWidth:n=4,showLabel:r=!0,color:s="blue",className:a=""}){const{dimension:i,fontSize:o}=LIe[t],u=Math.min(Math.max(e,0),100),h=(i-n)/2,f=h*2*Math.PI,m=f-u/100*f;return c.jsxs("div",{className:`relative inline-flex items-center justify-center ${a}`,children:[c.jsxs("svg",{width:i,height:i,className:"transform -rotate-90",children:[c.jsx("circle",{cx:i/2,cy:i/2,r:h,stroke:"currentColor",strokeWidth:n,fill:"none",className:"text-gray-200 dark:text-gray-700"}),c.jsx("circle",{cx:i/2,cy:i/2,r:h,stroke:"currentColor",strokeWidth:n,fill:"none",strokeDasharray:f,strokeDashoffset:m,strokeLinecap:"round",className:`transition-all duration-500 ease-out ${u5[s]}`})]}),r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:`font-semibold ${o} ${u5[s]}`,children:[Math.round(u),"%"]})})]})}const zIe={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-sm gap-1.5"},UIe={sm:"w-3 h-3",md:"w-4 h-4"};function ux({type:e,count:t,onClick:n,size:r="md",className:s="",tooltip:a}){if(t===0)return null;const i=e==="blocked",o=i?"bg-red-100 dark:bg-red-900/30":"bg-blue-100 dark:bg-blue-900/30",u=i?"text-red-700 dark:text-red-400":"text-blue-700 dark:text-blue-400",h=n?i?"hover:bg-red-200 dark:hover:bg-red-900/50":"hover:bg-blue-200 dark:hover:bg-blue-900/50":"",f=i?Qs:C6,m=i?`Blocked by ${t}`:`Blocking ${t}`;return c.jsxs("div",{className:"relative group inline-block",children:[c.jsxs("button",{type:"button",onClick:n,disabled:!n,className:`inline-flex items-center rounded-full font-medium transition-colors ${o} ${u} ${h} ${zIe[r]} ${n?"cursor-pointer":"cursor-default"} ${s}`,title:a,children:[c.jsx(f,{className:UIe[r]}),c.jsx("span",{children:m})]}),a&&c.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none whitespace-pre-line max-w-xs",children:[a,c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]})}const FIe={sm:{bar:"h-1",text:"text-xs",width:"w-16"},md:{bar:"h-1.5",text:"text-sm",width:"w-24"},lg:{bar:"h-2",text:"text-base",width:"w-32"}};function fr({confidence:e,size:t="md",showLabel:n=!0,className:r=""}){const s=Math.min(Math.max(e,0),100),a=FIe[t],o=(u=>u>=80?"bg-green-500":u>=60?"bg-blue-500":u>=40?"bg-yellow-500":"bg-orange-500")(s);return c.jsxs("div",{className:`flex items-center gap-2 ${r}`,children:[n&&c.jsxs("span",{className:`${a.text} text-gray-600 dark:text-gray-400 font-medium`,children:[s,"%"]}),c.jsx("div",{className:`${a.width} bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden ${a.bar}`,children:c.jsx("div",{className:`${a.bar} ${o} rounded-full transition-all duration-300`,style:{width:`${s}%`}})})]})}const BIe={sm:{dot:"w-1.5 h-1.5",text:"text-xs",gap:"gap-1"},md:{dot:"w-2 h-2",text:"text-sm",gap:"gap-1.5"},lg:{dot:"w-2.5 h-2.5",text:"text-base",gap:"gap-2"}};function Bl({message:e="AI is thinking...",size:t="md",className:n=""}){const r=BIe[t];return c.jsxs("div",{className:`inline-flex items-center ${r.gap} ${n}`,children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:`${r.dot} rounded-full bg-purple-500 animate-bounce`,style:{animationDelay:"0ms",animationDuration:"1s"}}),c.jsx("span",{className:`${r.dot} rounded-full bg-purple-500 animate-bounce`,style:{animationDelay:"200ms",animationDuration:"1s"}}),c.jsx("span",{className:`${r.dot} rounded-full bg-purple-500 animate-bounce`,style:{animationDelay:"400ms",animationDuration:"1s"}})]}),c.jsx("span",{className:`${r.text} text-gray-600 dark:text-gray-400 font-medium`,children:e})]})}const HIe={info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:T6,iconBg:"bg-blue-500",textColor:"text-blue-900 dark:text-blue-100"},warning:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",icon:qc,iconBg:"bg-orange-500",textColor:"text-orange-900 dark:text-orange-100"},critical:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:Qs,iconBg:"bg-red-500",textColor:"text-red-900 dark:text-red-100"}};function kS({title:e,content:t,severity:n="info",onDismiss:r,className:s=""}){const a=HIe[n],i=a.icon;return c.jsx("div",{className:`${a.bg} border ${a.border} rounded-lg p-4 ${s}`,children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:`w-8 h-8 rounded-full ${a.iconBg} flex items-center justify-center`,children:c.jsx(Jt,{className:"w-4 h-4 text-white"})})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:`font-semibold ${a.textColor} flex items-center gap-2 mb-1`,children:[c.jsx(i,{className:"w-4 h-4"}),e]}),c.jsx("div",{className:`text-sm ${a.textColor} opacity-90`,children:t})]}),r&&c.jsx("button",{onClick:r,className:`flex-shrink-0 p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded transition-colors ${a.textColor}`,children:c.jsx(cn,{className:"w-4 h-4"})})]})})]})})}function qIe({isOpen:e,onClose:t,title:n="AI Assistant",children:r,isLoading:s=!1,className:a=""}){return e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:t}),c.jsx("div",{className:`fixed right-0 top-0 bottom-0 w-full max-w-md bg-white dark:bg-gray-800 shadow-2xl z-50 transform transition-transform ${e?"translate-x-0":"translate-x-full"} ${a}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:c.jsx(Jt,{className:"w-4 h-4 text-white"})}),c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:c.jsx(cn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(Bl,{message:"Analyzing...",size:"lg"})}):r})]})})]}):null}function d5({title:e,description:t,confidence:n,reasoning:r,onAccept:s,onDismiss:a,variant:i="default",className:o=""}){return i==="compact"?c.jsx("div",{className:`bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-3 ${o}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center",children:c.jsx(Jt,{className:"w-4 h-4 text-white"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:t})]}),a&&c.jsx("button",{onClick:a,className:"flex-shrink-0 p-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded transition-colors",children:c.jsx(cn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})}):c.jsx("div",{className:`bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-800 rounded-lg overflow-hidden ${o}`,children:c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:c.jsx(Jt,{className:"w-5 h-5 text-white"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e}),n!==void 0&&c.jsx(fr,{confidence:n,size:"sm"})]})]}),a&&c.jsx("button",{onClick:a,className:"flex-shrink-0 p-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded transition-colors",children:c.jsx(cn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3",children:t}),r&&c.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white/50 dark:bg-black/20 rounded p-2 mb-3",children:[c.jsx("span",{className:"font-medium",children:"Reasoning: "}),r]}),(s||a)&&c.jsxs("div",{className:"flex gap-2 pt-2 border-t border-purple-200 dark:border-purple-800",children:[s&&c.jsxs(Ee,{onClick:s,variant:"primary",size:"sm",className:"flex items-center gap-1",children:[c.jsx(Ks,{className:"w-4 h-4"}),"Accept"]}),a&&c.jsx(Ee,{onClick:a,variant:"secondary",size:"sm",children:"Dismiss"})]})]})})}function Ev({filters:e,onFiltersChange:t,availableFilters:n,className:r=""}){const[s,a]=A.useState(!0),i=!!(e.area||e.subCategory||e.priority||e.status||e.search),o=()=>{t({})},u=(h,f)=>{t({...e,[h]:f})};return c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 ${r}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Filters"}),i&&c.jsxs("button",{onClick:o,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[c.jsx(cn,{className:"w-3 h-3"}),"Clear all"]})]}),c.jsx("button",{onClick:()=>a(!s),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:s?c.jsx(Io,{className:"w-4 h-4"}):c.jsx(Fi,{className:"w-4 h-4"})})]}),s&&c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),c.jsx("input",{type:"text",value:e.search||"",onChange:h=>u("search",h.target.value),placeholder:"Search...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?.areas&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area"}),c.jsxs("select",{value:e.area||"",onChange:h=>u("area",h.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Areas"}),n.areas.map(h=>c.jsx("option",{value:h,children:h},h))]})]}),n?.priorities&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),c.jsxs("select",{value:e.priority||"",onChange:h=>u("priority",h.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Priorities"}),n.priorities.map(h=>c.jsx("option",{value:h,children:h},h))]})]}),n?.statuses&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),c.jsxs("select",{value:e.status||"",onChange:h=>u("status",h.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Statuses"}),n.statuses.map(h=>c.jsx("option",{value:h,children:h},h))]})]})]})]})}function Sa({icon:e,title:t,description:n,actionLabel:r,onAction:s,secondaryActionLabel:a,onSecondaryAction:i,className:o=""}){return c.jsxs("div",{className:`flex flex-col items-center justify-center py-12 px-4 text-center ${o}`,children:[e&&c.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:c.jsx(e,{className:"w-8 h-8 text-gray-400 dark:text-gray-600"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t}),n&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 max-w-md",children:n}),(r||a)&&c.jsxs("div",{className:"flex gap-3",children:[r&&s&&c.jsx(Ee,{onClick:s,variant:"primary",children:r}),a&&i&&c.jsx(Ee,{onClick:i,variant:"secondary",children:a})]})]})}const VIe={delete:Dl,archive:hX,complete:Ks};function GIe({selectedCount:e,onClear:t,actions:n,className:r=""}){return e===0?null:c.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 ${r}`,style:{animation:"slideUp 0.2s ease-out"},children:c.jsxs("div",{className:"bg-gray-900 dark:bg-gray-800 text-white rounded-lg shadow-2xl border border-gray-700 px-4 py-3 flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"font-medium",children:[e," selected"]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-700 rounded transition-colors","aria-label":"Clear selection",children:c.jsx(cn,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"w-px h-6 bg-gray-700"}),c.jsx("div",{className:"flex items-center gap-2",children:n.map((s,a)=>{const i=s.icon?VIe[s.icon]:null,o=s.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":s.variant==="success"?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white";return c.jsxs("button",{onClick:s.onClick,className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${o}`,children:[i&&c.jsx(i,{className:"w-4 h-4"}),s.label]},a)})})]})})}function KIe(){const[e,t]=A.useState({}),[n,r]=A.useState(!1),[s,a]=A.useState(0);return c.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-12",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Components Demo"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Showcase of all shared UI components in the Growth System"})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Entity Display Components"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Area Badges"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Yn,{area:"Health"}),c.jsx(Yn,{area:"Wealth"}),c.jsx(Yn,{area:"Love"}),c.jsx(Yn,{area:"Happiness"}),c.jsx(Yn,{area:"Operations"}),c.jsx(Yn,{area:"DayJob"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[c.jsx(Yn,{area:"Health",size:"sm"}),c.jsx(Yn,{area:"Wealth",size:"md"}),c.jsx(Yn,{area:"Love",size:"lg"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Priority Indicators"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Badge variant:"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(lr,{priority:"P1"}),c.jsx(lr,{priority:"P2"}),c.jsx(lr,{priority:"P3"}),c.jsx(lr,{priority:"P4"})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Dot variant:"}),c.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[c.jsx(lr,{priority:"P1",variant:"dot"}),c.jsx(lr,{priority:"P2",variant:"dot"}),c.jsx(lr,{priority:"P3",variant:"dot"}),c.jsx(lr,{priority:"P4",variant:"dot"})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Bar variant:"}),c.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[c.jsx(lr,{priority:"P1",variant:"bar"}),c.jsx(lr,{priority:"P2",variant:"bar"}),c.jsx(lr,{priority:"P3",variant:"bar"}),c.jsx(lr,{priority:"P4",variant:"bar"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Status Badges"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Ga,{status:"NotStarted"}),c.jsx(Ga,{status:"InProgress"}),c.jsx(Ga,{status:"Blocked"}),c.jsx(Ga,{status:"OnHold"}),c.jsx(Ga,{status:"Done"}),c.jsx(Ga,{status:"Cancelled"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[c.jsx(Ga,{status:"Active"}),c.jsx(Ga,{status:"OnTrack"}),c.jsx(Ga,{status:"AtRisk"}),c.jsx(Ga,{status:"Achieved"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Entity Link Chips"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(vs,{id:"1",label:"Build authentication",type:"task"}),c.jsx(vs,{id:"2",label:"MVP Development",type:"project"}),c.jsx(vs,{id:"3",label:"Launch SaaS",type:"goal"}),c.jsx(vs,{id:"4",label:"MRR",type:"metric"}),c.jsx(vs,{id:"5",label:"Morning Exercise",type:"habit"}),c.jsx(vs,{id:"6",label:"Daily Entry",type:"logbook"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[c.jsx(vs,{id:"1",label:"With remove button",type:"task",onRemove:()=>alert("Removed")}),c.jsx(vs,{id:"2",label:"Clickable chip",type:"project",onClick:()=>alert("Clicked")})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Date Display"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(S0,{date:new Date().toISOString().split("T")[0],label:"Today"}),c.jsx(S0,{date:new Date(Date.now()+864e5).toISOString().split("T")[0],label:"Tomorrow"}),c.jsx(S0,{date:new Date(Date.now()-864e5).toISOString().split("T")[0],label:"Yesterday (overdue)"}),c.jsx(S0,{date:null,label:"No date"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Progress Rings"}),c.jsxs("div",{className:"flex flex-wrap gap-6",children:[c.jsx(wl,{progress:25,size:"sm"}),c.jsx(wl,{progress:50,size:"md",color:"green"}),c.jsx(wl,{progress:75,size:"lg",color:"orange"}),c.jsx(wl,{progress:100,size:"xl",color:"purple"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Dependency Badges"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(ux,{type:"blocked",count:2,onClick:()=>alert("Show blockers")}),c.jsx(ux,{type:"blocking",count:3,onClick:()=>alert("Show blocking")})]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Interactive Components"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Filter Panel"}),c.jsx(Ev,{filters:e,onFiltersChange:t,availableFilters:{areas:["Health","Wealth","Love","Happiness","Operations","DayJob"],priorities:["P1","P2","P3","P4"],statuses:["NotStarted","InProgress","Done"]}})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Empty State"}),c.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:c.jsx(Sa,{icon:Eee,title:"No tasks yet",description:"Get started by creating your first task. Tasks help you break down your goals into actionable items.",actionLabel:"Create Task",onAction:()=>alert("Create task"),secondaryActionLabel:"Import Tasks",onSecondaryAction:()=>alert("Import")})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Quick Action Bar"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Select items to see the quick action bar (it appears at the bottom)"}),c.jsx(Ee,{onClick:()=>a(s>0?0:3),variant:"secondary",children:s>0?"Clear Selection":"Select 3 Items"}),c.jsx(GIe,{selectedCount:s,onClear:()=>a(0),actions:[{label:"Complete",icon:"complete",variant:"success",onClick:()=>alert("Complete")},{label:"Delete",icon:"delete",variant:"danger",onClick:()=>alert("Delete")}]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"AI Components"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"AI Confidence Indicator"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(fr,{confidence:90}),c.jsx(fr,{confidence:70}),c.jsx(fr,{confidence:50}),c.jsx(fr,{confidence:30})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"AI Thinking Indicator"}),c.jsx(Bl,{})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"AI Insight Banners"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(kS,{title:"Progress Update",content:"You're on track to complete 3 tasks this week. Keep up the momentum!",severity:"info"}),c.jsx(kS,{title:"Attention Needed",content:"Task 'Build API' is blocked by 2 dependencies. Consider prioritizing them.",severity:"warning"}),c.jsx(kS,{title:"Critical Issue",content:"Your quarterly goal is at risk. Only 30 days remaining with 60% completion.",severity:"critical"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"AI Suggestion Cards"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(d5,{title:"Break down this task",description:"This task seems complex. I can help break it into smaller subtasks.",confidence:85,reasoning:"Based on the task description, I identified 4 distinct steps that could be separate tasks.",onAccept:()=>alert("Accepted"),onDismiss:()=>alert("Dismissed")}),c.jsx(d5,{title:"Quick suggestion",description:"Consider adding a due date to stay on track.",variant:"compact",onDismiss:()=>alert("Dismissed")})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"AI Assist Panel"}),c.jsx(Ee,{onClick:()=>r(!0),variant:"primary",children:"Open AI Assistant"}),c.jsx(qIe,{isOpen:n,onClose:()=>r(!1),title:"Task Breakdown Assistant",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Based on your task description, here are some suggested subtasks:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"1. Set up project structure"}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated: 2 hours"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"2. Implement core features"}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated: 8 hours"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"3. Write tests"}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated: 3 hours"})]})]}),c.jsx(Ee,{onClick:()=>r(!1),variant:"primary",className:"w-full",children:"Apply Suggestions"})]})})]})]})]})]})}function $V({task:e,onEdit:t,onDelete:n,onClick:r,dependencyCount:s=0,blockedByCount:a=0,blockedByTasks:i=[],projectCount:o=0,goalCount:u=0}){const h=()=>{r&&r(e)},f=b=>{if(!b)return null;const w=new Date(b),x=new Date,S=Math.ceil((w.getTime()-x.getTime())/(1e3*60*60*24));return S<0?{text:w.toLocaleDateString(),overdue:!0}:S===0?{text:"Today",urgent:!0}:S===1?{text:"Tomorrow",urgent:!0}:S<=7?{text:`${S} days`,warning:!0}:{text:w.toLocaleDateString(),normal:!0}},m=f(e.dueDate),g=f(e.scheduledDate);return c.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow ${r?"cursor-pointer":""}`,onClick:h,children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx(lr,{priority:e.priority,size:"sm"}),c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:e.title}),c.jsx(Ga,{status:e.status})]}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.description}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[c.jsx(Yn,{area:e.area}),(o>0||u>0)&&c.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[o>0&&`Projects: ${o}`,o>0&&u>0&&"  ",u>0&&`Goals: ${u}`]}),e.size&&c.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Size: ",e.size]}),m&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsx("span",{className:`${m.overdue?"text-red-600 dark:text-red-400 font-semibold":m.urgent?"text-orange-600 dark:text-orange-400 font-semibold":m.warning?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"}`,children:m.text})]}),g&&!m&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(AX,{className:"w-4 h-4"}),c.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:g.text})]}),a>0&&c.jsx(ux,{type:"blocked",count:a,tooltip:i.length>0?`Blocked by:
${i.map(b=>` ${b.title}`).join(`
`)}`:void 0}),s>0&&c.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[c.jsx(k6,{className:"w-4 h-4"}),c.jsx("span",{children:s})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",onClick:b=>b.stopPropagation(),children:[c.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>t(e),className:"!p-2",children:c.jsx(A6,{className:"w-4 h-4"})}),c.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>n(e),className:"!p-2 hover:!bg-red-50 hover:!text-red-600 dark:hover:!bg-red-900/20",children:c.jsx(Dl,{className:"w-4 h-4"})})]})]})})}class ZIe{isConfigured(){return qa().isConfigured()}async parseNaturalLanguageTask(t){const n={text:t};return qa().parseNaturalLanguageTask(n)}async breakdownTask(t){const n={task:t};return qa().breakdownTask(n)}async resolveBlockers(t,n){const r={task:t,blockers:n};return qa().resolveBlockers(r)}async advisePriority(t,n){const r={task:t,allTasks:n};return qa().advisePriority(r)}async estimateEffort(t,n){const r={task:t,similarTasks:n};return qa().estimateEffort(r)}async categorizeTask(t,n){const r={title:t,description:n};return qa().categorizeTask(r)}async detectDependencies(t,n){const r={task:t,existingTasks:n};return qa().detectDependencies(r)}async analyzeProjectHealth(t,n){const r={project:t,tasks:n};return qa().analyzeProjectHealth(r)}async generateProjectTasks(t,n){const r={project:t,existingTasks:n};return qa().generateProjectTasks(r)}async identifyProjectRisks(t,n){const r={project:t,tasks:n};return qa().identifyProjectRisks(r)}}const go=new ZIe;function LV({mode:e,onClose:t,onApplyParsed:n,onApplyCategory:r,onApplyEffort:s,onApplyPriority:a,onApplyBreakdown:i,onApplyDependencies:o,currentTask:u,allTasks:h=[],title:f,description:m}){const[g,b]=A.useState(""),[w,x]=A.useState(!1),[S,k]=A.useState(null),[C,T]=A.useState(null),[P,D]=A.useState(null),[R,U]=A.useState(null),[j,se]=A.useState(null),[B,ee]=A.useState(null),[ie,_e]=A.useState(null),G=Zr.isConfigured(),H=async()=>{if(!g.trim())return;x(!0),k(null);const V=await go.parseNaturalLanguageTask(g);V.success&&V.data?T(V.data):k(V.error||"Failed to parse task"),x(!1)},L=async()=>{if(!f&&!u?.title)return;x(!0),k(null);const V=f||u?.title||"",he=m||u?.description||void 0,I=await go.categorizeTask(V,he);I.success&&I.data?D(I.data):k(I.error||"Failed to categorize task"),x(!1)},Z=async()=>{if(!u?.title&&!f)return;x(!0),k(null);const V=u||{title:f,description:m},he=h.filter(N=>N.status==="Done"&&N.size!==null),I=await go.estimateEffort(V,he);I.success&&I.data?U(I.data):k(I.error||"Failed to estimate effort"),x(!1)},W=async()=>{if(!u)return;x(!0),k(null);const V=await go.advisePriority(u,h);V.success&&V.data?se(V.data):k(V.error||"Failed to get priority advice"),x(!1)},de=async()=>{if(!u)return;x(!0),k(null);const V=await go.breakdownTask(u);V.success&&V.data?ee(V.data):k(V.error||"Failed to break down task"),x(!1)},$=async()=>{if(!u?.title&&!f)return;x(!0),k(null);const V=u||{title:f,description:m},he=await go.detectDependencies(V,h);he.success&&he.data?_e(he.data):k(he.error||"Failed to detect dependencies"),x(!1)},F=()=>{switch(e){case"parse":return"Smart Parse";case"categorize":return"Auto-Categorize";case"estimate":return"Estimate Effort";case"priority":return"Priority Advisor";case"breakdown":return"Break Down Task";case"dependencies":return"Find Dependencies"}},Q=()=>{switch(e){case"parse":return"Describe your task in natural language and AI will structure it for you.";case"categorize":return"AI will suggest the best area and subcategory for this task.";case"estimate":return"AI will estimate the effort required based on similar completed tasks.";case"priority":return"AI will recommend a priority based on your current workload.";case"breakdown":return"AI will break this task into smaller, actionable subtasks.";case"dependencies":return"AI will identify tasks this might depend on."}},O=()=>{switch(e){case"parse":H();break;case"categorize":L();break;case"estimate":Z();break;case"priority":W();break;case"breakdown":de();break;case"dependencies":$();break}};return G?c.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:F()})]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-amber-200/50 dark:hover:bg-amber-800/50 rounded transition-colors",children:c.jsx(cn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:Q()}),e==="parse"&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("textarea",{value:g,onChange:V=>b(V.target.value),placeholder:"e.g., Schedule a dentist appointment next Friday, high priority health task",rows:3,className:"w-full px-3 py-2 border border-amber-300 dark:border-amber-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-500"}),c.jsxs(Ee,{onClick:O,disabled:w||!g.trim(),variant:"primary",size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[c.jsx(ob,{className:"w-4 h-4 mr-1"}),"Parse"]})]}),e!=="parse"&&!w&&!S&&!P&&!R&&!j&&!B&&!ie&&c.jsxs(Ee,{onClick:O,variant:"primary",size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[c.jsx(ob,{className:"w-4 h-4 mr-1"}),"Analyze"]}),w&&c.jsx("div",{className:"py-4",children:c.jsx(Bl,{message:"Analyzing..."})}),S&&c.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:S})}),C&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Parsed Task"}),c.jsx(fr,{confidence:C.confidence,size:"sm"})]}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Title:"})," ",C.task.title]}),C.task.description&&c.jsxs("p",{children:[c.jsx("strong",{children:"Description:"})," ",C.task.description]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Area:"})," ",C.task.area]}),C.task.subCategory&&c.jsxs("p",{children:[c.jsx("strong",{children:"Category:"})," ",C.task.subCategory]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Priority:"})," ",C.task.priority]}),C.task.dueDate&&c.jsxs("p",{children:[c.jsx("strong",{children:"Due:"})," ",C.task.dueDate]})]}),c.jsxs("div",{className:"flex gap-2 mt-3",children:[c.jsxs(Ee,{onClick:()=>{n?.(C.task),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Apply"]}),c.jsx(Ee,{onClick:()=>T(null),variant:"secondary",size:"sm",children:"Try Again"})]})]}),P&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Suggested Category"}),c.jsx(fr,{confidence:P.confidence,size:"sm"})]}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Area:"})," ",P.area]}),P.subCategory&&c.jsxs("p",{children:[c.jsx("strong",{children:"Subcategory:"})," ",P.subCategory]}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:P.reasoning})]}),c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(Ee,{onClick:()=>{r?.(P.area,P.subCategory),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Apply"]})})]}),R&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Effort Estimate"}),c.jsx(fr,{confidence:R.confidence,size:"sm"})]}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Estimated:"})," ",R.estimatedSize," hours"]}),R.comparisons.length>0&&c.jsx("ul",{className:"list-disc list-inside text-gray-500 dark:text-gray-400",children:R.comparisons.map((V,he)=>c.jsx("li",{children:V},he))})]}),c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(Ee,{onClick:()=>{s?.(R.estimatedSize),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Apply"]})})]}),j&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Priority Recommendation"})}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Recommended:"})," ",j.recommendedPriority]}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:j.reasoning}),c.jsx("ul",{className:"list-disc list-inside text-gray-500 dark:text-gray-400",children:j.factors.map((V,he)=>c.jsx("li",{children:V},he))})]}),c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(Ee,{onClick:()=>{a?.(j.recommendedPriority),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Apply"]})})]}),B&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Task Breakdown"})}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[c.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic mb-2",children:B.reasoning}),B.subtasks.map((V,he)=>c.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[c.jsx("p",{className:"font-medium",children:V.title}),V.description&&c.jsx("p",{className:"text-sm text-gray-500",children:V.description}),c.jsxs("p",{className:"text-xs text-gray-400",children:[V.priority," | ",V.size?`${V.size}h`:"Size TBD"]})]},he))]}),c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(Ee,{onClick:()=>{i?.(B.subtasks),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Create Subtasks"]})})]}),ie&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Suggested Dependencies"})}),ie.suggestedDependencies.length===0?c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No dependencies found."}):c.jsx("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:ie.suggestedDependencies.map((V,he)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:V.taskTitle}),c.jsx("p",{className:"text-xs text-gray-500",children:V.reason})]}),c.jsx(fr,{confidence:V.confidence,size:"sm"})]},he))}),ie.suggestedDependencies.length>0&&c.jsx("div",{className:"flex gap-2 mt-3",children:c.jsxs(Ee,{onClick:()=>{const V=ie.suggestedDependencies.map(he=>he.taskId);o?.(V),t()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Add Dependencies"]})})]})]}):c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Go to Settings to configure your LLM connection."})]})]}),c.jsx("button",{onClick:t,className:"mt-3 text-sm text-amber-700 dark:text-amber-300 hover:underline",children:"Close"})]})}const WIe=["Health","Wealth","Love","Happiness","Operations","DayJob"],JIe=["P1","P2","P3","P4"],YIe=["NotStarted","InProgress","Blocked","OnHold","Done","Cancelled"],QIe={Health:["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise"],Wealth:["Income","Expenses","Investments","Debt","NetWorth"],Love:["Romantic","Family","Friends","Social"],Happiness:["Joy","Gratitude","Purpose","Peace"],Operations:["Productivity","Organization","Systems","Habits"],DayJob:["Career","Skills","Projects","Performance"]};function XIe({onSubmit:e,onCancel:t,isLoading:n}){const[r,s]=A.useState({title:"",description:"",extendedDescription:"",area:"Operations",subCategory:void 0,priority:"P3",status:"NotStarted",size:void 0,dueDate:"",scheduledDate:"",notes:"",isRecurring:!1}),[a,i]=A.useState(!1),[o,u]=A.useState("parse"),h=Zr.isConfigured(),f=x=>{x.preventDefault();const S={...r,description:r.description||void 0,extendedDescription:r.extendedDescription||void 0,notes:r.notes||void 0,dueDate:r.dueDate||void 0,scheduledDate:r.scheduledDate||void 0,size:r.size||void 0};e(S)},m=QIe[r.area],g=x=>{s({...r,title:x.title||r.title,description:x.description||r.description,area:x.area||r.area,subCategory:x.subCategory||r.subCategory,priority:x.priority||r.priority,dueDate:x.dueDate||r.dueDate,scheduledDate:x.scheduledDate||r.scheduledDate,size:x.size??r.size})},b=(x,S)=>{s({...r,area:x,subCategory:S})},w=x=>{s({...r,size:x})};return c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("button",{type:"button",onClick:()=>i(!a),className:"flex items-center gap-2 text-sm text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:16}),c.jsx("span",{children:"AI Assist"}),a?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),a&&c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"button",onClick:()=>u("parse"),className:`px-3 py-1 text-sm rounded-full transition ${o==="parse"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Smart Parse"}),c.jsx("button",{type:"button",onClick:()=>u("categorize"),className:`px-3 py-1 text-sm rounded-full transition ${o==="categorize"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Auto-Category"}),c.jsx("button",{type:"button",onClick:()=>u("estimate"),className:`px-3 py-1 text-sm rounded-full transition ${o==="estimate"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Estimate Effort"})]}),c.jsx(LV,{mode:o,onClose:()=>i(!1),onApplyParsed:g,onApplyCategory:b,onApplyEffort:w,title:r.title,description:r.description})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),c.jsx("input",{type:"text",required:!0,value:r.title,onChange:x=>s({...r,title:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),c.jsx("textarea",{value:r.description,onChange:x=>s({...r,description:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Area *"}),c.jsx("select",{required:!0,value:r.area,onChange:x=>s({...r,area:x.target.value,subCategory:void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:WIe.map(x=>c.jsx("option",{value:x,children:x},x))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-Category"}),c.jsxs("select",{value:r.subCategory||"",onChange:x=>s({...r,subCategory:x.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"None"}),m.map(x=>c.jsx("option",{value:x,children:x},x))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),c.jsx("select",{value:r.priority,onChange:x=>s({...r,priority:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:JIe.map(x=>c.jsx("option",{value:x,children:x},x))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),c.jsx("select",{value:r.status,onChange:x=>s({...r,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:YIe.map(x=>c.jsx("option",{value:x,children:x},x))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),c.jsx("input",{type:"date",value:r.dueDate,onChange:x=>s({...r,dueDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Scheduled Date"}),c.jsx("input",{type:"date",value:r.scheduledDate,onChange:x=>s({...r,scheduledDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Size (Story Points / Hours)"}),c.jsx("input",{type:"number",min:"0",step:"0.5",value:r.size||"",onChange:x=>s({...r,size:x.target.value?parseFloat(x.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 2.5"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),c.jsx("textarea",{value:r.notes,onChange:x=>s({...r,notes:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:n,children:n?"Creating...":"Create Task"})]})]})}function Pp({isOpen:e,onClose:t,title:n,entities:r,selectedIds:s,onSelectionChange:a,onSave:i,entityType:o}){const[u,h]=A.useState(""),f=r.filter(b=>b.title.toLowerCase().includes(u.toLowerCase())),m=b=>{s.includes(b)?a(s.filter(w=>w!==b)):a([...s,b])},g=()=>{i(),t()};return c.jsx(Un,{isOpen:e,onClose:t,title:n,className:"max-w-2xl",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:u,onChange:b=>h(b.target.value),placeholder:"Search...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.length>0&&c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Selected (",s.length,")"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(b=>{const w=r.find(x=>x.id===b);return w?c.jsx(vs,{id:b,label:w.title,type:o,area:w.area,onRemove:()=>m(b),size:"sm"},b):null})})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md",children:f.length===0?c.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No entities found"}):c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(b=>{const w=s.includes(b.id);return c.jsx("button",{type:"button",onClick:()=>m(b.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${w?"bg-blue-50 dark:bg-blue-900/20":""}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:b.title}),c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"capitalize",children:b.type}),c.jsx("span",{children:""}),c.jsx("span",{children:b.area}),c.jsx("span",{children:""}),c.jsx("span",{className:"capitalize",children:b.status})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx("input",{type:"checkbox",checked:w,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})})]})},b.id)})})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{onClick:t,variant:"secondary",children:"Cancel"}),c.jsx(Ee,{onClick:g,variant:"primary",children:"Save Selection"})]})]})})}const eOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],tOe=["P1","P2","P3","P4"],nOe=["NotStarted","InProgress","Blocked","OnHold","Done","Cancelled"],rOe={Health:["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise"],Wealth:["Income","Expenses","Investments","Debt","NetWorth"],Love:["Romantic","Family","Friends","Social"],Happiness:["Joy","Gratitude","Purpose","Peace"],Operations:["Productivity","Organization","Systems","Habits"],DayJob:["Career","Skills","Projects","Performance"]};function sOe({task:e,isOpen:t,onClose:n,onSave:r,isLoading:s,dependencies:a,blockedBy:i,linkedProjects:o,linkedGoals:u,availableTasks:h,availableProjects:f,availableGoals:m,onDependencyAdd:g,onDependencyRemove:b,onProjectLink:w,onProjectUnlink:x,onGoalLink:S,onGoalUnlink:k,onCreateSubtasks:C}){const[T,P]=A.useState({title:e.title,description:e.description||"",extendedDescription:e.extendedDescription||"",area:e.area,subCategory:e.subCategory||void 0,priority:e.priority,status:e.status,size:e.size||void 0,dueDate:e.dueDate||"",scheduledDate:e.scheduledDate||"",notes:e.notes||""}),[D,R]=A.useState(!1),[U,j]=A.useState(!1),[se,B]=A.useState(!1),[ee,ie]=A.useState([]),[_e,G]=A.useState([]),[H,L]=A.useState([]),[Z,W]=A.useState(!1),[de,$]=A.useState("breakdown"),F=Zr.isConfigured();A.useEffect(()=>{P({title:e.title,description:e.description||"",extendedDescription:e.extendedDescription||"",area:e.area,subCategory:e.subCategory||void 0,priority:e.priority,status:e.status,size:e.size||void 0,dueDate:e.dueDate||"",scheduledDate:e.scheduledDate||"",notes:e.notes||""}),ie(a.map(z=>z.id)),G(o.map(z=>z.id)),L(u.map(z=>z.id))},[e,a,o,u]);const Q=z=>{z.preventDefault();const Ne={...T,description:T.description||void 0,extendedDescription:T.extendedDescription||void 0,notes:T.notes||void 0,dueDate:T.dueDate||void 0,scheduledDate:T.scheduledDate||void 0,size:T.size||void 0};r(e.id,Ne)},O=()=>{const z=new Set(a.map(je=>je.id)),Ne=new Set(ee);z.forEach(je=>{Ne.has(je)||b(e.id,je)}),Ne.forEach(je=>{z.has(je)||g(e.id,je)})},V=()=>{const z=new Set(o.map(je=>je.id)),Ne=new Set(_e);z.forEach(je=>{Ne.has(je)||x(e.id,je)}),Ne.forEach(je=>{z.has(je)||w(e.id,je)})},he=()=>{const z=new Set(u.map(je=>je.id)),Ne=new Set(H);z.forEach(je=>{Ne.has(je)||k(e.id,je)}),Ne.forEach(je=>{z.has(je)||S(e.id,je)})},I=z=>{P({...T,priority:z})},N=z=>{P({...T,size:z})},ne=z=>{C?.(z)},K=z=>{z.forEach(Ne=>{ee.includes(Ne)||g(e.id,Ne)}),ie([...new Set([...ee,...z])])},re=rOe[T.area||e.area],be=h.filter(z=>z.id!==e.id).map(z=>({id:z.id,title:z.title,type:"task",area:z.area,status:z.status}));return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:n}),c.jsxs("div",{className:"fixed right-0 top-0 bottom-0 w-full max-w-3xl bg-white dark:bg-gray-800 shadow-2xl z-50 transform transition-transform overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between z-10",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Task"}),c.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:c.jsx(cn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),c.jsxs("form",{onSubmit:Q,className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),c.jsx("input",{type:"text",required:!0,value:T.title,onChange:z=>P({...T,title:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),c.jsx("textarea",{value:T.description,onChange:z=>P({...T,description:z.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Area *"}),c.jsx("select",{required:!0,value:T.area,onChange:z=>P({...T,area:z.target.value,subCategory:void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:eOe.map(z=>c.jsx("option",{value:z,children:z},z))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-Category"}),c.jsxs("select",{value:T.subCategory||"",onChange:z=>P({...T,subCategory:z.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"None"}),re.map(z=>c.jsx("option",{value:z,children:z},z))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),c.jsx("select",{value:T.priority,onChange:z=>P({...T,priority:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:tOe.map(z=>c.jsx("option",{value:z,children:z},z))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),c.jsx("select",{value:T.status,onChange:z=>P({...T,status:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:nOe.map(z=>c.jsx("option",{value:z,children:z},z))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),c.jsx("input",{type:"date",value:T.dueDate,onChange:z=>P({...T,dueDate:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Size (Story Points)"}),c.jsx("input",{type:"number",min:"0",step:"0.5",value:T.size||"",onChange:z=>P({...T,size:z.target.value?parseFloat(z.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),F&&c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[c.jsxs("button",{type:"button",onClick:()=>W(!Z),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Tools"}),Z?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),Z&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",onClick:()=>$("breakdown"),className:`px-3 py-1.5 text-sm rounded-full transition ${de==="breakdown"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Break Down"}),c.jsx("button",{type:"button",onClick:()=>$("priority"),className:`px-3 py-1.5 text-sm rounded-full transition ${de==="priority"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Priority Advisor"}),c.jsx("button",{type:"button",onClick:()=>$("estimate"),className:`px-3 py-1.5 text-sm rounded-full transition ${de==="estimate"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Estimate Effort"}),c.jsx("button",{type:"button",onClick:()=>$("dependencies"),className:`px-3 py-1.5 text-sm rounded-full transition ${de==="dependencies"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Find Dependencies"})]}),c.jsx(LV,{mode:de,onClose:()=>W(!1),onApplyPriority:I,onApplyEffort:N,onApplyBreakdown:ne,onApplyDependencies:K,currentTask:e,allTasks:h})]})]}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(k6,{className:"w-5 h-5"}),"Dependencies"]}),c.jsxs("div",{className:"space-y-3",children:[i.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Blocked By (",i.length,")"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(z=>c.jsx(ux,{type:"blocked",count:1},z.id))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center justify-between",children:[c.jsxs("span",{children:["Depends On (",a.length,")"]}),c.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>R(!0),children:"Manage Dependencies"})]}),a.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(z=>c.jsx(vs,{id:z.id,label:z.title,type:"task",area:z.area,size:"sm"},z.id))})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(C6,{className:"w-5 h-5"}),"Relationships"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center justify-between",children:[c.jsxs("span",{children:["Projects (",o.length,")"]}),c.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>j(!0),children:"Link Projects"})]}),o.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(z=>c.jsx(vs,{id:z.id,label:z.title,type:"project",area:z.area,size:"sm"},z.id))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center justify-between",children:[c.jsxs("span",{children:["Goals (",u.length,")"]}),c.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>B(!0),children:"Link Goals"})]}),u.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(z=>c.jsx(vs,{id:z.id,label:z.title,type:"goal",area:z.area,size:"sm"},z.id))})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:s,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:s,children:s?"Saving...":"Save Changes"})]})]})]}),c.jsx(Pp,{isOpen:D,onClose:()=>R(!1),title:"Manage Dependencies",entities:be,selectedIds:ee,onSelectionChange:ie,onSave:O,entityType:"task"}),c.jsx(Pp,{isOpen:U,onClose:()=>j(!1),title:"Link to Projects",entities:f,selectedIds:_e,onSelectionChange:G,onSave:V,entityType:"project"}),c.jsx(Pp,{isOpen:se,onClose:()=>B(!1),title:"Link to Goals",entities:m,selectedIds:H,onSelectionChange:L,onSave:he,entityType:"goal"})]}):null}const aOe=["NotStarted","InProgress","Blocked","OnHold"],iOe={NotStarted:"Not Started",InProgress:"In Progress",Blocked:"Blocked",OnHold:"On Hold",Done:"Done",Cancelled:"Cancelled"},oOe={NotStarted:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",InProgress:"bg-blue-500 text-white",Blocked:"bg-red-500 text-white",OnHold:"bg-yellow-500 text-white",Done:"bg-green-500 text-white",Cancelled:"bg-gray-400 text-white"};function lOe({tasks:e,onTaskUpdate:t,onTaskEdit:n,onTaskCreate:r}){const[s,a]=A.useState(null),[i,o]=A.useState(null),u=x=>e.filter(S=>S.status===x),h=x=>u(x).reduce((k,C)=>k+(C.size||0),0),f=(x,S)=>{a(S),x.dataTransfer.effectAllowed="move"},m=(x,S)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",o(S)},g=()=>{o(null)},b=(x,S)=>{x.preventDefault(),s&&s.status!==S&&t(s.id,{status:S}),a(null),o(null)},w=()=>{a(null),o(null)};return c.jsx("div",{className:"h-[calc(100vh-200px)] bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800 px-6 py-6 overflow-x-auto overflow-y-hidden",children:c.jsx("div",{className:"flex gap-4 h-full min-w-max",children:aOe.map(x=>{const S=u(x),k=h(x),C=i===x;return c.jsxs("div",{className:"flex-shrink-0 w-80 flex flex-col",onDragOver:T=>m(T,x),onDragLeave:g,onDrop:T=>b(T,x),children:[c.jsxs("div",{className:`${oOe[x]} px-4 py-3 rounded-t-lg shadow-sm`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("h3",{className:"font-bold text-sm uppercase tracking-wide",children:iOe[x]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>r(x),className:"p-1.5 hover:bg-white/20 rounded transition-colors",title:"Add task",children:c.jsx(Ca,{className:"w-4 h-4"})}),c.jsx("button",{className:"p-1.5 hover:bg-white/20 rounded transition-colors",title:"Column options",children:c.jsx($X,{className:"w-4 h-4"})})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[c.jsxs("span",{children:[S.length," ",S.length===1?"task":"tasks"]}),k>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("span",{children:[k," pts"]})]})]})]}),c.jsx("div",{className:`flex-1 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg p-3 space-y-2.5 overflow-y-auto shadow-sm transition-colors ${C?"ring-2 ring-blue-400 dark:ring-blue-500 bg-blue-50 dark:bg-blue-900/20":""}`,children:S.length===0?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500 text-sm",children:C?c.jsx("span",{className:"font-medium",children:"Drop here"}):c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"No tasks"}),c.jsx("button",{onClick:()=>r(x),className:"mt-2 text-blue-600 dark:text-blue-400 hover:underline text-xs",children:"+ Add a task"})]})})}):S.map(T=>c.jsxs("div",{draggable:!0,onDragStart:P=>f(P,T),onDragEnd:w,className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 cursor-grab active:cursor-grabbing hover:shadow-md transition-all group ${s?.id===T.id?"opacity-40 rotate-2 scale-95":""}`,children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2.5",children:[c.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[c.jsx(lr,{priority:T.priority,size:"sm"}),c.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-white line-clamp-2 leading-snug",children:T.title})]}),c.jsx("button",{onClick:P=>{P.stopPropagation(),n(T)},className:"flex-shrink-0 p-1.5 opacity-0 group-hover:opacity-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-all",title:"Edit task",children:c.jsx(A6,{className:"w-3.5 h-3.5 text-gray-600 dark:text-gray-400"})})]}),T.description&&c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3 line-clamp-2 leading-relaxed",children:T.description}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(Yn,{area:T.area,size:"sm"}),T.size&&T.size>0&&c.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded font-medium",children:[T.size," pts"]}),T.dueDate&&c.jsx("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded font-medium",children:new Date(T.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]},T.id))})]},x)})})})}function cOe({tasks:e,onTaskClick:t}){const[n,r]=A.useState(new Date),s=()=>{const C=n.getFullYear(),T=n.getMonth(),P=new Date(C,T,1),R=new Date(C,T+1,0).getDate(),U=P.getDay();return{year:C,month:T,daysInMonth:R,startingDayOfWeek:U}},a=C=>{const T=C.toISOString().split("T")[0];return e.filter(P=>P.dueDate?P.dueDate.split("T")[0]===T:!1)},i=C=>{const T=new Date(n);C==="prev"?T.setMonth(T.getMonth()-1):T.setMonth(T.getMonth()+1),r(T)},o=()=>{r(new Date)},{year:u,month:h,daysInMonth:f,startingDayOfWeek:m}=s(),g=n.toLocaleDateString("en-US",{month:"long",year:"numeric"}),b=new Date,w=b.getMonth()===h&&b.getFullYear()===u,x=[];for(let C=0;C<m;C++)x.push(null);for(let C=1;C<=f;C++)x.push(C);const S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=e.filter(C=>C.dueDate).length;return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:c.jsx(Dn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k," ",k===1?"task":"tasks"," scheduled"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ee,{variant:"secondary",size:"sm",onClick:o,children:"Today"}),c.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[c.jsx("button",{onClick:()=>i("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:c.jsx(w6,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),c.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),c.jsx("button",{onClick:()=>i("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:c.jsx(ym,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})]}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[S.map(C=>c.jsx("div",{className:"text-center font-bold text-xs uppercase tracking-wider text-gray-600 dark:text-gray-400 py-3",children:C},C)),x.map((C,T)=>{if(C===null)return c.jsx("div",{className:"aspect-square"},`empty-${T}`);const P=new Date(u,h,C),D=w&&C===b.getDate(),R=a(P),U=R.length>0;return c.jsx("div",{className:`aspect-square border-2 rounded-lg p-2 transition-all ${D?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":U?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-sm":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"}`,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:`text-sm font-bold mb-1 ${D?"text-blue-600 dark:text-blue-400":U?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-500"}`,children:C}),c.jsxs("div",{className:"flex-1 space-y-1 overflow-hidden",children:[R.slice(0,2).map(j=>c.jsx("button",{onClick:()=>t(j),className:"w-full text-left px-1.5 py-1 rounded text-[10px] bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 hover:shadow-sm hover:border-blue-400 dark:hover:border-blue-500 transition-all group",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(lr,{priority:j.priority,size:"sm"}),c.jsx("span",{className:"truncate text-gray-900 dark:text-white font-semibold group-hover:text-blue-600 dark:group-hover:text-blue-400",children:j.title})]})},j.id)),R.length>2&&c.jsxs("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 pl-1.5 font-medium",children:["+",R.length-2," more"]})]})]})},C)})]})}),k===0&&c.jsxs("div",{className:"px-6 py-8 text-center border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Dn,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No tasks with due dates. Add due dates to see them on the calendar."})]})]})}function uOe({tasks:e,dependencies:t,onTaskClick:n,className:r}){const s=A.useRef(null),[a,i]=A.useState([]),[o,u]=A.useState([]),[h,f]=A.useState(null),[m,g]=A.useState(null),b=180,w=60,x=120,S=40;A.useEffect(()=>{if(e.length===0)return;const R=new Map(e.map(H=>[H.id,H])),U=new Map;t.forEach(H=>{U.has(H.taskId)||U.set(H.taskId,[]),U.get(H.taskId).push(H.dependsOnTaskId)});const j=new Set,se=new Map;function B(H){if(se.has(H))return se.get(H);if(j.has(H))return 0;j.add(H);const L=U.get(H)||[];if(L.length===0)return se.set(H,0),0;const W=Math.max(...L.map(de=>B(de)))+1;return se.set(H,W),W}e.forEach(H=>{se.has(H.id)||B(H.id)});const ee=new Map;se.forEach((H,L)=>{ee.has(H)||ee.set(H,[]),ee.get(H).push(L)});const ie=[];ee.forEach((H,L)=>{const Z=L*x+50,W=50;H.forEach((de,$)=>{const F=R.get(de);F&&ie.push({id:de,task:F,x:W+$*(b+S),y:Z,level:L})})});const _e=new Map(ie.map(H=>[H.id,H])),G=[];t.forEach(H=>{const L=_e.get(H.taskId),Z=_e.get(H.dependsOnTaskId);L&&Z&&G.push({from:H.taskId,to:H.dependsOnTaskId,fromNode:L,toNode:Z})}),i(ie),u(G)},[e,t]);const k=R=>{switch(R){case"Done":return"fill-green-500 dark:fill-green-600";case"InProgress":return"fill-blue-500 dark:fill-blue-600";case"Blocked":return"fill-red-500 dark:fill-red-600";case"OnHold":return"fill-yellow-500 dark:fill-yellow-600";default:return"fill-gray-400 dark:fill-gray-600"}},C=R=>{switch(R){case"Done":return"stroke-green-600 dark:stroke-green-700";case"InProgress":return"stroke-blue-600 dark:stroke-blue-700";case"Blocked":return"stroke-red-600 dark:stroke-red-700";case"OnHold":return"stroke-yellow-600 dark:stroke-yellow-700";default:return"stroke-gray-500 dark:stroke-gray-700"}},T=R=>{f(R),n&&n(R)};if(e.length===0)return c.jsx("div",{className:Sc("flex items-center justify-center h-96 bg-gray-50 dark:bg-gray-800 rounded-lg",r),children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks to display"})});if(t.length===0)return c.jsx("div",{className:Sc("flex items-center justify-center h-96 bg-gray-50 dark:bg-gray-800 rounded-lg",r),children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No dependencies to visualize"})});const P=Math.max(...a.map(R=>R.x+b))+50,D=Math.max(...a.map(R=>R.y+w))+50;return c.jsxs("div",{className:Sc("bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-auto",r),children:[c.jsxs("svg",{ref:s,viewBox:`0 0 ${P} ${D}`,className:"w-full h-full min-h-96",style:{maxHeight:"600px"},children:[c.jsx("defs",{children:c.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",className:"fill-gray-400 dark:fill-gray-600",children:c.jsx("polygon",{points:"0 0, 10 3, 0 6"})})}),o.map((R,U)=>{const j=R.fromNode.x+b/2,se=R.fromNode.y,B=R.toNode.x+b/2,ee=R.toNode.y+w,ie=h===R.from||h===R.to;return c.jsx("line",{x1:j,y1:se,x2:B,y2:ee,className:Sc("stroke-2 transition-all",ie?"stroke-blue-500 dark:stroke-blue-400 stroke-[3]":"stroke-gray-300 dark:stroke-gray-600"),markerEnd:"url(#arrowhead)"},`edge-${U}`)}),a.map(R=>{const U=h===R.id,j=m===R.id;return c.jsxs("g",{transform:`translate(${R.x}, ${R.y})`,onClick:()=>T(R.id),onMouseEnter:()=>g(R.id),onMouseLeave:()=>g(null),className:"cursor-pointer",children:[c.jsx("rect",{width:b,height:w,rx:"8",className:Sc("transition-all",k(R.task.status),C(R.task.status),"stroke-2",U&&"stroke-[4]",j&&"filter brightness-110"),opacity:U||j?1:.9}),c.jsx("text",{x:b/2,y:w/2-5,textAnchor:"middle",className:"fill-white text-sm font-semibold pointer-events-none",style:{fontSize:"14px"},children:R.task.title.length>20?`${R.task.title.substring(0,20)}...`:R.task.title}),c.jsxs("text",{x:b/2,y:w/2+12,textAnchor:"middle",className:"fill-white text-xs pointer-events-none opacity-90",style:{fontSize:"11px"},children:[R.task.status,"  ",R.task.priority]})]},R.id)})]}),h&&c.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Selected Task"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.find(R=>R.id===h)?.task.title})]})]})}const SS="gs_ai_suggestions",dOe=48;class hOe{getSuggestions(){const t=localStorage.getItem(SS);if(!t)return[];try{return JSON.parse(t)}catch{return[]}}saveSuggestions(t){localStorage.setItem(SS,JSON.stringify(t))}generateId(){return`sug-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}isDismissalExpired(t){const r=new Date(t).getTime()+dOe*60*60*1e3;return Date.now()>r}addSuggestion(t){const n=this.getSuggestions(),r=n.find(a=>a.type===t.type&&a.entityType===t.entityType&&a.entityId===t.entityId&&a.title===t.title);if(r)return r.dismissedAt&&this.isDismissalExpired(r.dismissedAt)&&(r.dismissedAt=null,r.createdAt=new Date().toISOString(),this.saveSuggestions(n)),r;const s={...t,id:this.generateId(),createdAt:new Date().toISOString(),dismissedAt:null,expiresAt:null};return n.push(s),this.saveSuggestions(n),s}dismissSuggestion(t){const n=this.getSuggestions(),r=n.find(s=>s.id===t);r&&(r.dismissedAt=new Date().toISOString(),this.saveSuggestions(n))}removeSuggestion(t){const n=this.getSuggestions().filter(r=>r.id!==t);this.saveSuggestions(n)}getActiveSuggestions(t,n){return this.getSuggestions().filter(s=>!(s.dismissedAt&&!this.isDismissalExpired(s.dismissedAt)||t!==void 0&&s.entityType!==t||n!==void 0&&s.entityId!==n))}getGlobalSuggestions(){return this.getActiveSuggestions(null)}getTaskSuggestions(t){return this.getActiveSuggestions("task",t)}getProjectSuggestions(t){return this.getActiveSuggestions("project",t)}getAllTaskSuggestions(){return this.getActiveSuggestions("task")}getAllProjectSuggestions(){return this.getActiveSuggestions("project")}clearExpiredDismissals(){const t=this.getSuggestions();let n=!1;t.forEach(r=>{r.dismissedAt&&this.isDismissalExpired(r.dismissedAt)&&(r.dismissedAt=null,n=!0)}),n&&this.saveSuggestions(t)}clearAllSuggestions(){localStorage.removeItem(SS)}getSuggestionCount(){const t=this.getSuggestions(),n=this.getActiveSuggestions().length,r=t.filter(s=>s.dismissedAt&&!this.isDismissalExpired(s.dismissedAt)).length;return{total:t.length,active:n,dismissed:r}}}const mc=new hOe;function zV({entityType:e,entityId:t,onRefresh:n,onActionClick:r}){const[s,a]=A.useState([]),[i,o]=A.useState(!1),[u,h]=A.useState(!1),f=Zr.isConfigured();A.useEffect(()=>{m()},[e,t]);const m=()=>{mc.clearExpiredDismissals();let x;e==="task"&&t?x=mc.getTaskSuggestions(t):e==="project"&&t?x=mc.getProjectSuggestions(t):e==="task"?x=mc.getAllTaskSuggestions():e==="project"?x=mc.getAllProjectSuggestions():x=mc.getGlobalSuggestions(),a(x)},g=x=>{mc.dismissSuggestion(x),a(s.filter(S=>S.id!==x))},b=async()=>{if(n){o(!0);try{await n(),m()}finally{o(!1)}}};if(!f||s.length===0)return null;const w=u?s:s.slice(0,2);return c.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-4 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"AI Insights"}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",s.length,")"]})]}),n&&c.jsxs("button",{onClick:b,disabled:i,className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors disabled:opacity-50",children:[c.jsx(ab,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]})]}),c.jsx("div",{className:"space-y-2",children:w.map(x=>c.jsxs("div",{className:"flex items-start justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-100 dark:border-amber-800",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x.title}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:x.description}),r&&c.jsxs("button",{onClick:()=>r(x),className:"flex items-center gap-1 mt-2 text-sm text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300",children:["View Details",c.jsx(ym,{className:"w-4 h-4"})]})]}),c.jsx("button",{onClick:()=>g(x.id),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(cn,{className:"w-4 h-4"})})]},x.id))}),s.length>2&&c.jsx("button",{onClick:()=>h(!u),className:"mt-3 text-sm text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300",children:u?"Show less":`Show ${s.length-2} more`})]})}const fOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],pOe=["NotStarted","InProgress","Blocked","OnHold","Done","Cancelled"],mOe=["P1","P2","P3","P4"];function gOe(){const[e,t]=A.useState([]),[n,r]=A.useState([]),[s,a]=A.useState(!0),[i,o]=A.useState(""),[u,h]=A.useState(),[f,m]=A.useState(),[g,b]=A.useState(),[w,x]=A.useState("kanban"),[S,k]=A.useState(!1),[C,T]=A.useState(!1),[P,D]=A.useState(),[R,U]=A.useState(!1),[j,se]=A.useState(null),[B,ee]=A.useState(!1),[ie,_e]=A.useState(null),[G,H]=A.useState([]),[L,Z]=A.useState([]),[W,de]=A.useState(new Map),[$,F]=A.useState(new Map),[Q]=A.useState(new Map),[O]=A.useState(new Map),[V,he]=A.useState([]),I=async()=>{a(!0);try{const Y=await Pr.getAll({search:i||void 0,area:u,status:f,priority:g,sortBy:"createdAt",sortOrder:"desc"});t(Y.data),r(Y.data),await N(Y.data)}catch(Y){console.error("Failed to load tasks:",Y)}finally{a(!1)}},N=async Y=>{const ye=new Map,De=new Map,Rt=[],mr=new Map(Y.map(Sr=>[Sr.id,Sr]));await Promise.all(Y.map(async Sr=>{const Bn=await Pr.getDependencies(Sr.id);if(Bn.success&&Bn.data){Rt.push(...Bn.data);const In=Bn.data.map(Bt=>Bt.dependsOnTaskId);ye.set(Sr.id,In),In.filter(Bt=>{const As=mr.get(Bt);return As&&As.status!=="Done"}).forEach(Bt=>{const As=De.get(Sr.id)||[];De.set(Sr.id,[...As,Bt])})}})),de(ye),F(De),he(Rt)},ne=async()=>{try{const Y=await Ni.getAll();Y.success&&Y.data&&H(Y.data.map(ye=>({id:ye.id,title:ye.name,type:"project",area:ye.area,status:ye.status})))}catch(Y){console.error("Failed to load projects:",Y)}},K=async()=>{try{const Y=await ji.getAll();Y.success&&Y.data&&Z(Y.data.map(ye=>({id:ye.id,title:ye.title,type:"goal",area:ye.area,status:ye.status})))}catch(Y){console.error("Failed to load goals:",Y)}};A.useEffect(()=>{I(),ne(),K()},[i,u,f,g]);const re=async Y=>{ee(!0);try{P&&(Y.status=P),await Pr.create(Y),await I(),T(!1),D(void 0)}catch(ye){console.error("Failed to create task:",ye)}finally{ee(!1)}},be=async(Y,ye)=>{ee(!0);try{await Pr.update(Y,ye),await I()}catch(De){console.error("Failed to update task:",De)}finally{ee(!1)}},z=Y=>{_e(Y)},Ne=async()=>{if(ie)try{await Pr.delete(ie.id),await I(),_e(null),U(!1)}catch(Y){console.error("Failed to delete task:",Y)}},je=Y=>{se(Y),U(!0)},ft=()=>{h(void 0),m(void 0),b(void 0)},Fe=async(Y,ye)=>{try{await Pr.addDependency(Y,ye),await N(e)}catch(De){console.error("Failed to add dependency:",De)}},Se=async(Y,ye)=>{try{await Pr.removeDependency(Y,ye),await N(e)}catch(De){console.error("Failed to remove dependency:",De)}},Xt=async(Y,ye)=>{try{await Pr.linkToProject(Y,ye)}catch(De){console.error("Failed to link project:",De)}},en=async(Y,ye)=>{try{await Pr.unlinkFromProject(Y,ye)}catch(De){console.error("Failed to unlink project:",De)}},Me=async(Y,ye)=>{try{await Pr.linkToGoal(Y,ye)}catch(De){console.error("Failed to link goal:",De)}},Jr=async(Y,ye)=>{try{await Pr.unlinkFromGoal(Y,ye)}catch(De){console.error("Failed to unlink goal:",De)}},ut=Y=>{const ye=W.get(Y)||[];return e.filter(De=>ye.includes(De.id))},Ye=Y=>{const ye=$.get(Y)||[];return e.filter(De=>ye.includes(De.id))},Je=Y=>{const ye=Q.get(Y)||[];return G.filter(De=>ye.includes(De.id))},$e=Y=>{const ye=O.get(Y)||[];return L.filter(De=>ye.includes(De.id))},te=[u,f,g].filter(Boolean).length;return c.jsxs("div",{className:"h-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Tasks"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your tasks and track progress"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>T(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Task"]})]}),c.jsxs("div",{className:"mb-4 flex items-center gap-3 flex-wrap",children:[c.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:i,onChange:Y=>o(Y.target.value),placeholder:"Search tasks...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),w==="list"&&c.jsxs(Ee,{variant:"secondary",onClick:()=>k(!S),className:"relative",children:[c.jsx(WX,{className:"w-4 h-4 mr-2"}),"Filters",te>0&&c.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full",children:te})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg p-1",children:[c.jsxs("button",{onClick:()=>x("list"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${w==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"List view",children:[c.jsx(fee,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"List"})]}),c.jsxs("button",{onClick:()=>x("kanban"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${w==="kanban"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Kanban board",children:[c.jsx(eee,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Board"})]}),c.jsxs("button",{onClick:()=>x("calendar"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${w==="calendar"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Calendar view",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Calendar"})]}),c.jsxs("button",{onClick:()=>x("graph"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${w==="graph"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Dependency graph",children:[c.jsx(Tee,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Graph"})]})]})]}),w==="list"&&S&&c.jsxs("div",{className:"mb-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Filters"}),c.jsxs("div",{className:"flex items-center gap-2",children:[te>0&&c.jsx("button",{onClick:ft,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Clear all"}),c.jsx("button",{onClick:()=>k(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:c.jsx(cn,{className:"w-4 h-4"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area"}),c.jsxs("select",{value:u||"",onChange:Y=>h(Y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Areas"}),fOe.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),c.jsxs("select",{value:f||"",onChange:Y=>m(Y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Statuses"}),pOe.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),c.jsxs("select",{value:g||"",onChange:Y=>b(Y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"All Priorities"}),mOe.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]})]})]})]}),c.jsx(zV,{entityType:"task"}),w==="list"&&c.jsx("div",{children:s?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading tasks..."})]})}):n.length===0?c.jsx(Sa,{title:"No tasks found",description:i||u||f||g?"Try adjusting your filters or search query":"Get started by creating your first task",actionLabel:"Create Task",onAction:()=>T(!0)}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Showing ",n.length," ",n.length===1?"task":"tasks"]}),n.map(Y=>c.jsx($V,{task:Y,onEdit:je,onDelete:z,dependencyCount:W.get(Y.id)?.length||0,blockedByCount:$.get(Y.id)?.length||0,blockedByTasks:Ye(Y.id),projectCount:Q.get(Y.id)?.length||0,goalCount:O.get(Y.id)?.length||0},Y.id))]})}),w==="kanban"&&c.jsx("div",{className:"-mx-12 -mb-12 -mt-4",children:c.jsx(lOe,{tasks:n,onTaskUpdate:be,onTaskEdit:je,onTaskCreate:Y=>{D(Y),T(!0)}})}),w==="calendar"&&c.jsx(cOe,{tasks:n,onTaskClick:je}),w==="graph"&&c.jsx(uOe,{tasks:n,dependencies:V,onTaskClick:Y=>{const ye=n.find(De=>De.id===Y);ye&&je(ye)}}),c.jsx(Un,{isOpen:C,onClose:()=>{T(!1),D(void 0)},title:"Create New Task",children:c.jsx(XIe,{onSubmit:re,onCancel:()=>{T(!1),D(void 0)},isLoading:B})}),j&&c.jsx(sOe,{task:j,isOpen:R,onClose:()=>{U(!1),se(null)},onSave:be,isLoading:B,availableTasks:e,availableProjects:G,availableGoals:L,dependencies:ut(j.id),blockedBy:Ye(j.id),linkedProjects:Je(j.id),linkedGoals:$e(j.id),onDependencyAdd:Fe,onDependencyRemove:Se,onProjectLink:Xt,onProjectUnlink:en,onGoalLink:Me,onGoalUnlink:Jr}),c.jsx(Un,{isOpen:!!ie,onClose:()=>_e(null),title:"Delete Task",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:['Are you sure you want to delete "',ie?.title,'"? This action cannot be undone.']}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>_e(null),children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:Ne,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}const yOe={Planning:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",Active:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",OnHold:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",Completed:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",Cancelled:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"};function bOe({project:e,onClick:t,taskCount:n=0,completedTaskCount:r=0,goalCount:s=0}){const a=n>0?Math.round(r/n*100):0,i=h=>h?new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null,o=i(e.startDate),u=i(e.endDate);return c.jsxs("button",{onClick:()=>t(e),className:"w-full bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-all hover:border-blue-300 dark:hover:border-blue-700 text-left",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsx(lr,{priority:e.priority}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white truncate mb-1",children:e.name}),c.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded-full ${yOe[e.status]}`,children:e.status})]})]}),c.jsx(wl,{progress:a,size:"lg"})]}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:e.description}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[c.jsx(Yn,{area:e.area}),e.subCategory&&c.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.subCategory})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("div",{className:"flex items-center gap-4",children:(o||u)&&c.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsx("span",{children:o&&u?`${o} - ${u}`:o||u})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[s>0&&c.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[c.jsx(_r,{className:"w-4 h-4"}),c.jsx("span",{children:s})]}),n>0&&c.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[c.jsx(kr,{className:"w-4 h-4"}),c.jsxs("span",{children:[r,"/",n]})]})]})]}),e.impact>0&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Impact Score"}),c.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[e.impact,"/10"]})]})})]})}const xOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],vOe=["P1","P2","P3","P4"],wOe=["Planning","Active","OnHold","Completed","Cancelled"],_Oe={Health:["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise"],Wealth:["Income","Expenses","Investments","Debt","NetWorth"],Love:["Romantic","Family","Friends","Social"],Happiness:["Joy","Gratitude","Purpose","Peace"],Operations:["Productivity","Organization","Systems","Habits"],DayJob:["Career","Skills","Projects","Performance"]};function kOe({onSubmit:e,onCancel:t,isLoading:n}){const[r,s]=A.useState({name:"",description:"",area:"Operations",subCategory:void 0,priority:"P3",status:"Planning",impact:5,startDate:"",endDate:"",notes:""}),a=o=>{o.preventDefault();const u={name:r.name,area:r.area,description:r.description||void 0,subCategory:r.subCategory||void 0,priority:r.priority,status:r.status,impact:r.impact,startDate:r.startDate||void 0,endDate:r.endDate||void 0,notes:r.notes||void 0};e(u)},i=_Oe[r.area];return c.jsxs("form",{onSubmit:a,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),c.jsx("input",{type:"text",required:!0,value:r.name,onChange:o=>s({...r,name:o.target.value}),placeholder:"Enter project name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),c.jsx("textarea",{value:r.description,onChange:o=>s({...r,description:o.target.value}),placeholder:"Brief description of the project",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Area *"}),c.jsx("select",{required:!0,value:r.area,onChange:o=>s({...r,area:o.target.value,subCategory:void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:xOe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-Category"}),c.jsxs("select",{value:r.subCategory||"",onChange:o=>s({...r,subCategory:o.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"None"}),i.map(o=>c.jsx("option",{value:o,children:o},o))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),c.jsx("select",{value:r.priority,onChange:o=>s({...r,priority:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:vOe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),c.jsx("select",{value:r.status,onChange:o=>s({...r,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:wOe.map(o=>c.jsx("option",{value:o,children:o},o))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Impact Score (1-10)"}),c.jsx("input",{type:"number",min:"1",max:"10",value:r.impact,onChange:o=>s({...r,impact:parseInt(o.target.value)||5}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),c.jsx("input",{type:"date",value:r.startDate,onChange:o=>s({...r,startDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),c.jsx("input",{type:"date",value:r.endDate,onChange:o=>s({...r,endDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),c.jsx("textarea",{value:r.notes,onChange:o=>s({...r,notes:o.target.value}),placeholder:"Additional notes or details",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:n,children:n?"Creating...":"Create Project"})]})]})}const SOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],TOe=["P1","P2","P3","P4"],COe=["Planning","Active","OnHold","Completed","Cancelled"],EOe={Health:["Physical","Mental","Spiritual","Nutrition","Sleep","Exercise"],Wealth:["Income","Expenses","Investments","Debt","NetWorth"],Love:["Romantic","Family","Friends","Social"],Happiness:["Joy","Gratitude","Purpose","Peace"],Operations:["Productivity","Organization","Systems","Habits"],DayJob:["Career","Skills","Projects","Performance"]};function jOe({project:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({name:e.name,description:e.description||"",area:e.area,subCategory:e.subCategory||void 0,priority:e.priority,status:e.status,impact:e.impact,startDate:e.startDate||"",endDate:e.endDate||"",notes:e.notes||""});A.useEffect(()=>{a({name:e.name,description:e.description||"",area:e.area,subCategory:e.subCategory||void 0,priority:e.priority,status:e.status,impact:e.impact,startDate:e.startDate||"",endDate:e.endDate||"",notes:e.notes||""})},[e]);const i=u=>{u.preventDefault();const h={...s,description:s.description||void 0,subCategory:s.subCategory||void 0,startDate:s.startDate||void 0,endDate:s.endDate||void 0,notes:s.notes||void 0};t(e.id,h)},o=EOe[s.area||e.area];return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),c.jsx("input",{type:"text",required:!0,value:s.name,onChange:u=>a({...s,name:u.target.value}),placeholder:"Enter project name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:u=>a({...s,description:u.target.value}),placeholder:"Brief description of the project",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Area *"}),c.jsx("select",{required:!0,value:s.area,onChange:u=>a({...s,area:u.target.value,subCategory:void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:SOe.map(u=>c.jsx("option",{value:u,children:u},u))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-Category"}),c.jsxs("select",{value:s.subCategory||"",onChange:u=>a({...s,subCategory:u.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"None"}),o.map(u=>c.jsx("option",{value:u,children:u},u))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),c.jsx("select",{value:s.priority,onChange:u=>a({...s,priority:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:TOe.map(u=>c.jsx("option",{value:u,children:u},u))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),c.jsx("select",{value:s.status,onChange:u=>a({...s,status:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:COe.map(u=>c.jsx("option",{value:u,children:u},u))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Impact Score (1-10)"}),c.jsx("input",{type:"number",min:"1",max:"10",value:s.impact,onChange:u=>a({...s,impact:parseInt(u.target.value)||5}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),c.jsx("input",{type:"date",value:s.startDate,onChange:u=>a({...s,startDate:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),c.jsx("input",{type:"date",value:s.endDate,onChange:u=>a({...s,endDate:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:u=>a({...s,notes:u.target.value}),placeholder:"Additional notes or details",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Saving...":"Save Changes"})]})]})}function NOe({mode:e,project:t,tasks:n,onClose:r,onCreateTasks:s}){const[a,i]=A.useState(!1),[o,u]=A.useState(null),[h,f]=A.useState(null),[m,g]=A.useState(null),[b,w]=A.useState(null),x=Zr.isConfigured(),S=async()=>{i(!0),u(null);const j=await go.analyzeProjectHealth(t,n);j.success&&j.data?f(j.data):u(j.error||"Failed to analyze project health"),i(!1)},k=async()=>{i(!0),u(null);const j=await go.generateProjectTasks(t,n);j.success&&j.data?g(j.data):u(j.error||"Failed to generate tasks"),i(!1)},C=async()=>{i(!0),u(null);const j=await go.identifyProjectRisks(t,n);j.success&&j.data?w(j.data):u(j.error||"Failed to identify risks"),i(!1)},T=()=>{switch(e){case"health":return"Project Health Analysis";case"generate":return"Generate Tasks";case"risks":return"Risk Assessment"}},P=()=>{switch(e){case"health":return"AI will analyze your project health based on task progress and status.";case"generate":return"AI will suggest additional tasks needed to complete this project.";case"risks":return"AI will identify potential risks and blockers for this project."}},D=()=>{switch(e){case"health":S();break;case"generate":k();break;case"risks":C();break}},R=j=>j>=70?"text-green-600 dark:text-green-400":j>=40?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400",U=j=>{switch(j){case"high":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800";case"medium":return"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800";default:return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800"}};return x?c.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:T()})]}),c.jsx("button",{onClick:r,className:"p-1 hover:bg-amber-200/50 dark:hover:bg-amber-800/50 rounded transition-colors",children:c.jsx(cn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:P()}),!a&&!o&&!h&&!m&&!b&&c.jsxs(Ee,{onClick:D,variant:"primary",size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[c.jsx(ob,{className:"w-4 h-4 mr-1"}),"Analyze"]}),a&&c.jsx("div",{className:"py-4",children:c.jsx(Bl,{message:"Analyzing project..."})}),o&&c.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})}),h&&c.jsxs("div",{className:"mt-4 space-y-4",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Health Score"}),c.jsxs("span",{className:`text-3xl font-bold ${R(h.healthScore)}`,children:[h.healthScore,"%"]})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.summary})]}),h.issues.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Issues"}),h.issues.map(j=>c.jsx("div",{className:`p-3 rounded-lg border ${j.severity==="critical"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":j.severity==="warning"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:c.jsxs("div",{className:"flex items-start gap-2",children:[j.severity==="critical"?c.jsx(Qs,{className:"w-4 h-4 text-red-600 mt-0.5"}):j.severity==="warning"?c.jsx(qc,{className:"w-4 h-4 text-amber-600 mt-0.5"}):c.jsx(jX,{className:"w-4 h-4 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.title}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.content})]})]})},j.id))]}),h.recommendations.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Recommendations"}),c.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1",children:h.recommendations.map((j,se)=>c.jsx("li",{children:j},se))})]})]}),m&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Suggested Tasks"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:m.reasoning}),c.jsx("div",{className:"space-y-2",children:m.suggestedTasks.map((j,se)=>c.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:j.title}),j.description&&c.jsx("p",{className:"text-sm text-gray-500",children:j.description}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[j.priority," | ",j.size?`${j.size}h`:"Size TBD"]})]},se))}),c.jsx("div",{className:"flex gap-2 mt-4",children:c.jsxs(Ee,{onClick:()=>{s?.(m.suggestedTasks),r()},variant:"primary",size:"sm",children:[c.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Create All Tasks"]})})]}),b&&c.jsxs("div",{className:"mt-4 space-y-4",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Overall Risk Level"}),c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${U(b.overallRiskLevel)}`,children:b.overallRiskLevel.toUpperCase()})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.summary})]}),b.risks.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Identified Risks"}),b.risks.map((j,se)=>c.jsxs("div",{className:`p-3 rounded-lg border ${U(j.severity)}`,children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("p",{className:"text-sm font-medium",children:j.description}),c.jsx("span",{className:"text-xs uppercase",children:j.severity})]}),c.jsxs("p",{className:"text-sm mt-1 opacity-80",children:[c.jsx("strong",{children:"Mitigation:"})," ",j.mitigation]})]},se))]})]})]}):c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Go to Settings to configure your LLM connection."})]})]}),c.jsx("button",{onClick:r,className:"mt-3 text-sm text-amber-700 dark:text-amber-300 hover:underline",children:"Close"})]})}const AOe=["Planning","Active","OnHold","Completed","Cancelled"];function IOe(){const[e,t]=A.useState([]),[n,r]=A.useState(!0),[s,a]=A.useState(""),[i,o]=A.useState({}),[u,h]=A.useState(!1),[f,m]=A.useState(null),[g,b]=A.useState(!1),[w,x]=A.useState(!1),[S,k]=A.useState(null),[C,T]=A.useState(new Map),[P]=A.useState(new Map),[D,R]=A.useState([]),[U,j]=A.useState(!1),[se,B]=A.useState([]),[ee,ie]=A.useState(!1),[_e,G]=A.useState("health"),H=Zr.isConfigured(),L=async()=>{r(!0);try{const re=await Ni.getAll();re.success&&re.data&&t(re.data)}catch(re){console.error("Failed to load projects:",re)}finally{r(!1)}},Z=async re=>{try{const be=await Pr.getByProject(re);be.success&&be.data&&T(z=>new Map(z).set(re,be.data))}catch(be){console.error("Failed to load project tasks:",be)}},W=async()=>{try{const re=await ji.getAll();if(re.success&&re.data){const be=re.data.map(z=>({id:z.id,title:z.title,type:"goal",area:z.area,status:z.status}));R(be)}}catch(re){console.error("Failed to load goals:",re)}};A.useEffect(()=>{L(),W()},[]),A.useEffect(()=>{f&&Z(f.id)},[f]);const de=async re=>{x(!0);try{const be=await Ni.create(re);be.success&&be.data&&(t([be.data,...e]),h(!1))}catch(be){console.error("Failed to create project:",be)}finally{x(!1)}},$=async(re,be)=>{x(!0);try{const z=await Ni.update(re,be);if(z.success&&z.data){const Ne=e.map(je=>je.id===re?z.data:je);t(Ne),f&&f.id===re&&m(z.data),b(!1)}}catch(z){console.error("Failed to update project:",z)}finally{x(!1)}},F=async()=>{if(S){x(!0);try{if((await Ni.delete(S.id)).success){const be=e.filter(z=>z.id!==S.id);t(be),f&&f.id===S.id&&m(null),k(null)}}catch(re){console.error("Failed to delete project:",re)}finally{x(!1)}}},Q=re=>{m(re)},O=()=>{m(null)},V=async(re,be)=>{console.log("Goal linking not yet implemented")},he=async(re,be)=>{console.log("Goal unlinking not yet implemented")},I=()=>{if(!f)return;const re=new Set(P.get(f.id)?.map(z=>z.id)||[]),be=new Set(se);re.forEach(z=>{be.has(z)||he(f.id)}),be.forEach(z=>{re.has(z)||V(f.id)})},N=async re=>{if(f){for(const be of re){const z={...be,area:f.area};await Pr.create(z)}Z(f.id)}},ne=e.filter(re=>{const be=!s||re.name.toLowerCase().includes(s.toLowerCase())||re.description&&re.description.toLowerCase().includes(s.toLowerCase()),z=!i.area||re.area===i.area,Ne=!i.status||re.status===i.status,je=!i.priority||re.priority===i.priority;return be&&z&&Ne&&je}),K=re=>{const be=C.get(re)||[],z=be.filter(je=>je.status==="Done").length,Ne=P.get(re)||[];return{taskCount:be.length,completedTaskCount:z,goalCount:Ne.length}};if(f){const re=C.get(f.id)||[],be=re.filter(je=>je.status==="Done").length,z=re.length>0?Math.round(be/re.length*100):0,Ne=P.get(f.id)||[];return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(eh,{className:"w-5 h-5"}),"Back to Projects"]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 mb-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx(lr,{priority:f.priority,size:"lg"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:f.name})]}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Yn,{area:f.area}),f.subCategory&&c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.subCategory}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.status==="Completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":f.status==="Active"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":f.status==="OnHold"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:f.status})]}),f.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:f.description})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(wl,{progress:z,size:"lg",showLabel:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>b(!0),children:[c.jsx(Hc,{className:"w-4 h-4 mr-1"}),"Edit"]}),c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>k(f),className:"hover:!bg-red-50 hover:!text-red-600",children:[c.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[f.impact>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Impact Score"}),c.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[f.impact,"/10"]})]}),f.startDate&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Start Date"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(f.startDate).toLocaleDateString()})]}),f.endDate&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Target End"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(f.endDate).toLocaleDateString()})]})]}),f.notes&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:f.notes})]}),H&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("button",{onClick:()=>ie(!ee),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Project Tools"}),ee?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),ee&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>G("health"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="health"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Health Analysis"}),c.jsx("button",{onClick:()=>G("generate"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="generate"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Generate Tasks"}),c.jsx("button",{onClick:()=>G("risks"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="risks"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Risk Assessment"})]}),c.jsx(NOe,{mode:_e,project:f,tasks:re,onClose:()=>ie(!1),onCreateTasks:N})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Di,{className:"w-5 h-5"}),"Tasks (",re.length,")"]})}),re.length===0?c.jsx(Sa,{title:"No tasks yet",description:"Add tasks to this project from the Tasks page"}):c.jsx("div",{className:"space-y-3",children:re.map(je=>c.jsx($V,{task:je,onEdit:()=>{},onDelete:()=>{}},je.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(_r,{className:"w-5 h-5"}),"Goals (",Ne.length,")"]}),c.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>{B(Ne.map(je=>je.id)),j(!0)},children:"Link Goals"})]}),Ne.length===0?c.jsx(Sa,{title:"No linked goals",description:"Link this project to strategic goals",actionLabel:"Link Goals",onAction:()=>j(!0)}):c.jsx("div",{className:"flex flex-wrap gap-2",children:Ne.map(je=>c.jsx(vs,{id:je.id,label:je.title,type:"goal",area:je.area},je.id))})]})]})]}),c.jsx(Un,{isOpen:g,onClose:()=>b(!1),title:"Edit Project",className:"max-w-2xl",children:c.jsx(jOe,{project:f,onSubmit:$,onCancel:()=>b(!1),isLoading:w})}),c.jsx(Pp,{isOpen:U,onClose:()=>j(!1),title:"Link to Goals",entities:D,selectedIds:se,onSelectionChange:B,onSave:I,entityType:"goal"})]})}return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Projects"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your projects and track progress"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>h(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Project"]})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:re=>a(re.target.value),placeholder:"Search projects...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),c.jsx(zV,{entityType:"project"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Ev,{filters:i,onFiltersChange:o,availableFilters:{statuses:AOe}})}),c.jsx("div",{className:"lg:col-span-3",children:n?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading projects..."})]})}):ne.length===0?c.jsx(Sa,{title:"No projects found",description:s||i.area||i.status||i.priority?"Try adjusting your filters or search query":"Get started by creating your first project",actionLabel:"Create Project",onAction:()=>h(!0)}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ne.map(re=>{const be=K(re.id);return c.jsx(bOe,{project:re,onClick:Q,...be},re.id)})})})]})]}),c.jsx(Un,{isOpen:u,onClose:()=>h(!1),title:"Create New Project",className:"max-w-2xl",children:c.jsx(kOe,{onSubmit:de,onCancel:()=>h(!1),isLoading:w})}),c.jsx(Un,{isOpen:!!S,onClose:()=>k(null),title:"Delete Project",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Are you sure you want to delete this project? This action cannot be undone."}),S&&c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:S.name})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>k(null),disabled:w,children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:F,disabled:w,className:"!bg-red-600 hover:!bg-red-700",children:w?"Deleting...":"Delete Project"})]})]})})]})}function h5({goal:e,onClick:t,progress:n=0}){const r=o=>{switch(o){case"Achieved":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"OnTrack":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"Active":return"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400";case"AtRisk":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400";case"Abandoned":return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},s=e.successCriteria.filter(o=>o.includes("")).length,a=e.successCriteria.length,i=a>0?Math.round(s/a*100):n;return c.jsxs("div",{onClick:()=>t(e),className:"group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 cursor-pointer",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(lr,{priority:e.priority,size:"md"}),c.jsx("div",{className:"flex flex-col gap-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_r,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),c.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:e.timeHorizon})]})})]}),c.jsx(wl,{progress:i,size:"md"})]}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-2",children:e.title}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:e.description}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Yn,{area:e.area}),e.subCategory&&c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.subCategory})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r(e.status)}`,children:e.status}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[a>0&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(kr,{className:"w-4 h-4"}),c.jsxs("span",{children:[s,"/",a," criteria"]})]}),e.targetDate&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsx("span",{children:new Date(e.targetDate).toLocaleDateString()})]})]})]})]})}const OOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],ROe=["Daily","Weekly","Monthly","Quarterly","Yearly"],POe=["P1","P2","P3","P4"],MOe=["Planning","Active","OnTrack","AtRisk","Achieved","Abandoned"];function DOe({onSubmit:e,onCancel:t,isLoading:n}){const[r,s]=A.useState({title:"",description:"",area:"Health",timeHorizon:"Quarterly",priority:"P2",status:"Planning",successCriteria:[]}),[a,i]=A.useState(""),o=f=>{f.preventDefault(),e(r)},u=()=>{a.trim()&&(s({...r,successCriteria:[...r.successCriteria||[],a.trim()]}),i(""))},h=f=>{s({...r,successCriteria:r.successCriteria?.filter((m,g)=>g!==f)})};return c.jsxs("form",{onSubmit:o,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),c.jsx("input",{type:"text",value:r.title,onChange:f=>s({...r,title:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Run a marathon",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:r.description,onChange:f=>s({...r,description:f.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your goal..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:r.area,onChange:f=>s({...r,area:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:OOe.map(f=>c.jsx("option",{value:f,children:f},f))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:r.subCategory||"",onChange:f=>s({...r,subCategory:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Horizon *"}),c.jsx("select",{value:r.timeHorizon,onChange:f=>s({...r,timeHorizon:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:ROe.map(f=>c.jsx("option",{value:f,children:f},f))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority *"}),c.jsx("select",{value:r.priority,onChange:f=>s({...r,priority:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:POe.map(f=>c.jsx("option",{value:f,children:f},f))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),c.jsx("select",{value:r.status,onChange:f=>s({...r,status:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:MOe.map(f=>c.jsx("option",{value:f,children:f},f))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Date"}),c.jsx("input",{type:"date",value:r.targetDate||"",onChange:f=>s({...r,targetDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Success Criteria"}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsx("input",{type:"text",value:a,onChange:f=>i(f.target.value),onKeyPress:f=>f.key==="Enter"&&(f.preventDefault(),u()),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a success criterion..."}),c.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:u,children:c.jsx(Ca,{className:"w-4 h-4"})})]}),r.successCriteria&&r.successCriteria.length>0&&c.jsx("div",{className:"space-y-2",children:r.successCriteria.map((f,m)=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[c.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:f}),c.jsx("button",{type:"button",onClick:()=>h(m),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:c.jsx(cn,{className:"w-4 h-4"})})]},m))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:r.notes,onChange:f=>s({...r,notes:f.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes..."})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:n,children:n?"Creating...":"Create Goal"})]})]})}const $Oe=["Health","Wealth","Love","Happiness","Operations","DayJob"],LOe=["Daily","Weekly","Monthly","Quarterly","Yearly"],zOe=["P1","P2","P3","P4"],UOe=["Planning","Active","OnTrack","AtRisk","Achieved","Abandoned"];function FOe({goal:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({title:e.title,description:e.description||"",area:e.area,subCategory:e.subCategory||void 0,timeHorizon:e.timeHorizon,priority:e.priority,status:e.status,targetDate:e.targetDate||"",successCriteria:e.successCriteria||[],notes:e.notes||""}),[i,o]=A.useState(""),u=m=>{m.preventDefault(),t(e.id,s)},h=()=>{i.trim()&&(a({...s,successCriteria:[...s.successCriteria||[],i.trim()]}),o(""))},f=m=>{a({...s,successCriteria:s.successCriteria?.filter((g,b)=>b!==m)})};return c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),c.jsx("input",{type:"text",value:s.title,onChange:m=>a({...s,title:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Run a marathon",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:m=>a({...s,description:m.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your goal..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:s.area,onChange:m=>a({...s,area:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:$Oe.map(m=>c.jsx("option",{value:m,children:m},m))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:s.subCategory||"",onChange:m=>a({...s,subCategory:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Horizon *"}),c.jsx("select",{value:s.timeHorizon,onChange:m=>a({...s,timeHorizon:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:LOe.map(m=>c.jsx("option",{value:m,children:m},m))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority *"}),c.jsx("select",{value:s.priority,onChange:m=>a({...s,priority:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:zOe.map(m=>c.jsx("option",{value:m,children:m},m))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),c.jsx("select",{value:s.status,onChange:m=>a({...s,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:UOe.map(m=>c.jsx("option",{value:m,children:m},m))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Date"}),c.jsx("input",{type:"date",value:s.targetDate||"",onChange:m=>a({...s,targetDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Success Criteria"}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsx("input",{type:"text",value:i,onChange:m=>o(m.target.value),onKeyPress:m=>m.key==="Enter"&&(m.preventDefault(),h()),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a success criterion..."}),c.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:h,children:c.jsx(Ca,{className:"w-4 h-4"})})]}),s.successCriteria&&s.successCriteria.length>0&&c.jsx("div",{className:"space-y-2",children:s.successCriteria.map((m,g)=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[c.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:m}),c.jsx("button",{type:"button",onClick:()=>f(g),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:c.jsx(cn,{className:"w-4 h-4"})})]},g))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:m=>a({...s,notes:m.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes..."})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Saving...":"Save Changes"})]})]})}function BOe({mode:e,goal:t,onClose:n,onApplyRefinement:r,onApplyCriteria:s}){const[a,i]=A.useState(!1),[o,u]=A.useState(null),[h,f]=A.useState(null),m=Zr.isConfigured(),g=async()=>{i(!0),u(null),await new Promise(x=>setTimeout(x,1500)),f(e==="refine"?{refinedTitle:`${t.title} (Enhanced)`,refinedDescription:"This is a refined version of your goal with more specific metrics and actionable steps.",reasoning:"Made the goal more specific and measurable",confidence:.85,suggestedAdjustments:["Add specific numbers","Define success criteria","Set intermediate milestones"]}:e==="criteria"?{criteria:[{criterion:"Complete 80% of related tasks",measurable:!0,suggestedMetric:"Task completion rate"},{criterion:"Achieve target metric values",measurable:!0,suggestedMetric:"Metric tracking"},{criterion:"Maintain consistent progress",measurable:!1}],reasoning:"These criteria cover all aspects of the goal",confidence:.9}:e==="metrics"?{metrics:[{name:"Weekly Progress",description:"Track weekly progress",unit:"percentage",targetValue:100,frequency:"weekly",reasoning:"Essential for tracking"},{name:"Daily Consistency",description:"Daily habit tracking",unit:"count",targetValue:7,frequency:"daily",reasoning:"Builds momentum"}],overallRationale:"These metrics provide comprehensive tracking",confidence:.88}:e==="forecast"?{probability:75,expectedDate:new Date(Date.now()+2160*60*60*1e3).toISOString(),confidenceLevel:"high",factors:{positive:["Strong initial progress","Clear success criteria","Regular tracking"],negative:["Limited time available","Multiple competing goals"]},recommendations:["Focus on high-impact tasks","Schedule dedicated time","Track metrics daily"],reasoning:"Based on current progress and historical patterns"}:{message:"AI analysis in progress..."}),i(!1)},b=()=>{switch(e){case"refine":return c.jsx(ob,{className:"w-5 h-5"});case"criteria":return c.jsx(Ks,{className:"w-5 h-5"});case"metrics":return c.jsx(_r,{className:"w-5 h-5"});case"forecast":return c.jsx(kr,{className:"w-5 h-5"});case"conflicts":return c.jsx(qc,{className:"w-5 h-5"});default:return c.jsx(Jt,{className:"w-5 h-5"})}},w=()=>{switch(e){case"refine":return"Refine Goal";case"criteria":return"Generate Success Criteria";case"metrics":return"Suggest Metrics";case"cascade":return"Goal Cascade";case"forecast":return"Achievement Forecast";case"conflicts":return"Detect Conflicts";case"progress":return"Progress Analysis"}};return m?c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[b(),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:w()})]}),c.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Goal: ",c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.title})]}),!h&&c.jsx(Ee,{onClick:g,disabled:a,className:"w-full",children:a?"Analyzing...":"Analyze with AI"})]}),a&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Bl,{}),c.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Analyzing goal..."})]}),o&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:o})]})}),h&&e==="refine"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Refined Title"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-gray-100",children:h.refinedTitle})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Refined Description"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100",children:h.refinedDescription})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Suggested Adjustments"}),c.jsx("ul",{className:"space-y-2",children:h.suggestedAdjustments.map((x,S)=>c.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[c.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),x]},S))})]}),c.jsx(fr,{confidence:h.confidence}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ee,{onClick:()=>{r?.(h.refinedTitle,h.refinedDescription),n()},className:"flex-1",children:"Apply Refinements"}),c.jsx(Ee,{onClick:n,variant:"ghost",className:"flex-1",children:"Dismiss"})]})]}),h&&e==="criteria"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Generated Success Criteria"}),c.jsx("ul",{className:"space-y-3",children:h.criteria.map((x,S)=>c.jsx("li",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Ks,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.criterion}),x.suggestedMetric&&c.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Metric: ",x.suggestedMetric]})]})]})},S))})]}),c.jsx(fr,{confidence:h.confidence}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ee,{onClick:()=>{const x=h.criteria.map(S=>S.criterion);s?.(x),n()},className:"flex-1",children:"Apply Criteria"}),c.jsx(Ee,{onClick:n,variant:"ghost",className:"flex-1",children:"Dismiss"})]})]}),h&&e==="forecast"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:[h.probability,"%"]}),c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Probability of Achievement"})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Positive Factors"}),c.jsx("ul",{className:"space-y-1",children:h.factors.positive.map((x,S)=>c.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300 flex items-start gap-2",children:[c.jsx("span",{children:"+"}),c.jsx("span",{children:x})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Challenges"}),c.jsx("ul",{className:"space-y-1",children:h.factors.negative.map((x,S)=>c.jsxs("li",{className:"text-sm text-amber-700 dark:text-amber-300 flex items-start gap-2",children:[c.jsx("span",{children:"-"}),c.jsx("span",{children:x})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recommendations"}),c.jsx("ul",{className:"space-y-2",children:h.recommendations.map((x,S)=>c.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-start gap-2",children:[c.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),x]},S))})]})]}),h&&!["refine","criteria","forecast"].includes(e)&&c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:h.message||"Analysis complete"})})]}):c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-500"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"AI Assistant"})]}),c.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Configure an AI provider in Settings to use AI features."})]})]})})]})}const HOe=["Planning","Active","OnTrack","AtRisk","Achieved","Abandoned"],f5=["Yearly","Quarterly","Monthly","Weekly","Daily"];function qOe(){const[e,t]=A.useState([]),[n,r]=A.useState(!0),[s,a]=A.useState(""),[i,o]=A.useState({}),[u,h]=A.useState("timeHorizon"),[f,m]=A.useState(!1),[g,b]=A.useState(null),[w,x]=A.useState(!1),[S,k]=A.useState(!1),[C,T]=A.useState(null),[P]=A.useState(new Map),[D,R]=A.useState([]),[U,j]=A.useState(!1),[se,B]=A.useState([]),[ee,ie]=A.useState(!1),[_e,G]=A.useState("refine"),H=Zr.isConfigured(),L=async()=>{r(!0);try{const re=await ji.getAll();re.success&&re.data&&t(re.data)}catch(re){console.error("Failed to load goals:",re)}finally{r(!1)}},Z=async()=>{try{const re=await Ni.getAll();if(re.success&&re.data){const be=re.data.map(z=>({id:z.id,title:z.name,type:"project",area:z.area,status:z.status}));R(be)}}catch(re){console.error("Failed to load projects:",re)}};A.useEffect(()=>{L(),Z()},[]);const W=async re=>{k(!0);try{const be=await ji.create(re);be.success&&be.data&&(t([be.data,...e]),m(!1))}catch(be){console.error("Failed to create goal:",be)}finally{k(!1)}},de=async(re,be)=>{k(!0);try{const z=await ji.update(re,be);if(z.success&&z.data){const Ne=e.map(je=>je.id===re?z.data:je);t(Ne),g&&g.id===re&&b(z.data),x(!1)}}catch(z){console.error("Failed to update goal:",z)}finally{k(!1)}},$=async()=>{if(C){k(!0);try{if((await ji.delete(C.id)).success){const be=e.filter(z=>z.id!==C.id);t(be),g&&g.id===C.id&&b(null),T(null)}}catch(re){console.error("Failed to delete goal:",re)}finally{k(!1)}}},F=re=>{b(re)},Q=()=>{b(null)},O=async(re,be)=>{console.log("Project linking not yet implemented")},V=async(re,be)=>{console.log("Project unlinking not yet implemented")},he=()=>{if(!g)return;const re=new Set(P.get(g.id)?.map(z=>z.id)||[]),be=new Set(se);re.forEach(z=>{be.has(z)||V(g.id)}),be.forEach(z=>{re.has(z)||O(g.id)})},I=e.filter(re=>{const be=!s||re.title.toLowerCase().includes(s.toLowerCase())||re.description&&re.description.toLowerCase().includes(s.toLowerCase()),z=!i.area||re.area===i.area,Ne=!i.status||re.status===i.status,je=!i.priority||re.priority===i.priority;return be&&z&&Ne&&je}),N=re=>{const be=re.successCriteria.filter(Ne=>Ne.includes("")).length,z=re.successCriteria.length;return z>0?Math.round(be/z*100):0},ne=f5.reduce((re,be)=>(re[be]=I.filter(z=>z.timeHorizon===be),re),{}),K=I.reduce((re,be)=>(re[be.area]||(re[be.area]=[]),re[be.area].push(be),re),{});if(g){const re=N(g),be=P.get(g.id)||[];return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("button",{onClick:Q,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(eh,{className:"w-5 h-5"}),"Back to Goals"]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 mb-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx(lr,{priority:g.priority,size:"lg"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:g.title})]}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Yn,{area:g.area}),g.subCategory&&c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.subCategory}),c.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:g.timeHorizon}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.status==="Achieved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":g.status==="OnTrack"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":g.status==="Active"?"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400":g.status==="AtRisk"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:g.status})]}),g.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g.description})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(wl,{progress:re,size:"lg",showLabel:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>x(!0),children:[c.jsx(Hc,{className:"w-4 h-4 mr-1"}),"Edit"]}),c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>T(g),className:"hover:!bg-red-50 hover:!text-red-600",children:[c.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]}),g.targetDate&&c.jsxs("div",{className:"mb-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Target Date"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(g.targetDate).toLocaleDateString()})]}),g.successCriteria.length>0&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700 mb-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Success Criteria"}),c.jsx("div",{className:"space-y-2",children:g.successCriteria.map((z,Ne)=>c.jsx("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:c.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:z})},Ne))})]}),g.notes&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:g.notes})]}),H&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("button",{onClick:()=>ie(!ee),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Goal Tools"}),ee?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),ee&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>G("refine"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="refine"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Refine Goal"}),c.jsx("button",{onClick:()=>G("criteria"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="criteria"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Success Criteria"}),c.jsx("button",{onClick:()=>G("metrics"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="metrics"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Suggest Metrics"}),c.jsx("button",{onClick:()=>G("forecast"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="forecast"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Forecast Achievement"}),c.jsx("button",{onClick:()=>G("conflicts"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="conflicts"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Check Conflicts"}),c.jsx("button",{onClick:()=>G("progress"),className:`px-3 py-1.5 text-sm rounded-full transition ${_e==="progress"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Progress Analysis"})]}),c.jsx(BOe,{mode:_e,goal:g,onClose:()=>ie(!1)})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Nd,{className:"w-5 h-5"}),"Projects (",be.length,")"]}),c.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>{B(be.map(z=>z.id)),j(!0)},children:"Link Projects"})]}),be.length===0?c.jsx(Sa,{title:"No linked projects",description:"Link this goal to projects that help achieve it",actionLabel:"Link Projects",onAction:()=>j(!0)}):c.jsx("div",{className:"flex flex-wrap gap-2",children:be.map(z=>c.jsx(vs,{id:z.id,label:z.title,type:"project",area:z.area},z.id))})]})]}),c.jsx(Un,{isOpen:w,onClose:()=>x(!1),title:"Edit Goal",className:"max-w-2xl",children:c.jsx(FOe,{goal:g,onSubmit:de,onCancel:()=>x(!1),isLoading:S})}),c.jsx(Pp,{isOpen:U,onClose:()=>j(!1),title:"Link to Projects",entities:D,selectedIds:se,onSelectionChange:B,onSave:he,entityType:"project"})]})}return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[c.jsx(_r,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Goals Vision Board"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track your goals and success criteria"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>m(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Goal"]})]}),c.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:re=>a(re.target.value),placeholder:"Search goals...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-1",children:[c.jsxs("button",{onClick:()=>h("timeHorizon"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${u==="timeHorizon"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[c.jsx(nee,{className:"w-4 h-4"}),"By Time Horizon"]}),c.jsxs("button",{onClick:()=>h("area"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${u==="area"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[c.jsx(iee,{className:"w-4 h-4"}),"By Area"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Ev,{filters:i,onFiltersChange:o,availableFilters:{statuses:HOe}})}),c.jsx("div",{className:"lg:col-span-3",children:n?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading goals..."})]})}):I.length===0?c.jsx(Sa,{title:"No goals found",description:s||i.area||i.status||i.priority?"Try adjusting your filters or search query":"Get started by creating your first goal",actionLabel:"Create Goal",onAction:()=>m(!0)}):u==="timeHorizon"?c.jsx("div",{className:"space-y-8",children:f5.map(re=>{const be=ne[re];return be.length===0?null:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-sm",children:re}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",be.length," ",be.length===1?"goal":"goals",")"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:be.map(z=>c.jsx(h5,{goal:z,onClick:F,progress:N(z)},z.id))})]},re)})}):c.jsx("div",{className:"space-y-8",children:Object.entries(K).map(([re,be])=>c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Yn,{area:re}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",be.length," ",be.length===1?"goal":"goals",")"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:be.map(z=>c.jsx(h5,{goal:z,onClick:F,progress:N(z)},z.id))})]},re))})})]})]}),c.jsx(Un,{isOpen:f,onClose:()=>m(!1),title:"Create New Goal",className:"max-w-2xl",children:c.jsx(DOe,{onSubmit:W,onCancel:()=>m(!1),isLoading:S})}),c.jsx(Un,{isOpen:!!C,onClose:()=>T(null),title:"Delete Goal",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Are you sure you want to delete this goal? This action cannot be undone."}),C&&c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:C.title})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>T(null),disabled:S,children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:$,disabled:S,className:"!bg-red-600 hover:!bg-red-700",children:S?"Deleting...":"Delete Goal"})]})]})})]})}function VOe({metric:e,recentLogs:t=[],onClick:n,onQuickLog:r}){const s=g=>{switch(g){case"Active":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"Paused":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400";case"Archived":return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},a=t[0],i=t[1],o=a&&i?a.value-i.value:0,u=i?Math.abs(o/i.value*100):0,h=()=>!a||!i?null:e.direction==="Higher"?o>0?c.jsx(kr,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(QR,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):e.direction==="Lower"?o<0?c.jsx(kr,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(QR,{className:"w-4 h-4 text-red-600 dark:text-red-400"}):null,m=(()=>{if(!a||!e.targetValue)return null;if(e.direction==="Higher")return a.value>=e.targetValue;if(e.direction==="Lower")return a.value<=e.targetValue;if(e.direction==="Target"){const g=e.targetValue*.1;return Math.abs(a.value-e.targetValue)<=g}return null})();return c.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 cursor-pointer",children:[c.jsxs("div",{onClick:()=>n(e),children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-1",children:e.name}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:e.description})]}),m!==null&&c.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-green-500":"bg-yellow-500"} ml-2 flex-shrink-0`})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Yn,{area:e.area}),e.subCategory&&c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.subCategory})]}),a&&c.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.value}),c.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-400 ml-2",children:e.unit==="custom"?e.customUnit:e.unit})]}),h()]}),i&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsxs("span",{className:o>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[o>0?"+":"",o.toFixed(1)," (",u.toFixed(1),"%)"]}),c.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"from previous"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 mt-2",children:[c.jsx(Dn,{className:"w-3 h-3"}),c.jsx("span",{children:new Date(a.loggedAt).toLocaleDateString()})]})]}),e.targetValue&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[c.jsx(_r,{className:"w-4 h-4"}),c.jsxs("span",{children:["Target: ",e.targetValue," ",e.unit==="custom"?e.customUnit:e.unit]}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",e.direction,")"]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s(e.status)}`,children:e.status}),c.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.source})})]})]}),r&&e.status==="Active"&&c.jsx("button",{onClick:g=>{g.stopPropagation(),r(e)},className:"w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Log Value"})]})}function GOe({metric:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({metricId:e.id,value:0,notes:"",loggedAt:new Date().toISOString().split("T")[0]}),i=o=>{o.preventDefault(),t(s)};return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Metric"}),c.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Value * (",e.unit==="custom"?e.customUnit:e.unit,")"]}),c.jsx("input",{type:"number",step:"0.01",value:s.value,onChange:o=>a({...s,value:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.targetValue&&c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Target: ",e.targetValue," ",e.unit==="custom"?e.customUnit:e.unit," (",e.direction,")"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date *"}),c.jsx("input",{type:"date",value:s.loggedAt,onChange:o=>a({...s,loggedAt:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:o=>a({...s,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional notes about this measurement..."})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Logging...":"Log Value"})]})]})}const KOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],ZOe=["count","hours","minutes","dollars","pounds","kg","percent","rating","custom"],WOe=["Higher","Lower","Target"],JOe=["Manual","App","Device"];function YOe({onSubmit:e,onCancel:t,isLoading:n}){const[r,s]=A.useState({name:"",description:"",area:"Health",unit:"count",direction:"Higher",source:"Manual"}),a=i=>{i.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:a,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:r.name,onChange:i=>s({...r,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Daily Steps",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:r.description,onChange:i=>s({...r,description:i.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe this metric..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:r.area,onChange:i=>s({...r,area:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:KOe.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:r.subCategory||"",onChange:i=>s({...r,subCategory:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unit *"}),c.jsx("select",{value:r.unit,onChange:i=>s({...r,unit:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:ZOe.map(i=>c.jsx("option",{value:i,children:i},i))})]}),r.unit==="custom"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Unit *"}),c.jsx("input",{type:"text",value:r.customUnit||"",onChange:i=>s({...r,customUnit:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., cups",required:!0})]}),r.unit!=="custom"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direction *"}),c.jsx("select",{value:r.direction,onChange:i=>s({...r,direction:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:WOe.map(i=>c.jsx("option",{value:i,children:i},i))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Value"}),c.jsx("input",{type:"number",step:"0.01",value:r.targetValue||"",onChange:i=>s({...r,targetValue:parseFloat(i.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional target"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source *"}),c.jsx("select",{value:r.source,onChange:i=>s({...r,source:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:JOe.map(i=>c.jsx("option",{value:i,children:i},i))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Low Threshold"}),c.jsx("input",{type:"number",step:"0.01",value:r.thresholdLow||"",onChange:i=>s({...r,thresholdLow:parseFloat(i.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"High Threshold"}),c.jsx("input",{type:"number",step:"0.01",value:r.thresholdHigh||"",onChange:i=>s({...r,thresholdHigh:parseFloat(i.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:n,children:n?"Creating...":"Create Metric"})]})]})}const QOe=["Health","Wealth","Love","Happiness","Operations","DayJob"],XOe=["count","hours","minutes","dollars","pounds","kg","percent","rating","custom"],eRe=["Higher","Lower","Target"],tRe=["Manual","App","Device"],nRe=["Active","Paused","Archived"];function rRe({metric:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({name:e.name,description:e.description||"",area:e.area,subCategory:e.subCategory||void 0,unit:e.unit,customUnit:e.customUnit||void 0,direction:e.direction,targetValue:e.targetValue||void 0,thresholdLow:e.thresholdLow||void 0,thresholdHigh:e.thresholdHigh||void 0,source:e.source,status:e.status}),i=o=>{o.preventDefault(),t(e.id,s)};return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:s.name,onChange:o=>a({...s,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Daily Steps",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:o=>a({...s,description:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe this metric..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:s.area,onChange:o=>a({...s,area:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:QOe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:s.subCategory||"",onChange:o=>a({...s,subCategory:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unit *"}),c.jsx("select",{value:s.unit,onChange:o=>a({...s,unit:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:XOe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),s.unit==="custom"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Unit *"}),c.jsx("input",{type:"text",value:s.customUnit||"",onChange:o=>a({...s,customUnit:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., cups",required:!0})]}),s.unit!=="custom"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direction *"}),c.jsx("select",{value:s.direction,onChange:o=>a({...s,direction:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:eRe.map(o=>c.jsx("option",{value:o,children:o},o))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Value"}),c.jsx("input",{type:"number",step:"0.01",value:s.targetValue||"",onChange:o=>a({...s,targetValue:parseFloat(o.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional target"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source *"}),c.jsx("select",{value:s.source,onChange:o=>a({...s,source:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:tRe.map(o=>c.jsx("option",{value:o,children:o},o))})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Low Threshold"}),c.jsx("input",{type:"number",step:"0.01",value:s.thresholdLow||"",onChange:o=>a({...s,thresholdLow:parseFloat(o.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"High Threshold"}),c.jsx("input",{type:"number",step:"0.01",value:s.thresholdHigh||"",onChange:o=>a({...s,thresholdHigh:parseFloat(o.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status *"}),c.jsx("select",{value:s.status,onChange:o=>a({...s,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:nRe.map(o=>c.jsx("option",{value:o,children:o},o))})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Saving...":"Save Changes"})]})]})}function sRe({mode:e,metric:t,logs:n,onClose:r,onApplyTarget:s}){const[a,i]=A.useState(!1),[o,u]=A.useState(null),[h,f]=A.useState(null),m=Zr.isConfigured(),g=async()=>{if(i(!0),u(null),await new Promise(x=>setTimeout(x,1500)),e==="patterns")f({patterns:[{type:"trend",description:"Steady upward trend over the past 2 weeks",significance:"high",insights:"Your consistent efforts are paying off",recommendations:["Maintain current approach","Set higher targets"]},{type:"cycle",description:"Weekly peaks on Mondays and Thursdays",significance:"medium",insights:"Performance varies by day of week",recommendations:["Focus important tasks on peak days","Investigate low-performing days"]}],overallTrend:"improving",confidence:.87});else if(e==="anomalies"){const x=n.length>3;f({isAnomaly:x,anomalyType:x?"spike":void 0,severity:x?"medium":"low",possibleCauses:x?["Exceptional circumstances","Measurement error","External factors"]:["No significant anomalies detected"],recommendations:x?["Verify measurement accuracy","Note any special circumstances"]:["Continue regular tracking"],requiresAttention:x,confidence:.75})}else if(e==="correlations")f({correlations:[{metricName:"Sleep Hours",correlationType:"positive",strength:"moderate",description:"Higher values correlate with better sleep",insights:"Improving this metric may improve sleep quality",actionable:!0}],overallInsights:"Several interesting patterns discovered",confidence:.82});else if(e==="targets"){const x=n.length>0?n[n.length-1].value:0;f({recommendedTarget:x*1.2,currentValue:x,reasoning:"Based on current performance and growth trajectory",achievability:"moderate",timeframe:"30 days",milestones:[{value:x*1.05,date:new Date(Date.now()+14400*60*1e3).toISOString(),description:"5% increase"},{value:x*1.1,date:new Date(Date.now()+480*60*60*1e3).toISOString(),description:"10% increase"},{value:x*1.2,date:new Date(Date.now()+720*60*60*1e3).toISOString(),description:"Target reached"}],confidence:.88})}else if(e==="health"){const x=n.length>5;f({healthScore:x?85:45,status:x?"good":"concerning",alerts:x?[{severity:"info",message:"Excellent tracking consistency",recommendation:"Keep up the good work"}]:[{severity:"warning",message:"Insufficient data",recommendation:"Log values more frequently"}],trackingQuality:x?"excellent":"poor",dataGaps:x?2:15,recommendations:x?["Continue regular logging","Consider increasing tracking frequency"]:["Start logging daily","Set reminders","Make tracking easier"],confidence:.9})}else f({message:"AI analysis in progress..."});i(!1)},b=()=>{switch(e){case"patterns":return c.jsx(kr,{className:"w-5 h-5"});case"anomalies":return c.jsx(uE,{className:"w-5 h-5"});case"correlations":return c.jsx(YR,{className:"w-5 h-5"});case"targets":return c.jsx(_r,{className:"w-5 h-5"});case"health":return c.jsx(YR,{className:"w-5 h-5"})}},w=()=>{switch(e){case"patterns":return"Pattern Recognition";case"anomalies":return"Anomaly Detection";case"correlations":return"Discover Correlations";case"targets":return"Target Recommendation";case"health":return"Metric Health"}};return m?c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[b(),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:w()})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Metric: ",c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.name})]}),!h&&c.jsx(Ee,{onClick:g,disabled:a,className:"w-full",children:a?"Analyzing...":"Analyze with AI"})]}),a&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Bl,{}),c.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Analyzing metric data..."})]}),o&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:o})]})}),h&&e==="patterns"&&c.jsxs("div",{className:"space-y-4",children:[h.patterns.map((x,S)=>c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(kr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 capitalize",children:x.type}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.significance==="high"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":x.significance==="medium"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:x.significance})]}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:x.description}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic mb-2",children:x.insights}),c.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[c.jsx("span",{className:"font-medium",children:"Recommendations:"}),c.jsx("ul",{className:"mt-1 space-y-1",children:x.recommendations.map((k,C)=>c.jsxs("li",{children:[" ",k]},C))})]})]},S)),c.jsx(fr,{confidence:h.confidence})]}),h&&e==="targets"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:h.recommendedTarget}),c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Recommended Target"}),c.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Achievability: ",h.achievability]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Milestones"}),c.jsx("div",{className:"space-y-2",children:h.milestones.map((x,S)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:x.description}),c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.value.toFixed(1)})]},S))})]}),c.jsx(fr,{confidence:h.confidence}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ee,{onClick:()=>{s?.(h.recommendedTarget),r()},className:"flex-1",children:"Apply Target"}),c.jsx(Ee,{onClick:r,variant:"ghost",className:"flex-1",children:"Dismiss"})]})]}),h&&e==="health"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:`p-4 rounded-lg ${h.status==="excellent"||h.status==="good"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"}`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:`text-3xl font-bold mb-1 ${h.status==="excellent"||h.status==="good"?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:h.healthScore}),c.jsxs("p",{className:"text-sm capitalize",children:[h.status," Health"]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alerts"}),c.jsx("div",{className:"space-y-2",children:h.alerts.map((x,S)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm",children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:x.message}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:x.recommendation})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recommendations"}),c.jsx("ul",{className:"space-y-1",children:h.recommendations.map((x,S)=>c.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-start gap-2",children:[c.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),x]},S))})]})]}),h&&!["patterns","targets","health"].includes(e)&&c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:h.message||"Analysis complete"})})]}):c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-500"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"AI Assistant"})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Configure an AI provider in Settings to use AI features."})]})]})})]})}const aRe=["Active","Paused","Archived"];function iRe(){const[e,t]=A.useState([]),[n,r]=A.useState(new Map),[s,a]=A.useState(!0),[i,o]=A.useState(""),[u,h]=A.useState({}),[f,m]=A.useState(!1),[g,b]=A.useState(null),[w,x]=A.useState(!1),[S,k]=A.useState(!1),[C,T]=A.useState(null),[P,D]=A.useState(!1),[R,U]=A.useState(null),[j,se]=A.useState(!1),[B,ee]=A.useState("patterns"),ie=Zr.isConfigured(),_e=async()=>{a(!0);try{const O=await Ei.getAll();O.success&&O.data&&(t(O.data),O.data.forEach(V=>{G(V.id)}))}catch(O){console.error("Failed to load metrics:",O)}finally{a(!1)}},G=async O=>{try{const V=await Ei.getHistory(O);V.success&&V.data&&r(he=>new Map(he).set(O,V.data))}catch(V){console.error("Failed to load metric logs:",V)}};A.useEffect(()=>{_e()},[]);const H=async O=>{D(!0);try{const V=await Ei.create(O);V.success&&V.data&&(t([V.data,...e]),m(!1))}catch(V){console.error("Failed to create metric:",V)}finally{D(!1)}},L=async(O,V)=>{D(!0);try{const he=await Ei.update(O,V);if(he.success&&he.data){const I=e.map(N=>N.id===O?he.data:N);t(I),g&&g.id===O&&b(he.data),x(!1)}}catch(he){console.error("Failed to update metric:",he)}finally{D(!1)}},Z=async()=>{if(R){D(!0);try{if((await Ei.delete(R.id)).success){const V=e.filter(he=>he.id!==R.id);t(V),g&&g.id===R.id&&b(null),U(null)}}catch(O){console.error("Failed to delete metric:",O)}finally{D(!1)}}},W=async O=>{D(!0);try{const V=await Ei.logValue(O);V.success&&V.data&&(G(O.metricId),k(!1),T(null))}catch(V){console.error("Failed to log value:",V)}finally{D(!1)}},de=O=>{b(O)},$=()=>{b(null)},F=O=>{T(O),k(!0)},Q=e.filter(O=>{const V=!i||O.name.toLowerCase().includes(i.toLowerCase())||O.description&&O.description.toLowerCase().includes(i.toLowerCase()),he=!u.area||O.area===u.area,I=!u.status||O.status===u.status;return V&&he&&I});if(g){const O=n.get(g.id)||[];return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("button",{onClick:$,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(eh,{className:"w-5 h-5"}),"Back to Metrics"]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 mb-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:g.name}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Yn,{area:g.area}),g.subCategory&&c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.subCategory}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.status==="Active"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":g.status==="Paused"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:g.status})]}),g.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g.description})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>x(!0),children:[c.jsx(Hc,{className:"w-4 h-4 mr-1"}),"Edit"]}),c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>U(g),className:"hover:!bg-red-50 hover:!text-red-600",children:[c.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Unit"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.unit==="custom"?g.customUnit:g.unit})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Direction"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.direction})]}),g.targetValue&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Target"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.targetValue})]})]}),ie&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("button",{onClick:()=>se(!j),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Metric Tools"}),j?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),j&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>ee("patterns"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="patterns"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Pattern Recognition"}),c.jsx("button",{onClick:()=>ee("anomalies"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="anomalies"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Anomaly Detection"}),c.jsx("button",{onClick:()=>ee("correlations"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="correlations"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Correlations"}),c.jsx("button",{onClick:()=>ee("targets"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="targets"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Target Recommendations"}),c.jsx("button",{onClick:()=>ee("health"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="health"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Health Analysis"})]}),c.jsx(sRe,{mode:B,metric:g,logs:O,onClose:()=>se(!1)})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(kr,{className:"w-5 h-5"}),"Log History (",O.length,")"]}),c.jsxs(Ee,{variant:"primary",size:"sm",onClick:()=>F(g),children:[c.jsx(Ca,{className:"w-4 h-4 mr-1"}),"Log Value"]})]}),O.length===0?c.jsx(Sa,{title:"No logs yet",description:"Start tracking by logging your first value",actionLabel:"Log Value",onAction:()=>F(g)}):c.jsx("div",{className:"space-y-3",children:O.map(V=>c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.value}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.unit==="custom"?g.customUnit:g.unit})]}),V.notes&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:V.notes})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsx("span",{children:new Date(V.loggedAt).toLocaleDateString()})]})]},V.id))})]})]}),c.jsx(Un,{isOpen:w,onClose:()=>x(!1),title:"Edit Metric",className:"max-w-2xl",children:c.jsx(rRe,{metric:g,onSubmit:L,onCancel:()=>x(!1),isLoading:P})})]})}return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[c.jsx(kr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Metrics Dashboard"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track and measure your progress"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>m(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Metric"]})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:i,onChange:O=>o(O.target.value),placeholder:"Search metrics...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Ev,{filters:u,onFiltersChange:h,availableFilters:{statuses:aRe}})}),c.jsx("div",{className:"lg:col-span-3",children:s?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading metrics..."})]})}):Q.length===0?c.jsx(Sa,{title:"No metrics found",description:i||u.area||u.status?"Try adjusting your filters or search query":"Get started by creating your first metric",actionLabel:"Create Metric",onAction:()=>m(!0)}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Q.map(O=>c.jsx(VOe,{metric:O,recentLogs:n.get(O.id)?.slice(0,2),onClick:de,onQuickLog:F},O.id))})})]})]}),c.jsx(Un,{isOpen:f,onClose:()=>m(!1),title:"Create New Metric",className:"max-w-2xl",children:c.jsx(YOe,{onSubmit:H,onCancel:()=>m(!1),isLoading:P})}),c.jsx(Un,{isOpen:S,onClose:()=>{k(!1),T(null)},title:"Log Metric Value",className:"max-w-lg",children:C&&c.jsx(GOe,{metric:C,onSubmit:W,onCancel:()=>{k(!1),T(null)},isLoading:P})}),c.jsx(Un,{isOpen:!!R,onClose:()=>U(null),title:"Delete Metric",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Are you sure you want to delete this metric? This action cannot be undone."}),R&&c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:R.name})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>U(null),disabled:P,children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:Z,disabled:P,className:"!bg-red-600 hover:!bg-red-700",children:P?"Deleting...":"Delete Metric"})]})]})})]})}function oRe({habit:e,streak:t=0,todayCompleted:n=!1,onClick:r,onQuickLog:s}){const a=i=>{switch(i){case"Build":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"Maintain":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"Reduce":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400";case"Quit":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};return c.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200",children:[c.jsxs("div",{onClick:()=>r(e),className:"cursor-pointer",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`,children:n&&c.jsx(Ks,{className:"w-5 h-5 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-1",children:e.name})]}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 ml-11",children:e.description})]}),t>0&&c.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[c.jsx(HX,{className:"w-5 h-5 text-orange-500"}),c.jsx("span",{className:"text-lg font-bold text-orange-500",children:t})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 ml-11",children:[c.jsx(Yn,{area:e.area}),e.subCategory&&c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.subCategory}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a(e.habitType)}`,children:e.habitType}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.frequency})]}),e.trigger&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg ml-11",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Trigger  Action"}),c.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[e.trigger,"  ",e.action]})]}),c.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-gray-100 dark:border-gray-700 ml-11",children:[e.dailyTarget&&c.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[c.jsx(_r,{className:"w-4 h-4"}),c.jsxs("span",{children:["Daily: ",e.dailyTarget]})]}),e.weeklyTarget&&c.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[c.jsx(Dn,{className:"w-4 h-4"}),c.jsxs("span",{children:["Weekly: ",e.weeklyTarget]})]})]})]}),s&&!n&&c.jsx("button",{onClick:i=>{i.stopPropagation(),s(e)},className:"w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Mark Complete"})]})}function lRe({habit:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({habitId:e.id,completedAt:new Date().toISOString(),amount:e.dailyTarget||1,notes:""}),i=o=>{o.preventDefault(),t(s)};return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Habit"}),c.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]}),e.habitType!=="Quit"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),c.jsx("input",{type:"number",step:"1",min:"0",value:s.amount||1,onChange:o=>a({...s,amount:parseInt(o.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.dailyTarget&&c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Daily target: ",e.dailyTarget]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date & Time"}),c.jsx("input",{type:"datetime-local",value:s.completedAt?.slice(0,16)||"",onChange:o=>a({...s,completedAt:o.target.value?new Date(o.target.value).toISOString():new Date().toISOString()}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:o=>a({...s,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional notes..."})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Logging...":"Log Completion"})]})]})}const cRe=["Health","Wealth","Love","Happiness","Operations","DayJob"],uRe=["Build","Maintain","Reduce","Quit"],dRe=["Daily","Weekly","Monthly","Custom"];function hRe({onSubmit:e,onCancel:t,isLoading:n}){const[r,s]=A.useState({name:"",description:"",area:"Health",habitType:"Build",frequency:"Daily"}),a=i=>{i.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:a,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:r.name,onChange:i=>s({...r,name:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Morning Run",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:r.description,onChange:i=>s({...r,description:i.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe this habit..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:r.area,onChange:i=>s({...r,area:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:cRe.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:r.subCategory||"",onChange:i=>s({...r,subCategory:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Habit Type *"}),c.jsx("select",{value:r.habitType,onChange:i=>s({...r,habitType:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:uRe.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency *"}),c.jsx("select",{value:r.frequency,onChange:i=>s({...r,frequency:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:dRe.map(i=>c.jsx("option",{value:i,children:i},i))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Target"}),c.jsx("input",{type:"number",step:"1",min:"0",value:r.dailyTarget||"",onChange:i=>s({...r,dailyTarget:parseInt(i.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Weekly Target"}),c.jsx("input",{type:"number",step:"1",min:"0",value:r.weeklyTarget||"",onChange:i=>s({...r,weeklyTarget:parseInt(i.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Intent"}),c.jsx("textarea",{value:r.intent,onChange:i=>s({...r,intent:i.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Why do you want this habit?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Trigger"}),c.jsx("input",{type:"text",value:r.trigger,onChange:i=>s({...r,trigger:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What triggers this habit?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Action"}),c.jsx("input",{type:"text",value:r.action,onChange:i=>s({...r,action:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What is the action?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reward"}),c.jsx("input",{type:"text",value:r.reward,onChange:i=>s({...r,reward:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What's the reward?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Friction Down (Make it easier)"}),c.jsx("textarea",{value:r.frictionDown,onChange:i=>s({...r,frictionDown:i.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"How to make this habit easier to do..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:r.notes,onChange:i=>s({...r,notes:i.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes..."})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:n,children:n?"Creating...":"Create Habit"})]})]})}const fRe=["Health","Wealth","Love","Happiness","Operations","DayJob"],pRe=["Build","Maintain","Reduce","Quit"],mRe=["Daily","Weekly","Monthly","Custom"];function gRe({habit:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({name:e.name,description:e.description||"",area:e.area,subCategory:e.subCategory||void 0,habitType:e.habitType,frequency:e.frequency,dailyTarget:e.dailyTarget||void 0,weeklyTarget:e.weeklyTarget||void 0,intent:e.intent||"",trigger:e.trigger||"",action:e.action||"",reward:e.reward||"",frictionUp:e.frictionUp||"",frictionDown:e.frictionDown||"",notes:e.notes||""}),i=o=>{o.preventDefault(),t(e.id,s)};return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:s.name,onChange:o=>a({...s,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:o=>a({...s,description:o.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Area *"}),c.jsx("select",{value:s.area,onChange:o=>a({...s,area:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:fRe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub-Category"}),c.jsx("input",{type:"text",value:s.subCategory||"",onChange:o=>a({...s,subCategory:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Habit Type *"}),c.jsx("select",{value:s.habitType,onChange:o=>a({...s,habitType:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:pRe.map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency *"}),c.jsx("select",{value:s.frequency,onChange:o=>a({...s,frequency:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:mRe.map(o=>c.jsx("option",{value:o,children:o},o))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Target"}),c.jsx("input",{type:"number",step:"1",min:"0",value:s.dailyTarget||"",onChange:o=>a({...s,dailyTarget:parseInt(o.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Weekly Target"}),c.jsx("input",{type:"number",step:"1",min:"0",value:s.weeklyTarget||"",onChange:o=>a({...s,weeklyTarget:parseInt(o.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Intent"}),c.jsx("textarea",{value:s.intent,onChange:o=>a({...s,intent:o.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Trigger"}),c.jsx("input",{type:"text",value:s.trigger,onChange:o=>a({...s,trigger:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Action"}),c.jsx("input",{type:"text",value:s.action,onChange:o=>a({...s,action:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reward"}),c.jsx("input",{type:"text",value:s.reward,onChange:o=>a({...s,reward:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Friction Down (Make it easier)"}),c.jsx("textarea",{value:s.frictionDown,onChange:o=>a({...s,frictionDown:o.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:o=>a({...s,notes:o.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?"Saving...":"Save Changes"})]})]})}function yRe({mode:e,habit:t,logs:n,onClose:r,onApplyDesign:s}){const[a,i]=A.useState(!1),[o,u]=A.useState(null),[h,f]=A.useState(null),m=Zr.isConfigured(),g=async()=>{if(i(!0),u(null),await new Promise(x=>setTimeout(x,1500)),e==="design")f({optimizedTrigger:`After ${t.trigger||"your morning coffee"}`,optimizedAction:t.action||"Perform the habit",optimizedReward:"Feel accomplished and energized",frictionStrategies:[{strategy:"Environment design",implementation:"Place tools in visible location",effectiveness:"high"},{strategy:"Implementation intention",implementation:'Use "if-then" planning',effectiveness:"high"},{strategy:"Habit stacking",implementation:"Link to existing routine",effectiveness:"medium"}],targetFrequency:t.frequency||"Daily",reasoning:"Clear triggers and immediate rewards increase habit formation success",confidence:.88});else if(e==="stack")f({stackSuggestions:[{existingHabit:"Morning coffee",newHabit:t.name,stackingPattern:"After I pour my coffee, I will do [habit]",rationale:"Morning routines are stable anchors",difficulty:"easy"},{existingHabit:"Lunch break",newHabit:t.name,stackingPattern:"Before I eat lunch, I will do [habit]",rationale:"Consistent daily trigger",difficulty:"moderate"}],timingRecommendations:[{timeOfDay:"Morning (6-9 AM)",habits:[t.name,"Exercise","Meditation"],reasoning:"High willpower and energy levels"}],confidence:.85});else if(e==="recovery"){const x=n.length>0;f({analysis:{currentStreak:0,longestStreak:0,recentMisses:x?2:5,pattern:x?"Occasional misses on weekends":"Long gap in tracking"},recoveryPlan:[{step:"Start with single day completion",timeframe:"Today",difficulty:"easy"},{step:"Maintain for 3 consecutive days",timeframe:"This week",difficulty:"moderate"},{step:"Reach 7-day streak",timeframe:"2 weeks",difficulty:"moderate"}],motivationalInsights:["You've done this before - your longest streak proves it's possible","Small wins compound over time","Focus on consistency over perfection"],adjustmentSuggestions:["Reduce difficulty temporarily","Add environmental cues","Find an accountability partner"],confidence:.82})}else f(e==="patterns"?{completionPatterns:[{pattern:"Higher completion on weekdays",frequency:"80%",context:"Structured schedule supports consistency",strength:"strong"},{pattern:"Better performance in morning",frequency:"70%",context:"Fresh energy and willpower",strength:"moderate"}],optimalTiming:{bestTimeOfDay:"7:00 AM - 8:00 AM",bestDayOfWeek:"Tuesday and Thursday",reasoning:"Highest historical completion rates"},correlations:[{factor:"Energy level",impact:"positive",strength:"strong",insights:"Higher energy strongly predicts completion"},{factor:"Weekend days",impact:"negative",strength:"moderate",insights:"Unstructured time makes habit harder"}],recommendations:["Schedule for early morning on weekdays","Create weekend-specific cues","Track energy levels to identify patterns"],confidence:.86}:e==="triggers"?{currentTriggerAnalysis:{clarity:t.trigger?"somewhat clear":"unclear",observability:t.trigger?"noticeable":"hard to notice",consistency:"somewhat consistent",issues:t.trigger?["Could be more specific"]:["No clear trigger defined","Relies on motivation"]},optimizedTriggers:[{trigger:"Right after morning alarm",type:"time",specificity:"very specific",effectiveness:"high",implementation:"Set phone alarm with habit reminder"},{trigger:"When entering home office",type:"location",specificity:"very specific",effectiveness:"high",implementation:"Place visual cue on door"},{trigger:"After completing breakfast",type:"preceding action",specificity:"very specific",effectiveness:"medium",implementation:"Add to morning routine checklist"}],environmentalCues:["Visual reminder in obvious location","Physical tool placement","Phone notification","Calendar block"],confidence:.84}:e==="alignment"?{alignedGoals:[{goalTitle:"Improve Health",alignmentStrength:"strong",explanation:"Directly supports fitness goals",impact:"Regular practice builds toward long-term health outcomes"}],misalignments:[{issue:"May conflict with evening social activities",severity:"low",suggestion:"Reschedule to morning hours"}],newHabitSuggestions:[{habitName:"Track habit completion",goalSupported:"Improve Health",rationale:"Tracking increases awareness and consistency",priority:"medium"}],confidence:.87}:{message:"AI analysis in progress..."});i(!1)},b=()=>{switch(e){case"design":return c.jsx(lee,{className:"w-5 h-5"});case"stack":return c.jsx(Ad,{className:"w-5 h-5"});case"recovery":return c.jsx(_r,{className:"w-5 h-5"});case"patterns":return c.jsx(kr,{className:"w-5 h-5"});case"triggers":return c.jsx(uE,{className:"w-5 h-5"});case"alignment":return c.jsx(_r,{className:"w-5 h-5"})}},w=()=>{switch(e){case"design":return"Habit Design Assistant";case"stack":return"Habit Stack Suggestions";case"recovery":return"Streak Recovery Coach";case"patterns":return"Pattern Analysis";case"triggers":return"Trigger Optimization";case"alignment":return"Goal Alignment"}};return m?c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[b(),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:w()})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Habit: ",c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.name})]}),!h&&c.jsx(Ee,{onClick:g,disabled:a,className:"w-full",children:a?"Analyzing...":"Analyze with AI"})]}),a&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Bl,{}),c.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Analyzing habit..."})]}),o&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:o})]})}),h&&e==="design"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Optimized Trigger"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-gray-100",children:h.optimizedTrigger})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Optimized Reward"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-gray-100",children:h.optimizedReward})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Friction Strategies"}),c.jsx("div",{className:"space-y-2",children:h.frictionStrategies.map((x,S)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.strategy}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.effectiveness==="high"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":x.effectiveness==="medium"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:x.effectiveness})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.implementation})]},S))})]}),c.jsx(fr,{confidence:h.confidence}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ee,{onClick:()=>{s?.(h.optimizedTrigger,h.optimizedAction,h.optimizedReward),r()},className:"flex-1",children:"Apply Design"}),c.jsx(Ee,{onClick:r,variant:"ghost",className:"flex-1",children:"Dismiss"})]})]}),h&&e==="recovery"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:h.analysis.currentStreak}),c.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Current Streak"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:h.analysis.longestStreak}),c.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Longest Streak"})]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recovery Plan"}),c.jsx("div",{className:"space-y-2",children:h.recoveryPlan.map((x,S)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.step}),c.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:x.timeframe})]}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.difficulty==="easy"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":x.difficulty==="moderate"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:x.difficulty})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivational Insights"}),c.jsx("ul",{className:"space-y-2",children:h.motivationalInsights.map((x,S)=>c.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-start gap-2",children:[c.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),x]},S))})]}),c.jsx(fr,{confidence:h.confidence})]}),h&&e==="patterns"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Completion Patterns"}),h.completionPatterns.map((x,S)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg mb-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.pattern}),c.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:x.frequency})]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:x.context})]},S))]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Optimal Timing"}),c.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100 mb-1",children:[c.jsx("span",{className:"font-medium",children:"Best Time:"})," ",h.optimalTiming.bestTimeOfDay]}),c.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100 mb-1",children:[c.jsx("span",{className:"font-medium",children:"Best Day:"})," ",h.optimalTiming.bestDayOfWeek]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:h.optimalTiming.reasoning})]})]}),c.jsx(fr,{confidence:h.confidence})]}),h&&!["design","recovery","patterns"].includes(e)&&c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:h.message||"Analysis complete"})})]}):c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-500"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"AI Assistant"})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Configure an AI provider in Settings to use AI features."})]})]})})]})}const p5=["Build","Maintain","Reduce","Quit"];function bRe(){const[e,t]=A.useState([]),[n,r]=A.useState(new Map),[s,a]=A.useState(!0),[i,o]=A.useState(""),[u,h]=A.useState("today"),[f,m]=A.useState(!1),[g,b]=A.useState(null),[w,x]=A.useState(!1),[S,k]=A.useState(!1),[C,T]=A.useState(null),[P,D]=A.useState(!1),[R,U]=A.useState(null),[j,se]=A.useState(!1),[B,ee]=A.useState("design"),ie=Zr.isConfigured(),_e=async()=>{a(!0);try{const I=await Ya.getAll();I.success&&I.data&&(t(I.data),I.data.forEach(N=>{G(N.id)}))}catch(I){console.error("Failed to load habits:",I)}finally{a(!1)}},G=async I=>{try{const N=await Ya.getLogsByHabit(I);N.success&&N.data&&r(ne=>new Map(ne).set(I,N.data))}catch(N){console.error("Failed to load habit logs:",N)}};A.useEffect(()=>{_e()},[]);const H=async I=>{D(!0);try{const N=await Ya.create(I);N.success&&N.data&&(t([N.data,...e]),m(!1))}catch(N){console.error("Failed to create habit:",N)}finally{D(!1)}},L=async(I,N)=>{D(!0);try{const ne=await Ya.update(I,N);if(ne.success&&ne.data){const K=e.map(re=>re.id===I?ne.data:re);t(K),g&&g.id===I&&b(ne.data),x(!1)}}catch(ne){console.error("Failed to update habit:",ne)}finally{D(!1)}},Z=async()=>{if(R){D(!0);try{if((await Ya.delete(R.id)).success){const N=e.filter(ne=>ne.id!==R.id);t(N),g&&g.id===R.id&&b(null),U(null)}}catch(I){console.error("Failed to delete habit:",I)}finally{D(!1)}}},W=async I=>{D(!0);try{const N=await Ya.logCompletion(I);N.success&&N.data&&(G(I.habitId),k(!1),T(null))}catch(N){console.error("Failed to log habit:",N)}finally{D(!1)}},de=I=>{b(I)},$=()=>{b(null)},F=I=>{T(I),k(!0)},Q=I=>{const N=n.get(I)||[];if(N.length===0)return 0;const ne=[...N].sort((be,z)=>new Date(z.completedAt).getTime()-new Date(be.completedAt).getTime());let K=0;const re=new Date;re.setHours(0,0,0,0);for(let be=0;be<ne.length;be++){const z=new Date(ne[be].completedAt);z.setHours(0,0,0,0);const Ne=new Date(re);if(Ne.setDate(re.getDate()-be),Ne.setHours(0,0,0,0),z.getTime()===Ne.getTime())K++;else break}return K},O=I=>{const N=n.get(I)||[],ne=new Date;return ne.setHours(0,0,0,0),N.some(K=>{const re=new Date(K.completedAt);return re.setHours(0,0,0,0),re.getTime()===ne.getTime()})},V=e.filter(I=>!i||I.name.toLowerCase().includes(i.toLowerCase())||I.description&&I.description.toLowerCase().includes(i.toLowerCase())),he=p5.reduce((I,N)=>(I[N]=V.filter(ne=>ne.habitType===N),I),{});if(g){const I=n.get(g.id)||[],N=Q(g.id);return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("button",{onClick:$,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(eh,{className:"w-5 h-5"}),"Back to Habits"]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 mb-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:g.name}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Yn,{area:g.area}),g.subCategory&&c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.subCategory}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.habitType==="Build"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":g.habitType==="Maintain"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":g.habitType==="Reduce"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:g.habitType}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.frequency})]}),g.description&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g.description})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>x(!0),children:[c.jsx(Hc,{className:"w-4 h-4 mr-1"}),"Edit"]}),c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>U(g),className:"hover:!bg-red-50 hover:!text-red-600",children:[c.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),g.intent&&c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"Intent"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:g.intent})]}),g.trigger&&g.action&&c.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Habit Loop"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trigger"}),c.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:g.trigger})]}),c.jsx("div",{className:"text-gray-400",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Action"}),c.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:g.action})]}),g.reward&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-gray-400",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Reward"}),c.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:g.reward})]})]})]})]}),g.frictionDown&&c.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[c.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-1",children:"Make it Easier"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:g.frictionDown})]}),ie&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("button",{onClick:()=>se(!j),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Habit Tools"}),j?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),j&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>ee("design"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="design"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Habit Design"}),c.jsx("button",{onClick:()=>ee("stack"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="stack"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Habit Stacking"}),c.jsx("button",{onClick:()=>ee("recovery"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="recovery"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Streak Recovery"}),c.jsx("button",{onClick:()=>ee("patterns"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="patterns"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Pattern Analysis"}),c.jsx("button",{onClick:()=>ee("triggers"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="triggers"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Trigger Optimization"}),c.jsx("button",{onClick:()=>ee("alignment"),className:`px-3 py-1.5 text-sm rounded-full transition ${B==="alignment"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Goal Alignment"})]}),c.jsx(yRe,{mode:B,habit:g,logs:I,onClose:()=>se(!1)})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Dn,{className:"w-5 h-5"}),"Completion History (",I.length," total, ",N," day streak)"]}),c.jsxs(Ee,{variant:"primary",size:"sm",onClick:()=>F(g),children:[c.jsx(Ca,{className:"w-4 h-4 mr-1"}),"Log Completion"]})]}),I.length===0?c.jsx(Sa,{title:"No completions yet",description:"Start building your streak by logging your first completion",actionLabel:"Log Completion",onAction:()=>F(g)}):c.jsx("div",{className:"space-y-3",children:I.slice(0,10).map(ne=>c.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(ne.completedAt).toLocaleDateString()}),ne.amount&&ne.amount>1&&c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",ne.amount]})]}),ne.notes&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:ne.notes})]})},ne.id))})]})]}),c.jsx(Un,{isOpen:w,onClose:()=>x(!1),title:"Edit Habit",className:"max-w-2xl",children:c.jsx(gRe,{habit:g,onSubmit:L,onCancel:()=>x(!1),isLoading:P})})]})}return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[c.jsx(Ad,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Daily Habits"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Build consistency one day at a time"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>m(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Habit"]})]}),c.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:i,onChange:I=>o(I.target.value),placeholder:"Search habits...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-1",children:[c.jsx("button",{onClick:()=>h("today"),className:`px-4 py-2 rounded-md transition-colors ${u==="today"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Today"}),c.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-md transition-colors ${u==="all"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"All Habits"})]})]}),s?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading habits..."})]})}):V.length===0?c.jsx(Sa,{title:"No habits found",description:i?"Try adjusting your search query":"Get started by creating your first habit",actionLabel:"Create Habit",onAction:()=>m(!0)}):c.jsx("div",{className:"space-y-8",children:p5.map(I=>{const N=he[I];return N.length===0?null:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${I==="Build"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":I==="Maintain"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":I==="Reduce"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:I}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",N.length," ",N.length===1?"habit":"habits",")"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(ne=>c.jsx(oRe,{habit:ne,streak:Q(ne.id),todayCompleted:O(ne.id),onClick:de,onQuickLog:F},ne.id))})]},I)})})]}),c.jsx(Un,{isOpen:f,onClose:()=>m(!1),title:"Create New Habit",className:"max-w-2xl",children:c.jsx(hRe,{onSubmit:H,onCancel:()=>m(!1),isLoading:P})}),c.jsx(Un,{isOpen:S,onClose:()=>{k(!1),T(null)},title:"Log Completion",className:"max-w-lg",children:C&&c.jsx(lRe,{habit:C,onSubmit:W,onCancel:()=>{k(!1),T(null)},isLoading:P})}),c.jsx(Un,{isOpen:!!R,onClose:()=>U(null),title:"Delete Habit",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Are you sure you want to delete this habit? This action cannot be undone."}),R&&c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:R.name})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>U(null),disabled:P,children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:Z,disabled:P,className:"!bg-red-600 hover:!bg-red-700",children:P?"Deleting...":"Delete Habit"})]})]})})]})}function xRe({entry:e,onClick:t}){const n=s=>{switch(s){case"High":return c.jsx(cE,{className:"w-5 h-5 text-green-600 dark:text-green-400"});case"Steady":return c.jsx(E6,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"});case"Low":return c.jsx(_6,{className:"w-5 h-5 text-red-600 dark:text-red-400"});default:return null}},r=s=>{switch(s){case"High":return"bg-green-100 dark:bg-green-900/30 border-green-500";case"Steady":return"bg-yellow-100 dark:bg-yellow-900/30 border-yellow-500";case"Low":return"bg-red-100 dark:bg-red-900/30 border-red-500";default:return"bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"}};return c.jsxs("div",{onClick:()=>t(e),className:`group rounded-lg border-2 p-6 hover:shadow-lg transition-all duration-200 cursor-pointer ${r(e.mood)}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Dn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),c.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.mood&&c.jsx("div",{className:"flex items-center gap-2",children:n(e.mood)})]}),e.title&&c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.title}),e.notes&&c.jsx("p",{className:"text-gray-700 dark:text-gray-300 line-clamp-3 mb-4",children:e.notes}),e.energy!==null&&c.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-300 dark:border-gray-600",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Energy:"}),c.jsx("div",{className:"flex gap-1",children:Array.from({length:10},(s,a)=>c.jsx("div",{className:`w-2 h-6 rounded-sm ${a<(e.energy||0)?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`},a))}),c.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.energy,"/10"]})]})]})}const vRe=[{value:"High",label:"High",icon:cE},{value:"Steady",label:"Steady",icon:E6},{value:"Low",label:"Low",icon:_6}];function m5({entry:e,onSubmit:t,onCancel:n,isLoading:r}){const[s,a]=A.useState({date:e?.date||new Date().toISOString().split("T")[0],title:e?.title||"",notes:e?.notes||"",mood:e?.mood||void 0,energy:e?.energy||void 0}),i=o=>{o.preventDefault(),t(s)};return c.jsxs("form",{onSubmit:i,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date *"}),c.jsx("input",{type:"date",value:s.date,onChange:o=>a({...s,date:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),c.jsx("input",{type:"text",value:s.title,onChange:o=>a({...s,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional title for today..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mood"}),c.jsx("div",{className:"flex gap-3",children:vRe.map(({value:o,label:u,icon:h})=>c.jsxs("button",{type:"button",onClick:()=>a({...s,mood:o}),className:`flex-1 flex flex-col items-center gap-2 py-4 px-3 rounded-lg border-2 transition-all ${s.mood===o?o==="High"?"border-green-500 bg-green-50 dark:bg-green-900/20":o==="Steady"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[c.jsx(h,{className:`w-8 h-8 ${s.mood===o?o==="High"?"text-green-600 dark:text-green-400":o==="Steady"?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400":"text-gray-400 dark:text-gray-500"}`}),c.jsx("span",{className:`text-sm font-medium ${s.mood===o?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:u})]},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Energy Level"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("input",{type:"range",min:"1",max:"10",value:s.energy||5,onChange:o=>a({...s,energy:parseInt(o.target.value)}),className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"}),c.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white w-12 text-center",children:s.energy||5})]}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[c.jsx("span",{children:"Low"}),c.jsx("span",{children:"High"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),c.jsx("textarea",{value:s.notes,onChange:o=>a({...s,notes:o.target.value}),rows:10,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What happened today? What are you grateful for? What did you learn?"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),c.jsx(Ee,{type:"submit",variant:"primary",disabled:r,children:r?e?"Saving...":"Creating...":e?"Save Changes":"Create Entry"})]})]})}function wRe({mode:e,entry:t,entries:n,onClose:r,onApplyPrompts:s}){const[a,i]=A.useState(!1),[o,u]=A.useState(null),[h,f]=A.useState(null),m=Zr.isConfigured(),g=async()=>{if(i(!0),u(null),await new Promise(x=>setTimeout(x,1500)),e==="prompts")f({prompts:[{question:"What am I most grateful for today?",category:"gratitude",depth:"surface",context:"Starting with gratitude sets a positive tone"},{question:"What did I learn from today's challenges?",category:"learning",depth:"moderate",context:"Recent obstacles present growth opportunities"},{question:"How did my actions today align with my long-term goals?",category:"progress",depth:"deep",context:"Connecting daily actions to bigger vision"}],focusAreas:["Personal growth","Goal alignment","Emotional awareness"],confidence:.86});else if(e==="digest"){const x=n.length>0;f({summary:x?"Today was a productive day focused on completing key tasks and maintaining healthy habits. Energy levels were steady throughout the day.":"No entries logged today yet. Start by reflecting on your morning.",highlights:x?[{type:"accomplishment",description:"Completed 5 out of 6 planned tasks"},{type:"learning",description:"Discovered new approach to problem-solving"},{type:"challenge",description:"Struggled with time management in afternoon"}]:[],metrics:{tasksCompleted:5,habitsLogged:3,energyAverage:7.5,moodSummary:"Mostly steady with positive moments"},momentum:"building",tomorrowFocus:["Continue morning routine consistency","Address afternoon energy dip","Complete remaining high-priority task"],confidence:.88})}else if(e==="patterns")f({patterns:[{pattern:"Higher energy on days with morning exercise",frequency:"85% of days",significance:"high",examples:["Jan 2","Jan 4","Jan 5"],insights:"Morning movement strongly predicts full-day energy"},{pattern:"Lower mood on days with fewer social interactions",frequency:"60% of days",significance:"medium",examples:["Jan 1","Jan 3"],insights:"Connection time appears important for emotional well-being"}],trends:{energyTrend:"improving",moodTrend:"stable",productivityTrend:"improving"},correlations:[{factor1:"Morning exercise",factor2:"Task completion rate",relationship:"Positive correlation",strength:"strong"}],recommendations:["Prioritize morning movement","Schedule regular social time","Track sleep quality for deeper insights"],confidence:.84});else if(e==="sentiment"){const x=n.length>3;f({overallSentiment:x?"positive":"neutral",sentimentScore:x?.65:.1,emotionalThemes:x?[{theme:"Optimism",frequency:"frequent",context:"When writing about progress"},{theme:"Frustration",frequency:"occasional",context:"Related to time constraints"}]:[{theme:"Neutral reflection",frequency:"frequent",context:"Limited data available"}],sentimentTrend:x?"improving":"stable",concerningPatterns:x?[]:[{pattern:"Insufficient data for analysis",severity:"low",suggestion:"Log entries more frequently for better insights"}],positiveMoments:x?["Jan 4 - Breakthrough moment","Jan 5 - Strong progress"]:[],confidence:x?.79:.65})}else f(e==="review"?{weekSummary:"A week of steady progress with strong momentum building in the second half. Key breakthrough in project work.",achievements:[{description:"Completed major project milestone",impact:"significant",category:"Work"},{description:"Maintained daily habit streak",impact:"moderate",category:"Health"}],challenges:[{description:"Time management on busy days",lessons:"Need better prioritization system",futureAction:"Implement time-blocking technique"}],insights:["Morning routines create momentum for entire day","Social connections boost energy and mood","Evening wind-down improves next-day performance"],metrics:{weeklyProgress:"85% of goals achieved",habitConsistency:"6/7 days completed",energyPattern:"Higher in mornings, dips after lunch",moodPattern:"Steady positive with weekend peaks"},nextWeekFocus:[{area:"Health",objective:"Maintain exercise streak",actions:["Morning workout","Evening walk","Track water intake"]},{area:"Work",objective:"Complete next project phase",actions:["Time-block deep work","Minimize meetings","Daily progress review"]}],confidence:.89}:e==="connections"?{suggestedConnections:[{entityType:"task",entityTitle:"Complete project documentation",entityId:"task-1",relevance:"high",reasoning:"You mentioned working on documentation today"},{entityType:"habit",entityTitle:"Morning exercise",entityId:"habit-1",relevance:"medium",reasoning:"You noted feeling energized this morning"}],missingContext:["Which specific tasks were completed?","What was the biggest challenge faced?","Any notable interactions or conversations?"],relatedDays:[{date:"2026-01-03",similarity:"very similar",commonThemes:["High energy","Productive morning","Project focus"]}],confidence:.81}:{message:"AI analysis in progress..."});i(!1)},b=()=>{switch(e){case"prompts":return c.jsx(Bc,{className:"w-5 h-5"});case"digest":return c.jsx(Dn,{className:"w-5 h-5"});case"patterns":return c.jsx(kr,{className:"w-5 h-5"});case"sentiment":return c.jsx(cE,{className:"w-5 h-5"});case"review":return c.jsx(Dn,{className:"w-5 h-5"});case"connections":return c.jsx(dee,{className:"w-5 h-5"})}},w=()=>{switch(e){case"prompts":return"Reflection Prompts";case"digest":return"Daily Digest";case"patterns":return"Pattern Insights";case"sentiment":return"Sentiment Analysis";case"review":return"Weekly Review";case"connections":return"Connection Suggestions"}};return m?c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[b(),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:w()})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t?`Entry: ${t.title||"Today"}`:`Analyzing ${n.length} entries`}),!h&&c.jsx(Ee,{onClick:g,disabled:a,className:"w-full",children:a?"Analyzing...":"Analyze with AI"})]}),a&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(Bl,{}),c.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Analyzing journal..."})]}),o&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:o})]})}),h&&e==="prompts"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Reflection Questions"}),c.jsx("div",{className:"space-y-3",children:h.prompts.map((x,S)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:x.question}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:x.category}),c.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300",children:x.depth})]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:x.context})]},S))})]}),c.jsx(fr,{confidence:h.confidence}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ee,{onClick:()=>{const x=h.prompts.map(S=>S.question);s?.(x),r()},className:"flex-1",children:"Use Prompts"}),c.jsx(Ee,{onClick:r,variant:"ghost",className:"flex-1",children:"Dismiss"})]})]}),h&&e==="digest"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Summary"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100",children:h.summary})]}),h.highlights.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Highlights"}),c.jsx("div",{className:"space-y-2",children:h.highlights.map((x,S)=>c.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[c.jsx("span",{className:`mt-0.5 ${x.type==="accomplishment"?"text-green-600 dark:text-green-400":x.type==="learning"?"text-blue-600 dark:text-blue-400":x.type==="challenge"?"text-amber-600 dark:text-amber-400":"text-gray-600 dark:text-gray-400"}`,children:x.type==="accomplishment"?"":x.type==="learning"?"":x.type==="challenge"?"":""}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:x.description})]},S))})]}),c.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-900 dark:text-blue-100",children:"Momentum:"}),c.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300 capitalize",children:h.momentum})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-900 dark:text-blue-100",children:"Tasks Completed:"}),c.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:h.metrics.tasksCompleted})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-900 dark:text-blue-100",children:"Habits Logged:"}),c.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:h.metrics.habitsLogged})]})]})}),c.jsx(fr,{confidence:h.confidence})]}),h&&e==="review"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Week Summary"}),c.jsx("p",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm text-gray-900 dark:text-gray-100",children:h.weekSummary})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key Achievements"}),c.jsx("div",{className:"space-y-2",children:h.achievements.map((x,S)=>c.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[c.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:x.description}),c.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300",children:[x.category," - ",x.impact," impact"]})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Next Week Focus"}),c.jsx("div",{className:"space-y-2",children:h.nextWeekFocus.map((x,S)=>c.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:[x.area,": ",x.objective]}),c.jsx("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-0.5",children:x.actions.map((k,C)=>c.jsxs("li",{children:[" ",k]},C))})]},S))})]}),c.jsx(fr,{confidence:h.confidence})]}),h&&!["prompts","digest","review"].includes(e)&&c.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:h.message||"Analysis complete"})})]}):c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl p-6 overflow-y-auto z-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-500"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"AI Assistant"})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(cn,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Qs,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"AI Not Configured"}),c.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Configure an AI provider in Settings to use AI features."})]})]})})]})}function _Re(){const[e,t]=A.useState([]),[n,r]=A.useState(!0),[s,a]=A.useState(""),[i,o]=A.useState("list"),[u,h]=A.useState(!1),[f,m]=A.useState(null),[g,b]=A.useState(!1),[w,x]=A.useState(!1),[S,k]=A.useState(null),[C,T]=A.useState(!1),[P,D]=A.useState("prompts"),R=Zr.isConfigured(),U=async()=>{r(!0);try{const G=await xl.getAll();G.success&&G.data&&t(G.data.sort((H,L)=>new Date(L.date).getTime()-new Date(H.date).getTime()))}catch(G){console.error("Failed to load logbook entries:",G)}finally{r(!1)}};A.useEffect(()=>{U()},[]);const j=async G=>{x(!0);try{const H=await xl.create(G);H.success&&H.data&&(t([H.data,...e].sort((L,Z)=>new Date(Z.date).getTime()-new Date(L.date).getTime())),h(!1))}catch(H){console.error("Failed to create entry:",H)}finally{x(!1)}},se=async G=>{if(f){x(!0);try{const H=await xl.update(f.id,G);if(H.success&&H.data){const L=e.map(Z=>Z.id===f.id?H.data:Z);t(L),m(H.data),b(!1)}}catch(H){console.error("Failed to update entry:",H)}finally{x(!1)}}},B=async()=>{if(S){x(!0);try{if((await xl.delete(S.id)).success){const H=e.filter(L=>L.id!==S.id);t(H),f&&f.id===S.id&&m(null),k(null)}}catch(G){console.error("Failed to delete entry:",G)}finally{x(!1)}}},ee=G=>{m(G)},ie=()=>{m(null)},_e=e.filter(G=>{if(!s)return!0;const H=s.toLowerCase();return G.title&&G.title.toLowerCase().includes(H)||G.notes&&G.notes.toLowerCase().includes(H)||G.date.includes(H)});return f?c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("button",{onClick:ie,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(eh,{className:"w-5 h-5"}),"Back to Logbook"]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8",children:[c.jsxs("div",{className:"flex items-start justify-between mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Dn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:new Date(f.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),f.title&&c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:f.title})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>b(!0),children:[c.jsx(Hc,{className:"w-4 h-4 mr-1"}),"Edit"]}),c.jsxs(Ee,{variant:"secondary",size:"sm",onClick:()=>k(f),className:"hover:!bg-red-50 hover:!text-red-600",children:[c.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),c.jsxs("div",{className:"flex items-center gap-6 mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[f.mood&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Mood"}),c.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${f.mood==="High"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":f.mood==="Steady"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:f.mood})]}),f.energy!==null&&c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Energy"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex gap-1",children:Array.from({length:10},(G,H)=>c.jsx("div",{className:`w-2 h-6 rounded-sm ${H<(f.energy||0)?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`},H))}),c.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[f.energy,"/10"]})]})]})]}),f.notes&&c.jsx("div",{className:"prose dark:prose-invert max-w-none",children:c.jsx("div",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:f.notes})}),R&&c.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700 mt-6",children:[c.jsxs("button",{onClick:()=>T(!C),className:"flex items-center gap-2 text-sm font-medium text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[c.jsx(Jt,{size:18}),c.jsx("span",{children:"AI Logbook Tools"}),C?c.jsx(Io,{size:16}):c.jsx(Fi,{size:16})]}),C&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>D("prompts"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="prompts"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Reflection Prompts"}),c.jsx("button",{onClick:()=>D("digest"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="digest"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Daily Digest"}),c.jsx("button",{onClick:()=>D("patterns"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="patterns"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Pattern Insights"}),c.jsx("button",{onClick:()=>D("sentiment"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="sentiment"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Sentiment Analysis"}),c.jsx("button",{onClick:()=>D("review"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="review"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Weekly Review"}),c.jsx("button",{onClick:()=>D("connections"),className:`px-3 py-1.5 text-sm rounded-full transition ${P==="connections"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Connection Suggestions"})]}),c.jsx(wRe,{mode:P,entry:f,entries:e,onClose:()=>T(!1)})]})]})]})]}),c.jsx(Un,{isOpen:g,onClose:()=>b(!1),title:"Edit Entry",className:"max-w-2xl",children:c.jsx(m5,{entry:f||void 0,onSubmit:G=>se(G),onCancel:()=>b(!1),isLoading:w})})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[c.jsx(Bc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Daily Logbook"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Reflect on your journey"})]}),c.jsxs(Ee,{variant:"primary",onClick:()=>h(!0),children:[c.jsx(Ca,{className:"w-5 h-5 mr-2"}),"New Entry"]})]}),c.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:G=>a(G.target.value),placeholder:"Search entries...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-1",children:[c.jsx("button",{onClick:()=>o("list"),className:`px-4 py-2 rounded-md transition-colors ${i==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"List"}),c.jsx("button",{onClick:()=>o("calendar"),className:`px-4 py-2 rounded-md transition-colors ${i==="calendar"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Calendar"})]})]}),n?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading entries..."})]})}):_e.length===0?c.jsx(Sa,{title:"No entries found",description:s?"Try adjusting your search query":"Start journaling by creating your first entry",actionLabel:"Create Entry",onAction:()=>h(!0)}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:_e.map(G=>c.jsx(xRe,{entry:G,onClick:ee},G.id))})]}),c.jsx(Un,{isOpen:u,onClose:()=>h(!1),title:"New Logbook Entry",className:"max-w-2xl",children:c.jsx(m5,{onSubmit:G=>j(G),onCancel:()=>h(!1),isLoading:w})}),c.jsx(Un,{isOpen:!!S,onClose:()=>k(null),title:"Delete Entry",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Are you sure you want to delete this entry? This action cannot be undone."}),S&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(S.date).toLocaleDateString()}),S.title&&c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:S.title})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>k(null),disabled:w,children:"Cancel"}),c.jsx(Ee,{variant:"primary",onClick:B,disabled:w,className:"!bg-red-600 hover:!bg-red-700",children:w?"Deleting...":"Delete Entry"})]})]})})]})}function kRe(){const[e,t]=A.useState(null),[n,r]=A.useState([]),[s,a]=A.useState(!1),[i,o]=A.useState("review"),{tasks:u}=Cm(),{habits:h}=Em(),{metrics:f}=jm(),{goals:m}=Ex(),{entries:g}=JE(),b=()=>{const k=new Date;k.setDate(k.getDate()-7);const C=u.filter(U=>U.status!=="Done"?!1:new Date(U.updatedAt)>=k),T=h.length*5,P=f.length*3,D=m.filter(U=>U.status==="Active"||U.status==="OnTrack"),R=g.filter(U=>new Date(U.date)>=k);t({tasksCompleted:C.length,habitsCompleted:T,goalsProgressed:D.length,metricsLogged:P,journalEntries:R.length})},w=async()=>{a(!0),await new Promise(C=>setTimeout(C,1e3));const k=[];if(e){if(e.tasksCompleted>10?k.push({category:"Productivity",observation:`You completed ${e.tasksCompleted} tasks this week - excellent progress!`,recommendation:"Maintain this momentum by scheduling high-priority tasks for next week."}):e.tasksCompleted<5&&k.push({category:"Productivity",observation:"Task completion was lower than ideal this week.",recommendation:"Break down larger tasks into smaller chunks to build momentum."}),e.habitsCompleted>0){const T=e.habitsCompleted/7;k.push({category:"Habits",observation:`You logged habits ${e.habitsCompleted} times (avg ${T.toFixed(1)} per day).`,recommendation:T<1?"Focus on consistency - aim for at least one habit completion daily.":"Great habit consistency! Consider adding a new keystone habit."})}e.metricsLogged>0&&k.push({category:"Tracking",observation:`You logged ${e.metricsLogged} metric entries this week.`,recommendation:"Regular tracking is key. Set reminders for consistent metric logging."}),e.journalEntries>=5?k.push({category:"Reflection",observation:"Outstanding journaling consistency this week!",recommendation:"Use your journal insights to identify patterns and adjust strategies."}):e.journalEntries===0&&k.push({category:"Reflection",observation:"No journal entries this week.",recommendation:"Daily reflection helps identify what's working and what needs adjustment."});const C=m.filter(T=>T.status==="AtRisk");C.length>0&&k.push({category:"Goals",observation:`${C.length} goals are at risk.`,recommendation:"Review and adjust these goals. Consider breaking them down or adjusting timelines."})}r(k),a(!1)};A.useEffect(()=>{b()},[u,h,f,m,g]),A.useEffect(()=>{e&&i==="review"&&w()},[e]);const x=()=>{i==="review"?o("plan"):i==="plan"&&o("complete")},S=()=>{o("review"),b()};return c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Weekly Review & Planning"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Reflect on the past week and plan for success ahead"})]}),c.jsx("div",{className:"flex items-center justify-center mb-8",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:`flex items-center gap-2 ${i==="review"?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-600"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="review"?"bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600"}`,children:"1"}),c.jsx("span",{className:"font-medium",children:"Review"})]}),c.jsx(bl,{className:"w-5 h-5 text-gray-400"}),c.jsxs("div",{className:`flex items-center gap-2 ${i==="plan"?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-600"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="plan"?"bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600"}`,children:"2"}),c.jsx("span",{className:"font-medium",children:"Plan"})]}),c.jsx(bl,{className:"w-5 h-5 text-gray-400"}),c.jsxs("div",{className:`flex items-center gap-2 ${i==="complete"?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-600"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="complete"?"bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600"}`,children:"3"}),c.jsx("span",{className:"font-medium",children:"Complete"})]})]})}),i==="review"&&e&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Dn,{className:"w-5 h-5"}),"Last Week's Summary"]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:e.tasksCompleted}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasks Done"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-1",children:e.habitsCompleted}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Habits Logged"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:e.goalsProgressed}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Goals Active"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400 mb-1",children:e.metricsLogged}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Metrics Logged"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400 mb-1",children:e.journalEntries}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Journal Entries"})]})]})]}),s?c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 animate-pulse"}),c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Generating AI Insights..."})]}),c.jsx("div",{className:"space-y-3",children:[1,2,3].map(k=>c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"})]},k))})]}):n.length>0?c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),"AI Insights & Recommendations"]}),c.jsx("div",{className:"space-y-4",children:n.map((k,C)=>c.jsxs("div",{className:"border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-r-lg",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:k.category}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:k.observation}),c.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:[" ",k.recommendation]})]},C))})]}):null,c.jsx("div",{className:"flex justify-end",children:c.jsxs(Ee,{variant:"primary",onClick:x,children:["Continue to Planning",c.jsx(bl,{className:"w-4 h-4 ml-2"})]})})]}),i==="plan"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Plan Next Week"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[c.jsx(_r,{className:"w-4 h-4"}),"What are your top 3 priorities for next week?"]}),c.jsx("div",{className:"space-y-2",children:[1,2,3].map(k=>c.jsx("input",{type:"text",placeholder:`Priority ${k}`,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},k))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[c.jsx(Ad,{className:"w-4 h-4"}),"What habit will you focus on?"]}),c.jsx("input",{type:"text",placeholder:"e.g., Morning meditation, Exercise daily",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[c.jsx(Di,{className:"w-4 h-4"}),"What one thing will you stop doing?"]}),c.jsx("input",{type:"text",placeholder:"e.g., Checking social media before bed",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Ee,{variant:"secondary",onClick:()=>o("review"),children:"Back to Review"}),c.jsxs(Ee,{variant:"primary",onClick:x,children:["Complete Review",c.jsx(bl,{className:"w-4 h-4 ml-2"})]})]})]}),i==="complete"&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(Di,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Weekly Review Complete!"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"You've reviewed your progress and planned for the week ahead. Time to take action on your priorities!"}),c.jsxs("div",{className:"flex justify-center gap-4",children:[c.jsx(Ee,{variant:"secondary",onClick:S,children:"Start Another Review"}),c.jsx(Ee,{variant:"primary",onClick:()=>window.location.href="/admin/dashboard",children:"Back to Dashboard"})]})]})]})}function UV({isLoading:e}){return c.jsx(ME,{children:e&&c.jsx(dn.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 bg-white z-50 flex items-center justify-center",children:c.jsx("div",{className:"relative",children:c.jsx(dn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full"})})})})}const SRe=({children:e})=>{const{user:t,loading:n}=tE();return n?c.jsx(UV,{isLoading:!0}):t?c.jsx(c.Fragment,{children:e}):c.jsx(p6,{to:"/admin/login",replace:!0})},TRe="G-XN1LQN7MER",CRe=e=>{typeof window.gtag<"u"&&window.gtag("config",TRe,{page_path:e})},ERe=()=>{const e=Na();A.useEffect(()=>{const t=e.pathname+e.search+e.hash;CRe(t)},[e])};function jRe(){A.useEffect(()=>{const t=localStorage.getItem("theme")||"system";let n=t;t==="system"&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const r=window.matchMedia("(prefers-color-scheme: dark)"),s=a=>{localStorage.getItem("theme")==="system"&&(a.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))};return r.addEventListener("change",s),()=>r.removeEventListener("change",s)},[])}class NRe extends A.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};copyErrorToClipboard=()=>{const t=`
Error: ${this.state.error?.message}

Stack:
${this.state.error?.stack}

Component Stack:
${this.state.errorInfo?.componentStack}
    `.trim();navigator.clipboard.writeText(t).then(()=>{alert("Error details copied to clipboard!")})};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const t=!1;return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 flex items-center justify-center px-4 py-8",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[c.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:c.jsx(qc,{className:"text-red-600",size:32})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),c.jsx("p",{className:"text-gray-600",children:"We encountered an unexpected error. This has been logged and we'll look into it."})]})]}),t,c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("button",{onClick:this.handleReset,className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[c.jsx(ab,{size:20}),"Try Again"]}),c.jsxs("button",{onClick:this.handleReload,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition font-medium",children:[c.jsx(ab,{size:20}),"Reload Page"]}),c.jsxs(Ur,{to:"/",className:"flex items-center justify-center gap-2 px-6 py-3 bg-white text-gray-900 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium",children:[c.jsx(S6,{size:20}),"Go Home"]}),t]}),c.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Need help?"})," If this problem persists, please contact support with a description of what you were doing when the error occurred."]})})]})})}return this.props.children}}function ARe(){return ERe(),jRe(),c.jsx(NRe,{children:c.jsxs(TQ,{children:[c.jsxs(Kn,{element:c.jsx(Rae,{}),children:[c.jsx(Kn,{path:"/",element:c.jsx(kle,{})}),c.jsx(Kn,{path:"/products",element:c.jsx(Sle,{})})]}),c.jsx(Kn,{path:"/admin/login",element:c.jsx(Cle,{})}),c.jsxs(Kn,{path:"/admin",element:c.jsx(SRe,{children:c.jsx(voe,{})}),children:[c.jsx(Kn,{index:!0,element:c.jsx(p6,{to:"/admin/dashboard",replace:!0})}),c.jsx(Kn,{path:"dashboard",element:c.jsx(JTe,{})}),c.jsx(Kn,{path:"growth-system",element:c.jsx(nCe,{})}),c.jsx(Kn,{path:"tasks",element:c.jsx(gOe,{})}),c.jsx(Kn,{path:"habits",element:c.jsx(bRe,{})}),c.jsx(Kn,{path:"metrics",element:c.jsx(iRe,{})}),c.jsx(Kn,{path:"goals",element:c.jsx(qOe,{})}),c.jsx(Kn,{path:"projects",element:c.jsx(IOe,{})}),c.jsx(Kn,{path:"logbook",element:c.jsx(_Re,{})}),c.jsx(Kn,{path:"weekly-review",element:c.jsx(kRe,{})}),c.jsx(Kn,{path:"assistant",element:c.jsx(jIe,{})}),c.jsx(Kn,{path:"components-demo",element:c.jsx(KIe,{})}),c.jsx(Kn,{path:"settings",element:c.jsx(eCe,{})})]}),c.jsx(Kn,{path:"*",element:c.jsx(Tle,{})})]})})}function IRe(){const[e,t]=A.useState(!0);return A.useEffect(()=>{setTimeout(()=>{t(!1)},1e3)},[]),c.jsxs(c.Fragment,{children:[c.jsx(UV,{isLoading:e}),c.jsx(WQ,{children:c.jsx(ARe,{})})]})}_Y();DS();const ORe=new PZ({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});uZ.createRoot(document.getElementById("root")).render(c.jsx(A.StrictMode,{children:c.jsx(MZ,{client:ORe,children:c.jsx(CY,{children:c.jsx(IRe,{})})})}));
