@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&family=Playfair+Display:wght@300;400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --accent-50: 239 246 255;
    --accent-100: 219 234 254;
    --accent-200: 191 219 254;
    --accent-300: 147 197 253;
    --accent-400: 96 165 250;
    --accent-500: 59 130 246;
    --accent-600: 37 99 235;
    --accent-700: 29 78 216;
    --accent-800: 30 64 175;
    --accent-900: 30 58 138;
    --border-radius-base: 0.5rem;
    --border-radius-lg: 0.75rem;
  }

  .leisure-mode {
    --accent-50: 236 253 245;
    --accent-100: 209 250 229;
    --accent-200: 167 243 208;
    --accent-300: 110 231 183;
    --accent-400: 52 211 153;
    --accent-500: 16 185 129;
    --accent-600: 5 150 105;
    --accent-700: 4 120 87;
    --accent-800: 6 95 70;
    --accent-900: 6 78 59;
    --border-radius-base: 0.75rem;
    --border-radius-lg: 1rem;
  }

  body {
    @apply font-sans text-gray-800 dark:text-gray-100 dark:bg-gray-900;
    transition: background-color 500ms ease-in-out;
  }

  .leisure-mode body {
    @apply bg-stone-50 dark:bg-slate-900;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-serif;
  }

  .leisure-mode h1,
  .leisure-mode h2,
  .leisure-mode h3,
  .leisure-mode h4,
  .leisure-mode h5,
  .leisure-mode h6 {
    font-weight: 300;
    letter-spacing: 0.02em;
  }

  * {
    transition-property: background-color, border-color, color;
    transition-duration: 500ms;
    transition-timing-function: ease-in-out;
  }
}

@layer utilities {
  .smooth-scroll {
    scroll-behavior: smooth;
  }

  .accent-bg-50 {
    background-color: rgb(var(--accent-50));
  }

  .accent-bg-100 {
    background-color: rgb(var(--accent-100));
  }

  .accent-text-400 {
    color: rgb(var(--accent-400));
  }

  .accent-text-600 {
    color: rgb(var(--accent-600));
  }

  .accent-text-700 {
    color: rgb(var(--accent-700));
  }
}

/* Prism.js syntax highlighting - Light and dark mode support */
@layer components {
  /* Light mode code block styles */
  pre[class*="language-"] {
    background: rgb(249 250 251) !important; /* gray-50 */
  }
  
  code[class*="language-"] {
    color: rgb(17 24 39) !important; /* gray-900 */
  }
  
  /* Dark mode code block styles */
  .dark pre[class*="language-"] {
    background: rgb(17 24 39) !important; /* gray-900 */
  }
  
  .dark code[class*="language-"] {
    color: rgb(243 244 246) !important; /* gray-100 */
  }
  
  /* Ensure code blocks have proper contrast */
  pre code {
    display: block;
    overflow-x: auto;
  }
  
  /* Light mode Prism token colors - ensure tokens are visible */
  pre[class*="language-"] .token.comment,
  pre[class*="language-"] .token.prolog,
  pre[class*="language-"] .token.doctype,
  pre[class*="language-"] .token.cdata {
    color: rgb(107 114 128); /* gray-500 */
  }
  
  pre[class*="language-"] .token.punctuation {
    color: rgb(55 65 81); /* gray-700 */
  }
  
  pre[class*="language-"] .token.property,
  pre[class*="language-"] .token.tag,
  pre[class*="language-"] .token.boolean,
  pre[class*="language-"] .token.number,
  pre[class*="language-"] .token.constant,
  pre[class*="language-"] .token.symbol,
  pre[class*="language-"] .token.deleted {
    color: rgb(220 38 38); /* red-600 */
  }
  
  pre[class*="language-"] .token.selector,
  pre[class*="language-"] .token.attr-name,
  pre[class*="language-"] .token.string,
  pre[class*="language-"] .token.char,
  pre[class*="language-"] .token.builtin,
  pre[class*="language-"] .token.inserted {
    color: rgb(5 150 105); /* green-600 */
  }
  
  pre[class*="language-"] .token.operator,
  pre[class*="language-"] .token.entity,
  pre[class*="language-"] .token.url,
  pre[class*="language-"] .language-css .token.string,
  pre[class*="language-"] .style .token.string {
    color: rgb(17 24 39); /* gray-900 */
  }
  
  pre[class*="language-"] .token.atrule,
  pre[class*="language-"] .token.attr-value,
  pre[class*="language-"] .token.keyword {
    color: rgb(59 130 246); /* blue-500 */
  }
  
  pre[class*="language-"] .token.function,
  pre[class*="language-"] .token.class-name {
    color: rgb(168 85 247); /* purple-500 */
  }
  
  pre[class*="language-"] .token.regex,
  pre[class*="language-"] .token.important,
  pre[class*="language-"] .token.variable {
    color: rgb(234 88 12); /* orange-600 */
  }
  
  /* KaTeX math rendering - ensure proper dark mode colors */
  .dark .katex {
    color: rgb(243 244 246);
  }
  
  .dark .katex .mathnormal {
    color: rgb(243 244 246);
  }

  /* KaTeX display mode (block equations) styling */
  .math-display {
    display: block !important;
    margin: 1.5em auto !important;
    text-align: center;
    overflow-x: auto;
    overflow-y: hidden;
    width: 100%;
  }

  /* Ensure katex-display spans are properly centered */
  .math-display .katex-display {
    display: inline-block;
    margin: 0;
    text-align: center;
  }

  /* Dark mode support for display mode */
  .dark .math-display .katex-display {
    color: rgb(243 244 246); /* gray-100 */
  }

  /* Prevent display math from being inline with paragraphs */
  .prose .math-display {
    display: block !important;
    margin: 1.5em auto !important;
  }

  /* Ensure paragraphs don't interfere with math-display inside them */
  .prose p .math-display {
    display: block !important;
    margin: 1.5em auto !important;
  }

  /* Break math-display out of paragraph flow */
  p:has(.math-display) {
    display: contents;
  }

  .accent-border-300 {
    border-color: rgb(var(--accent-300));
  }

  .accent-border-600 {
    border-color: rgb(var(--accent-600));
  }

  /* Markdown list rendering improvements */
  .prose ul,
  .prose ol {
    list-style-position: outside;
    padding-left: 1.5rem;
  }

  .prose ul {
    list-style-type: disc;
  }

  .prose ol {
    list-style-type: decimal;
  }

  .prose ul ul,
  .prose ol ol,
  .prose ul ol,
  .prose ol ul {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1.25rem;
  }

  .prose li {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }

  /* Ensure list item content aligns properly with bullet */
  .prose li > p {
    margin-top: 0;
    margin-bottom: 0;
    padding-left: 0;
  }

  .prose li > p + p {
    margin-top: 0.5rem;
  }

  /* Nested lists inside list items should have consistent indentation */
  .prose li > ul,
  .prose li > ol {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1.25rem;
  }

  /* Ensure nested lists have proper indentation */
  .prose ul ul {
    list-style-type: circle;
  }

  .prose ul ul ul {
    list-style-type: square;
  }

  .prose ol ol {
    list-style-type: lower-alpha;
  }

  .prose ol ol ol {
    list-style-type: lower-roman;
  }

  /* Mac-like scrollbar styling - Global application */
  /* Thin, subtle scrollbars that auto-hide (show on hover/interaction) */
  
  /* Firefox - thin scrollbar, hidden by default, shown on hover */
  * {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  /* Show scrollbar on hover for scrollable elements */
  *:hover {
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }

  .dark *:hover {
    scrollbar-color: rgba(156, 163, 175, 0.4) transparent;
  }

  /* WebKit browsers (Chrome, Safari, Edge) - Mac-like auto-hide scrollbars */
  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Hide scrollbar thumb by default, show on hover (Mac-like behavior) */
  *::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: padding-box;
    transition: background-color 0.2s ease;
  }

  /* Show scrollbar on hover - Light mode */
  *:hover::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.3);
  }

  *:hover::-webkit-scrollbar-thumb:hover {
    background-color: rgba(156, 163, 175, 0.5);
  }

  *:hover::-webkit-scrollbar-thumb:active {
    background-color: rgba(156, 163, 175, 0.7);
  }

  /* Show scrollbar on hover - Dark mode */
  .dark *:hover::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.4);
  }

  .dark *:hover::-webkit-scrollbar-thumb:hover {
    background-color: rgba(156, 163, 175, 0.6);
  }

  .dark *:hover::-webkit-scrollbar-thumb:active {
    background-color: rgba(156, 163, 175, 0.8);
  }

  /* Reader mode scrollbar - inherits global styling */
  .reader-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .reader-scrollbar:hover {
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }

  .dark .reader-scrollbar:hover {
    scrollbar-color: rgba(156, 163, 175, 0.4) transparent;
  }

  /* Hide scrollbar utility - completely removes scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* Task list (checkbox) styling for GFM */
  .prose ul.contains-task-list {
    list-style-type: none;
    padding-left: 0;
  }

  .prose li.task-list-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    list-style-type: none;
    padding-left: 0;
  }

  .prose li.task-list-item input[type="checkbox"] {
    margin-top: 0.375rem;
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
    cursor: pointer;
    accent-color: rgb(var(--accent-600));
  }

  .dark .prose li.task-list-item input[type="checkbox"] {
    accent-color: rgb(var(--accent-500));
  }

  .prose li.task-list-item > p {
    flex: 1;
    margin: 0;
  }

  /* Markdown content wrapper spacing - connect consecutive wrappers */
  .markdown-content-wrapper {
    margin-top: 0.25rem;
  }

  /* Remove top margin from content wrappers in consecutive AnimatedSectionWrapper elements */
  /* This makes consecutive paragraphs/lists connect without gaps */
  .prose > div + div .markdown-content-wrapper {
    margin-top: 0;
  }

  /* Make consecutive content wrapper borders connect visually */
  /* Remove top border radius from inner divs in wrappers that follow others */
  .prose > div + div .markdown-content-wrapper > div {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }

  /* Remove bottom border radius from inner divs in wrappers that are followed by others */
  .prose > div:not(:last-child) .markdown-content-wrapper > div {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  /* Restore border radius on first wrapper's top */
  .prose > div:first-child .markdown-content-wrapper > div {
    border-top-left-radius: 0.375rem;
    border-top-right-radius: 0.375rem;
  }

  /* Restore border radius on last wrapper's bottom */
  .prose > div:last-child .markdown-content-wrapper > div {
    border-bottom-left-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
  }
}
